<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ç¨‹åºçŒ¿çš„MacOSçŽ¯å¢ƒ(äºŒ)]]></title>
    <url>%2F2020%2F10%2F01%2F%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84MacOS%E7%8E%AF%E5%A2%83(%E4%BA%8C)%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡çš„è¡¥å……ç®€ä¹¦åœ°å€ æŽ¨èï¼šhttps://www.jianshu.com/p/2f8b0f0aca93æœ¬ç¯‡ï¼šæ¯”è¾ƒå¥½ç”¨çš„å‡ æ¬¾æ—¥å¸¸è½¯ä»¶æŽ¨èæ¥æºï¼š10ä¸ªmacOSå…è´¹å°å·¥å…·ï¼Œèƒ½å¸®ä½ çœä¸‹ä¸€å¤§ç¬”é’± 1. iShotæˆªå›¾è½¯ä»¶,æœ¬äººä¸€ç›´ç”¨çš„æ˜¯éžä¸“ä¸šç‰ˆçš„Xnipï¼Œæ—¥å¸¸æˆªå›¾ä¹ŸåŸºæœ¬å¤Ÿç”¨ï¼Œä¹Ÿèƒ½æ»šå±æˆªå›¾ï¼Œä½†æ˜¯æ²¡æœ‰å»¶æ—¶æˆªå›¾çš„åŠŸèƒ½ï¼Œä¸»è¦æ˜¯ä¸æ˜¯å…è´¹çš„ã€‚ æ›¿ä»£å“iShotæˆ‘åè€Œè§‰å¾—æ›´èƒœä¸€ç­¹ã€‚ è¿˜æ”¯æŒå½•å±ï¼Œé‡ç‚¹æ˜¯å½•å±è¿˜å¯ä»¥ç›´æŽ¥è½¬æˆgifï¼Œæ–¹ä¾¿è‡³æžã€‚ 2. ç¿»è¯‘å·¥å…·Bobé™¤äº†èƒ½é€‰ä¸­æ–‡å­—ï¼Œç²˜è´´æ–‡å­—è¿›è¡Œç¿»è¯‘ï¼Œè¿˜å¯ä»¥æˆªå›¾ç¿»è¯‘ï¼Œé€šè¿‡ OCR è¯†åˆ«æ–‡å­—ï¼ŒBob å¯ä»¥ç›´æŽ¥æˆªå›¾ç¿»è¯‘ï¼Œè¿™æ ·çªç ´äº†æ–‡å­—é™åˆ¶ï¼Œå¯ä»¥ç›´æŽ¥ç¿»è¯‘å›¾ç‰‡æˆ–è€…è§†é¢‘ä¸­æŸä¸ªç”»é¢å†…å®¹ï¼Œå³ä¾¿ä½ ä¸éœ€è¦ç¿»è¯‘çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ª OCR è¯†åˆ«å·¥å…·ä½¿ç”¨ï¼Œç›´æŽ¥å¤åˆ¶è¯†åˆ«åŽçš„å†…å®¹ï¼Œå®žæµ‹è¯†åˆ«å‡†ç¡®çŽ‡å¾ˆå¯è§‚ã€‚ 3. NTFS è¯»å†™å·¥å…·ï¼šParagon NTFS / Tuxera NTFSï¼ˆ100+å…ƒï¼‰â€”â€” NTFS Toolï¼ˆå…è´¹ï¼‰æˆ‘æƒ³å¾ˆå¤šåˆšåˆšæŽ¥è§¦ macOS éƒ½ä¼šé‡åˆ°è¿™ä¸ªéº»çƒ¦â€”â€”NTFS æ ¼å¼ç¡¬ç›˜æ— æ³•è¯»å–ï¼Œæ­¤å‰é€šè¿‡æœç´¢å¼•æ“Žäº†è§£åˆ°ç”¨æˆ·é‡æ¯”è¾ƒå¤§çš„æ˜¯ Paragon NTFS å’Œ Tuxera NTFS è¿™ä¸¤æ¬¾å·¥å…·ï¼Œç”±äºŽä»£ç†æ–¹ä¸ä¸€æ ·ï¼Œå”®ä»·ä¹Ÿä¸ç»Ÿä¸€ï¼Œä½†ä¹ŸåŸºæœ¬éƒ½åœ¨ 100 å…ƒä»¥ä¸Šï¼Œå‡ºäºŽè½¯ä»¶åŒ…å¤§å°ä»¥åŠ UI é£Žæ ¼ï¼Œæˆ‘æœ€ç»ˆè´­ä¹°äº† Paragon NTFSï¼Œä½¿ç”¨åˆ°çŽ°åœ¨å€’ä¹Ÿæ²¡é‡åˆ°ä»€ä¹ˆä¸å¦‚æ„ã€‚ åœ¨å‡†å¤‡è¿™ç¯‡æ–‡ç« ï¼Œåˆé‡æ–°äº†è§£äº†ä¸€ä¸‹ï¼Œæ–°å‡ºçŽ°äº†ä¸å°‘ä»·æ ¼æ›´ä½Žç”šè‡³å…è´¹çš„ NTFS è¯»å†™å·¥å…·ï¼Œå…¶å®ƒä»˜è´¹çš„æˆ‘å°±ä¸è¯´äº†ï¼ŒNTFS Tool è¿™æ¬¾å…è´¹å¼€æºçš„å·¥å…·å€’æ˜¯å€¼å¾—æŽ¨èã€‚å®‰è£…å®ŒæˆåŽï¼Œç›´æŽ¥åœ¨ Finder ä¸­å¯¹ç¡¬ç›˜ä¸­æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œã€‚ä¸è¿‡ NTFS Tool å¯¹äºŽç³»ç»Ÿç›˜çš„è¯†åˆ«ä¸Šä¼¼ä¹Žæœ‰äº›ä¸ä¸€æ ·ï¼Œä½¿ç”¨ä¸Šå€’ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ åŸºæœ¬ macOS ä¸Šæ‰€æœ‰çš„ NTFS è¯»å†™å·¥å…·åªæ˜¯èƒ½è®©ç³»ç»Ÿæ­£å¸¸è¯»å†™ NTFS æ ¼å¼ç¡¬ç›˜ï¼Œå…¶å®ƒæ‰€æœ‰çš„æ–‡ä»¶æ“ä½œè¿˜æ˜¯åœ¨ Finder ä¸­å®Œæˆï¼Œä¸è¿‡è¿™ç±»å·¥å…·å€’æ˜¯ä¹Ÿå¯ä»¥ä½œä¸ºå¤–æŽ¥ç¡¬ç›˜çš„ç®¡ç†ä½œç”¨ã€‚ æ— è®ºæ˜¯ç”¨çš„å“ªä¸€æ¬¾å·¥å…·ï¼Œåªè¦èƒ½å¤Ÿå®žçŽ°æƒ³è¦çš„ç›®çš„ï¼Œé‚£å°±å¤Ÿäº†ï¼ŒNTFS Tool å¯èƒ½ä¸æ˜¯æœ€å¥½ç”¨çš„ï¼Œä½†ä½œä¸ºå…è´¹å¼€æºå·¥å…·ï¼Œè¿™æ ·å´ä¹Ÿæ˜¯è¶³å¤Ÿäº†ã€‚ 4. ffmpegè§†é¢‘æ ¼å¼è½¬æ¢ã€è§†é¢‘è½¬ gifã€è§†é¢‘åŽ‹ç¼©ç­‰è§†é¢‘æ“ä½œçš„å‘½ä»¤è¡Œå·¥å…·ã€‚åŸºæœ¬çŽ°åœ¨æ’­æ”¾å™¨çš„è½¯ä»¶éƒ½ä½¿ç”¨äº†è¯¥ä»“åº“çš„ä»£ç ã€‚æˆ‘å¹³å¸¸ä¸»è¦ç”¨å®ƒåŽ‹ç¼©è§†é¢‘ï¼Œä¾‹å¦‚ä»‹ç» utools ç« èŠ‚çš„è§†é¢‘ï¼ŒåŽŸè§†é¢‘ 23Mï¼Œç„¶åŽé€šè¿‡å®ƒåŽ‹ç¼© 8Mï¼Œæ–¹ä¾¿å¿«æ·ã€‚ç¼ºç‚¹æ˜¯å‘½ä»¤è¡Œå¤æ‚ï¼Œéœ€è¦å¥½å¥½è°ƒæ•™ï¼Œæˆ‘æœ¬äººç”¨çš„è¾ƒå°‘ã€‚ ä¸»é¡µåœ°å€ï¼šgithub.com/FFmpeg/FFmpâ€¦ ä¸‹è½½ï¼š brew install ffmpeg]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¨‹åºçŒ¿çš„MacOSçŽ¯å¢ƒ(ä¸€)]]></title>
    <url>%2F2020%2F09%2F29%2F%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84MacOS%E7%8E%AF%E5%A2%83(%E4%B8%80)%2F</url>
    <content type="text"><![CDATA[ç®€ä¹¦åœ°å€ æ¯ä¸ªæ±Ÿæ¹–ä¸Šçš„é«˜æ‰‹éƒ½æœ‰è‡ªå·±è¶æ‰‹çš„å…µå™¨ï¼Œä½ ä¹Ÿåº”è¯¥æœ‰ä½ è‡ªå·±çš„é‚£æŠŠå°æŽé£žåˆ€ã€‚å°æŽé£žåˆ€è¿™ä¸ªå…µå™¨è¿˜çœŸä¸æ˜¯çªç„¶æƒ³åˆ°çš„ã€‚ è¦æ˜¯é—®æˆ‘ä»€ä¹ˆä¸æ˜¯æ–¹å¤©ç”»æˆŸã€é’é¾™åƒæœˆåˆ€ã€ä¸ˆå…«è›‡çŸ›äº‘äº‘ï¼Œæˆ–è€…ä¸ºå•¥ä¸æ˜¯ç‹¬å­¤æ±‚è´¥çš„åˆ©å‰‘ã€ç´«è–‡è½¯å‰‘ã€çŽ„é“é‡å‰‘ä¹‹ç±»çš„ã€‚æˆ‘å°±å‘µå‘µäº†ï¼Œä½ è§è¿‡å“ªä¸ªé“æ³•é«˜æ·±çš„ç¥žä»™ï¼Œéšèº«æ‰‹é‡Œæ‰›ç€è¿™ä¹ˆå¤§çš„å…µå™¨ï¼Œå…³äºŒå“¥æ‹‰å±Žæ—¶åº”è¯¥ä¸ä¼šæ‰›ç€é’é¾™åƒæœˆåˆ€å§ã€‚ å°æŽé£žåˆ€åˆ™ä¸ç„¶ï¼Œéšèº«æºå¸¦ï¼Œæ€ä¼¤åŠ›ä¸å¼±äºŽå…¶ä»–ï¼Œæœ€é‡è¦çš„å…¶å®žæ˜¯å°æŽé£žåˆ€æ˜¯åœ¨æµªå­æŽå¯»æ¬¢æ‰‹é‡Œï¼ŒæŽå¯»æ¬¢æ­¤äººæ˜¯ä¸€ä¸ªå€¾å€’å¤©ä¸‹å¤šæƒ…çº¢é¢œçš„æ½‡æ´’æµªå­ï¼Œä¸€ä¸ªé‡æƒ…é‡ä¹‰çš„æ‚²æƒ…è‹±é›„ï¼Œä¸€ç”Ÿéƒ½è¢«èº«å¿ƒçš„ç—›è‹¦æŠ˜ç£¨ï¼Œå´åˆä¸è½»æ˜“æ˜¾ç¤ºå–œæ€’å“€ä¹ï¼Œå¤æ‚çš„å†…å¿ƒæƒ…æ„Ÿå…¨é çœ¼ç¥žè¡¨çŽ°ã€‚æ‰€ä»¥è®¡ç®—å¼å°æŽé£žåˆ€åªæ˜¯åœ¨ç™¾æ™“ç”Ÿå…µå™¨è°±ä¸ŠæŽ’ç¬¬ä¸‰ï¼Œæˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ï¼Œä¹Ÿè®¸æˆ‘æ˜¯ä¸å–œæ¬¢å¤©æœºè€äººçš„æ‡¦å¼±ï¼Œå’Œä¸Šå®˜é‡‘è™¹çš„æ¶éœ¸è¡Œä¸ºã€‚ æœ‰äººè¯´ï¼Œè‡ªå¤æ²¡æœ‰æœ€åŽ‰å®³çš„å…µå™¨ï¼Œåªæœ‰æœ€åŽ‰å®³çš„äººã€‚ä¹Ÿæ˜¯ï¼Œå­¤ç‹¬å‰è¾ˆçš„ç¬¬å››æŠŠå‰‘å°±æ˜¯æœ¨å‰‘ï¼Œâ€œå››åå²åŽï¼Œè‰æœ¨ç«¹çŸ³å‡å¯ä¸ºå‰‘â€ï¼Œä½•å…¶é›„å£®ï¼Œäººå®¶æœ‰å‚²è§†ç¾¤é›„çš„æœ¬äº‹çš„å•Šï¼Œè¿™å¢ƒç•Œå¤ªé«˜äº†ï¼Œæ²¡å‡ ä¸ªèƒ½è¾¾åˆ°çš„ã€‚ æˆ‘ä¸åå¯¹ä¸Šé¢çš„è§‚ç‚¹ï¼Œä½†æ˜¯é¡ºæ‰‹çš„å…µå™¨æ€»ä¹Ÿæ˜¯èƒ½ä¸ºå¹³åº¸çš„äººå¢žæ·»æˆ˜æ–—åŠ›ï¼Œè¦ä¸ç„¶é‚£ä¹ˆå¤šäººåŽ»æŠ¢å€šå¤©å‰‘ã€å± é¾™åˆ€ã€‚ åºŸè¯å¤ªå¤šäº†å“ˆã€‚ã€‚ã€‚ðŸ˜ ä½œä¸ºä¸€å¨ç¨‹åºçŒ¿ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯æ‰“é€ è‡ªå·±æœ€è¶æ‰‹ï¼Œæœ€é€‚åˆè‡ªå·±å·¥ä½œçš„å·¥å…·â€”-è¦ä¸æ¢ä¸ªæ ‡é¢˜ï¼šMacOSç³»ç»Ÿä¸Šå¸¸ç”¨çš„è½¯ä»¶å’Œæ’ä»¶ã€‚ å…³é”®è¯ï¼šç¨‹åºçŒ¿ã€MacOS æ‰€ä»¥æˆ‘è¦è¯´å¾®ä¿¡ï¼ŒQQä¹‹ç±»çš„ä¼°è®¡æ‚¨çš„ææˆ‘äº†ã€‚ å…ˆæŽ¨èä¸¤ä¸ªèµ„æºä¸‹è½½åœ°å€ï¼š xclient.infoçˆ±æƒ…å®ˆæœ›è€… å¿…å¤‡åº”ç”¨ï¼š gitå®¢æˆ·ç«¯ï¼šgitKarkenï¼ŒsourceTree æŽ¥å£æµ‹è¯•å·¥å…·ï¼špostman ç¬”è®°å·¥å…·ï¼šä¸ºçŸ¥ç¬”è®°ï¼Œå°è±¡ç¬”è®° IDEï¼šIntellij Ideaï¼ŒVS codeï¼ŒEmcas markdownå†™ä½œå·¥å…·ï¼šTypora ç¿»å¢™å®¢æˆ·ç«¯ï¼šShadowsocks æ‰‹æœºæŠ•å±è½¯ä»¶ï¼šVysorï¼Œæœ‰è°·æ­Œæµè§ˆå™¨æ’ä»¶ ç¡¬ç›˜Uç›˜è¯»å†™è½¯ä»¶ï¼šTuxera Disk Manager ####ä¸€äº›åœ¨çº¿å·¥å…·å’Œç½‘å€: å‘èµ·åœ¨çº¿é—®å·è°ƒæŸ¥ï¼šhttps://www.wenjuan.com/åœ¨çº¿å®šæ—¶ä»»åŠ¡æ‰§è¡Œå†™æ³•å·¥å…·ï¼šhttp://cron.qqe2.com/å›½é™…æŽ¨èä½¿ç”¨ï¼šhttps://cdnjs.com/ä¸‹è½½ç³»ç»ŸåŠå·¥å…·ï¼šhttp://msdn.itellyou.cnä¼˜é›…é«˜æ•ˆçš„å…è´¹åœ¨çº¿APPåŽŸåž‹å·¥å…· http://www.xiaopiu.com/showdocæ–‡æ¡£å·¥å…·ï¼šhttps://www.showdoc.cc/web/#/å„ç§javaå·¥å…·ï¼šhttp://www.hutool.cn/åœ¨çº¿æ— æŸåŽ‹ç¼©å›¾ç‰‡ï¼šhttps://squoosh.app/ç”ŸæˆçŸ­é“¾æŽ¥ï¼šhttp://www.surl.sinaapp.com/åœ¨çº¿å·¥å…·é›†åˆï¼šhttp://oktools.netåœ¨çº¿å·¥å…·é›†åˆ2 ï¼šhttp://www.atoolbox.netmockjs: http://mockjs.com/lispé‡Œjsonè½¬edn/mapï¼šhttp://pschwarz.bicycle.io/json-to-edn/ 1. shellå®¢æˆ·ç«¯iterm2æˆªæ­¢ç›®å‰æœ€å–œæ¬¢çš„shellå®¢æˆ·ç«¯ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¹‹æ‰€ä»¥åŠ ä¸ªæˆªæ­¢ç›®å‰ï¼Œæ˜¯å› ä¸ºä»Šå¹´ç”¨emcasï¼Œéƒ½è¯´è¿™é‡Œé¢çš„shellä¹Ÿå¾ˆèµžã€‚ åšåŽç«¯å¼€å‘ï¼Œç»å¸¸è¦å¿«é€Ÿè¿›å…¥æŸä¸€å°è¿œç«¯æœåŠ¡å™¨ï¼Œç„¶åŽçœ‹ä¸ªlogï¼Œæ”¹ä¸ªé…ç½®å•¥çš„ï¼Œè¿™æ—¶å€™iterm+sshpasså°±èƒ½è®©ä½ äº‹åŠåŠŸå€äº†ã€‚å…³äºŽæ€Žä¹ˆé…ï¼Œæ­¤å¤„ä¸å†ç»†è¯´ã€‚123456wget http://sourceforge.net/projects/sshpass/files/sshpass/1.05/sshpass-1.05.tar.gz tar xvzf sshpass-1.05.tar.gz cd sshpass-1.05./configure make make install [ç«™å¤–å›¾ç‰‡ä¸Šä¼ ä¸­â€¦(image-aefec1-1572691340926)] æŽ¨èä¸¤ä¸ªç½‘å‹çš„æ°ä½œï¼Œä¸€ä¸ªå®‰è£…ï¼Œä¸€ä¸ªä½¿ç”¨ã€‚macä¸‹ä½¿ç”¨sshpasså®žçŽ°sshè®°ä½å¯†ç Macä¸‹ï¼Œä½¿ç”¨sshpassè®©iTerm2æ”¯æŒsshç™»å½•ä¿¡æ¯ä¿å­˜ å®‰è£…sshpassæœ‰é—®é¢˜çš„ç”¨æˆ·ï¼Œå¯ä»¥è¯•è¯•12345678910brew install https://raw.githubusercontent.com/kadwanev/bigboybrew/master/Library/Formula/sshpass.rbUpdating Homebrew...Warning: Calling Non-checksummed download of sshpass formula file from an arbitrary URL is deprecated! Use &apos;brew extract&apos; or &apos;brew create&apos; and &apos;brew tap-new&apos; to create a formula file in a tap on GitHub instead.######################################################################## 100.0%==&gt; Downloading http://sourceforge.net/projects/sshpass/files/sshpass/1.06/sshpass-1.06.tar.gz==&gt; Downloading from https://netcologne.dl.sourceforge.net/project/sshpass/sshpass/1.06/sshpass-1.06.tar.gz######################################################################## 100.0%==&gt; ./configure --prefix=/usr/local/Cellar/sshpass/1.06==&gt; make installðŸº /usr/local/Cellar/sshpass/1.06: 9 files, 45.8KB, built in 9 seconds å®‰è£…æˆåŠŸã€‚ itermé‡Œå¦ä¸€ä¸ªä¸å¾—ä¸ç”¨çš„æ˜¯Zshå’ŒOh My Zshå®¶åº­å¥—é¤ï¼Œç‚¹åˆ°ä¸ºæ­¢ï¼Œç½‘ä¸Šä¸€æœä¸€å¤§æŠŠï¼Œé€‰ä¸ªè‡ªå·±å–œæ¬¢çš„themeç”¨å°±è¡Œäº†ã€‚ iterm2çš„profilesé‡Œæ‰§è¡Œä¸€ä¸ªç™»å½•çš„å‘½ä»¤1/usr/local/bin/sshpass -f /Users/mahaiqiang/Documents/sshpass/&lt;file_name&gt; ssh -p&lt;port&gt; marvin@ip file_name åªå­˜å‚¨è¿™ä¸ªipå¯¹åº”çš„ç”¨æˆ·ç™»å½•å¯†ç ï¼Œè€Œä¸”æ–‡ä»¶æ²¡æœ‰åŽç¼€ã€‚ å¦‚æžœæ²¡æœ‰å®‰è£…æˆåŠŸsshpassï¼Œä¹Ÿå¯ä»¥ç”¨itermçš„å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œä¸€ä¸ªshellè„šæœ¬ï¼Œè„šæœ¬çš„å†…å®¹å¯èƒ½è£å¹¸123456789101112#!/usr/bin/expect -fset user &lt;user-name&gt;set host &lt;ip&gt;set password &lt;password&gt;set port &lt;port&gt;set timeout -1spawn ssh -p $port $user@$hostexpect "*assword:*"send "$password\r"interactexpect eof Highèµ·æ¥å§ 2020-10-04json_ppï¼Œjson_pp æˆ‘ä¸»è¦æ˜¯ç”¨æ¥æ ¼å¼åŒ– curl å‘½ä»¤è¡Œçš„ç»“æžœï¼Œä¾‹å¦‚æµ‹è¯•æŸä¸ª restful æŽ¥å£ï¼Œè¿”å›žçš„ jsonï¼Œåœ¨å‘½ä»¤è¡Œå°±ä¼šè‡ªåŠ¨ç»™ä½ æ ¼å¼åŒ–å¥½è¾“å‡ºï¼Œjson_pp å®‰è£…ï¼šbrew install jsonpp 2. Navicat PermiumNavicat Premium æ˜¯ä¸€å¥—æ•°æ®åº“å¼€å‘å·¥å…·ï¼Œè®©ä½ ä»Žå•ä¸€åº”ç”¨ç¨‹åºä¸­åŒæ—¶è¿žæŽ¥ MySQLã€MariaDBã€MongoDBã€SQL Serverã€Oracleã€PostgreSQL å’Œ SQLite æ•°æ®åº“ã€‚å®ƒä¸Ž Amazon RDSã€Amazon Auroraã€Amazon Redshiftã€Microsoft Azureã€Oracle Cloudã€MongoDB Atlasã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘å’ŒåŽä¸ºäº‘ç­‰äº‘æ•°æ®åº“å…¼å®¹ã€‚ä½ å¯ä»¥å¿«é€Ÿè½»æ¾åœ°åˆ›å»ºã€ç®¡ç†å’Œç»´æŠ¤æ•°æ®åº“ã€‚ æ•°æ®åº“å·¥å…·åœ¨Macä¸Šæˆ‘æ¯”è¾ƒé’Ÿæƒ…è¿™æ¬¾ï¼Œå¯¼å…¥å¯¼å‡ºéƒ½å¾ˆæ–¹ä¾¿ï¼Œå…¶ä»–ä¸æŽ¨èã€‚ä¸è¦è¯´ä¸æ˜¯å…è´¹ç‰ˆï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šæœ‰åŠžæ³•å…è´¹ï¼Œè€Œä¸”ä½ è¿˜èƒ½æžä¸ªæ±‰åŒ–ç‰ˆã€‚ åœ¨Windowsæˆ‘ç”¨çš„æœ€å¤šHeidiSQLï¼Œè½»é‡çº§ï¼Œéžå¸¸ç¨³å®šçš„æ•°æ®åº“å®¢æˆ·ç«¯ã€‚æ˜¯å¯æƒœæ²¡æœ‰macç‰ˆã€‚ 3. transmitç›¸åŒåŠŸèƒ½çš„æˆ‘è¿˜ç”¨è¿‡çš„filezillaå’ŒWinScpï¼Œä½†æ˜¯ä»Žä½“éªŒå’Œè§†è§‰ä¸Šæ¥è¯´ï¼Œæˆ‘æ›´å–œæ¬¢transmitï¼Œç®€æ´ç›´è§‚ 4. tinyCalè¿™ä¸ªå°æ—¥åŽ†å¯äº†ä¸å¾—ï¼Œè¯•å›¾æ¯”macè‡ªå¸¦çš„æ—¥åŽ†å°ï¼Œä½†æ˜¯åˆæ¯”macçŠ¶æ€æ ä¸Šé‚£ä¸ªè¿˜ä¸å¦‚æ²¡æœ‰æ—¥åŽ†è¡¨å¥½ã€‚æˆªå›¾å¦‚ä¸‹ï¼š è¿˜æœ‰å†œåŽ†ï¼Œçœ‹ç€ä¸é”™å§ï¼Œåœ¨è®¾ç½®ä¸ªå¼€æœºè‡ªå¯ï¼Œç³»ç»Ÿè‡ªå¸¦çš„å¯ä»¥å…³é—­äº†ã€‚ 5. Alfredè¿™ä¸ªæ˜¯åœ¨åŽ»å¹´åœ¨æµ·å°”ä¸€èµ·å·¥ä½œçš„å°å”åŒå­¦é‚£é‡Œçœ‹æ¥çš„ï¼Œç›´æŽ¥æŠ„ä¸€ä¸‹åŽŸåˆ›ï¼šAlfredä½œä¸ºè€ç‰Œæ•ˆçŽ‡ç¥žå™¨ï¼Œç½‘ä¸Šå¾ˆå¤šå¸–å­éƒ½å·²ç»åšè¿‡ä»‹ç»ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹Alfredçš„å‰ªè´´æ¿ã€‚ [ç«™å¤–å›¾ç‰‡ä¸Šä¼ ä¸­â€¦(image-2652a3-1572691340926)]Alfredçš„å‰ªè´´æ¿å¯ä»¥ä¿å­˜æœ€è¿‘å‡ å¤©ä½äºŽç³»ç»Ÿå‰ªè´´æ¿çš„æ‰€æœ‰å†…å®¹ã€‚å› æ­¤å¦‚æžœå½“é”®å…¥å‘½ä»¤æ—¶ï¼Œçªç„¶æƒ³èµ·æ¥è¿™ä¸ªå‘½ä»¤æˆ‘æ˜¨å¤©å¥½åƒå¤åˆ¶è¿‡ï¼Œé‚£å°±å¯ä»¥ç›´æŽ¥è°ƒå‡ºæ¥ï¼Œè´´è¿›å‘½ä»¤è¡Œå³å¯ã€‚ è¿™æ¬¾ç¥žå™¨å¯æ˜¯Best-AppæŽ’è¡ŒNO.1çš„ï¼Œå¯è§ä¸€æ–‘ã€‚ ä½¿ç”¨æ•™ç¨‹ï¼š5åˆ†é’Ÿä¸Šæ‰‹Macæ•ˆçŽ‡ç¥žå™¨Alfredä»¥åŠAlfredå¸¸ç”¨æ“ä½œ 6. LICECap æ•æ‰å±å¹•ç”ŸæˆGIF1brew cask install LICECap ç›¸å¯¹åº”çš„æˆªå›¾è½¯ä»¶æŽ¨èxnipappä¸€æ¬¾å…è´¹çš„æˆªå›¾è½¯ä»¶ï¼Œè¿˜æ”¯æŒæ»šåŠ¨æˆªå›¾ï¼Œç¦»çº¿æ“ä½œã€‚ 7. Recorder itå±å¹•å½•åˆ¶è½¯ä»¶ï¼Œå¯ä»¥åœ¨xclient.infoä¸Šä¸‹è½½åˆ°ã€‚ 8. keycastr æ˜¾ç¤ºå¿«æ·é”®åœ¨ä½ æƒ³åšä¸€ä¸ªæ•™ç¨‹æ—¶ï¼Œä¸ç®¡æ˜¯gifäº†ï¼Œè¿˜æ˜¯å½•å±äº†ï¼Œä½ æˆ–è®¸åœ¨å†¥æ€è‹¦æƒ³åˆ°åº•æ€Žä¹ˆè§£é‡Šæˆ‘åœ¨é”®ç›˜ä¸ŠæŒ‰äº†å•¥ï¼Œè¿™å›žä¸ç”¨è§£é‡Šäº†ï¼Œä½ æŒ‰äº†å•¥æœ‰è½¯ä»¶å¸®ä½ æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œç®€å•æ˜Žäº†ã€‚ 1brew cask install keycastr é…åˆä¸Šç”Ÿæˆgifæžä¸ªå°æ•™ç¨‹ç®€ç›´ä¸è¦å¤ªçˆ½ã€‚ 9. ssh tunnelå†å¤åˆ¶å°å”åŒå­¦æŽ¨èçš„ä¸€ä¸ªç¥žå™¨ssh tunnelã€‚ åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦æ­å»ºå¼€å‘çŽ¯å¢ƒï¼Œä½¿å¾—æœ¬åœ°çš„web server/api server èƒ½å¤Ÿè®¿é—®ä½äºŽäº‘æœåŠ¡å™¨ä¸Šå±€åŸŸç½‘çŽ¯å¢ƒä¸­çš„æ•°æ®åº“ï¼Œä¾‹å¦‚ç™¾åº¦äº‘æä¾›çš„æ•°æ®åº“æœåŠ¡ã€‚è¿™äº›æ•°æ®åº“æœåŠ¡å™¨å¯ä»¥åœ¨ç™¾åº¦äº‘çš„æœºå™¨ä¸Šç›´æŽ¥è®¿é—®ï¼Œè€Œä¸èƒ½åœ¨å…¬ç½‘çŽ¯å¢ƒä¸‹é€šè¿‡å…¬ç½‘ipè®¿é—®ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ç™¾åº¦äº‘çš„æ™®é€šserverå»ºä¸€ä¸ªtunnelï¼Œä»Žè€Œå®žçŽ°æ•°æ®è®¿é—®ã€‚åœ¨xshellä¸­ä¹Ÿæœ‰ç±»ä¼¼åŠŸèƒ½ï¼Œä¸­æ–‡ç¿»è¯‘åšï¼šéš§é“ã€‚ ç•Œé¢å±•ç¤ºï¼š å¦‚å›¾ä¾¿æ˜¯å»ºç«‹äº†ä¸‰ä¸ªtunnelï¼Œåˆ†åˆ«è¿žå‘äº†ä¸¤ä¸ªå…³ç³»åž‹æ•°æ®åº“æœåŠ¡å™¨å’Œä¸€ä¸ªredisæœåŠ¡å™¨ã€‚ä¸¾ä¾‹æ¥è¯´ç¬¬ä¸€æ¡éš§é“è¿žæŽ¥ï¼Œä½¿ç”¨æ—¶çš„è®¿é—®æ–¹æ³•ï¼Œå°±æ˜¯ç›´æŽ¥localhost:13306å³å¯ã€‚å½“ç„¶ï¼Œç›´æŽ¥ç”¨sshå‘½ä»¤ä¹Ÿå¯è§£å†³ï¼Œä½†éº»çƒ¦ä¸æ˜¯ã€‚ç¨‹åºå‘˜å°±åº”è¯¥èƒ½å·æ‡’çš„æ—¶å€™å°½å¯èƒ½å·æ‡’ï¼Œç¾Žå…¶åæ›°ï¼šè§£æ”¾å’Œå‘å±•ç”Ÿäº§åŠ›~å‘½ä»¤è¡Œï¼š 1ssh -CfNg -L 16306:postgresql94.rd*****lwr2zr.rds.bj.baidubce.com:3306 root@180.***.***.189 åŽŸä½œè€…ï¼štangxqa 10. PicGoå›¾åºŠï¼Œä¸Šä¼ å›¾ç‰‡åŽç›´æŽ¥å°†å¤åˆ¶å¤åˆ¶åˆ°äº†ç²˜è´´æ¿ï¼Œéžå¸¸æ–¹ä¾¿ï¼Œå°¤å…¶è¦å†™markdown1brew cask install PicGo å¦‚æžœå¸¸å†™markdownçš„è¯ï¼Œç»å¯¹æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè°è¿˜æ¯ä¸ªgithubè´¦å·ï¼Œåˆç†ä½¿ç”¨èµ„æºå°±è¡Œäº†ï¼Œå›¾ç‰‡æ‹–è¿›ä¸Šä¼ åŒºï¼Œç›´æŽ¥å°±èƒ½è¿”å›žæ¥ä¸ªmarkdownçš„åœ°å€æ”¾åˆ°ç²˜è´´æ¿é‡Œäº†ã€‚è‡³äºŽæ€Žä¹ˆåˆ©ç”¨githubåšå›¾åºŠè‡ªè¡Œgoogleä¸‹ã€‚ 11. CharlesæŠ“åŒ…å·¥å…·Charlesæ˜¯ä¸€æ¬¾æŠ“åŒ…ä»£ç†è°ƒè¯•å·¥å…·ã€ç±» Fiddlerã€‚iosç³»ç»Ÿæ‰‹æœºä¸Šæœ‰ä¸€æ¬¾æŠ“åŒ…ç¥žå™¨ï¼šstreamå®‰å“æ‰‹æœºä¸Šä¸€èˆ¬ç”¨ï¼šPacket Captureï¼Œæˆ–è€…æŠ“åŒ…ç²¾çµ 12. å†…ç½‘ç©¿é€å·¥å…·è¿™ä¸ªä¸œè¥¿ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¦‚æžœä¸çŸ¥é“è¿˜æœ‰ä¸ªè¿™ä¹ˆä¸ªçŽ©æ„å„¿é‚£å°±æœ‰ç‚¹lowäº†ã€‚æˆ‘ç”¨è¿‡serveoå’Œngrokï¼Œngrokç›¸å¯¹ç¨³å®šï¼Œä½†æ˜¯ä½¿ç”¨ä¾¿æ·æ€§èµ¶ä¸ä¸Šä»€ä¹ˆéƒ½ä¸ç”¨serveoä¸€å¥å‘½ä»¤çš„å¿«ã€‚æˆ‘çš„ä¸¤ä¸ªæ€»ç»“ï¼šä½¿ç”¨serveoä¸€ç§’é’Ÿå®žçŽ°å†…ç½‘ç©¿é€ä½¿ç”¨ngrokä¸€åˆ†é’Ÿå®žçŽ°å†…ç½‘ç©¿é€ 13. ä¸ºçŸ¥ç¬”è®°|å°è±¡ç¬”è®°æœ‰æ—¶å€™ä½ ä¼šæœ‰ä¸¤å°ç”µè„‘ï¼Œæˆ–è€…éœ€è¦ç”¨ç§»åŠ¨ç«¯çœ‹çœ‹æ›¾ç»æŠ¥é”™çš„ä¸€äº›æœ‰æ•ˆèµ„æºï¼Œè¿™æ—¶å€™å¦‚æžœæ²¡æœ‰ä¸ªäº‘ç¬”è®°ï¼Œæœ‰ç‚¹è¯´ä¸è¿‡åŽ»äº†ï¼Œè€Œä¸”è¿™ç§ç¬”è®°ä¸ç®¡æ˜¯ä¿å­˜è‡ªå·±çš„ä¸œè¥¿ï¼Œè¿˜å¯ä»¥é€šè¿‡googleæµè§ˆå™¨æ’ä»¶å¿«é€Ÿæ”¶è—ç½‘é¡µï¼Œå°†æŸä¸€ç¯‡åšå®¢å‰ªåˆ‡æˆè‡ªå·±çš„ä¸œè¥¿ç¬”è®°ã€‚ [ç«™å¤–å›¾ç‰‡ä¸Šä¼ ä¸­â€¦(image-7835d8-1572691340926)] 14. Parallelsè™šæ‹Ÿæœºç¥žå™¨å¸¦ä½ é£ž~ 15. LogTail æ—¥å¿—ç›‘æŽ§æŸ¥çœ‹å·¥å…·å‰é¢è¯´åˆ°çš„itermé…åˆsshpassç™»å½•åˆ°æœåŠ¡å™¨ä¸æ˜¯ä¸ªå•¥é—®é¢˜äº†ï¼Œä½†æ˜¯æœ€è¿‘ç”¨çš„ä¸ç®¡æ˜¯é˜¿é‡Œäº‘å’Œç™¾åº¦äº‘çš„ECSï¼Œåœ¨ç»ˆç«¯è¿žæŽ¥ä¸€ä¼šå„¿åŽå°±ä¼šè‡ªåŠ¨æ–­å¼€ï¼Œè€Œä¸”æˆ‘ä¹Ÿä¸çŸ¥é“å’‹æžï¼Œå°±ç®—æ˜¯tail äº†ï¼Œä¸€ä¼šå„¿æ²¡æœ‰åŠ¨å°±è‡ªå·±æ–­å¼€äº†ï¼Œéžå¸¸ç³Ÿå¿ƒã€‚ ä»Šå¤©ç»ˆäºŽæ‰¾åˆ°äº†ä¸€æ¬¾æˆ‘ä¼—é‡Œå¯»ä»–åƒç™¾åº¦çš„logtailï¼Œæˆ‘ç®€ç›´çˆ±æ­»ä»–äº†ï¼ŒæŸ¥çœ‹äº‘æœåŠ¡å™¨æ—¥å¿—å±…ç„¶è¿˜æœ‰è¿™ä¹ˆä¸ªçŽ©æ„å„¿ï¼Œç®€ç›´ç¥žå™¨å•Šï¼Œæ¥ä¸¤å¼ å›¾çœ‹çœ‹ï¼š æœ‰äº†å®ƒæœåŠ¡å™¨ä¸Šçš„æ—¥å¿—å°±ä¸éœ€è¦æ­å»ºç±»ä¼¼ELKæˆ–è€…EFKçŽ¯å¢ƒäº†ã€‚ 16. mpvï¼šä¸€ä¸ªé«˜å¯é…çš„ç¨‹åºçŒ¿ä¸“ç”¨è§†é¢‘æ’­æ”¾å™¨å®‰è£…ï¼š1brew cask install mpv è¿™æ˜¯ä¸€æ¬¾ä¸€ä¸ªè·¨å¹³å°ã€ç®€æ´ã€å¼€æºã€å…è´¹ã€ä¸”æ€§èƒ½å’ŒåŠŸèƒ½å…¼å¤‡ä¸‡èƒ½è§†é¢‘æ’­æ”¾å™¨ã€‚MPV æ˜¯ä¸€ä¸ªåŸºäºŽ MPlayer å’Œ mplayer2 çš„å¼€æºæžç®€å…¨èƒ½æ’­æ”¾å™¨ã€‚æ”¯æŒå„ç§è§†é¢‘æ ¼å¼ã€éŸ³é¢‘è§£ç ã€æ”¯æŒç‰¹æ•ˆå­—å¹•ï¼ˆç”µå½±åŠ¨æ¼«çš„assç‰¹æ•ˆå­—å¹•éƒ½æ²¡å•¥é—®é¢˜ï¼‰ï¼Œä¸ä»…æ”¯æŒæœ¬åœ°æ’­æ”¾ï¼ŒåŒæ ·æ”¯æŒç½‘ç»œæ’­æ”¾ã€‚é‡ç‚¹æ˜¯ MPV å…·æœ‰å¤šç³»ç»Ÿå¹³å°æ”¯æŒã€å‘½ä»¤è¡Œã€è‡ªå®šä¹‰ã€GPU è§£ç ã€è„šæœ¬æ”¯æŒç­‰ç‰¹ç‚¹â€¦â€¦ çœ‹è¿™ç¯‡ä»‹ç» 17 Moomæˆ–è®¸æœ‰è®¸å¤šäººå’Œå°ç¼–ä¸€æ ·ï¼Œæ„Ÿè§‰Mac OSåœ¨ä½¿ç”¨æ—¶å„ç§éƒ½å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å°±æ˜¯å¯¹äºŽçª—å£å¤§å°çš„è°ƒæ•´éœ€è¦ç”¨é¼ æ ‡åŽ»æ‹–åŠ¨å¤§å°ä¸æ»¡æ„ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ›´ä¸ºå¿«é€Ÿçš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ è¿…é€Ÿçš„æœ€å¤§åŒ–ã€æœ€å°åŒ–å„ç§çª—å£ï¼Œç”šè‡³å’ŒWIN10ç³»ç»Ÿä¸€æ ·åšåˆ°å·¦å³å¯¹åŠåˆ†é…ä¸¤ä¸ªçª—å£å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼åªéœ€è¦åœ¨ä½ çš„Macä¸Šå®‰è£…Moomè¿™ä¸€æ¬¾å°è½¯ä»¶å³å¯å®žçŽ°ã€‚ Moomæ˜¯è‹¹æžœoså¹³å°ä¸Šä¼˜ç§€çš„çª—å£ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿä¿®æ”¹å½“å‰çª—å£çš„å¤§å°å¹¶æ”¾ç½®åœ¨æŒ‡å®šä½ç½®ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‹¥æœ‰äº”ç§å°ºå¯¸å¯é€‰ï¼Œå•å‡»é€‰é¡¹å³å¯æ›´æ”¹çª—å£å¤§å°ï¼Œå¦‚æœ€å¤§åŒ–ï¼Œç§»åŠ¨åˆ°å·¦è¾¹ã€å³è¾¹ç­‰æ“ä½œï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰çª—å£ï¼Œè®©ç”¨æˆ·å¯ä»¥æ›´å¥½çš„æŸ¥çœ‹macä¸Šçš„å†…å®¹ã€‚ 18. PopClipä¸€æ¬¾åœ¨ Mac ä¸Šäººå°½çš†çŸ¥çš„å°å·¥å…·ï¼Œå®ƒç®€å•é«˜æ•ˆï¼Œå…·æœ‰å¼ºå¤§çš„æ‹“å±•åŠŸèƒ½ï¼ŒPopClip æœ€åŸºæœ¬çš„åŠŸèƒ½å³ç”¨é¼ æ ‡é€‰ä¸­ä¸€æ®µæ–‡å­—å°±å¯ä»¥åšå¤åˆ¶ç²˜è´´çš„åŠ¨ä½œï¼ŒçœåŽ»äº†æˆ‘ä»¬å¹³æ—¶ Command+C or V çš„éº»çƒ¦ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå†æ— æ‹“å±•æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®é¼ æ ‡é€‰ä¸­çš„å†…å®¹ï¼ŒPopClip è¿˜è‡ªèº«æ”¯æŒé“¾æŽ¥çš„è·³è½¬æ‰“å¼€ã€è‡ªå¸¦è¯å…¸çš„ç¿»è¯‘ã€é‚®ä»¶åœ°å€è·³è½¬ã€æœç´¢å¼•æ“Žæœç´¢ã€å•è¯çº æ­£ç­‰åŠŸèƒ½ï¼Œä½†è¿™ä¸ªå·¥å…·çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºŽå®ƒçš„æ‹“å±•åŠŸèƒ½çš„ä½¿ç”¨å“¦ã€‚ å°æ’ä»¶ Bartenderå±•å¼€å’Œæ”¶ç¼©çŠ¶æ€æ  å¤–æŽ¥2Kæ˜¾ç¤ºå™¨æ— æ³•å¼€å¯hign dpiæ—¶çš„å¤„ç† å¼€å¯æ•™ç¨‹ï¼šhttps://bbs.feng.com/forum.php?mod=viewthread&amp;tid=11669269&amp;page=1ç”¨åˆ°çš„ä¸‰ä¸ªè½¯ä»¶ï¼š è®¾ç½®å®Œæˆä¹‹åŽï¼Œåœ¨å¤–æŽ¥æ˜¾ç¤ºå™¨ä¹Ÿå¯ä»¥çœ‹åˆ°hign dpiçš„é€‰é¡¹ï¼š Go2Shellåœ¨è®¿è¾¾é‡Œå¢žåŠ ä¸€ä¸ªæ‰“å¼€å‘½ä»¤è¡Œçš„å¿«æ·å…¥å£ï¼Œå¿«é€Ÿè¿›å…¥å‘½ä»¤è¡Œ è¿˜å¯ä»¥è®¾ç½®åœ¨å“ªæ‰“å¼€ FeHelperä¸€æ¬¾è°·æ­Œæµè§ˆå™¨æ’ä»¶ï¼Œä¸»è¦æ˜¯å…è´¹çš„å·¥å…·é›†åˆã€‚ Octotreeè¿™åˆæ˜¯ä¸€æ¬¾chromeæ’ä»¶ï¼Œèƒ½å°†githubé¡¹ç›®åœ¨å·¦ä¾§è¾¹æ ä»¥ç›®å½•æ ‘å½¢ç»“æž„å±•ç¤ºã€‚è®©ä½ æ›´ç›´è§‚åœ°æ„Ÿå—è‡ªå·±æˆ–åˆ«äººçš„é¡¹ç›®ã€‚æ„Ÿè°¢@æœ‹å‹ä½ çš„å­¦ç”Ÿå¡æŽ‰äº† åŒå­¦çš„æŽ¨è WeChatPlugin macmacå¾®ä¿¡åŠ©æ‰‹ï¼Œmacå¾®ä¿¡åŠ©æ‰‹ï¼ŒåŠŸèƒ½å…¨æ–°å‡çº§ï¼Œæœ‰å¾ˆå¤šæ¯”å¦‚æ¶ˆæ¯é˜²æ’¤å›žã€è¿œç¨‹æŽ§åˆ¶(å·²æ”¯æŒè¯­éŸ³)ã€å¾®ä¿¡å¤šå¼€ã€ç¬¬äºŒæ¬¡ç™»å½•å…è®¤è¯ç­‰ç­‰çš„åŠŸèƒ½ã€‚ æŽ¨èå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨-ç¨‹åºå‘˜å·¥å…·æŽ¨èæ­£æ˜¯æœ‰äº†è¿™äº›ç¥žå™¨ï¼Œè®©æˆ‘å†ä¹Ÿç¦»ä¸å¼€Macï¼]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰å“æœ‰çº¿æ— çº¿æŠ•å±ç¥žå™¨---scrcpy]]></title>
    <url>%2F2020%2F09%2F28%2F%E5%AE%89%E5%8D%93%E6%9C%89%E7%BA%BF%E6%97%A0%E7%BA%BF%E6%8A%95%E5%B1%8F%E7%A5%9E%E5%99%A8---scrcpy%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¾æœ€ç®€å•ï¼Œåˆ‡PCä¸Šå¯ä»¥æ“ä½œç§»åŠ¨è®¾å¤‡çš„å®‰å“æŠ•å±è½¯ä»¶ï¼ŒåŸºäºŽadbå®žçŽ°ç®€ä¹¦åœ°å€ ç”¨è¿‡syncï¼Œç”¨è¿‡å…è´¹çš„è½¯ä»¶å¹•äº«ï¼Œæœ€åŽå‘çŽ°å“ªä¸€æ¬¾ä¹Ÿæ²¡æœ‰scrcpyå¥½ä½¿ã€‚ éœ€è¦ä¸¤ä¸ªå‘½ä»¤è¡Œï¼Œadbå’Œscrcpy å®‰è£…å°±ä¸ç”¨æè¿°äº†ï¼Œèƒ½æœ‰æŠŠæ‰‹æœºæŠ•åˆ°ç”µè„‘ä¸Šçš„æƒ³æ³•çš„äººåº”è¯¥éƒ½èƒ½å®‰è£…ä¸Šã€‚ å®‰è£…ä¸Šä»¥åŽå°±æ›´äº†ä¸å¾—äº†1234567891011121314# mahaiqiang @ mahaiqiangs-MacBook-Pro in ~ [8:58:14]$ adb usb* daemon not running; starting now at tcp:5037* daemon started successfullyrestarting in USB mode# mahaiqiang @ mahaiqiangs-MacBook-Pro in ~ [8:59:10]$ scrcpy2020-09-28 08:59:14.880 scrcpy[1865:48805] INFO: scrcpy 1.14 &lt;https://github.com/Genymobile/scrcpy&gt;/usr/local/Cellar/scrcpy/1.14_1/share/scrcpy/scrcpy-server: 1 file pushed. 1.3 MB/s (33142 bytes in 0.025s)[server] INFO: Device: HUAWEI EVA-AL00 (Android 8.0.0)2020-09-28 08:59:16.304 scrcpy[1865:48805] INFO: Created renderer: metal2020-09-28 08:59:16.304 scrcpy[1865:48805] INFO: Renderer: metal2020-09-28 08:59:16.311 scrcpy[1865:48805] INFO: Initial texture: 1080x1920 å¦‚æžœç”µè„‘ä¿¡ä»»äº†æ‰‹æœº,å¼€äº†USBè°ƒè¯•ï¼Œè¿™æ—¶å€™åº”è¯¥èƒ½ä»Žç”µè„‘ä¸Šçœ‹åˆ°æ‰‹æœºäº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ å¼ºçƒˆæŽ¨èscrcpyâ€”â€”AndroidæŠ•å±ç¥žå™¨(ä½¿ç”¨æ•™ç¨‹) ç¨å¾®ç»™è‡ªå·±å¤‡ä»½ä¸€ä¸‹ï¼Œä¸‡ä¸€ä»¥ä¸Šåšå®¢å“ªå¤©ä¸‹æž¶äº†ã€‚ ä½¿ç”¨scrcpyçš„è¦æ±‚ Androidè®¾å¤‡è‡³å°‘éœ€è¦API 21ï¼ˆAndroid 5.0ä»¥ä¸Šç‰ˆæœ¬ï¼‰; ç¡®ä¿åœ¨æ‚¨çš„è®¾å¤‡ä¸Šå¯ç”¨äº†adbè°ƒè¯•; åœ¨æŸäº›è®¾å¤‡ä¸Šï¼Œæ‚¨è¿˜éœ€è¦å¯ç”¨å…¶ä»–é€‰é¡¹ä»¥ä½¿ç”¨é”®ç›˜å’Œé¼ æ ‡æŽ§åˆ¶å®ƒã€‚ ä½¿ç”¨ç”µè„‘è¿žæŽ¥æ‰‹æœºåœ¨Androidæ‰‹æœºä¸­æ‰“å¼€äº†USBè°ƒè¯•åŽï¼Œæˆ‘ä»¬å³å¯åœ¨ç”µè„‘ä¸­ä½¿ç”¨adbè¿›è¡Œè°ƒè¯•ã€‚ æˆ‘ä½¿ç”¨çš„æ˜¯Windows10ç³»ç»Ÿï¼Œä»¥ä¸‹ä»¥Windowsä¸ºä¾‹ï¼ŒMacOSæˆ–Linuxè¯·ç‚¹å‡»è¿™é‡Œã€‚ ç¨‹åºä½¿ç”¨äº†Javaè¯­è¨€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç”µè„‘ä¸­æ­å»ºJavaè¿è¡ŒçŽ¯å¢ƒï¼Œå‚è€ƒï¼šWindows10 é…ç½® Java å¼€å‘çŽ¯å¢ƒ é¦–å…ˆä¸‹è½½scrcpyï¼Œå¯åŽ»releasesä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸ºv1.10ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://github.com/Genymobile/scrcpy/releases æ‰“å¼€cmdå®šä½åˆ°æ­¤ç›®å½•ï¼ˆåœ¨åœ°å€æ ä¸­è¾“å…¥cmdå›žè½¦ï¼‰ï¼Œæˆ–è€…å°†è¯¥ç›®å½•å¦‚D:\Github_Run\scrcpy-win64-v1.10åŠ å…¥åˆ°ç³»ç»ŸçŽ¯å¢ƒå˜é‡ä¸­ï¼Œç¨‹åºçš„ä½¿ç”¨éƒ½åœ¨cmdå‘½ä»¤è¡Œä¸­æ“ä½œã€‚ ä½¿ç”¨USBè¿›è¡Œè¿žæŽ¥æ­¤æ–¹å¼æŽ¨èä½¿ç”¨ï¼Œç›¸å¯¹æ›´åŠ æµç•…ã€‚ æ‰‹æœºé€šè¿‡USBè¿žæŽ¥åˆ°PCä¸Šï¼Œé¦–æ¬¡è¿žæŽ¥ä¼šå¼¹å‡ºæ˜¯å¦ä¿¡ä»»è¯¥ç”µè„‘ï¼Œç‚¹å‡»å§‹ç»ˆä¿¡ä»»å³å¯ã€‚ è¿è¡Œadb usbæŸ¥çœ‹æ˜¯å¦è¿žæŽ¥æˆåŠŸ 12D:\Github_Run\scrcpy-win64-v1.10&gt;adb usbrestarting in USB mode è¿è¡Œscrcpyå³å¯ã€‚ ä½¿ç”¨æ— çº¿è¿žæŽ¥å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šOpen Source Project - Scrcpy now works wirelessly æ­¤è¿žæŽ¥æ–¹å¼æ›´åŠ æ–¹ä¾¿å¿«æ·ï¼Œè‹¥å®½å¸¦é€ŸçŽ‡é«˜ï¼Œä½¿ç”¨æ•ˆæžœæ›´ä½³ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿéžå¸¸ç®€å•ã€‚ ç¡®ä¿PCå’Œæ‰‹æœºåœ¨åŒä¸€Wifiä¸­ æ‰‹æœºå…ˆé€šè¿‡USBä¸ŽPCç›¸è¿ž åœ¨PCä¸Šè¿è¡Œ adb tcpip æœåŠ¡ç«¯å£ï¼Œå¦‚ç«¯å£ä¸º5555 12D:\Github_Run\scrcpy-win64-v1.10&gt;adb tcpip 5555restarting in TCP mode port: 5555 æ‹”ä¸‹ä½ çš„è®¾å¤‡ï¼Œæ–­å¼€USBè¿žæŽ¥ åœ¨PCä¸Šè¿è¡Œ adb connect æ‰‹æœºIP:æœåŠ¡ç«¯å£ï¼ˆæ‰‹æœºIPå¯é€šè¿‡æ‰‹æœºçš„çŠ¶æ€ä¿¡æ¯æŸ¥çœ‹ï¼Œæˆ–è€…ç™»å½•è·¯ç”±å™¨æŸ¥çœ‹ï¼Œä¸€èˆ¬ä»¥192.168å¼€å¤´ï¼‰ 12D:\Github_Run\scrcpy-win64-v1.10&gt;adb connect 192.168.0.4:5555connected to 192.168.0.4:5555 è¿è¡Œscrcpyï¼Œåœ¨cmdä¸­è¾“å…¥scrcpy.exe å‚è€ƒï¼šscrcpyâ€”â€”AndroidæŠ•å±ç¥žå™¨(ä½¿ç”¨æ•™ç¨‹) ä½¿ç”¨scrcpyæŽ§åˆ¶ä½ çš„æ‰‹æœº]]></content>
      <categories>
        <category>cljs</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxæ–‡ä»¶ç›®å½•æœåŠ¡å™¨]]></title>
    <url>%2F2020%2F09%2F22%2Fnginx%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[nginxæ­å»ºä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ç®€ä¹¦åœ°å€ ç”¨nginxé…ç½®ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ï¼Œå¹¶è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œé…ç½®æ–‡ä»¶1234567891011121314151617server &#123; listen 80; server_name downloadapp.3vyd.com; location / &#123; add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos; always; add_header &apos;Access-Control-Allow-Credentials&apos; &apos;true&apos;; add_header &apos;Access-Control-Expose-Headers&apos; &apos;Content-Length,Content-Range&apos;; add_header &apos;Access-Control-Allow-Headers&apos; &apos;Range&apos;; root /var/packages; autoindex on; autoindex_localtime on; autoindex_exact_size off; charset utf-8; try_files $uri $uri/ /index.html; &#125;&#125; å¦‚æžœï¼Œå¼€æ”¾ç›®å½•ï¼Œå½“æ—¶ä¸å…è®¸ç›´æŽ¥è®¿é—®ï¼Œåªèƒ½è®¿é—®æŒ‡å®šè·¯å¾„ä¸‹çš„htmlæ–‡ä»¶ï¼Œnginx.confçš„é…ç½®å¦‚ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142pid /var/run/nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include /etc/nginx/mime.types; default_type application/octet-stream; add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Headers *; add_header Access-Control-Allow-Credentials true always; add_header Access-Control-Allow-Methods GET,POST,OPTIONS; add_header Access-Control-Max-Age 1728000 always; server &#123; listen 8088; server_name localhost; # location / &#123; # root /var/jenkins/report/admin/dist; # try_files $uri $uri/ /index.html; # index index.html; # &#125; location /report &#123; if ($request_method = &apos;OPTIONS&apos;) &#123; add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;; add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET,POST,OPTIONS&apos;; add_header &apos;Access-Control-Allow-Headers&apos; &apos;*&apos;; return 204; &#125; root /var/jenkins_home; try_files $uri $uri/ /index.html; index index.html; &#125; location ~* \.(eot|ttf|woff)$ &#123; add_header Access-Control-Allow-Origin *; &#125; &#125; å‚è€ƒnginxå¼€å¯ç›®å½•æµè§ˆåŠè§£å†³ä¸­æ–‡æ–‡ä»¶åä¹±ç é—®é¢˜]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[websocketæœ¬åœ°è°ƒè¯•html]]></title>
    <url>%2F2020%2F09%2F13%2Fwebsocket%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95html%2F</url>
    <content type="text"><![CDATA[æ–°èµ·websocketæœåŠ¡åŽæœ¬åœ°å¦‚ä½•è°ƒè¯•å‘¢ï¼Ÿç®€ä¹¦åœ°å€ å…ˆçœ‹çœ‹æœ¬åœ°è¿™ä¸ªé™æ€htmlåœ¨æµè§ˆå™¨é‡Œçœ‹åˆ°çš„é¡µé¢ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; &lt;title&gt;æœ¬åœ°websocketæµ‹è¯•&lt;/title&gt; &lt;meta name=&quot;robots&quot; content=&quot;all&quot; /&gt; &lt;meta name=&quot;keywords&quot; content=&quot;æœ¬åœ°,websocket,æµ‹è¯•å·¥å…·&quot; /&gt; &lt;meta name=&quot;description&quot; content=&quot;æœ¬åœ°,websocket,æµ‹è¯•å·¥å…·&quot; /&gt; &lt;style&gt; .btn-group&#123; display: inline-block; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=&apos;text&apos; value=&apos;ws://localhost:3000/api/ws&apos; class=&quot;form-control&quot; style=&apos;width:390px;display:inline&apos; id=&apos;wsaddr&apos; /&gt; &lt;div class=&quot;btn-group&quot; &gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; onclick=&apos;addsocket();&apos;&gt;è¿žæŽ¥&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; onclick=&apos;closesocket();&apos;&gt;æ–­å¼€&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; onclick=&apos;$(&quot;#wsaddr&quot;).val(&quot;&quot;)&apos;&gt;æ¸…ç©º&lt;/button&gt; &lt;/div&gt; &lt;div class=&quot;row&quot;&gt; &lt;div id=&quot;output&quot; style=&quot;border:1px solid #ccc;height:365px;overflow: auto;margin: 20px 0;&quot;&gt;&lt;/div&gt; &lt;input type=&quot;text&quot; id=&apos;message&apos; class=&quot;form-control&quot; style=&apos;width:810px&apos; placeholder=&quot;å¾…å‘ä¿¡æ¯&quot; onkeydown=&quot;en(event);&quot;&gt; &lt;span class=&quot;input-group-btn&quot;&gt; &lt;button class=&quot;btn btn-default&quot; type=&quot;button&quot; onclick=&quot;doSend();&quot;&gt;å‘é€&lt;/button&gt; &lt;/span&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;script crossorigin=&quot;anonymous&quot; integrity=&quot;sha384-LVoNJ6yst/aLxKvxwp6s2GAabqPczfWh6xzm38S/YtjUyZ+3aTKOnD/OJVGYLZDl&quot; src=&quot;https://lib.baomitu.com/jquery/3.5.0/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt; function formatDate(now) &#123; var year = now.getFullYear(); var month = now.getMonth() + 1; var date = now.getDate(); var hour = now.getHours(); var minute = now.getMinutes(); var second = now.getSeconds(); return year + &quot;-&quot; + (month = month &lt; 10 ? (&quot;0&quot; + month) : month) + &quot;-&quot; + (date = date &lt; 10 ? (&quot;0&quot; + date) : date) + &quot; &quot; + (hour = hour &lt; 10 ? (&quot;0&quot; + hour) : hour) + &quot;:&quot; + (minute = minute &lt; 10 ? (&quot;0&quot; + minute) : minute) + &quot;:&quot; + ( second = second &lt; 10 ? (&quot;0&quot; + second) : second); &#125; var output; var websocket; function init() &#123; output = document.getElementById(&quot;output&quot;); testWebSocket(); &#125; function addsocket() &#123; var wsaddr = $(&quot;#wsaddr&quot;).val(); if (wsaddr == &apos;&apos;) &#123; alert(&quot;è¯·å¡«å†™websocketçš„åœ°å€&quot;); return false; &#125; StartWebSocket(wsaddr); &#125; function closesocket() &#123; websocket.close(); &#125; function StartWebSocket(wsUri) &#123; websocket = new WebSocket(wsUri); websocket.onopen = function(evt) &#123; onOpen(evt) &#125;; websocket.onclose = function(evt) &#123; onClose(evt) &#125;; websocket.onmessage = function(evt) &#123; onMessage(evt) &#125;; websocket.onerror = function(evt) &#123; onError(evt) &#125;; &#125; function onOpen(evt) &#123; writeToScreen(&quot;&lt;span style=&apos;color:red&apos;&gt;è¿žæŽ¥æˆåŠŸï¼ŒçŽ°åœ¨ä½ å¯ä»¥å‘é€ä¿¡æ¯å•¦ï¼ï¼ï¼&lt;/span&gt;&quot;); &#125; function onClose(evt) &#123; writeToScreen(&quot;&lt;span style=&apos;color:red&apos;&gt;websocketè¿žæŽ¥å·²æ–­å¼€!!!&lt;/span&gt;&quot;); websocket.close(); &#125; function onMessage(evt) &#123; writeToScreen(&apos;&lt;span style=&quot;color:blue&quot;&gt;æœåŠ¡ç«¯å›žåº”&amp;nbsp;&apos; + formatDate(new Date()) + &apos;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;bubble&quot;&gt;&apos; + evt.data + &apos;&lt;/span&gt;&apos;); &#125; function onError(evt) &#123; writeToScreen(&apos;&lt;span style=&quot;color: red;&quot;&gt;å‘ç”Ÿé”™è¯¯:&lt;/span&gt; &apos; + evt.data); &#125; function doSend() &#123; var message = $(&quot;#message&quot;).val(); if (message == &apos;&apos;) &#123; alert(&quot;è¯·å…ˆå¡«å†™å‘é€ä¿¡æ¯&quot;); $(&quot;#message&quot;).focus(); return false; &#125; if (typeof websocket === &quot;undefined&quot;) &#123; alert(&quot;websocketè¿˜æ²¡æœ‰è¿žæŽ¥ï¼Œæˆ–è€…è¿žæŽ¥å¤±è´¥ï¼Œè¯·æ£€æµ‹&quot;); return false; &#125; if (websocket.readyState == 3) &#123; alert(&quot;websocketå·²ç»å…³é—­ï¼Œè¯·é‡æ–°è¿žæŽ¥&quot;); return false; &#125; console.log(websocket); $(&quot;#message&quot;).val(&apos;&apos;); writeToScreen(&apos;&lt;span style=&quot;color:green&quot;&gt;ä½ å‘é€çš„ä¿¡æ¯&amp;nbsp;&apos; + formatDate(new Date()) + &apos;&lt;/span&gt;&lt;br/&gt;&apos; + message); websocket.send(message); &#125; function writeToScreen(message) &#123; var div = &quot;&lt;div class=&apos;newmessage&apos;&gt;&quot; + message + &quot;&lt;/div&gt;&quot;; var d = $(&quot;#output&quot;); var d = d[0]; var doScroll = d.scrollTop == d.scrollHeight - d.clientHeight; $(&quot;#output&quot;).append(div); if (doScroll) &#123; d.scrollTop = d.scrollHeight - d.clientHeight; &#125; &#125; function en(event) &#123; var evt = evt ? evt : (window.event ? window.event : null); if (evt.keyCode == 13) &#123; doSend() &#125; &#125; &lt;/script&gt; &lt;/html&gt;]]></content>
      <categories>
        <category>cljs</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[shadow-cljs hooksè§£å†³csså»¶è¿ŸåŠ è½½å¯¼è‡´é¡µé¢é‚¹å½¢é—®é¢˜]]></title>
    <url>%2F2020%2F08%2F29%2Fshadow-cljs%20hooks%E8%A7%A3%E5%86%B3css%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E5%AF%BC%E8%87%B4%E9%A1%B5%E9%9D%A2%E9%82%B9%E5%BD%A2%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[åœ¨shadow-cljsé¡¹ç›®ä¸­åœ¨æœ€åŽç¼–è¯‘çš„æ—¶å€™å°†æ‰€æœ‰çš„csså†™å…¥åˆ°åŒä¸€ä¸ªcssæ–‡ä»¶ï¼Œåœ¨index.htmlé‡Œå¼•ç”¨ä¸€æ¬¡ç®€ä¹¦åœ°å€ çŽ°çŠ¶æˆ‘å¸ä½¿ç”¨shadow-cljsç¼–è¯‘clojure scriptä»£ç ï¼Œè€ƒè™‘åˆ°å¤§å®¶éƒ½ç¼–è¾‘ä¸€ä¸ªcssæ–‡ä»¶çš„è¯ï¼Œå†²çªæ¯”è¾ƒä¸¥é‡ï¼Œå¹¶ä¸”ä»£ç ä¹Ÿæ²¡æœ‰æ¨¡å—åŒ–ï¼Œæ‰€ä»¥æ¯ä¸ªæ¨¡å—æœ‰è‡ªå·±çš„æ ·å¼æ–‡ä»¶ï¼Œç›®å‰éƒ½æ˜¯åœ¨è‡ªå·±ä¸šåŠ¡æ¨¡å—æˆ–è€…componenté‡Œå¼•å…¥è‡ªå·±çš„cssæ–‡ä»¶ï¼Œç»“æž„åŸºæœ¬æ˜¯è¿™æ ·çš„ï¼š1234(defn login-main [] [:div [:link &#123;:rel "stylesheet" :href "/css/login.css" &#125;] [:div "ç™»å½•ç»„ä»¶æ ·å¼"]]) åˆ†æžå¥½å¤„ï¼š ä»£ç æ¨¡å—åŒ–ï¼Œä¸šåŠ¡ç»„ä»¶ä¸Žæ ·å¼æ–‡ä»¶ä¸€ä¸€å¯¹åº”ï¼Œä¾¿äºŽå¼€å‘å›¢é˜Ÿç»´æŠ¤ä»£ç ã€‚ ä¸ç”¨åœ¨å…¥å£æ–‡ä»¶é‡Œå¼•å…¥ä¸€å †cssæ–‡ä»¶ï¼Œå‡å°‘commitå†²çªã€‚ å‡å°‘èµ„æºæµªè´¹ï¼Œåªæœ‰é¡µé¢åŠ è½½å¤„æ‰åŠ è½½cssï¼Œç³»ç»Ÿä¸åŠ è½½æ— ç”¨çš„èµ„æºæ–‡ä»¶ã€‚ ç—›ç‚¹ ä¸€æ¡è¶³ä»¥è‡´å‘½ï¼Œé‚£å°±æ˜¯äº§å“ä½“éªŒä¸å¥½ï¼ŒcssåŠ è½½å»¶è¿Ÿï¼Œå‡ ä¹Žæ¯ä¸ªé¡µé¢éƒ½å‡ºçŽ°å¦‚ä¸‹ä¸€ä¸ªçž¬é—´ã€‚ æ˜¯çš„ï¼Œä½ çœ‹çš„æ²¡æœ‰é”™ï¼Œæµè§ˆç¡®å®žæ²¡æœ‰åŠ è½½å®Œï¼Œç½‘ç»œå¥½çš„è¯è¿™ä¸ªé¡µé¢çž¬é—´å°±è¿‡äº†ï¼Œä½†æ˜¯ä¸‡ä¸€ç¢°ä¸Šä¸å¥½çš„ï¼Œé‚£å°±å°´å°¬äº†ï¼Œå¹¶ä¸”æœ‰æ—¶å€™è¿˜å‡ºçŽ°è¿‡æœ€åŽæ ·å¼å°±æ²¡æœ‰å‡ºæ¥çš„æƒ…å†µã€‚ æ€è·¯ä¸èƒ½è®©ç»„ä»¶æ¸²æŸ“æ—¶æ‰åŽ»åŠ è½½cssï¼Œæ‰€ä»¥linkè¿™ä¸ªæ–¹æ¡ˆpassæŽ‰ã€‚é‚£ä¹ˆåªèƒ½å°†cssåœ¨index.htmlé‡Œå¼•å…¥ï¼Œä¸ç®¡ç”¨ä¸ç”¨å¾—åˆ°ï¼Œéƒ½å…ˆåŠ è½½å‡ºæ¥ï¼Œè®©æµè§ˆå™¨å…ˆç¼“å­˜ä¸‹æ¥å¤‡ç”¨ã€‚ æ–¹æ¡ˆ ä»£ç å±‚é¢ï¼Œè¿˜æ˜¯åˆ†æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—å’Œcssæ¨¡å—ä¸€ä¸€å¯¹åº”ã€‚ åœ¨ç³»ç»Ÿè¿è¡Œæ—¶å°†æ‰€æœ‰è‡ªå®šä¹‰çš„cssåˆå¹¶åˆ°ä¸€ä¸ªæ ·å¼æ–‡ä»¶ï¼Œåœ¨index.htmlä¸­å¼•ç”¨ã€‚ å…¶ä¸­ç¬¬äºŒç‚¹ï¼Œåœ¨éƒ¨ç½²æ—¶å¯ä»¥ä½¿ç”¨è„šæœ¬å¤„ç†ï¼Œä½†æ˜¯åœ¨æœ¬åœ°å¼€å‘æ—¶å°±æ¯”è¾ƒä¸ä¾¿ï¼Œä¸è¿‡å¥½åœ¨shadow-cljsæä¾›äº†build-hooksç¥žå™¨ã€‚åŠ è½½é…ç½®ä¸­ï¼Œè®©æˆ‘ä»¬ä»£ç ç¼–è¯‘æ—¶åšäº†è¿™ä¸ªåˆå¹¶cssæ–‡ä»¶çš„å·¥ä½œã€‚å…·ä½“çš„é…ç½®æ˜¯åœ¨æ ¹ç›®å½•çš„shadow-cljs.ednä¸­åŠ å…¥å¦‚ä¸‹é…ç½®:12345&#123;... :builds &#123;:app &#123;:target ... :build-hooks [(utils.hooks/watch-resource)] ...&#125;&#125;&#125;&#125; è¿™ä¸ªhooksçš„å…¨éƒ¨ä»£ç å¦‚ä¸‹:123456789101112(ns utils.hooks (:require [clojure.java.shell :as shell]))(defn watch-resource &#123;:shadow.build/stage :flush&#125; [build-state &amp; args] (future (prn &quot;configure completed&quot;) (let [dir (System/getProperty &quot;user.dir&quot;)] (clojure.java.shell/with-sh-dir (str dir &quot;/src/cljs/utils&quot;) (clojure.java.shell/sh &quot;mergecss.sh&quot; (str dir &quot;/resources/public/css&quot;) (str dir &quot;/resources/public/css/style.css&quot;))))) build-state) å¦‚æžœå‚è€ƒï¼Œshadow-cljså®˜æ–¹å¯¹build-hooksçš„è¯´æ˜Žï¼Œä¸éš¾ç†è§£ã€‚è§£é‡Šä¸¤ä¸ªä¸œè¥¿ (System/getProperty &quot;user.dir&quot;)ï¼Œè¿™ä¸ªæ˜¯èŽ·å–å½“å‰é¡¹ç›®çš„å·¥ä½œç›®å½•ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®è·Ÿç›®å½•ï¼Œæ³¨æ„ä¸æ˜¯gitæ ¹ç›®å½•ã€‚æœ‰äº†è¿™ä¸ªï¼Œæƒ³èŽ·å–ä»€ä¹ˆç›®å½•æˆ–è€…æ–‡ä»¶ï¼Œæ‰‹åˆ°æ“’æ¥ã€‚ hooksé‡Œè¿˜è°ƒç”¨äº†ä¸€ä¸ªè„šæœ¬æ–‡ä»¶mergecss.sh,è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨æ˜¯æŠŠå¼€å‘å›¢é˜Ÿè‡ªå·±å†™çš„æ‰€æœ‰cssçš„å†…å®¹copyåˆ°åŒä¸€ä¸ªstyle.cssæ–‡ä»¶ä¸­åŽ»ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å¤„ç†çš„ç›®å½•(ä¼šå‘ä¸‹éåŽ†ç›®å½•)ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å†™å…¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œé™„ä¸Šè„šæœ¬ä»£ç ï¼š1234567891011121314151617181920212223242526#!/bin/bash#èŽ·å–ç¬¬ä¸€ä¸ªå‚æ•°,ç›®æ ‡ç›®å½•srcpath=$1#ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¾“å‡ºæ–‡ä»¶target_file=$2#å…ˆåˆ é™¤åŽŸç›®æ ‡æ–‡ä»¶rm -rf $&#123;target_file&#125;;function writeByDir()&#123; for file in $1/* do if test -f $file; then #_echo $(basename $file) if [[ $(basename $file) = "antd.min.css" ]] || [[ $(basename $file) = "slick.min.css" ]] || [[ $(basename $file) = "slick-theme.min.css" ]]; then echo "uncopy css :"$(basename $file) else cat "$file" &gt;&gt; "$&#123;target_file&#125;" echo "" &gt;&gt; "$&#123;target_file&#125;" fi else writeByDir $file fi done&#125;writeByDir $&#123;srcpath&#125; æ­¤å¤„ç”±è¡·æ„Ÿæ…¨ä¸‹ï¼ŒreplçœŸå¥½ç”¨ï¼Œclojure.java.shellè¿™ä¸ªåº“çš„ä½¿ç”¨ï¼ŒåŠæœ€åŽé’©å­å†…å®¹å¥½ä¸å¥½ä½¿å…¨é è¿™ä¸ªå·¥å…·è°ƒè¯•ã€‚å¦åˆ™çš„è¯ï¼Œä¿®æ”¹hookså°±è¦é¢‘ç¹å¯åŠ¨shadow-cljsé¡¹ç›®ï¼Œå¹¶ä¸”å¦‚æžœhookså‡½æ•°æœ‰é”™è¯¯çš„æ²¡æœ‰ä»»ä½•æŠ¥é”™ä¿¡æ¯ï¼Œåªæ˜¯é’©å­å‡½æ•°ä¸æ‰§è¡Œã€‚ è¿™æ ·æœ¬åœ°å¼€å‘çš„cssæ–‡ä»¶ä¹Ÿèƒ½åŠæ—¶å†™å…¥åˆ°style.cssé‡Œï¼Œåœ¨index.htmlå¼•ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œå¦¥äº†ã€‚1&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/style.css&quot; type=&quot;text/css&quot; &gt; ä¸€é¡¿æ“ä½œçŒ›å¦‚è™Žï¼Œå®šç›ä¸€çœ‹åŽŸåœ°æµä»¥ä¸Šæ“ä½œè¿˜æ˜¯ä¸å¤Ÿå®Œç¾Žï¼Œ åŠ ä¸ŠhookåŽï¼Œåœ¨æœ¬åœ°ä¿®æ”¹è‡ªå·±çš„cssåŽï¼Œé’©å­ä¸æ‰§è¡Œï¼Œæ”¹çš„ä»£ç ä¸ä¼šè‡ªå·±å†™å…¥ç›®æ ‡æ–‡ä»¶ã€‚æ–¹æ¡ˆä¸€ï¼šåœ¨9630ç«¯å£ä¸Šæ‰‹åŠ¨è§¦å‘compileï¼Œå¼ºåˆ¶flushã€‚æ–¹æ¡ˆäºŒï¼šå¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥åœ¨cljsæ–‡ä»¶é‡Œlinkè‡ªå·±çš„æ ·å¼æ–‡ä»¶ï¼Œè¾¾åˆ°é«˜æ•ˆå¼€å‘ï¼Œlinkæ®µè½ä¸ç”¨æäº¤ã€‚ ä¸ºäº†å¼€å‘æ—¶ä¸å†²çªï¼Œæ›´æ–°gitignoreï¼Œç”Ÿæˆçš„cssä¸ç”¨commitåˆ°é¡¹ç›®é‡Œï¼ŒreleaseçŽ¯å¢ƒåœ¨æŒç»­é›†æˆæ—¶æ‰§è¡Œè¯¥hookçš„æ“ä½œï¼Œè°ƒç”¨æœåŠ¡å™¨çš„è„šæœ¬æ–‡ä»¶ã€‚ æ ·å¼æ–‡ä»¶æ²¡æœ‰hashï¼Œçº¯copyï¼Œåªä¸ºè§£å†³cssåŠ è½½å»¶è¿Ÿå¯¼è‡´çš„é¡µé¢ä¸‘é™‹ã€‚ å‚è€ƒ https://blog.csdn.net/sirfenygu/article/details/47025083]]></content>
      <categories>
        <category>cljs</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macä¸Šsoundflower+OBS+å¾®ä¿¡å…¬ä¼—å·ç›´æ’­é¡¹ç›®æ€»ç»“]]></title>
    <url>%2F2020%2F08%2F16%2Fmac%E4%B8%8Asoundflower%2BOBS%2B%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E7%9B%B4%E6%92%AD%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[macä¸Šä½¿ç”¨è…¾è®¯ä¼šè®®+OBSå®¢æˆ·ç«¯åšç›´æ’­ç®€ä¹¦åœ°å€ 1. æœ¬åœ°å¾®ä¿¡å…¬ä¼—å·å¼€å‘å‚è€ƒï¼šå¾®ä¿¡é…ç½®æœ¬åœ°å…¬ä¼—å·å¼€å‘çŽ¯å¢ƒ 2. runtimeçš„addShutdownHooké’©å­ä¸æ‰§è¡Œå‚è€ƒï¼šLinux kill &amp; Java shutdownhookæœ€åŽç”¨çš„kill-15 pidåœæ­¢è¿›ç¨‹ï¼Œæˆ–è®¸æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œæ¯”å¦‚System.exit(); è¯»æ–‡ä»¶å¥½è¯´ï¼Œé¡¹ç›®å¯åŠ¨æ—¶ç¼–è¯‘å°±ä¼šè¯»12(def file-url "/opt/xhlive-training/pkg/activity/db.edn")(def messages (atom (clojure.edn/read-string (slurp file-url)))) å¢žåŠ hook12345678(defn -main [&amp; args] (start!) (.addShutdownHook (Runtime/getRuntime) (new Thread (fn[] (prn "I am going down....") (when (not (empty? @messages)) (spit file-url @messages))))) (println "å¯åŠ¨ws....")) 3. é¡¹ç›®å¯åŠ¨æ—¶è¯»æ–‡ä»¶ï¼Œé¡¹ç›®ç»“æŸæ—¶å†™æ–‡ä»¶ç±»ä¼¼åœ¨æœåŠ¡ç»“æŸæ—¶å¢žåŠ ä¸€äº›é”€æ¯çŽ°åœºçš„èƒ½åŠ›ã€‚Javaä¸­ä½¿ç”¨shutdownHookçš„ä¸€äº›æ³¨æ„äº‹é¡¹ä¸Šåšä¸»çš„ä»‹ç»ç›¸å¯¹æ¥è¯´èƒ½å¤Ÿå¸®åŠ©addShutdownHookçš„åœºæ™¯äº†ã€‚ æœ¬æ–‡ä»‹ç»clojureç‰ˆå®žè·µã€‚ slurp è¯»å‡½æ•°è¯»å–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ clojure.core/slurpè¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ž1234(comment (slurp &quot;files/file-test.txt&quot; :encoding &quot;UTF-8&quot;) ;; =&gt; &quot;a txt file line1\na txt file line2\nè¿™æ˜¯ä¸­æ–‡å­—ç¬¦&quot; ) spit å†™å‡½æ•°clojure.core/spit [file-path content &amp; options]file-pathï¼šä¸ºæ–‡ä»¶è·¯å¾„ï¼›contentï¼šä¸ºè¦å†™å…¥æ–‡ä»¶çš„å†…å®¹ï¼Œæ‰€æœ‰çš„å†…å®¹éƒ½ä¼šè¢«è½¬ä¸ºStringç±»åž‹å†™å…¥ã€‚optionsï¼šä¸€äº›è®¾ç½®å‚æ•°ï¼Œå¸¸è§çš„æœ‰ï¼š :append true/falseï¼›å½“ä¸ºtrueæ˜¯ï¼Œå†…å®¹ä¼šä»Žæ–‡ä»¶åŽé¢å†™å…¥ï¼Œå¦‚æžœè¦æ¢è¡Œå†™å…¥ï¼Œéœ€è¦åœ¨å†…å®¹åŽé¢åŠ å…¥\næ¢è¡Œç¬¦ï¼Œå½“ä¸ºfalseæ—¶ï¼Œä¼šæ“¦æŽ‰æ–‡ä»¶åŽŸæœ‰çš„å†…å®¹ã€‚:encoding â€œUTF-8â€æˆ–â€GBKâ€ç­‰ã€‚ é»˜è®¤æ˜¯UTF-8.spitå‡½æ•°ä¼šå…ˆæ‰“å¼€æ–‡ä»¶ï¼Œå†å°†å†…å®¹å†™å…¥ï¼Œå†å…³é—­æ–‡ä»¶ã€‚spitéƒ½æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼å†™å…¥ã€‚1234567891011121314151617181920(comment (spit &quot;files/file-test.txt&quot; &quot;æ–°å¢žæ–‡ä»¶å†…å®¹\n&quot; :append false :encoding &quot;GBK&quot;) (slurp &quot;files/file-test.txt&quot; :encoding &quot;GBK&quot;) ;; =&gt; &quot;æ–°å¢žæ–‡ä»¶å†…å®¹\n&quot; (slurp &quot;files/file-test.txt&quot; :encoding &quot;UTF-8&quot;) ;; =&gt; &quot;ï¿½ï¿½ï¿½ï¿½ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½\n&quot; (spit &quot;files/file-test.txt&quot; &quot;æ–°å¢žæ–‡ä»¶å†…å®¹\n&quot; :append false) (slurp &quot;files/file-test.txt&quot; :encoding &quot;GBK&quot;) ;; =&gt; &quot;é‚æ¿î–ƒé‚å›¦æ¬¢éå‘­î†\n&quot; (slurp &quot;files/file-test.txt&quot; :encoding &quot;UTF-8&quot;) ;; =&gt; &quot;æ–°å¢žæ–‡ä»¶å†…å®¹\n&quot; ;; é€è¡Œå†™å¤§é‡æ•°æ®åˆ°æ–‡ä»¶æ—¶ï¼Œç”¨spitä¼šé™ä½Žæ•ˆçŽ‡ï¼Œå› ä¸ºå®ƒæ¯å†™ä¸€æ¬¡éƒ½ä¼šæ‰§è¡Œæ‰“å¼€ã€å…³é—­æ–‡ä»¶ã€‚ ;; æ­¤æ—¶å¯ä»¥ç”¨java.io.writer. (with-open [w (cio/writer &quot;files/file-test.txt&quot;)] (doseq [l [&quot;ç¬¬ä¸€è¡Œ&quot; &quot;ç¬¬äºŒè¡Œ&quot; &quot;ç¬¬ä¸‰è¡Œ&quot;]] (.write w l) ;; æ–°èµ·ä¸€è¡Œ (.newLine w))) ) websocketclojureä½¿ç”¨ä¸¤ä¸ªåº“ï¼Œä¸é™„æºç ã€‚https://github.com/ptaoussanis/sentehttps://github.com/ptaoussanis/timbre macä¸Šä½¿ç”¨OBSåšç›´æ’­æˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯æŠŠè…¾è®¯ä¼šè®®çš„ä¼šè®®å†…å®¹åšä¸€å®šçš„èƒŒæ™¯ã€å¤´åƒçš„è£å‰ªå¤„ç†åŽç”¨OBS studioè½¯ä»¶æŠŠæµæŽ¨å‡ºåŽ»ï¼Œç„¶åŽåœ¨å®¢æˆ·ç«¯ç”¨m3u8çš„æ ¼å¼æ‹‰å–æ’­æ”¾ã€‚ ä¸ºä»€ä¹ˆå•ç‹¬æä¸€ä¸‹è¿™ä¸ªï¼Œå› ä¸ºmacä¸Šèƒ½æŠŠéº¦å…‹é£Žçš„å£°éŸ³æ’­å‡ºåŽ»ï¼Œä½†æ˜¯æ¡Œé¢çš„å£°éŸ³æ‹¨ä¸å‡ºåŽ»ã€‚æ¢å¥è¯è¯´ï¼Œä½ ç”¨ç½‘æ˜“äº‘éŸ³ä¹ï¼Œæƒ³åªæŠŠè¿™ä¸ªè½¯ä»¶çš„å£°éŸ³ç”¨OBSæ’­å‡ºåŽ»ï¼Œæ˜¯ä¸å¯ä»¥çš„ï¼ŒäºŽæ˜¯å€ŸåŠ©soundFlowerè¿™æ¬¾è½¯ä»¶å¯ä»¥å®žçŽ°ï¼Œåœ¨è…¾è®¯ä¼šè®®ä¸Šé€‰æ‹©soundflower (64ch)è¿™ä¸ªé€šé“ã€‚ OBSé‡Œè®¾ç½®ä¹Ÿé€‰æ‹©soundflower (64ch)å¯ä»¥åªå°†è…¾è®¯ä¼šè®®çš„å£°éŸ³æ’­å‡ºåŽ»ã€‚ ç„¶è€Œï¼Œè¿™æ ·æœ‰äº§ç”Ÿä¸ªæ–°é—®é¢˜ï¼Œè…¾è®¯ä¼šè®®çš„å£°éŸ³éƒ½è¢«OBSæ‹¨å‡ºåŽ»äº†ï¼Œè‡ªå·±çš„ç”µè„‘ç«¯å´å¬ä¸è§äº†ï¼ŒäºŽæ˜¯å‚è€ƒåœ¨MacOSä¸Šåˆ©ç”¨OBS+Soundflowerå†…å½•å£°éŸ³ä¸Žç›´æ’­è¿™ä¸ªæ•™ç¨‹é…ç½®äº†èšåˆè¾“å…¥å’Œæ··åˆè¾“å‡ºï¼Œç›¸å½“äºŽå°†ä¸€ä¸ªå£°éŸ³è¿›è¡Œäº†æ‰©å±•ï¼Œè¿™æ ·æ‰å¦¥å½“äº†ã€‚ å‚è€ƒclojureå®žæˆ˜â€”â€”IOï¼ˆ1ï¼‰åœ¨MacOSä¸Šåˆ©ç”¨OBS+Soundflowerå†…å½•å£°éŸ³ä¸Žç›´æ’­]]></content>
      <categories>
        <category>cljs</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Pro V4å®‰è£…"è¾›"è·¯åŽ†ç¨‹]]></title>
    <url>%2F2020%2F08%2F09%2FAnt%20Design%20Pro%20V4%E5%AE%89%E8%A3%85%22%E8%BE%9B%22%E8%B7%AF%E5%8E%86%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æ–°ç‰ˆæœ¬antd proåŽå°é¡¹ç›®çš„demoæ­å»ºä½¿ç”¨ç®€ä¹¦åœ°å€ ä»¥å‰å®‰è£…ant design proä»Žgithubä¸Šcloneä¸‹æ¥ï¼Œä¸¤å¥è¯å°±åœ¨æµè§ˆå™¨çœ‹åˆ°ç™»å½•é¡µé¢äº†ï¼ŒçŽ°åœ¨è¿™ä¸ªä¸œè¥¿è¶Šæ¥è¶Šè‡ƒè‚¿äº†ï¼Œæˆ‘å°±æƒ³è¦ä¸ªé¡µé¢ï¼Œè·‘èµ·æ¥ç»™å®¢æˆ·çœ‹çœ‹æ ·å­ï¼Œç»“æžœåºŸäº†è€åŠ²äº†ï¼Œä¹Ÿä¸çŸ¥é“éƒ½å¾€é‡Œé¢æžäº†å•¥ã€‚ ä»Šå¤©è®°å½•ä¸€ä¸‹å§ã€‚å‚è€ƒå®˜ç½‘æ•™ç¨‹.é€‰æ‹©ant-design-pro,Pro V4ï¼ŒTypeScriptï¼Œcomplete.12345678910111213141516$ npm create umi? Select the boilerplate type ant-design-pro? ðŸ§™ Be the first to experience the new umi@3 ? Pro V4? ðŸ¤“ Which language do you want to use? TypeScript? ðŸš€ Do you need all the blocks or a simple scaffold? complete&gt; ðŸ™ˆ complete mode can only use the version of antd@4Cloning into &apos;/Users/marvin/git/opensource/react/antd-pro&apos;...remote: Enumerating objects: 564, done.remote: Counting objects: 100% (564/564), done.remote: Compressing objects: 100% (481/481), done.remote: Total 564 (delta 89), reused 318 (delta 62), pack-reused 0Receiving objects: 100% (564/564), 461.41 KiB | 435.00 KiB/s, done.Resolving deltas: 100% (89/89), done.&gt; ðŸšš clone success&gt; Clean up...âœ¨ File Generate Done é¡¹ç›®åˆ›å»ºæˆåŠŸåŽæ‰§è¡Œnpm install,å‡ºä¸ªé”™12345678910111213141516171819202122&gt; node-pty@0.10.0-beta9 install /Users/marvin/git/opensource/react/antd-pro/node_modules/node-pty&gt; node scripts/install.jsgyp WARN install got an error, rolling back installgyp ERR! configure errorgyp ERR! stack ZlibError: zlib: unexpected end of filegyp ERR! stack at Unzip.write (/Users/marvin/.nvm/versions/node/v14.5.0/lib/node_modules/npm/node_modules/minizlib/index.js:147:22)gyp ERR! stack at Unzip.flush (/Users/marvin/.nvm/versions/node/v14.5.0/lib/node_modules/npm/node_modules/minizlib/index.js:98:10)gyp ERR! stack at Unzip.end (/Users/marvin/.nvm/versions/node/v14.5.0/lib/node_modules/npm/node_modules/minizlib/index.js:104:10)gyp ERR! stack at Unpack.end (/Users/marvin/.nvm/versions/node/v14.5.0/lib/node_modules/npm/node_modules/tar/lib/parse.js:421:21)gyp ERR! stack at IncomingMessage.onend (_stream_readable.js:679:10)gyp ERR! stack at Object.onceWrapper (events.js:420:28)gyp ERR! stack at IncomingMessage.emit (events.js:326:22)gyp ERR! stack at IncomingMessage.&lt;anonymous&gt; (/Users/marvin/.nvm/versions/node/v14.5.0/lib/node_modules/npm/node_modules/request/request.js:1000:23)gyp ERR! stack at IncomingMessage.emit (events.js:326:22)gyp ERR! stack at TLSSocket.socketCloseListener (_http_client.js:435:11)gyp ERR! System Darwin 19.6.0gyp ERR! command &quot;/Users/marvin/.nvm/versions/node/v14.5.0/bin/node&quot; &quot;/Users/marvin/.nvm/versions/node/v14.5.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js&quot; &quot;rebuild&quot;gyp ERR! cwd /Users/marvin/git/opensource/react/antd-pro/node_modules/node-ptygyp ERR! node -v v14.5.0gyp ERR! node-gyp -v v5.1.0gyp ERR! not ok æŸ¥äº†åŠå¤©ï¼ŒæŒ‰ç…§https://www.jianshu.com/p/a2a2ddeb174cçš„æ€è·¯ï¼Œé”™è¯¯å˜æˆäº†ä¸‹é¢è¿™ä¸ª1234567891011121314151617181920212223$ npm install&gt; fsevents@1.2.13 install /Users/marvin/git/opensource/react/antd-pro/node_modules/jest-environment-jsdom-fourteen/node_modules/fsevents&gt; node install.jsNo receipt for &apos;com.apple.pkg.CLTools_Executables&apos; found at &apos;/&apos;.No receipt for &apos;com.apple.pkg.DeveloperToolsCLILeo&apos; found at &apos;/&apos;.No receipt for &apos;com.apple.pkg.DeveloperToolsCLI&apos; found at &apos;/&apos;.gyp: No Xcode or CLT version detected!gyp ERR! configure errorgyp ERR! stack Error: `gyp` failed with exit code: 1gyp ERR! stack at ChildProcess.onCpExit (/Users/marvin/.nvm/versions/node/v12.8.0/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:344:16)gyp ERR! stack at ChildProcess.emit (events.js:203:13)gyp ERR! stack at Process.ChildProcess._handle.onexit (internal/child_process.js:272:12)gyp ERR! System Darwin 19.6.0gyp ERR! command &quot;/Users/marvin/.nvm/versions/node/v12.8.0/bin/node&quot; &quot;/Users/marvin/.nvm/versions/node/v12.8.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js&quot; &quot;rebuild&quot;gyp ERR! cwd /Users/marvin/git/opensource/react/antd-pro/node_modules/jest-environment-jsdom-fourteen/node_modules/fseventsgyp ERR! node -v v12.8.0gyp ERR! node-gyp -v v5.0.3gyp ERR! not ok åœ¨æŸ¥è¯¢é”™è¯¯ï¼Œç»ˆäºŽhttps://juejin.im/post/6844904058076020743ä¸Šæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆã€‚ è§£å†³æ–¹æ¡ˆ å°è¯•ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®å¤1$ xcode-select --install å¤åˆ¶ä»£ç ç³»ç»Ÿæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š1xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates å¤åˆ¶ä»£ç è€Œäº‹å®žä¸Šå¹¶æ²¡æœ‰æ‰€è°“çš„â€Software Updateâ€å¯ä»¥æ›´æ–° æ­£ç¡®å§¿åŠ¿ä¸€ç­¹èŽ«å±•ä¹‹é™…ï¼Œæ‰¾åˆ°å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼š12$ sudo rm -rf $(xcode-select -print-path)$ xcode-select --install ç»ˆäºŽå®‰è£…æˆåŠŸäº†ã€‚]]></content>
      <categories>
        <category>antd</category>
      </categories>
      <tags>
        <tag>antd</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®ä¿¡é…ç½®æœ¬åœ°å…¬ä¼—å·å¼€å‘çŽ¯å¢ƒ]]></title>
    <url>%2F2020%2F08%2F06%2F%E5%BE%AE%E4%BF%A1%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[é…ç½®å¾®ä¿¡å…¬ä¼—å·çš„æœ¬åœ°å¼€å‘çŽ¯å¢ƒç®€ä¹¦åœ°å€ ç¬¬ä¸€æ­¥ï¼šç”³è¯·å¾®ä¿¡æµ‹è¯•å·https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&amp;t=sandbox/index ç¬¬äºŒæ­¥ï¼šåœ¨ç”³è¯·çš„æµ‹è¯•å·ä¸Šé…ç½®å›žè°ƒåŸŸåç­‰ ç¬¬ä¸‰æ­¥ï¼šæ ¸å¿ƒåœ¨ä¸Šé¢çš„| ç½‘é¡µå¸å· | [ç½‘é¡µæŽˆæƒèŽ·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯]&quot;ç½‘é¡µæŽˆæƒèŽ·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯&quot;åŽç‚¹å‡»ã€ä¿®æ”¹ã€‘,å¢žåŠ æœ¬åœ°ipï¼Œæ³¨æ„ ä¸€å®šå¸¦ç€ç«¯å£å· ç¬¬å››æ­¥ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·è®¿é—®åœ°å€redirect_uriè¦åœ¨è¿™å„¿è¿›è¡ŒURLç¼–ç ï¼Œç„¶åŽç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€1https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d8c0247f15f96df&amp;redirect_uri=http%3a%2f%2f192.168.0.110%3a8000%2fweixin-redirect&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect å¸¸è§é”™è¯¯ redirect_uri å‚æ•°é”™è¯¯ å¾®ä¿¡æµ‹è¯•å·ä¸Šæ²¡æœ‰é…ç½®æŽˆæƒå›žè°ƒåŸŸå é…ç½®çš„æŽˆæƒå›žè°ƒé¡µé¢åŸŸåè·Ÿè¯·æ±‚æ—¶å¸¦ç€çš„å‚æ•°ä¸ä¸€æ · æœ¬åœ°å¼€å‘æœ‰ç«¯å£ï¼Œé…ç½®çš„å›žè°ƒåŸŸåæ²¡æœ‰å¸¦ç€ç«¯å£]]></content>
      <categories>
        <category>cljs</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€è½¬ã€‘Clojure å¼•ç”¨javaæ–‡ä»¶ lein javac æŠ¥ClassNotFoundException]]></title>
    <url>%2F2020%2F07%2F23%2F%E3%80%90%E8%BD%AC%E3%80%91Clojure%20%E5%BC%95%E7%94%A8java%E6%96%87%E4%BB%B6%20lein%20javac%20%E6%8A%A5ClassNotFoundException%2F</url>
    <content type="text"><![CDATA[åœ¨luminus webçš„clojureæ¨¡æ¿é‡Œç›´æŽ¥ä½¿ç”¨javaæ–‡ä»¶çš„æ­£ç¡®å§¿åŠ¿ã€‚ç®€ä¹¦åœ°å€ ç»è¿‡ä¸¤æ¬¡æ‰å½»åº•è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼ŒæŠŠåŒäº‹æ€»è®¡çš„åœ¨è‡ªå·±çš„å°æœ¬å­ä¸Šè½¬å­˜ä¸€ä¸‹ã€‚çŒ›æˆ³æ­¤å¤„)è¿›å…¥æˆ‘å¸blogç³»ç»Ÿã€‚ åœ¨Clojureä¸­ä½¿ç”¨Luminusè¿›è¡ŒWebå¼€å‘æ—¶ï¼Œå¦‚æžœæœ‰è‡ªå®šä¹‰Javaæ–‡ä»¶ï¼Œåœ¨å¼€å‘çŽ¯å¢ƒä¸­ç¼–è¯‘ï¼ˆlein javacï¼‰æ—¶ï¼Œä¼šå‡ºçŽ°ClassNotFoundExceptioné”™è¯¯ã€‚ äº§ç”ŸåŽŸå› ï¼šåœ¨å¼€å‘çŽ¯å¢ƒä¸‹ï¼Œenv-&gt;dev-&gt;clj-&gt;user.cljæ–‡ä»¶ä¼šè‡ªåŠ¨åŠ è½½ï¼Œå¹¶ä¸”æ˜¯åœ¨Javaæ–‡ä»¶ç¼–è¯‘å‰æ‰§è¡Œã€‚user.cljæ–‡ä»¶ä¼šå¼•ç”¨coreä¸‹çš„start-appï¼Œcore.cljæ–‡ä»¶åˆä¼šå¼•ç”¨handlerï¼Œå¦‚æžœåœ¨handlerçš„å¼•ç”¨æ–‡ä»¶ä¸­å¼•ç”¨äº†è‡ªå®šä¹‰Javaç±»æ—¶ï¼Œå°±ä¼šå‡ºçŽ°ClassNotFoundExceptioné”™è¯¯ã€‚ è§£å†³æ–¹æ³•ä¸€ï¼šä¿®æ”¹user.cljæ–‡ä»¶å 1234567;; 1. å°† user.clj æ–‡ä»¶åä¿®æ”¹ä¸º hctest.clj;; 2. ä¿®æ”¹ hctest.clj æ–‡ä»¶å‘½åç©ºé—´(ns hctest);; 3. ä¿®æ”¹ project.clj æ–‡ä»¶ä¸‹çš„ :project/dev -&gt; :repl-options -&gt; :init-ns å€¼&#123;:project/dev &#123;:repl-options &#123;:init-ns hctest&#125;&#125;&#125; è§£å†³æ–¹æ³•äºŒï¼šç§»åŠ¨user.cljæ–‡ä»¶ 1234567891011;; å¯é€‰ --&gt; 1. ä¿®æ”¹ project.clj ä¸‹çš„ :profiles -&gt; :uberjar -&gt; :prep-tasksï¼Œåœ¨å¼€å§‹æ·»åŠ  "javac"&#123;:profiles &#123;:uberjar &#123;:prep-tasks ["javac" "compile"]&#125;&#125;&#125;;; 2. å°† env-&gt;clj-&gt;user.clj æ–‡ä»¶ç§»åˆ°åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯”å¦‚ env-&gt;clj-&gt;empty-&gt; user.cljï¼Œå¹¶ä¿®æ”¹å‘½åç©ºé—´ä¸º empty.user(ns empty.user);; 3. ä¿®æ”¹ project.clj ä¸‹çš„ :project/dev -&gt; :repl-options -&gt; :init-ns å€¼&#123;:project/dev &#123;:repl-options &#123;:init-ns empty.user&#125;&#125;&#125; å‚è€ƒï¼šhttps://github.com/luminus-framework/luminus-template/issues/319]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[postgressqlæ•°æ®åº“+postgrestæœåŠ¡æ­å»º]]></title>
    <url>%2F2020%2F06%2F21%2Fpostgressql%E6%95%B0%E6%8D%AE%E5%BA%93%2Bpostgrest%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[åœ¨linuxä¸Šæ­å»ºpostgresqlå’ŒpostgrestæœåŠ¡ç®€ä¹¦åœ°å€ çŽ¯å¢ƒï¼šubuntu å¼€ç¯‡postgresqlæ˜¯åˆä¸€æ¬¾å¼€æºçš„å…³ç³»æ•°æ®åº“ï¼Œç»å¸¸æœ‰äººæ‹¿æ¥è·Ÿmysqlè¿›è¡Œå¯¹æ¯”ï¼Œæ¯”å¦‚PostgreSQL ä¸Ž MySQL ç›¸æ¯”ï¼Œä¼˜åŠ¿ä½•åœ¨ï¼Ÿï¼Œä¸Šç½‘æœäº†ä¸‹ï¼Œè¿˜çœŸä¸å°‘ã€‚æœ¬äººäº†è§£å¤ªå°‘ï¼Œä¸åšè¯„è®ºï¼Œè€æ¿è¦æ±‚ç”¨ç”¨å’±å°±ç”¨ï¼Œåˆå¯ä»¥å­¦ä¸œè¥¿äº†ï¼ˆåˆæœ‰å‘è¦è¸©äº†ï¼‰ï¼Œå­¦æ— æ­¢å¢ƒâ€¦ã€‚ postgresSql1.å®‰è£…æœåŠ¡12sudo apt updatesudo apt install postgresql postgresql-contrib 2.è¿›å…¥æœåŠ¡ä¸Šä¸€æ­¥å®‰è£…å®ŒæˆåŽï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼š12service postgresql statusservice postgresql start é»˜è®¤æƒ…å†µä¸‹ï¼ŒPostgreSQL ä¼šåˆ›å»ºä¸€ä¸ªæ‹¥æœ‰æ‰€æƒé™çš„ç‰¹æ®Šç”¨æˆ· postgresã€‚è¦å®žé™…ä½¿ç”¨ PostgreSQLï¼Œä½ å¿…é¡»å…ˆç™»å½•è¯¥è´¦æˆ·ï¼š1sudo su postgres ä½ çš„æç¤ºç¬¦ä¼šæ›´æ”¹ä¸ºç±»ä¼¼äºŽä»¥ä¸‹çš„å†…å®¹ï¼š1postgres@ubuntu-VirtualBox:/home/ubuntu$ çŽ°åœ¨ï¼Œä½¿ç”¨ psql æ¥å¯åŠ¨ PostgreSQL Shellï¼š1psql ä½ åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹æç¤ºç¬¦ï¼š1postgress=# è¦æŸ¥çœ‹çŽ°æœ‰çš„æ‰€æœ‰è¡¨ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š1\l ä½ å¯ä»¥è¾“å…¥ \q ä»¥é€€å‡ºï¼Œè¾“å…¥ \? èŽ·å–å¸®åŠ©ã€‚å…¶ä»–æ›´å¤šå‘½ä»¤å‚è€ƒï¼šPostgreSQLå‘½ä»¤è¡Œå¸¸ç”¨å‘½ä»¤psql 3.ä¿®æ”¹postgresæ•°æ®åº“ç”¨æˆ·çš„å¯†ç  1) æ‰“å¼€å®¢æˆ·ç«¯å·¥å…·ï¼ˆpsqlï¼‰ 1sudo -u postgres psql (æˆ–è€…åˆ†ä¸¤æ­¥ï¼š sudo -u postgres -i; psql) å…¶ä¸­ï¼Œsudo -u postgresæ˜¯ä½¿ç”¨postgres ç”¨æˆ·ç™»å½•çš„æ„æ€ PostgreSQLæ•°æ®é»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªpostgresçš„æ•°æ®åº“ç”¨æˆ·ä½œä¸ºæ•°æ®åº“çš„ç®¡ç†å‘˜ï¼Œå¯†ç æ˜¯éšæœºçš„ï¼Œåˆ›å»ºç”¨æˆ·ï¼š1postgres=# postgres=#ä¸ºPostgreSQLä¸‹çš„å‘½ä»¤æç¤ºç¬¦ï¼Œâ€“æ³¨æ„æœ€åŽçš„åˆ†å·ï¼› 2) é€€å‡ºPostgreSQL psqlå®¢æˆ·ç«¯1postgres=# \q ä¿®æ”¹ubuntuæ“ä½œç³»ç»Ÿçš„postgresç”¨æˆ·çš„å¯†ç ï¼ˆå¯†ç è¦ä¸Žæ•°æ®åº“ç”¨æˆ·postgresçš„å¯†ç ç›¸åŒï¼‰ åˆ‡æ¢åˆ°rootç”¨æˆ· 1su root åˆ é™¤PostgreSQLç”¨æˆ·å¯†ç  1sudo passwd -d postgres passwd -d æ˜¯æ¸…ç©ºæŒ‡å®šç”¨æˆ·å¯†ç çš„æ„æ€ è®¾ç½®PostgreSQLç³»ç»Ÿç”¨æˆ·çš„å¯†ç 1sudo -u postgres passwd æŒ‰ç…§æç¤ºï¼Œè¾“å…¥ä¸¤æ¬¡æ–°å¯†ç  è¾“å…¥æ–°çš„ UNIX å¯†ç  é‡æ–°è¾“å…¥æ–°çš„ UNIX å¯†ç  passwdï¼šå·²æˆåŠŸæ›´æ–°å¯†ç  ä¿®æ”¹PostgresSQLæ•°æ®åº“é…ç½®å®žçŽ°è¿œç¨‹è®¿é—®1vi /etc/postgresql/9.5/main/postgresql.conf ç›‘å¬ä»»ä½•åœ°å€è®¿é—®ï¼Œä¿®æ”¹è¿žæŽ¥æƒé™1#listen_addresses = &apos;localhost&apos; æ”¹ä¸º listen_addresses = &apos;*&apos; (uncomment it) å¯ç”¨å¯†ç éªŒè¯12#password_encryption = on æ”¹ä¸º password_encryption = on (uncomment it)vi /etc/postgresql/9.6/main/pg_hba.conf åœ¨æ–‡æ¡£æœ«å°¾åŠ ä¸Šä»¥ä¸‹å†…å®¹1host all all 0.0.0.0 0.0.0.0 md5 åˆ›å»ºç”¨æˆ·ã€æ•°æ®åº“ï¼ŒæŽˆæƒ123postgres=# CREATE USER training WITH CREATEROLE PASSWORD &apos;training_plat&apos;;postgres=# CREATE DATABASE traindb OWNER lizy;postgres=# GRANT ALL PRIVILEGES ON DATABASE traindb to lizy; postgresqlçš„æ•™ç¨‹ï¼Œç›®å‰åˆšä¸Šæ‰‹ï¼ŒæŽ¨èï¼š postgrestæœåŠ¡ä½¿ç”¨æºç ä¸‹è½½å®‰è£…çš„æ–¹å¼ 1. å®‰è£…1234# download from https://github.com/PostgREST/postgrest/releases/latest# ä¸‹è½½åŽè¿›è¡Œè§£åŽ‹curl https://github.com/PostgREST/postgrest/releases/download/v7.0.1/postgrest-v7.0.1-linux-x64-static.tar.xztar xfJ postgrest-v7.0.1-linux-x64-static.tar.xz è§£åŽ‹æ–‡ä»¶åªæœ‰ä¸€ä¸ªåä¸ºpostgrestçš„å¯æ‰§è¡Œè„šæœ¬ã€‚ 2.è¿è¡ŒpostgrestæœåŠ¡è¿è¡Œpostgrestæ˜¯éœ€è¦æŒ‡å®šä¸€ä¸ªconfæ–‡ä»¶ï¼Œæ–‡ä»¶åå¯ä»¥éšæ„ï¼Œæ¯”å¦‚tutorial.conf,å†…å®¹å¦‚ä¸‹ï¼š123456db-uri = &quot;postgres://training:training_plat@localhost:5432/traindb&quot;db-schema = &quot;testapp_db, basic_auth,global_info&quot;db-anon-role = &quot;training&quot;jwt-secret = &quot;MqQx7uwtxH3JjphNvRzgeQMkNjDt5JzfpqWwNHrQ13c=&quot;log_statement = &quot;all&quot;server-port = 3032 å¦‚æžœä¸æŒ‡å®šserver-port,åˆ™é»˜è®¤çš„ç«¯å£æ˜¯3000ã€‚æœ‰äº†é…ç½®æ–‡ä»¶åŽåœ¨è§£åŽ‹åŽçš„ç›®å½•æ‰§è¡Œ1./postgrest tutorial.conf æŽ¨èï¼šæ€»æ˜¯åœ¨è§£åŽ‹ç›®å½•æ‰§è¡Œå¯æ‰§è¡Œè„šæœ¬ï¼Œå†™è·¯å¾„è¿˜æ˜¯éº»çƒ¦äº†äº›ï¼Œå¯ä»¥å°†æ­¤è„šæœ¬åŠ å…¥çŽ¯å¢ƒå˜é‡/usr/local/binä¸‹ï¼Œè¿™æ ·ä»»æ„ç›®å½•éƒ½å¯ä»¥æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ ä¸€ä¸ªç®€å•ç”¨æ¥å¯åŠ¨postgrestçš„è„šæœ¬ä½œç”¨ï¼šä¿®æ”¹äº†æ•°æ®åº“ä»¥åŽï¼Œéœ€è¦é‡å¯postgrestæœåŠ¡ï¼ŒæŽ¥å£æ‰èƒ½ç”Ÿæ•ˆï¼Œåœ¨jenkinsä¸Šå¯ä»¥æ‰§è¡Œè„šæœ¬é‡å¯ï¼Œè„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718#!/bin/bash#èŽ·å–ç¬¬1ä¸ªå‚æ•°ï¼Œconfæ–‡ä»¶ï¼Œè·¯å¾„+æ–‡ä»¶å#èŽ·å–ç¬¬2ä¸ªå‚æ•°ï¼ŒpostgrestæœåŠ¡çš„logç›®å½•config_file=$1log_dir=$2echo &quot;================== server restart start=======================&quot;pid=`ps -aux | grep $&#123;config_file&#125; | grep -v bash |grep -v grep | awk &apos;&#123;print $2&#125;&apos;`if [ -n &quot;$&#123;pid&#125;&quot; ]then#!kill -9 å¼ºåˆ¶ç»ˆæ­¢ echo &quot;kill -9 çš„pid:&quot; $pid kill -9 $pidfinohup postgrest $&#123;config_file&#125; &gt; $&#123;log_dir&#125;nohup.log 2&gt;&amp;1 &amp;echo &quot;================== server restart end =======================&quot; é¡ºä¾¿ï¼ŒæŽ¨èä¸€æ¬¾macçš„æ•°æ®åº“è¿žæŽ¥å®¢æˆ·ç«¯Dbeaverå°¤å…¶æ˜¯çœ‹postgresqlçš„è¡¨å…³è”å…³ç³»è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚ å‚è€ƒInstall Postgresql on UbuntuPostgRESTå®˜ç½‘]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>postgrest</tag>
        <tag>postgresql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[emacsçš„cider-debug-defun-point]]></title>
    <url>%2F2020%2F06%2F08%2Femacs%E7%9A%84cider-debug-defun-point%2F</url>
    <content type="text"><![CDATA[ç”¨emacså·¥å…·debugåŽç«¯çš„cljä»£ç  ç®€ä¹¦åœ°å€ æ¼”ç¤ºä»£ç 1234567891011121314151617181920;; 1. Call M-x cider-debug-init-connectiong(only needed once),;; 2. Call M-x cider-debug-defun-at-ponit with point inside this defn.;; 3. Run the function, and using key word;; 4. link:https://docs.cider.mx/cider/debugging/debugger.html(defn foo [n] (map (partial * 2) (filter even? (range 0 n))));; break out when reaching a condition(defn foo2 [] (dotimes [i 10] #dbg ^&#123;:break/when (= i 7)&#125; (prn i)))(defn eval-msg [&#123;:keys [inspect] :as msg&#125;] (if inspect #break (clojure.inspector/inspect msg) msg)) è¿›å…¥debugM-x cider-debug-defun-at-point å¸¸è§çš„æ“ä½œï¼š j Inject a value into running code e C-c M-: è¡¨è¾¾å¼æ±‚å€¼ enlightenæ¨¡å¼ï¼šæŸ¥çœ‹æœ€åŽä¸€æ¬¡è¡¨è¾¾å¼çš„å€¼M-x cider-enlighten-modeC-M-x æˆ–è€… C-x C-e å¼€å§‹æ‰§è¡Œã€‚ C-c C-kå–æ¶ˆæ“ä½œã€‚M-x cider-enlighten-modeå…³é—­enlightenæ¨¡å¼123456789(defn foo2 [x] (let [y (* 3 x)] (+ x y)))(defn bar [x] (dotimes [i x] (foo2 i)))(bar 5) å‚è€ƒdebuggerEnlighten]]></content>
      <categories>
        <category>emacs</category>
      </categories>
      <tags>
        <tag>emacs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[emacsé‡Œçš„å°æ¸¸æˆ]]></title>
    <url>%2F2020%2F04%2F24%2Femacs%E9%87%8C%E7%9A%84%E5%B0%8F%E6%B8%B8%E6%88%8F%2F</url>
    <content type="text"><![CDATA[ç‰©æ–™çš„æ—¶å€™çŽ©çŽ©emacsé‡Œçš„å°æ¸¸æˆæ”¾æ¾æ”¾æ¾ ç®€ä¹¦åœ°å€ å¼•ç”¨ï¼šhttps://linux.cn/article-11949-1-rel.html 1. æ¶ˆæ¶ˆä¹M-x bubble æ¸¸æˆç›¸å½“ç®€å•ï¼šä½ å¿…é¡»ç”¨å°½å¯èƒ½å°‘ç§»åŠ¨æ¸…é™¤å°½å¯èƒ½å¤šçš„â€œæ³¡æ³¡â€ã€‚å½“ä½ ç§»é™¤æ°”æ³¡æ—¶ï¼Œå…¶ä»–æ°”æ³¡ä¼šæŽ‰è½å¹¶ç²˜åœ¨ä¸€èµ·ã€‚è¿™æ˜¯ä¸€æ¬¾æœ‰è¶£çš„æ¸¸æˆï¼Œæ­¤å¤–å¦‚æžœä½ ä½¿ç”¨ Emacs çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå®ƒè¿˜æ”¯æŒå›¾åƒæ˜¾ç¤ºã€‚è€Œä¸”å®ƒè¿˜æ”¯æŒé¼ æ ‡ã€‚ ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ M-x bubbles-set-game-&lt;difficulty&gt;æ¥è®¾ç½®éš¾åº¦ï¼Œå…¶ä¸­&lt;difficulty&gt;å¯ä»¥æ˜¯è¿™äº›ä¹‹ä¸€ï¼šeasyã€mediumã€difficultã€hard æˆ– userdefinedã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼šM-x custom-group bubblesæ¥æ›´æ”¹å›¾å½¢ã€ç½‘æ ¼å¤§å°å’Œé¢œè‰²ã€‚ ç”±äºŽå®ƒå³ç®€å•åˆæœ‰è¶£ï¼Œè¿™æ˜¯ Emacs ä¸­æˆ‘æœ€å–œæ¬¢çš„æ¸¸æˆä¹‹ä¸€ã€‚ 2. äº”å­æ£‹ä½ å¿…é¡»å°† 5 ä¸ªæ–¹å—è¿žæˆä¸€æ¡çº¿ï¼Œäº•å­—æ£‹é£Žæ ¼ã€‚ä½ å¯ä»¥è¿è¡Œ M-x gomokuæ¥ä¸Ž Emacs å¯¹æŠ—ã€‚æ¸¸æˆè¿˜æ”¯æŒé¼ æ ‡ï¼Œéžå¸¸æ–¹ä¾¿ã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ gomoku ç»„æ¥è°ƒæ•´ç½‘æ ¼çš„å¤§å°ã€‚ 3. ä¹’ä¹“ã€è´ªé£Ÿè›‡ã€ä¿„ç½—æ–¯æ–¹å—è¿™äº›ç»å…¸æ¸¸æˆéƒ½æ˜¯ä½¿ç”¨ Emacs åŒ… gamegrid å®žçŽ°çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºŽæž„å»ºç½‘æ ¼æ¸¸æˆï¼ˆå¦‚ä¿„ç½—æ–¯æ–¹å—å’Œè´ªåƒè›‡ï¼‰çš„é€šç”¨æ¡†æž¶ã€‚gamegrid åŒ…çš„ä¼Ÿå¤§ä¹‹å¤„åœ¨äºŽå®ƒåŒæ—¶å…¼å®¹å›¾å½¢åŒ–å’Œç»ˆç«¯ Emacsï¼šå¦‚æžœä½ åœ¨ GUI ä¸­è¿è¡Œ Emacsï¼Œä½ ä¼šå¾—åˆ°ç²¾ç¾Žçš„å›¾å½¢ï¼›å¦‚æžœä½ æ²¡æœ‰ï¼Œä½ çœ‹åˆ°ç®€å•çš„ ASCII è‰ºæœ¯ã€‚ ä½ å¯ä»¥é€šè¿‡è¾“å…¥ M-x pongã€M-x snakeã€M-x tetris æ¥è¿è¡Œè¿™äº›æ¸¸æˆã€‚ 4. Zoneæˆ‘çš„å¦ä¸€ä¸ªæœ€çˆ±ã€‚è¿™æ˜¯ä¸€ä¸ªå±å¹•ä¿æŠ¤ç¨‹åºâ€”â€”æˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæ˜¯ä¸€ç³»åˆ—çš„å±å¹•ä¿æŠ¤ç¨‹åºã€‚ è¾“å…¥ M-x zoneï¼Œç„¶åŽçœ‹çœ‹å±å¹•ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼ ä½ å¯ä»¥é€šè¿‡è¿è¡Œ M-x zone-when-idleï¼ˆæˆ–ä»Ž elisp è°ƒç”¨å®ƒï¼‰æ¥é…ç½®å±å¹•ä¿æŠ¤ç¨‹åºçš„ç©ºé—²æ—¶é—´ï¼Œæ—¶é—´ä»¥ç§’ä¸ºå•ä½ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ M-x zone-leave-me-aloneæ¥å…³é—­å®ƒã€‚ å¦‚æžœåœ¨ä½ çš„åŒäº‹çœ‹ç€çš„æ—¶å€™å¯åŠ¨å®ƒï¼Œä½ çš„åŒäº‹è‚¯å®šä¼šæŠ“ç‹‚çš„ã€‚go]]></content>
      <categories>
        <category>emacs</category>
      </categories>
      <tags>
        <tag>emacs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux shell ç›‘æŽ§åº”ç”¨å­˜æ´»å¹¶å‘é‚®ä»¶é€šçŸ¥]]></title>
    <url>%2F2020%2F04%2F18%2FLinux%20shell%20%E7%9B%91%E6%8E%A7%E5%BA%94%E7%94%A8%E5%AD%98%E6%B4%BB%E5%B9%B6%E5%8F%91%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5%2F</url>
    <content type="text"><![CDATA[curléœ€è¦ç›‘æŽ§çš„æŽ¥å£ï¼Œå°†ç»“æžœå‘é€é‚®ä»¶é€šçŸ¥ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­RESTæŽ¥å£çš„è¿”å›žæ•°æ®å†…å®¹ã€‚ç®€ä¹¦åœ°å€ éœ€æ±‚ æ¯å¤©æ‰§è¡Œä¸‰æ¬¡ï¼Œåˆ†åˆ«ä¸ºï¼š7:10ï¼Œ12:10ï¼Œ16:10 7:10æ‰§è¡Œæ—¥æœŸå‚æ•°ä¸ºT-1ï¼Œ12:10,16:10æ‰§è¡Œæ—¥æœŸå‚æ•°ä¸ºT(Tæ˜¯æŒ‡å½“å¤©) æ¯æ¬¡æ‰§è¡Œåˆ¤æ–­ä¸€ä¸‹æŽ¥å£è¿”å›žçš„æ•°æ®é‡ï¼Œä»¥é‚®ä»¶å½¢å¼å‘é€ç»™ç›¸å…³äººå‘˜ è„šæœ¬12345678910111213141516171819202122232425262728293031323334353637383940#!/bin/bashvar1=$1webUrls=(&quot;http://sso1169sjdptest.haier.net/fx_app/common/inter?fresh=1&amp;dataType=rrs_fxapp_for_leader&amp;params=period_date::$&#123;var1&#125;&quot;&quot;http://sso1169sjdptest.haier.net/fx_app/common/inter?fresh=1&amp;dataType=rrs_fxapp_m_wl_gongm_result_info_view&amp;params=period_date::$&#123;var1&#125;&quot;&quot;http://sso1169sjdptest.haier.net/fx_app/common/inter?fresh=1&amp;dataType=rrs_fxapp_m_wl_lianq_result_info_view&amp;params=period_date::$&#123;var1&#125;&quot;&quot;http://sso1169sjdptest.haier.net/fx_app/common/inter?fresh=1&amp;dataType=rrs_fxapp_for_soldier_mall_score&amp;params=period_date::$&#123;var1&#125;&quot;)declare -a name#ä½¿ç”¨curlå‘½ä»¤æ£€æŸ¥httpæœåŠ¡å™¨çš„çŠ¶æ€#-mè®¾ç½®curlä¸ç®¡è®¿é—®æˆåŠŸæˆ–å¤±è´¥ï¼Œæœ€å¤§æ¶ˆè€—çš„æ—¶é—´ä¸º5ç§’ï¼Œ5ç§’è¿žæŽ¥æœæœªå“åº”åˆ™è§†ä¸ºæ— æ³•è¿žæŽ¥#-sè®¾ç½®é™é»˜è¿žæŽ¥ï¼Œä¸æ˜¾ç¤ºè¿žæŽ¥æ—¶çš„è¿žæŽ¥é€Ÿåº¦ã€æ—¶é—´æ¶ˆè€—ç­‰ä¿¡æ¯#-oå°†curlä¸‹è½½çš„é¡µé¢å†…å®¹å¯¼å‡ºåˆ°/dev/null(é»˜è®¤ä¼šåœ¨å±å¹•æ˜¾ç¤ºé¡µé¢å†…å®¹)#-wè®¾ç½®curlå‘½ä»¤éœ€è¦æ˜¾ç¤ºçš„å†…å®¹%&#123;http_code&#125;ï¼ŒæŒ‡å®šcurlè¿”å›žæœåŠ¡å™¨çš„çŠ¶æ€ç # å¦‚æžœä¸æ˜¯çœ‹ç»“æžœï¼Œæ˜¯çœ‹httpçŠ¶æ€çš„è¯ä½¿ç”¨å¦‚ä¸‹å‡½æ•°check_http()&#123; status_code=$(curl -m 5 -s-o /dev/null -w %&#123;http_code&#125; https://www.baidu.com)&#125;function httpRequest()&#123; echo &quot;æ—¥æœŸå‚æ•°ï¼š$&#123;var1&#125;&quot; for ((i=0; i&lt;$&#123;#webUrls[@]&#125;; i++)) do echo &quot;é¡ºåºï¼š$&#123;i&#125;ï¼Œè¯·æ±‚ï¼š$&#123;webUrls[i]&#125;&quot; res=$(curl -m 5 -s $&#123;webUrls[i]&#125; | jq &apos;.data&apos; | jq &apos;length&apos;) name[$i]=$res echo $&#123;name[$i]&#125; #ä¸ºæ–¹ä¾¿æ£€æŸ¥ï¼ŒåŠ äº†æ‰“å° done&#125;httpRequest &quot;$@&quot;emailContent=&quot;é“¾æŽ¥æ•°æ®æŽ¥å£ï¼š$&#123;name[0]&#125; ä¸­å¿ƒæ•°æ®æŽ¥å£ï¼š$&#123;name[1]&#125; é“¾ç¾¤æ•°æ®æŽ¥å£ï¼š$&#123;name[2]&#125; è¯„åˆ†æ•°æ®æŽ¥å£ï¼š$&#123;name[3]&#125;&quot;echo &quot;$&#123;emailContent&#125;&quot; | mail -s &apos;4ä¸ªæŒ‡æ ‡æŽ¥å£å½“å‰çš„æ•°æ®é€šçŸ¥&apos; marvin.ma@redcreation.net,zhangsan@163.com æ”¶åˆ°çš„é‚®ä»¶ï¼š çŸ¥è¯†å‚¨å¤‡èŽ·å–å½“å‰æ—¶é—´ï¼š123time=$(date &quot;+%Y%m%d-%H%M%S&quot;)time2=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;)echo &quot;$&#123;time&#125;&quot; æ˜¨å¤©:1echo $(date +&quot;%Y-%m-%d&quot; -d &quot;-1day&quot;) å…¶ä»–å‚è€ƒï¼šshell date èŽ·å–æ˜¨å¤©æ—¥æœŸ curl åˆ°jsonå†…å®¹:1234567#ä½¿ç”¨curlå‘½ä»¤æ£€æŸ¥httpæœåŠ¡å™¨çš„çŠ¶æ€#-mè®¾ç½®curlä¸ç®¡è®¿é—®æˆåŠŸæˆ–å¤±è´¥ï¼Œæœ€å¤§æ¶ˆè€—çš„æ—¶é—´ä¸º5ç§’ï¼Œ5ç§’è¿žæŽ¥æœæœªå“åº”åˆ™è§†ä¸ºæ— æ³•è¿žæŽ¥#-sè®¾ç½®é™é»˜è¿žæŽ¥ï¼Œä¸æ˜¾ç¤ºè¿žæŽ¥æ—¶çš„è¿žæŽ¥é€Ÿåº¦ã€æ—¶é—´æ¶ˆè€—ç­‰ä¿¡æ¯#-oå°†curlä¸‹è½½çš„é¡µé¢å†…å®¹å¯¼å‡ºåˆ°/dev/null(é»˜è®¤ä¼šåœ¨å±å¹•æ˜¾ç¤ºé¡µé¢å†…å®¹)#-wè®¾ç½®curlå‘½ä»¤éœ€è¦æ˜¾ç¤ºçš„å†…å®¹%&#123;http_code&#125;ï¼ŒæŒ‡å®šcurlè¿”å›žæœåŠ¡å™¨çš„çŠ¶æ€ç res=$(curl -s &quot;https://www.baidu.com&quot;)echo $res æŽ¥æ”¶å‚æ•°ï¼š12345678910#!/bin/bash# å¿…é¡»å†™ç»å¯¹è·¯å¾„ï¼Œä¸ç„¶crontabä¸æ‰§è¡Œï¼Œå› ä¸ºæ‰¾ä¸åˆ°è·¯å¾„log=/opt/jc/task.logvar1=$1test()&#123; time=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;) echo &quot;$&#123;time&#125; do something, set var1 = $&#123;var1&#125;&quot; &gt;&gt; $log&#125;test æµ‹è¯•å®šæ—¶ä»»åŠ¡1vi /etc/crontab æ·»åŠ ä¸€è¡Œï¼Œæ¯2åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡1*/2 * * * * root /opt/jc/curl.sh hahaha ä¸ºäº†å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘çš„crontabçš„å†…å®¹å¦‚ä¸‹1210 7 * * * root /opt/jc/curl.sh $(date +&quot;%Y%m%d&quot; -d &quot;-1day&quot;)10 12,16 * * * root /opt/jc/curl.sh $(date &quot;+%Y%m%d&quot;) shellå¤„ç†jsonæ•°æ®å·¥å…·â€”â€“jqèŽ·å–æŽ¥å£è¿”å›žçš„æ•°æ®ä¸­dataçš„å€¼æ•°ç»„å¤§å°1res=$(curl -m 5 -s $&#123;webUrls[i]&#125; | jq &apos;.data&apos; | jq &apos;length&apos;) å…¶ä»–jqçš„ç”¨æ³•å‚è€ƒï¼šshellè„šæœ¬å¤„ç†JSONæ•°æ®å·¥å…·jq é‡åˆ°çš„é—®é¢˜ è„šæœ¬ä¸æ‰§è¡Œä¸çŸ¥é“ä¸ºå•¥æ–¹æ¡ˆï¼šå…ˆç”¨å¦‚ä¸‹å‘½ä»¤çœ‹çœ‹crontabæœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Œä¸æ­£å¸¸çš„è¿›è¡Œå®‰è£…ã€‚1service crond status æ²¡æœ‰å®‰è£…çš„è¯å…ˆå®‰è£…ã€‚ å®šæ—¶ä»»åŠ¡å‡ºé”™å‡ºé”™çš„æƒ…å†µä¼šæœ‰é‚®ä»¶é€šçŸ¥ï¼Œä½ç½®åœ¨/var/mail/rootä¸­ï¼Œå¯ä»¥æŸ¥çœ‹è„šæœ¬æ‰§è¡Œå¤±è´¥çš„åŽŸå›  Shell è„šæœ¬æ—¶æ˜¾ç¤ºdeclare not foundçš„é—®é¢˜ubuntuç³»ç»Ÿå°†é»˜è®¤çš„bashæ¢æˆäº†dashï¼Œéœ€è¦æ‰‹åŠ¨æ›¿æ¢ä¸‹ï¼Œå‚è€ƒä¸‹é¢çš„å‚è€ƒé“¾æŽ¥Shell è„šæœ¬æ—¶æ˜¾ç¤ºdeclare not foundçš„é—®é¢˜é…ç½®ã€‚ shellé‡Œå‘é€é‚®ä»¶ä½¿ç”¨sendmailå·¥å…·å‘é€é‚®ä»¶ã€‚Shell è„šæœ¬æ—¶æ˜¾ç¤ºdeclare not foundçš„é—®é¢˜]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux é…ç½®sendmailå‘é€é‚®ä»¶]]></title>
    <url>%2F2020%2F04%2F18%2FLinux%20%E9%85%8D%E7%BD%AEsendmail%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[linuxæœåŠ¡å™¨é…ç½®sendmailåœ¨å‘½ä»¤è¡Œé‡Œæ–¹ä¾¿å‘é€é‚®ä»¶ç®€ä¹¦åœ°å€ Ubuntu å®‰è£…å·¥å…·1apt-get install heirloom-mailx ä¿®æ”¹é…ç½®vim /etc/s-nail.rcåœ¨æ–‡ä»¶æœ€åŽåŠ å…¥å¦‚ä¸‹é…ç½®é¡¹ï¼š12345set from=&quot;mailtest@3vyd.com&quot;set smtp=&quot;smtp.exmail.qq.com&quot;set smtp-auth-user=&quot;mailtest@3vyd.com&quot;set smtp-auth-password=&quot;xxxx&quot;set smtp-auth=login æµ‹è¯•é‚®ä»¶1echo &quot;æµ‹è¯•çš„é‚®ä»¶å†…å®¹&quot; | s-nail -s &quot;æµ‹è¯•çš„é‚®ä»¶ä¸»é¢˜&quot; marvin.ma@redcreation.net æ³¨æ„root@hk-server:~# Could not connect: Operation now in progressâ€œ/root/dead.letterâ€ 8/209â€¦ message not sent è¿™é‡Œæ³¨æ„ï¼å› ä¸ºæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œå¯èƒ½æ˜¯25ç«¯å£è¢«å°ï¼Œå¾—æ”¹ç”¨465ç«¯å£ï¼Œæ‰€ä»¥é…ç½®å†…å®¹é‚£é‡Œè¦æ³¨æ„å°†smtpé…ç½®åŠ ä¸Šç«¯å£ï¼š1set smtp=smtp.exmail.qq.com:465 centos install Mailx 1yum install -y mailx Config SMTP Params 12345678vi /etc/mail.rc# Add Gmail SMTPset from=yiilib.com_t@gmail.com #send from mail addressset smtp=smtp.gmail.com #SMTP server domainset smtp-auth-user=yiilib.com_t #send accountset smtp-auth-password=mailBoxPassword #account passwordset smtp-auth=login #auth way send test 1echo &quot;mail body&quot; | mail marvin.ma@redcreation.net -s &quot;test mail subject&quot; -a /root/backup/yiilib.com_tmp.sql ä¸¤ç§å¸¸ç”¨é…ç½® è…¾è®¯ä¼ä¸šé‚®ç®± 12345set from=&quot;mailtest@3vyd.com&quot;set smtp=&quot;smtp.exmail.qq.com&quot;set smtp-auth-user=&quot;mailtest@3vyd.com&quot;set smtp-auth-password=&quot;xxxx&quot;set smtp-auth=login 163ç½‘æ˜“é‚®ç®±(å¯†ç æ˜¯æŒ‡å®¢æˆ·ç«¯æŽˆæƒå¯†ç ) 12345set from=&quot;chuangkehui@163.com&quot;set smtp=&quot;smtp.163.com&quot;set smtp-auth-user=&quot;chuangkehui@163.com&quot;set smtp-auth-password=&quot;xxxx&quot;set smtp-auth=login å‚è€ƒLinuxå‘é‚®ä»¶-ubuntuå’Œcentoshttp://yiilib.com/en/topic/731/Centos+use+Mailx+send+SMTP+Mail]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojureScripté¡µé¢å›½é™…åŒ–(i18nå¤šè¯­è¨€)å®žçŽ°]]></title>
    <url>%2F2020%2F04%2F04%2Fclojurescript-i18n%2F</url>
    <content type="text"><![CDATA[clojurescript å›½é™…åŒ–æ ¸å¿ƒä»£ç  ç®€ä¹¦åœ°å€ å…ˆçœ‹ä¸‹æ•ˆæžœï¼ˆè¯æ˜Žæ˜¯å®žè·µè¿‡çš„ï¼‰ å›½é™…åŒ–æ–¹æ¡ˆæ¯”è¾ƒå¤šï¼Œé¡µé¢ä¸Šçš„å›½é™…åŒ–ä¸€èˆ¬æ¯”è¾ƒç®€å•ï¼Œéº»çƒ¦çš„è¿˜æ˜¯æ•°æ®åº“çš„æ•°æ®çš„å›½é™…åŒ–ã€‚æœ¬åœ°cljsé‡Œçš„å›½é™…åŒ–é‡‡ç”¨å‰ç«¯dbçš„atomæŽ§åˆ¶å½“å‰è¯­è¨€ï¼Œæ‰€æœ‰å¯è§çš„ç¿»è¯‘åˆ†ä¸ºé¡µé¢éƒ¨åˆ†å’Œæ•°æ®åº“éƒ¨åˆ†ï¼Œæœ€åŽåœ¨é€šè¿‡æŽ¥å£æ‹¿åˆ°æ•°æ®åº“çš„ç¿»è¯‘åŽè·Ÿé¡µé¢çš„è¿›è¡Œmergeã€‚ æ–¹æ¡ˆåŽŸç† å°†å½“å‰ç”¨æˆ·è®¾å®šçš„è¯­è¨€ä¿å­˜åœ¨æœ¬åœ°localstorageï¼Œå¹¶ä¸”ä¿å­˜åœ¨é¡µé¢dbä¸­ã€‚ åˆ‡æ¢è¯­è¨€æ—¶ï¼Œæ¯ä¸ªéœ€è¦å›½é™…åŒ–çš„æ–‡æ¡ˆå‰å¢žåŠ i18n-strå‡½æ•°è°ƒç”¨ï¼Œå®žæ—¶èŽ·å–ç›®æ ‡æ–‡æ¡ˆå¯¹åº”çš„i18næ–‡æ¡ˆã€‚ æµè§ˆå™¨è¢«åˆ·æ–°æ—¶ä»Žlocalstorageä¸­å›žå¤å·²ç»é€‰æ‹©çš„è¯­éŸ³ç±»åž‹ã€‚ å¯è§†çš„å¤šè¯­è¨€æ–‡æ¡ˆï¼Œåˆ†ä¸ºé¡µé¢éƒ¨åˆ†æ•°æ•°æ®åº“éƒ¨åˆ†ï¼Œåœ¨å‰ç«¯è¿›è¡Œmergeå¤„ç†ï¼Œä¿å­˜æˆä¸€ä¸ªã€‚ å‰æå‰ç«¯ä½¿ç”¨re-frameã€kee-frameã€shadow-cljsã€antdæ¡†æž¶ å½“å‰æ–¹æ¡ˆæ ¸å¿ƒä»£ç åˆ†é¡µé¡µé¢éƒ¨åˆ†ï¼Œåˆ‡æ¢è¯­è¨€éƒ¨åˆ†ï¼ˆä¿å­˜dbï¼Œä¿å­˜localstorageï¼Œé˜²æ­¢æ‰‹åŠ¨åˆ·æ–°é¡µé¢æ—¶æ•°æ®è¿˜åŽŸï¼‰ã€‚ 1. é¡µé¢åˆ‡æ¢ä»£ç ç»§ç»­ä½¿ç”¨antdç»„ä»¶1234567891011121314151617181920212223242526272829(def lang (rf/subscribe [:i18n/lang]));; è¯­è¨€(def ^:private language &#123;:zh-cn &quot;ä¸­æ–‡&quot; :en-us &quot;English&quot; :ja-jp &quot;æ—¥æœ¬èªž&quot;&#125;);; è¯­è¨€èœå•(defn- dropdown-menu [] [:&gt; ant/Menu &#123;:className &quot;menu&quot; :onClick (fn [menu] (let [value (js-&gt;clj menu :keywordize-keys true)] (rf/dispatch [:i18n/change-lang (keyword (:key value))])))&#125; [:&gt; MenuItem &#123;:key &quot;zh-cn&quot; :title &quot;ä¸­æ–‡&quot;&#125; [:span (i18n-str &quot;ä¸­æ–‡&quot;)]] [:&gt; MenuItem &#123;:key &quot;en-us&quot; :title &quot;è‹±æ–‡&quot;&#125; [:span (i18n-str &quot;è‹±æ–‡&quot;)]] [:&gt; MenuItem &#123;:key &quot;ja-jp&quot; :title &quot;æ—¥æ–‡&quot;&#125; [:span (i18n-str &quot;æ—¥æ–‡&quot;)]]])[:div &#123;:style &#123;:margin-left 20 :font-size &quot;14px&quot; :font-family &quot;PingFangSC-Medium,PingFang SC&quot; :font-weight 500 :color &quot;rgba(0,0,0,1)&quot;&#125;&#125; [:&gt; ant/Dropdown &#123;:overlay (reagent.core/as-element [dropdown-menu])&#125; [:span (i18n-str (or (get language @lang) &quot;ä¸­æ–‡&quot;))]]] 2. åˆ‡æ¢å’Œä¿å­˜å½“å‰è¯­è¨€123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263;;é€šè¿‡keyè®¾ç½®å’ŒèŽ·å–localstorageé‡Œçš„æ•°æ®(defn set-local-storage [key value] (.setItem js/localStorage key value))(defn get-local-storage [key] (.getItem js/localStorage key));;åªè¦è·¯ç”±å˜åŒ–ï¼Œå°±è¦è§¦å‘èŽ·å–å½“å‰è¯­è¨€çš„é€»è¾‘(kf/reg-controller :lang-controller &#123;:params (constantly true) :start [::set-lang-by-local]&#125;);;å¦‚æžœé¡µé¢åˆ·æ–°çš„è¯ä»Žlocalstorageé‡ŒèŽ·å–(kf/reg-event-fx ::set-lang-by-local (fn [_ [_ _]] (when-not @(rf/subscribe [:i18n/lang]) (if (get-current-lang) (rf/dispatch [:i18n/change-lang (get-current-lang)]) (rf/dispatch [:i18n/change-lang :zh-cn]))) &#123;:dispatch [:request/get &#123;:url (:get-lang-map mutil-lang) :params &#123;:hostname (.. js/window -location -hostname)&#125; ;;æ­¤å¤„æ ¹æ®å½“å‰åŸŸåèŽ·å–è¯¥åŸŸåçš„å¯¹åº”ç§Ÿæˆ·çš„å¤šè¯­è¨€æ–‡æ¡ˆ :callback-event ::save-db-lang&#125;]&#125;))(kf/reg-event-fx ::save-db-lang (fn [&#123;:keys [db]&#125; [db-lang-map]] &#123;:db (-&gt; db (assoc-in [:db-lang-map] db-lang-map))&#125;))(rf/reg-event-fx :i18n/change-lang (fn [&#123;:keys [db]&#125; [_ data]] (js/console.log &quot;åˆ‡æ¢è¯­è¨€åˆ°ï¼š&quot; data) (set-current-lang data) &#123;:db (assoc-in db [:global :lang] data)&#125;))(rf/reg-sub :i18n/lang (fn [data] (get-in data [:global :lang])))(rf/reg-sub :i18n/db-lang-map (fn [db] (get-in db [:db-lang-map])))(defn- merge-lang-map &quot;å¯¹é¡µé¢ä¸Šçš„æ–‡æ¡ˆå’Œdbé‡Œçš„æ–‡æ¡ˆè¿›è¡Œä¸€æ¬¡merge&quot; [page-lang-map db-lang-map] (if db-lang-map (merge page-lang-map (#(zipmap (map :key %) (map :value %)) db-lang-map)) page-lang-map));;è¿”å›žå½“å‰è¯­è¨€çš„å…³é”®å­—(defn i18n-str [s] (let [lang (rf/subscribe [:i18n/lang]) db-lang-map (rf/subscribe [:i18n/db-lang-map])] (get-in (merge-lang-map language-map @db-lang-map) [s @lang] s))) 3. é¡µé¢æ–‡æ¡ˆç¿»è¯‘ä¸Šé¢ä»£ç é‡Œç”¨åˆ°çš„language-mapç±»ä¼¼å¦‚ä¸‹ç»“æž„:12345678(def language-map &#123; &quot;åˆ‡æ¢è¯­è¨€&quot; &#123;:en-us &quot;Switch language&quot; :ja-jp &quot;è¨€èªžã‚’åˆ‡ã‚Šæ›¿ãˆ&quot;&#125; &quot;ä¸­æ–‡&quot; &#123;:en-us &quot;Chinese&quot; :ja-jp &quot;ä¸­å›½èªž&quot;&#125; &quot;è‹±æ–‡&quot; &#123;:en-us &quot;English&quot; :ja-jp &quot;è‹±èªž&quot;&#125; &quot;æ—¥æ–‡&quot; &#123;:en-us &quot;Japanese&quot; :ja-jp &quot;æ—¥æœ¬èªž&quot;&#125; &quot;ä½“éªŒé—¨åº—&quot; &#123;:en-us &quot;Experience Store&quot; :ja-jp &quot;åº—ã‚’ä½“é¨“ã™ã‚‹&quot;&#125; &quot;è¿”å›žé¦–é¡µ&quot; &#123;:en-us &quot;Back to Home&quot; :ja-jp &quot;ãƒ›ãƒ¼ãƒ ã‚’æˆ»ã™&quot;&#125;&#125; ) 4. æ•°æ®åº“è¿”å›žçš„æ–‡æ¡ˆå³ä¸Šæ–‡ä¸­:i18n/db-lang-mapè¿™ä¸ªeventä»Ždbä¸­èŽ·å–çš„å¯¹è±¡ï¼Œä»ŽæŽ¥å£èŽ·å–çš„å­˜åœ¨å‰ç«¯dbä¸­æ•°æ®ç»“æž„å¦‚ä¸‹ï¼š1234567891011121314151617181920212223 [ &#123; &quot;key&quot;: &quot;åŒæŽ’å…­ç²’&quot;, &quot;value&quot;: &#123; &quot;en-us&quot;: &quot;Double six buttons&quot;, &quot;ja-jp&quot;: &quot;w6*3&quot; &#125; &#125;, &#123; &quot;key&quot;: &quot;ä¸‹æ‘†(æˆè¡£)&quot;, &quot;value&quot;: &#123; &quot;en-us&quot;: &quot;Bottom(garment)&quot;, &quot;ja-jp&quot;: &quot;è¹´å»»ã—ï¼ˆä¸ŠãŒã‚Šå¯¸æ³•ï¼‰&quot; &#125; &#125;, &#123; &quot;key&quot;: &quot;å¹³é’‰çº½æ‰£&quot;, &quot;value&quot;: &#123; &quot;en-us&quot;: &quot;Level buttons&quot;, &quot;ja-jp&quot;: &quot;å¹³é’‰é’®é‡¦&quot; &#125; &#125;] è¿™æ ·å°†æ•°æ®åº“ä¸­çš„å’Œé¡µé¢ä¸Šçš„è¿›è¡ŒmergeåŽä½¿ç”¨ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬äº§å“æ˜¯å› ä¸ºå¯¹å¤šä¸ªç§Ÿæˆ·ï¼Œå„ç§Ÿæˆ·çš„ç¿»è¯‘ä¸åŒï¼Œæ‰€ä»¥é¡µé¢ä¸Šæ²¡æœ‰å¾€DBé‡Œé‡å¤ä¿å­˜ï¼Œé‡‡ç”¨mergeä¸¤ç«¯çš„å½¢å¼ã€‚ç®€å•çš„å¯ä»¥åªåœ¨æ•°æ®åº“ç»´æŠ¤ã€‚ æ”¹è¿›ç‚¹ é¡µé¢æ–‡æ¡ˆä¾¿äºŽæ‰©å±•æ–°è¯­è¨€å½“å‰ä¸‰ä¸ªè¯­è¨€ï¼Œåœ¨æ•°æ®åº“é‡‡ç”¨ä¸€è¡Œä¿å­˜ä¸€ä¸ªå½¢å¼1234567891011121314+----------------+--------------+------+-----+-------------------+-------+| Field | Type | Null | Key | Default | Extra |+----------------+--------------+------+-----+-------------------+-------+| id | varchar(40) | NO | PRI | NULL | || company_id | varchar(40) | NO | | NULL | || lang_key | varchar(255) | NO | | NULL | || lang_value | varchar(255) | NO | | NULL | || lang | varchar(40) | NO | | NULL | || delete_flag | varchar(4) | YES | | 0 | || create_time | timestamp | NO | | CURRENT_TIMESTAMP | || create_user_id | varchar(40) | YES | | NULL | || update_time | timestamp | NO | | CURRENT_TIMESTAMP | || update_user_id | varchar(40) | YES | | NULL | |+----------------+--------------+------+-----+-------------------+-------+ ä¸€ä¸ªæ–‡æ¡ˆçš„ç¿»è¯‘æ•°æ®å¦‚ä¸‹ï¼š12INSERT INTO `t_store_language`(`id`, `company_id`, `lang_key`, `lang_value`, `lang`, `delete_flag`, `create_time`, `create_user_id`, `update_time`, `update_user_id`) VALUES (&apos;611348&apos;, &apos;61&apos;, &apos;å¸¸è§„(9ä¸ªå·¥ä½œæ—¥)&apos;, &apos;Regular (9 working days)&apos;, &apos;en-us&apos;, &apos;0&apos;, &apos;2020-04-01 00:00:00&apos;, NULL, &apos;2020-04-01 00:00:00&apos;, NULL);INSERT INTO `t_store_language`(`id`, `company_id`, `lang_key`, `lang_value`, `lang`, `delete_flag`, `create_time`, `create_user_id`, `update_time`, `update_user_id`) VALUES (&apos;611359&apos;, &apos;61&apos;, &apos;å¸¸è§„(9ä¸ªå·¥ä½œæ—¥)&apos;, &apos;æ™®é€šï¼ˆï¼™ç¨¼å‹•æ—¥ï¼‰&apos;, &apos;ja-jp&apos;, &apos;0&apos;, &apos;2020-04-01 00:00:00&apos;, NULL, &apos;2020-04-01 00:00:00&apos;, NULL); è¿™ä¸ªæ˜¯ä¾¿äºŽæ‰©å±•çš„ï¼Œè€Œé¡µé¢ä¸Šå°±ä¸æ˜¯é‚£æ ·çš„ï¼Œå¦‚åŒä¸Šé¢çš„language-mapï¼Œå¦‚æžœå†å¢žåŠ ä¸€é—¨æ¯”å¦‚éŸ©è¯­çš„è¯ï¼Œéœ€è¦é€é¡¹åœ¨åŽŸæ¥çš„æ•°æ®ä¸Šä¿®æ”¹ï¼Œä¸åˆ©äºŽæ‰©å±•ã€‚ æ”¹è¿›æ–¹å‘ï¼šä¸€ä¸ªè¯­éŸ³ä¸€ä¸ªmapï¼Œæœ€åŽå°†å¤šä¸ªè¯­è¨€çš„æ–‡æ¡ˆè¿›è¡Œåˆå¹¶ ä»“ä¿ƒä¸‹æ²¡æœ‰è€ƒè™‘å¤ªå¤šï¼Œå¦‚æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œæ¬¢è¿Žäº¤æµã€‚QQï¼š389709260]]></content>
      <categories>
        <category>clojurescript</category>
      </categories>
      <tags>
        <tag>clojurescript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[shadow-cljsç¼–è¯‘çš„clojurescript-antdé¡¹ç›®ä½¿ç”¨lesså®žçŽ°è¿è¡Œæ—¶ä¸»é¢˜åˆ‡æ¢]]></title>
    <url>%2F2020%2F03%2F21%2Fclojurescript-antd%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8less%E5%AE%9E%E7%8E%B0%E8%BF%90%E8%A1%8C%E6%97%B6%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®é¡µé¢ä¸ŠåŠ¨æ€åˆ‡æ¢ä¸»é¢˜ ç®€ä¹¦åœ°å€ æœ€è¿‘å…¬å¸çš„ç”µå•†å®šåˆ¶å¹³å°çš„é¡¹ç›®ç»§ä¸Šäº†å›½é™…åŒ–ï¼Œåˆè¦æžå¤šä¸»é¢˜äº†ï¼Œåˆè®©æˆ‘ç»ƒäº†ä¸€æŠŠæ‰‹ã€‚ å®žçŽ°äº†ï¼Œä¹Ÿå°±é‚£ä¹ˆå›žäº‹ï¼Œä½†æ˜¯åŠ¨æ‰‹ä¹‹å‰çš„çŠ¹è±«å’Œæ— æ€è·¯ä¹Ÿç€å®žè®©æˆ‘æ…Œäº†ä¸€é€¼ã€‚ éœ€æ±‚åˆ†æžçœ‹äº†antdå®˜ç½‘ä¸Šå®šåˆ¶ä¸»é¢˜ä¸Šçš„ä¸»é¢˜ä»‹ç»ï¼Œä¹Ÿçœ‹äº†å…¶ä»–åšä¸»çš„ä¸€äº›æ‰‹æ®µï¼Œæ¯”è¾ƒå¤šçš„è¿˜æ˜¯æ‰“åŒ…æ—¶å°†æŸäº›ä¸»é¢˜è‰²æ‰“åŒ…åˆ°ä»£ç é‡Œï¼Œè¿è¡Œèµ·æ¥å°±æ˜¯è¿™ä¸ªä¸»é¢˜è‰²ã€‚ ä¸€æ¥è¿™ä¸ªæ–¹å¼æ˜¯é™æ€çš„ï¼Œé€šè¿‡æ‰“åŒ…ä¹‹å‰åŽ»è®¾ç½®ä¸€äº›configï¼Œä¸æ˜¯æœ€ç»ˆæƒ³è¦çš„ï¼ŒäºŒæ¥é‡Œé¢çš„ä»‹ç»è¦ä¹ˆå°±æ˜¯å€ŸåŠ©webpackï¼Œè¦ä¹ˆå°±æ˜¯ç”¨Umiã€‚å·§çš„æ˜¯æˆ‘ä»¬é¡¹ç›®ç”¨clojurescriptå¼€å‘ï¼Œåªç”¨äº†antdçš„componentï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°Antd ProåŽå°çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæ‰€ä»¥å®˜ç½‘çš„ä»‹ç»å¯¹æˆ‘æ¥è¯´å°±æ˜¯ä¸ªå¤§å¤§çš„â€œ0ï¸âƒ£â€ è¿è¡Œæ—¶åˆ‡æ¢ä¸»é¢˜ï¼Œæ˜¾ç„¶åªåœ¨ç¼–è¯‘æ—¶æ‰“åŒ…lessæ˜¯ä¸å¤Ÿçš„çš„ï¼Œå¿…é¡»æ˜¯èµ°åœ¨æµè§ˆå™¨ç«¯åŠ¨æ€ä¿®æ”¹lessçš„æ–¹æ¡ˆã€‚ æœ‰äº†ç›®çš„å°±å¥½åŠžäº†ï¼Œå¯¹äºŽæˆ‘ä¸€ä¸ªå‰ç«¯èœé¸¡æ¥è¯´ï¼Œåˆ†æžåˆ°è¿™ä¸€æ­¥å·²ç»æ¶¨çŸ¥è¯†äº†ã€‚ ä¸‹é¢è¿›å…¥è§£å†³æ–¹æ¡ˆæ­£é¢˜ã€‚ ç¾Žä¸½çš„æ’ä»¶é¦–å…ˆè¿Žé¢èµ°æ¥çš„ï¼Œæ˜‚é¦–æŒºèƒ¸çš„ç¾Žå¥³å°±æ˜¯antd-theme-generatorï¼Œéžå¸¸æ„Ÿè°¢ï¼Œå¸®å¤§å¿™äº†ã€‚ æ ¸å¿ƒä»£ç å°±è¡¥è´´äº†ï¼Œä½œè€…å¤ªæ‡’ï¼Œä¸è®ºæ˜¯githubè¿˜æ˜¯npmåº“é‡Œï¼Œè¿™ä¸ªæ’ä»¶çš„README.mdæ–‡ä»¶å†™çš„æœ‰ç‚¹é©¬è™Žã€‚ å‚è€ƒäº†ç®€ä¹¦ä¸Šantdåœ¨çº¿æ¢è‚¤å®šåˆ¶åŠŸèƒ½è¿™ä½ä»å…„çš„ä»‹ç»ï¼Œæˆ‘çš„ä»£ç åšäº†å¦‚ä¸‹æ”¹åŠ¨ 1. å¢žåŠ ä¾èµ–1npm i antd-theme-generator --save 2. å¼•å…¥æ–‡ä»¶ï¼Œæ ¹æ®æˆ‘çš„é¡¹ç›®ä¿®æ”¹æ–‡ä»¶å†…å®¹åœ¨resources/publicä¸‹æ–°å»ºlessç›®å½•ï¼Œåˆ›å»º2ä¸ªæ–‡ä»¶ main.less 1//å†…å®¹ä¸ºç©ºå°±è¡Œï¼Œé˜²æ­¢ç”Ÿæˆcolor.lessæŠ¥é”™ vars.less 12345678910@import &quot;~antd/lib/style/themes/default.less&quot;; //å¼•å…¥antdçš„å˜é‡æ–‡ä»¶ï¼Œå®žçŽ°å˜é‡çš„è¦†ç›–@primary-color: #800019;@link-color: #800019;@btn-primary-bg:#800019;//color.lessä¸­åŠ å…¥cssåŽŸç”Ÿå˜é‡ï¼š--PC:root &#123; --PC: @primary-color; --BPB: @btn-primary-bg; &#125; é¡¹ç›®æ ¹ç›®å½•æ–°å»ºcolor.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728const path = require(&apos;path&apos;);const &#123; generateTheme, getLessVars &#125; = require(&apos;antd-theme-generator&apos;);const options = &#123; stylesDir: path.join(__dirname, &apos;./resources/public/less&apos;), //å¯¹åº”å…·ä½“ä½ç½® antDir: path.join(__dirname, &apos;./node_modules/antd&apos;), //å¯¹åº”å…·ä½“ä½ç½® varFile: path.join(__dirname, &apos;./resources/public/less/vars.less&apos;), //å¯¹åº”å…·ä½“ä½ç½® mainLessFile: path.join(__dirname, &apos;./resources/public/less/main.less&apos;), //å¯¹åº”å…·ä½“ä½ç½® themeVariables: [ &apos;@primary-color&apos;, &apos;@secondary-color&apos;, &apos;@text-color&apos;, &apos;@text-color-secondary&apos;, &apos;@heading-color&apos;, &apos;@layout-body-background&apos;, &apos;@btn-primary-bg&apos;, &apos;@layout-header-background&apos; ], indexFileName: &apos;index.html&apos;, outputFilePath: path.join(__dirname, &apos;./resources/public/css/color.less&apos;),&#125;generateTheme(options).then(less =&gt; &#123; console.log(&apos;Theme generated successfully&apos;); &#125;) .catch(error =&gt; &#123; console.log(&apos;Error&apos;, error); &#125;); ä¿®æ”¹index.htmlæ–‡ä»¶ï¼Œå¦‚ä¸‹ 123456789101112131415161718192021222324252627282930&lt;!DOCTYPE html&gt;&lt;html lang=&quot;cn&quot;&gt;&lt;head&gt; &lt;title&gt;é—¨åº—å®šåˆ¶ç³»ç»Ÿ&lt;/title&gt; &lt;meta charset=&quot;utf-8&quot;/&gt; &lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; name=&quot;viewport&quot; /&gt; &lt;link href=&quot;/css/antd.min.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot;&gt; &lt;link href=&quot;/css/redantd.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot;&gt; &lt;link href=&quot;/css/color.less&quot; type=&quot;text/css&quot; rel=&quot;stylesheet/less&quot;/&gt;&lt;/head&gt;&lt;body&gt;&lt;!--è¿™ä¸ªä»£ç ä¸èƒ½æ”¾åœ¨æœ€åŽ--&gt;&lt;script&gt; window.less = &#123; async: false, env: &apos;production&apos; &#125;;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js&quot;&gt;&lt;/script&gt;&lt;!-- Our JavaScript will modify the DOM inside this element --&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;!-- All our ClojureScript gets compiled into this file --&gt;&lt;script&gt; document.write(&quot;&lt;script type=&apos;text/javascript&apos; src=&apos;/js/app.js?v=&quot;+Math.random()+&quot;&apos; type=&apos;text/javascript&apos;&gt;&lt;\/script&gt;&quot;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¿®æ”¹package.jsonï¼Œå‘½ä»¤å‰é¢å¢žåŠ node color 1234&quot;scripts&quot;: &#123; &quot;start&quot;: &quot;node color &amp;&amp; shadow-cljs server&quot;, &quot;build&quot;: &quot;node color &amp;&amp; shadow-cljs release app&quot;&#125; 3. åˆ‡æ¢æµ‹è¯•é¡¹ç›®è¿è¡ŒåŽé¡µé¢æ¯”å¦‚é¡µé¢æœ‰ä¸ªButtonçš„type=â€primaryâ€é‚£å®ƒé»˜è®¤æ˜¯çº¢è‰²çš„ã€‚ åœ¨æµè§ˆå™¨çš„æŽ§åˆ¶å°æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤1234567window.less.modifyVars( &#123; &apos;@primary-color&apos;: &apos;#722ed1&apos;, &apos;@link-color&apos;: &apos;#722ed1&apos;, &apos;@btn-primary-bg&apos;: &apos;#722ed1&apos;, &#125;) ä¼šå‘çŽ°é¢œè‰²å˜æˆäº†é…±ç´«è‰²ã€‚ åˆ°æ­¤ï¼Œå®žçŽ°é€»è¾‘ä¿®æ”¹å®Œã€‚ åœ¨clojurescriptä¸­å®žçŽ°åŠ¨æ€åˆ‡æ¢é¡µé¢viewéƒ¨åˆ†åœ¨é¡µé¢å¸ƒå±€æ–‡ä»¶çš„å³ä¸Šè§’åŠ äº†ä¸ªåˆ‡æ¢ä¸‹æ‹‰æŒ‰é’®ã€‚12345678910111213141516171819202122232425262728293031(def ^:private theme-map &#123;:#800019 &quot;å–œåº†çº¢&quot; :#4880FF &quot;æ‹‚æ™“è“&quot;&#125;);; ä¸»é¢˜èœå•(defn dropdown-theme [] [:&gt; ant/Menu &#123;:className &quot;menu&quot; :onClick (fn [menu] (let [value (js-&gt;clj menu :keywordize-keys true)] (rf/dispatch [:theme/generate-theme (:key value)])))&#125; [:&gt; MenuItem &#123;:key &quot;#800019&quot; :title (:#800019 theme-map) :style &#123;:background &quot;#800019&quot; :color &quot;white&quot; :border-radius &quot;5px&quot;&#125;&#125; [:span (i18n-str (:#800019 theme-map))]] [:&gt; MenuItem &#123;:key &quot;#4880FF&quot; :title (:#4880FF theme-map) :style &#123;:background &quot;#4880FF&quot; :color &quot;white&quot; :border-radius &quot;5px&quot;&#125;&#125; [:span (i18n-str (:#4880FF theme-map))]]]);;åœ¨æŸä¸ªviewç»„ä»¶é‡Œå†™å…¥å†…å®¹[:div &#123;:style &#123;:margin-left 20 :font-size &quot;14px&quot; :font-family &quot;PingFangSC-Medium,PingFang SC&quot; :font-weight 500 :color &quot;rgba(0,0,0,1)&quot;&#125;&#125; [:&gt; ant/Dropdown &#123;:overlay (reagent.core/as-element [dropdown-theme])&#125; [:div &#123;:className &quot;theme-setting&quot;&#125; [:span (i18n-str &quot;é¢œè‰²&quot;)]]]] åˆ‡æ¢äº‹ä»¶123456789101112131415161718192021222324252627282930313233343536373839(ns store-pc.common.theme (:require [re-frame.core :as rf] [kee-frame.core :as kf] [store-pc.common.storage :as storage]))(defn- gen-theme [color] #js&#123; &quot;@primary-color&quot; color &quot;@link-color&quot; color &quot;@btn-primary-bg&quot; color &#125;)(kf/reg-controller :theme-controller &#123;:params (constantly true) :start [::set-theme-by-local]&#125;);;å¦‚æžœé¡µé¢åˆ·æ–°çš„è¯ä»Žlocalstorageé‡ŒèŽ·å–(kf/reg-event-fx ::set-theme-by-local (fn [_ [_ _]] (when-not @(rf/subscribe [:theme/now-theme]) (rf/dispatch [:theme/generate-theme (storage/get-current-theme)]) )))(rf/reg-event-fx :theme/generate-theme (fn [&#123;:keys [db]&#125; [_ color]] (js/console.log &quot;è®¾ç½®ä¸»é¢˜ä¸º:&quot; (gen-theme color)) (.modifyVars (.-less js/window ) (gen-theme color)) (storage/set-current-theme color) &#123;:db (assoc-in db [:global :theme] color)&#125;))(rf/reg-sub :theme/now-theme (fn [db] (get-in db [:global :theme]))) é‡Œé¢å”¯ä¸€ç”¨åˆ°çš„æ¡†æž¶å¤–çš„å°±æ˜¯å­˜å‚¨localstoreå’Œä»Žlocalstoreé‡Œæ‹¿å€¼ï¼Œæ ¸å¿ƒä»£ç å°±ä¸¤ä¸ªï¼š12345(defn get-local-storage [key] (.getItem js/localStorage key))(defn set-local-storage [key value] (.setItem js/localStorage key value)) é‡åˆ°çš„é—®é¢˜ index.htmlé‡Œä¸€å¼€å§‹å¼•å…¥çš„less.min.jsç‰ˆæœ¬å¤ªé«˜ï¼Œå¾—é™æˆ2.7.2æ‰ä¸ä¼šæŠ¥é”™ï¼Œå¦åˆ™modifyVarsæœ‰é”™è¯¯æç¤º jsé‡Œçš„window.less.modifyVars(obj)è¿™å¥è°ƒç”¨åœ¨cljsé‡Œä¸ä¼šå†™ ä¸Šé¢ä¸€æ¡è§£å†³äº†ï¼Œä½†æ˜¯modifyVarsçš„å‚æ•°ä¸ä¼šä¼ ï¼ŒåŽæ¥æŸ¥åˆ°åŽŸæ¥æ˜¯ç”¨ #jså®šä¹‰çš„å°±æ˜¯åŽŸå§‹jsçš„æ„æ€ã€‚ å‚è€ƒantdåœ¨çº¿æ¢è‚¤å®šåˆ¶åŠŸèƒ½themeChanger demo]]></content>
      <categories>
        <category>cljs</category>
      </categories>
      <tags>
        <tag>antd</tag>
        <tag>cljs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ·å°”åˆ›å®¢æ±‡ç¬”è®°----å®‰å“ä¸Šadbçš„ä½¿ç”¨ç¬”è®°]]></title>
    <url>%2F2020%2F03%2F01%2F%E6%B5%B7%E5%B0%94%E5%88%9B%E5%AE%A2%E6%B1%87%E7%AC%94%E8%AE%B0----%E5%AE%89%E5%8D%93%E4%B8%8Aadb%E7%9A%84%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨adbå‘½ä»¤æŠ“åŒ…ç­‰ç®€ä¹¦åœ°å€ æŠ“åŒ…1adb logcat -v time tag 1&gt;F:\log.txt adb logcat -b main -v time&gt;app.log æ‰“å°åº”ç”¨ç¨‹åºçš„logadb logcat -b radio -v time&gt; radio.log æ‰“å°å°„é¢‘ç›¸å…³çš„logï¼ŒSIM STKä¹Ÿä¼šåœ¨é‡Œé¢ï¼Œmodemç›¸å…³çš„ATcommandç­‰ï¼Œå½“ç„¶è·ŸQXDMå·®çš„å¾ˆè¿œäº†ã€‚adb logcat -b events -v time æ‰“å°ç³»ç»Ÿäº‹ä»¶çš„æ—¥å¿—ï¼Œæ¯”å¦‚è§¦å±äº‹ä»¶ã€‚ã€‚ã€‚//android logçš„æŠ“å–adb logcat//kernel logçš„æŠ“å–adb shell cat /proc/kmsg//log ä¿¡æ¯çš„ä¿å­˜mkdir /data/anrlogcat *ï¼šV &gt; /data/anr/androiddemsg &gt;/data/anr/kernel//æŒ‰ctrl+cç»“æŸlogè¾“å‡ºadb pull /data/anr ./log/ æ‰‹åŠ¨å½»åº•å¸è½½appD:\Git\pingtai\Portal&gt;adb uninstall com.haierchuangkeappFailure [DELETE_FAILED_INTERNAL_ERROR]åœ¨æœ¬åœ°ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdå‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨adb shellè¿›å…¥æ‰‹æœºåº”ç”¨å‘½ä»¤è¡Œï¼Œæ ¹æ®æç¤º ï¼šD:\Git\pingtai\Portal&gt;adb shellM1E:/ $ cd /data/local/tmp/M1E:/data/local/tmp $ ll/system/bin/sh: ll: not found127|M1E:/data/local/tmp $ lscom.haierchuangkeapp com.haierchuangkeapp-build-id.txtM1E:/data/local/tmp $ rm -rf cocom.haierchuangkeapp com.haierchuangkeapp-build-id.txtM1E:/data/local/tmp $ rm -rf com.haierchuangkeapp*M1E:/data/local/tmp $ ç„¶åŽæ‰‹åŠ¨æŽ¨é€å®‰è£…åŒ…ï¼Œç„¶åŽå®‰è£…ï¼šD:\Git\pingtai\Portal\android&gt;adb push D:\Git\pingtai\Portal\android\app\build\outputs\apk\debug\app-debug.apk /data/local/tmp/com.haierchuangkeappD:\Git\pingtai\Portal\android\app\build\outputs\apk\debug\app-debug.apk: 1 file pushed. 13.0 MB/s (64737700 bytes in 4.756s) D:\Git\pingtai\Portal\android&gt;D:\Git\pingtai\Portal\android&gt;D:\Git\pingtai\Portal\android&gt;adb shell pm install -t -r â€œ/data/local/tmp/com.haierchuangkeappâ€Success]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>react-native</tag>
        <tag>android</tag>
        <tag>package</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[excelæ“ä½œå¤‡å¿˜]]></title>
    <url>%2F2020%2F02%2F29%2Fexcel%E6%93%8D%E4%BD%9C%E5%A4%87%E5%BF%98%2F</url>
    <content type="text"><![CDATA[æŠŠexcelé‡Œçš„æ•°æ®è¿›è¡ŒæŸäº›å¤„ç†ï¼Œè®°å½•ä¸€ä¸‹ï¼Œä»¥åŽå¥½å¤åˆ¶ç²˜è´´ ç®€ä¹¦åœ°å€ 1. excelæ•°å­—æŒ‰é•¿åº¦è¡¥0ï¼Œå¹¶è½¬æ¢æˆæ–‡æœ¬åœ¨æµ·å°”è¿™æ®µæ—¶é—´ä»Žæ•°æ®åº“é‡Œå¯¼å‡ºæ¥çš„å‘˜å·¥å·¥å·8ä½æ•°ï¼Œå› ä¸ºæœ‰äº›0å¼€å¤´çš„ï¼Œå¯¼å‡ºåˆ°excelé‡ŒåŽå‰é¢çš„0å°±æ²¡æœ‰äº†ã€‚å¯ä»¥æ–°å»ºä¸€åˆ—ï¼Œç„¶åŽä»¥å¯¼å‡ºçš„é‚£åˆ—ä¸ºåŸºç¡€æ•°æ®ç”¨å…¬å¼å¤„ç†æˆæƒ³è¦çš„ï¼Œè¡¥é½8ä½ï¼Œå‰é¢è¡¥0ã€‚å…¬å¼å¦‚ä¸‹ï¼š1=REPT(0,8-LEN(A2))&amp;A2 2. excelé‡Œå°†æ•°æ®æ‹¼æŽ¥æˆè¯­å¥æœ‰æ—¶å€™éœ€è¦å°†excelé‡Œçš„æ•°æ®ï¼Œæ‹¼æŽ¥æˆæƒ³è¦çš„jsonæˆ–è€…sqlã€‚ æ‹¼æŽ¥æˆjsonæˆ–è€…map1=CONCATENATE(&quot;&quot;&quot;&quot;,B2,&quot;&quot;&quot;&quot;,&quot; &#123;:en-us &quot;&quot;&quot;,C2,&quot;&quot;&quot; :ja-jp &quot;&quot;&quot;,D2,&quot;&quot;&quot;&#125;&quot;) ç›®æ ‡å†…å®¹æ¯”å¦‚ï¼š&quot;ä¼˜è£ç²¾é€‰&quot; {:en-us &quot;Retail&quot; :ja-jp &quot;å„ªã‚ŒãŸè£æ–­&quot;} æ ¹æ®è¡¨å¤´ï¼Œæ‹¼æŽ¥æˆsqlçš„insertè¯­å¥1=CONCATENATE(&quot;INSERT INTO t_sys_user (`&quot;&amp;A$1&amp;&quot;`, `&quot;&amp;B$1&amp;&quot;`, `&quot;&amp;C$1&amp;&quot;`, `&quot;&amp;D$1&amp;&quot;`, `&quot;&amp;E$1&amp;&quot;`, `&quot;&amp;F$1&amp;&quot;`) VALUES (&apos;&quot;&amp;A3&amp;&quot;&apos;,&quot;&amp;&quot; &apos;&quot;&amp;B3&amp;&quot;&apos;,&apos;&quot;&amp;C3&amp;&quot;&apos;,&quot;&amp;&quot;&apos;&quot;&amp;D3&amp;&quot;&apos;,&quot;&amp;&quot;&apos;&quot;&amp;E3&amp;&quot;&apos;,&quot;&amp;&quot;&apos;&quot;&amp;F3&amp;&quot;&apos;);&quot;)]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[leiningen clojure webé¡¹ç›®ä½¿ç”¨æœ¬åœ°jaråŒ…]]></title>
    <url>%2F2020%2F02%2F06%2Fclojure%20lein%20use%20local%20jar%2F</url>
    <content type="text"><![CDATA[leiningen clojure webé¡¹ç›®ä½¿ç”¨æœ¬åœ°jarç®€æ˜“æ–¹å¼ ç®€ä¹¦åœ°å€ ç”¨luminuswebæ¨¡æ¿åˆ›å»ºçš„clojure webæœåŠ¡ç«¯é¡¹ç›®å¦‚ä½•ä½¿ç”¨æœ¬åœ°çš„jarã€‚ æˆ‘çš„æ–¹æ¡ˆå°†jaræ”¾åœ¨é¡¹ç›®é‡Œçš„æŸä¸ªç›®å½•ä¸‹ï¼ŒæŽ¨èresourcesä¸‹ï¼Œç„¶åŽåœ¨project.cljé‡ŒåŠ å…¥å¼•ç”¨å³å¯ã€‚1:resource-paths [&quot;resources/jars/sheet-clone-0.1.jar&quot;] ä½¿ç”¨çš„æ—¶å€™åƒè·Ÿè°ƒç”¨å…¶ä»–ç¬¬ä¸‰æ–¹çš„java sdkä¸€æ ·ä½¿ç”¨123(:import (com.alibaba.excel EasyExcel #_ExcelWriter) [com.hczt.sheetclone.utils CloneExcelByPoi] [org.apache.poi.xssf.usermodel XSSFWorkbook]) å…¶ä»–æ–¹æ¡ˆï¼šå‚è€ƒPaulå¤§ç¥žçš„æ–‡ç« using-local-jars-with-leiningenè´´ä¸€ä¸‹ä¸»è¦å†…å®¹ã€‚Create a directory in the project.mkdir maven_repository.Add local jars to this repository.For example, this command adds the jaad-0.8.3.jar file to the maven repository.1mvn install:install-file -Dfile=jaad-0.8.3.jar -DartifactId=jaad -Dversion=0.8.3 -DgroupId=jaad -Dpackaging=jar -DlocalRepositoryPath=maven_repository Add the following to project.clj1:repositories &#123;&quot;local&quot; ~(str (.toURI (java.io.File. &quot;maven_repository&quot;)))&#125; Now a regular lein deps should work1234lein depsDownloading: jaad/jaad/0.8.3/jaad-0.8.3.pom from localTransferring 0K from local[WARNING] *** CHECKSUM FAILED - Error retrieving checksum file for jaad/jaad/0.8.3/jaad-0.8.3.pom - IGNORING The warning can be ignored, since the jar will be checked into the project and not downloaded from the internet.]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>leiningen</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[springbooté¡¹ç›®æç¤º No converter found for return value of type:class java.util.LinkedHashMap,@RequestBodyæ— æ•ˆ]]></title>
    <url>%2F2020%2F02%2F03%2Fspringboot-requestbody%E6%B3%A8%E8%A7%A3%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8%2F</url>
    <content type="text"><![CDATA[springbooté¡¹ç›®æç¤ºResolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content type â€˜application/json;charset=UTF-8â€™ not supported]Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter found for return value of type: class java.util.LinkedHashMap]@RequestBodyæ³¨è§£ç›´æŽ¥æ— æ•ˆç®€ä¹¦åœ°å€ å…ˆè¯´è§£å†³æ–¹æ¡ˆï¼Œåœ¨pomä¸­åŠ å…¥å¦‚ä¸‹ä¾èµ–ï¼Œè§£å†³ã€‚12345678910111213141516&lt;!--json--&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;2.9.9&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;2.9.9&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.9&lt;/version&gt;&lt;/dependency&gt; è¯´èµ·æ¥ï¼Œè¿™å¯çœŸçœŸæ˜¯ä¸€ä¸ªå‘çˆ¹çš„é—®é¢˜ï¼Œå›°æ‰°äº†ä¸€å¤©ï¼Œçƒ¦äº†ä¸€å¤©ï¼Œæˆ‘çœŸä»¥ä¸ºæˆ‘å¤§åŠå¹´æ²¡ç¢°javaï¼Œè¿žæ–°å»ºä¸ªsprintbootçš„restæŽ¥å£ç”¨å®Œç¾Žçš„intellij ideaè¿™ä¹ˆé«˜å¤§ä¸Šçš„å·¥å…·éƒ½åˆ›å»ºä¸å‡ºæ¥äº†å‘¢ã€‚ æŽ¥å£çœ‹çœ‹é”™è¯¯å§.ä¸¤ä¸ªè¿žå…¥é—¨éƒ½ç®—ä¸ä¸Šçš„æŽ¥å£123456789101112131415161718192021222324252627282930313233343536package com.marvin.demo.controller;import com.marvin.demo.vo.DemoEntity;import lombok.extern.slf4j.Slf4j;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RestController;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * * @Author mahaiqiang * @Create 2020/2/1 11:06 ä¸‹åˆ * @Description TODO **/@Slf4j@RestControllerpublic class DemoController &#123; @GetMapping(&quot;/demo1&quot;) public DemoEntity demo1() &#123; log.info(&quot;ç¬¬ä¸€ä¸ªgetæŽ¥å£&quot;); DemoEntity de = new DemoEntity(); de.setName(&quot;æŽå››&quot;); return de; &#125; @PostMapping(&quot;/demo2&quot;) public DemoEntity demo2(@RequestBody DemoEntity entity) &#123; log.info(&quot;ç¬¬ä¸€ä¸ªpostæŽ¥å£, å‚æ•°:&#123;&#125;&quot;, entity); entity.setName(&quot;Hello, &quot; + entity.getName()); return entity; &#125;&#125; é”™è¯¯GETæ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯POSTçš„è¿™ä¸ªæŽ¥å£ï¼Œå› ä¸ºç”¨äº†@RequestBodyæ³¨è§£ï¼Œè¦è½¬æ¢jsonï¼Œæ‰€ä»¥å°±æ­»æ´»ä¸è¡Œã€‚é”™è¯¯æ˜¯è¿™æ ·çš„ï¼š122020-02-03 22:55:34.382 WARN 40841 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content type &apos;application/json;charset=UTF-8&apos; not supported]2020-02-03 22:55:34.405 WARN 40841 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter found for return value of type: class java.util.LinkedHashMap] å‡ºè¿™ä¸ªé”™æˆ‘å…ˆä¸Šç½‘æŸ¥ï¼Œæœ‰ä¸ªæŽ¨èæ‰¾ä¸åˆ°äº†è¯´å¼•å…¥jacksonçœ‹æ—¥å¿—æˆ‘å¼•å…¥çš„æ˜¯2.9.6ä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿˜å°‘å¼•ç”¨äº†å•¥ï¼Œåæ­£æ²¡æˆã€‚ è®©åˆ«çš„åŒäº‹è¯•äº†ä¸‹ï¼Œäººå®¶è¯´å•¥ä¹Ÿä¸ç”¨å¹²ï¼Œå¯¼å…¥è¿›åŽ»å°±èƒ½è¿è¡Œï¼Œæ—¥äº†ç‹—äº†ï¼Œå’‹å›žäº‹ï¼Œè‚¯å®šå°±æ˜¯çŽ¯å¢ƒé—®é¢˜äº†å‘—ã€‚ äºŽæ˜¯å°±jdkã€mavenã€intellij ideaï¼Œé‡æ–°é…ç½®ï¼Œç”šè‡³é‡è£…ï¼Œéƒ½æžä¸€éä¹Ÿæ²¡åŠžæ³•äº†ã€‚ ç¬¬äºŒå¤©ç»§ç»­æŒ‰ç…§é”™è¯¯æç¤ºæ‰¾ï¼Œæ‰¾åˆ°ä¸ªåŽŸæ¥å°±ç¿»å‡ºæ¥è¿‡çš„é“¾æŽ¥ï¼ŒåŠ äº†ä¾èµ–åŽèŽ«åå…¶å¦™å¥½äº†ï¼Œè€Œä¸”åˆ é™¤äº†ä¾èµ–ç«‹é©¬å°±èƒ½å¤çŽ°é—®é¢˜äº†ã€‚ æ­£å¸¸é¢„æœŸæ˜¯è¿™æ ·çš„12345678910111213141516171819202122232425com.marvin.demo.DemoApplication . ____ _ __ _ _ /\\ / ___&apos;_ __ _ _(_)_ __ __ _ \ \ \ \( ( )\___ | &apos;_ | &apos;_| | &apos;_ \/ _` | \ \ \ \ \\/ ___)| |_)| | | | | || (_| | ) ) ) ) &apos; |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.2.4.RELEASE)2020-02-03 22:51:16.565 INFO 40753 --- [ main] com.marvin.demo.DemoApplication : Starting DemoApplication on 192.168.0.105 with PID 40753 (/Users/mahaiqiang/git/mygitrepo/secret-demo/target/classes started by mahaiqiang in /Users/mahaiqiang/git/mygitrepo/secret-demo)2020-02-03 22:51:16.571 INFO 40753 --- [ main] com.marvin.demo.DemoApplication : No active profile set, falling back to default profiles: default2020-02-03 22:51:17.751 INFO 40753 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)2020-02-03 22:51:17.763 INFO 40753 --- [ main] o.apache.catalina.core.StandardService : Starting service [Tomcat]2020-02-03 22:51:17.764 INFO 40753 --- [ main] org.apache.catalina.core.StandardEngine : Starting Servlet engine: [Apache Tomcat/9.0.30]2020-02-03 22:51:17.838 INFO 40753 --- [ main] o.a.c.c.C.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext2020-02-03 22:51:17.838 INFO 40753 --- [ main] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 1205 ms2020-02-03 22:51:18.043 INFO 40753 --- [ main] o.s.s.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService &apos;applicationTaskExecutor&apos;2020-02-03 22:51:18.230 INFO 40753 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path &apos;&apos;2020-02-03 22:51:18.234 INFO 40753 --- [ main] com.marvin.demo.DemoApplication : Started DemoApplication in 2.039 seconds (JVM running for 2.681)2020-02-03 22:51:29.934 INFO 40753 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] : Initializing Spring DispatcherServlet &apos;dispatcherServlet&apos;2020-02-03 22:51:29.934 INFO 40753 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet : Initializing Servlet &apos;dispatcherServlet&apos;2020-02-03 22:51:29.942 INFO 40753 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet : Completed initialization in 8 ms2020-02-03 22:51:30.045 INFO 40753 --- [nio-8080-exec-1] c.marvin.demo.controller.DemoController : ç¬¬ä¸€ä¸ªpostæŽ¥å£, å‚æ•°:DemoEntity(name=a)2020-02-03 22:51:50.866 INFO 40753 --- [nio-8080-exec-3] c.marvin.demo.controller.DemoController : ç¬¬ä¸€ä¸ªpostæŽ¥å£, å‚æ•°:DemoEntity(name=marvin) è¿™æ¬¡æ˜¯ç™¾åº¦æ•‘äº†æˆ‘ï¼Œæˆ‘ä¸€èˆ¬ç”¨çš„å¿…åº”æœç´¢å¼•æ“Žï¼Œæ²¡æƒ³åˆ°æŒ‰ç…§ç¬¬äºŒä¸ªé”™è¯¯ç™¾åº¦å‡ºæ¥çš„ç¬¬ä¸€æ¡ç›´æŽ¥å°±æ˜¯è§£å†³æ–¹æ¡ˆã€‚ ä½†æ˜¯æŒ‰ç…§æ–¹æ¡ˆè¯´ç¬¬ä¸€æ¡ï¼Œæˆ‘çš„pomæ–‡ä»¶é‡Œå·²ç»æœ‰spring-boot-starter-webï¼Œ1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; ä½†æ˜¯è¿˜æ˜¯é€¼ç€æˆ‘åŠ äº†jacksonæ‰å¥½ä½¿äº†ã€‚å…ˆè®°å½•ä¸€ç¬”ï¼Œå†æ…¢æ…¢æƒ³åŽŸå› å§ï¼Œå¸Œæœ›æ—¥åŽä¸ä¼šå†ç¢°åˆ°è¿™ä¹ˆæ¶å¿ƒçš„é—®é¢˜ã€‚ æ„Ÿè°¢SpringBoot2.X é­é‡ No converter found for return value of type: class java.util.LinkedHashMap]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[java-jar jaråŒ…å¸¦çŽ¯å¢ƒå˜é‡(å‚æ•°)å¯åŠ¨]]></title>
    <url>%2F2020%2F01%2F20%2Fjava-jar%20jar%E5%8C%85%E5%B8%A6%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F(%E5%8F%82%E6%95%B0)%E5%90%AF%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[java -jarå¯åŠ¨æ—¶åŠ è½½çŽ¯å¢ƒå˜é‡ ç®€ä¹¦åœ°å€ éœ€æ±‚javaå·¥ç¨‹æˆ‘ä»¬å¯ä»¥ç¼–è¯‘æˆjarä¹Ÿå¯ä»¥ç¿»è¯‘æˆwarï¼Œä¸€èˆ¬åœ°ï¼ŒwaråŒ…æˆ‘ä¼šä¸¢åˆ°tomcatå®¹å™¨é‡Œï¼Œå¯åŠ¨tomcatæ¥è®¿é—®æœåŠ¡ï¼Œç«¯å£ã€SSLè¯ä¹¦ã€æ—¥å¿—ç­‰ç­‰ï¼Œéƒ½æ‰˜ç»™tomcatã€‚ å¦‚æžœæ‰“çš„æ˜¯jaråŒ…ï¼Œæˆ‘é€šå¸¸ä¼šç”¨nohupå¯åŠ¨ï¼Œæ¯”å¦‚ç”Ÿäº§çŽ¯å¢ƒçš„ä¸€äº›dbã€redisã€ç¬¬ä¸‰æ–¹secretç­‰ä¸ä¼šé…ç½®åˆ°é¡¹ç›®é‡Œï¼Œä»Šå¤©è¦è®°å½•çš„ä¾¿æ˜¯ç”¨nohup java -jar å¯åŠ¨jaråŒ…æ—¶å¦‚ä½•åŠ è½½çŽ¯å¢ƒå˜é‡é…ç½®çš„é—®é¢˜ã€‚ javaè¯­è¨€å¼€å‘çš„jaråŒ…å¯åŠ¨æ—¶å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼åŠ å¯åŠ¨å‚æ•°ã€‚ æ–¹å¼ä¸€ï¼š-DpropName=propValueè¿™ç§æ–¹å¼åº”è¯¥å¾ˆå¿«éƒ½èƒ½æ‰¾åˆ°1-DpropName=propValue æ¯”å¦‚ï¼š1java -jar -DdatabaseUrl=&quot;mysql://localhost:3306/pdb?user=root&amp;password=root&quot; -Dapp.key=&quot;123&quot; -Dapp.secret=&quot;xxx&quot; demo.jar å¤šä¸ªå‚æ•°ä¹Ÿå¯ä»¥ã€‚ æ–¹å¼äºŒï¼šå‚æ•°ç›´æŽ¥è·Ÿåœ¨å‘½ä»¤åŽé¢ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€1java -jar demo.jar JOURNAL_TREENODE_DATA-20190404174502.txt processType=1 è¿™ç§æ–¹å¼å‚æ•°å°±æ˜¯jaråŒ…é‡Œä¸»å¯åŠ¨ç±»ä¸­mainæ–¹æ³•çš„argså‚æ•°ï¼ŒæŒ‰é¡ºåºæ¥ æ–¹å¼ä¸‰ï¼šä½¿ç”¨springbootçš„æ–¹å¼ï¼Œâ€“propName=propValueæ–¹å¼1java -jar demo.jar --spring.profiles.active=dev --server.port=8181 æ³¨æ„ï¼šè¿è¡ŒjaråŒ…æ—¶æŒ‡å®šç«¯å£ï¼šjava -jar xxx.jar â€“server.port=8088è‹¥å‘½ä»¤è¡Œä¼ å…¥çš„server.portæ²¡æœ‰ä½œç”¨ï¼ŒæœåŠ¡ä»ç„¶ä½¿ç”¨8081ç«¯å£å¯åŠ¨ï¼ŒåŽŸå› æ˜¯spring-cloud-configä¼šè¦†ç›–å‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°ï¼Œè¿™æ˜¯æœ‰æ„ä¸ºä¹‹ï¼Œ åŠžæ³•æ˜¯åœ¨web-prod.ymlä¸­åšç‚¹å°æ”¹åŠ¨ï¼Œè®©â€œé…ç½®â€å˜å¾—â€œå¯é…ç½®â€ï¼šåŠ ä¸€å¯¹èŠ±æ‹¬ç¬¦1server.port=&#123;port:8081&#125; ç”¨clojureç¼–å†™çš„jaré‡Œæœ‰æƒŠå–œåœ¨clojureä¸Šé¢çš„é…ç½®å°±å˜å¾—è¯¡å¼‚äº†ï¼ŒçŒœçŒœä¸‹é¢çš„é…ç½®èƒ½ä¸èƒ½ç”Ÿæ•ˆå‘¢ï¼Ÿ1java -jar -Ddatabase-url=&quot;mysql://localhost:3306/pdb?user=root&amp;password=root&quot; -Dapp.key=&quot;123&quot; -Dapp.secret=&quot;xxx&quot; demo.jar å¦‚æžœä½ ç”¨cider-conecté€šè¿‡nreplçš„ç«¯å£è¿žæŽ¥ä¸Šä½ çš„æœåŠ¡ï¼Œä½ ä¼šå‘çŽ°ï¼Œè¿™ä¸ªé…ç½®å¯¼è‡´database-urlçš„å€¼ç¡®å®žå·²ç»æ”¹äº†ï¼Œä½†æ˜¯åŽé¢ä¸¤ä¸ªæ²¡æœ‰ã€‚ ç©¶å…¶åŽŸå› ï¼Œæˆ‘ä»¬javaä»Žclasspathé‡ŒèŽ·å–å‚æ•°ä½¿ç”¨çš„æ˜¯propertieså½¢å¼çš„ï¼Œä¹Ÿå°±æ˜¯jsonçš„æ ¼å¼ã€‚è¿™ä¸éš¾ç†è§£ï¼Œspringæœ‰å®ƒçš„åŠžæ³•ï¼Œclojureå½“ç„¶ä¹Ÿæœ‰è‡ªå·±çš„æ–¹å¼ã€‚ 1234&quot;app&quot;: &#123; &quot;key&quot;: &quot;123&quot;, &quot;secret&quot;:&quot;xxx&quot;&#125; è™½ç„¶jsonå’Œæˆ‘ä»¬çš„edné‡Œmapæ˜¯å¾ˆåƒçš„ï¼Œä½†æ˜¯æ¯•ç«Ÿæ˜¯ä¸åŒï¼ŒäºŽæ˜¯è¦åˆ†æžä¸‹çŽ°åœ¨çš„edné‡Œçš„é…ç½®ä¿¡æ¯ä»–æ˜¯æ€Žä¹ˆè¯»å–çš„å‘¢ï¼Ÿ ä»£ç é‡Œçš„envåœ¨configè¿™ä¸ªnamespaceé‡Œæ‰¾åˆ°äº†env1234567(defstate env :start (load-config :merge [(args) (source/from-system-props) (source/from-env)])) cpropåŠ è½½é…ç½®cprop.sourceè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç”¨æ¥åŠ è½½ednæ–‡ä»¶çš„1234567891011(defn- env-&gt;path [k] (k-&gt;path k &quot;_&quot; #&quot;__&quot;))(defn read-system-env ([] (read-system-env &#123;&#125;)) ([opts] (-&gt;&gt; (System/getenv) (map (fn [[k v]] [(env-&gt;path k) (str-&gt;value v opts)])) (into &#123;&#125;)))) ä»ŽèŽ·å–çš„è¿‡ç¨‹çœ‹ï¼Œåº”è¯¥æ˜¯ä¼šæŠŠ_åšä¸ºå•å…ƒèŠ‚ç‚¹æ–­å¼€ï¼Œå› æ­¤éœ€è¦æ”¹æˆè¿™æ ·1java -jar -Ddatabase-url=&quot;mysql://localhost:3306/pdb?user=root&amp;password=root&quot; -Dapp_key=&quot;123&quot; -Dapp_secret=&quot;xxx&quot; demo.jar å¯¹åº”åˆ°edné‡Œåº”è¯¥æ˜¯123&#123;:app &#123;:key &quot;123&quot; :secret &quot;xxx&quot;&#125;&#125; å¦‚æžœä»”ç»†çœ‹çœ‹cpropè¿™ä¸ªåº“å°±ä¸éš¾ç†è§£äº†ã€‚cpropåŠ è½½é…ç½®æ–‡ä»¶çš„é¡ºåºæ˜¯ : By default cprop will merge all configurations it can find in the following order:classpath resource configfile on a file system (pointed by a conf system property or by (load-config :file ))custom configurations, maps from various sources, etc.System propertiesENV variables å¯¹äºŽENVçš„åŠ è½½ä¹Ÿæœ‰æ˜Žç¡®è¯´æ˜Ž ENV variables lack structure. The only way to mimic the structure is via use of an underscore character. The _ is converted to - by cprop, so instead, to identify nesting, two underscores can be used. äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œè¯·é˜…è¯»cpropä»‹ç» æˆ‘çš„æœŸæœ›åƒä¸Šé¢çš„å‘½ä»¤å¦‚æžœæœ‰20ä¸ªå‚æ•°éœ€è¦åœ¨å¯ä¸œæ—¶æŒ‡å®šï¼Œä¼°è®¡çœ‹é‚£ä¸ªå‘½ä»¤å°±ç–¯äº†ï¼Œé‚£èƒ½ä¸èƒ½åœ¨å¯ä¸œæ—¶æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚prod-config.ednä¹‹ç±»çš„å‘¢ï¼Ÿæˆ‘æ²¡æœ‰æ‰¾åˆ°ï¼Œå¦‚æžœæœ‰å°±æ›´æ–¹ä¾¿äº†ã€‚ å‚è€ƒcprop]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[shadow-cljså¤šçŽ¯å¢ƒå¤šbase dominé…ç½®(closure-definesç¯‡)]]></title>
    <url>%2F2020%2F01%2F03%2Fshadow-cljs%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%A4%9Abase%20domin%E9%85%8D%E7%BD%AE(closure-defines%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[ç”¨shadow-cljsç¼–è¯‘ä»£ç æ—¶ä½¿ç”¨çŽ¯å¢ƒå˜é‡å®žçŽ°å¤šç¼–è¯‘çŽ¯å¢ƒ ç®€ä¹¦åœ°å€ åŽŸæ–¹æ¡ˆå‰ç«¯æœ‰ä¸ªconfig.cljsæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€ä¸ªdomainçš„å‡½æ•°ï¼ŒæŒ‡å®šapiæŽ¥å£çš„base-urlï¼Œæœ¬åœ°å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§åˆ†åˆ«ä¿®æ”¹æˆä¸åŒåœ°å€ã€‚ç±»ä¼¼è¿™æ ·å§ï¼š12345678910(ns &lt;&lt;project-ns&gt;&gt;.config);; æµ‹è¯•çŽ¯å¢ƒ#_(def domain &quot;https://test.url.com&quot;);; ç”Ÿäº§çŽ¯å¢ƒ#_(def domain &quot;https://prod.url.com&quot;);;å¼€å‘çŽ¯å¢ƒ(def domain &quot;http://localhost:3000&quot;) å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªä¸æ˜¯é•¿ä¹…ä¹‹è®¡ï¼Œåˆä¸æ™ºèƒ½ï¼Œéƒ¨ç½²æ—¶è¿˜è¦ä¿®æ”¹åœ°å€ï¼Œå®¹æ˜“å¿˜è®°ï¼Œå¹¶ä¸”è¿˜æœ‰æ—¶ä¼šæŠŠä¿®æ”¹æäº¤ä¸ŠåŽ»ã€‚å°¤å…¶æ˜¯æ²¡æœ‰æŒç»­é›†æˆå·¥å…·å¸®åŠ©åšéƒ¨ç½²å·¥ä½œçš„æ—¶å€™ã€‚~ å½“å‰æ–¹æ¡ˆshadow-cljsç”¨æˆ·æŒ‡å—æˆ‘æ²¡æœ‰é€šè¯»ï¼Œä½†æ˜¯ä»Žç›®å½•çœ‹ä¹Ÿæœ‰çŽ¯å¢ƒå˜é‡ç« èŠ‚çœ‹ï¼Œä¹Ÿæœ‰æ–¹æ¡ˆã€‚ é‡‡ç”¨closure-definesçš„æ–¹æ¡ˆï¼ŒæŒ‡å®šå¤šä¸ªbuild id,åœ¨ä¸åŒçš„buildä¸­ä¼ å…¥çŽ¯å¢ƒå˜é‡ã€‚1234(ns &lt;&lt;project-ns&gt;&gt;.config);;æ­¤å¤„çš„å˜é‡éœ€è¦ä¿®æ”¹çš„è¯·åœ¨é¡¹ç›®è·Ÿç›®å½•çš„shadow-cljs.ednä¸­ä¿®æ”¹(goog-define domain &quot;http://localhost:3000&quot;) shadow-cljs.edné…ç½®å¤§æ¦‚è¿™æ ·1234567891011121314151617181920212223242526:builds&#123;:app &#123;:target :browser :output-dir &quot;target/cljsbuild/public/dev/js&quot; :asset-path &quot;/js&quot; :modules &#123;:app &#123;:entries [YOUR-APP.app]&#125;&#125; :devtools &#123;:watch-dir &quot;resources/public&quot; :ignore-warnings true :preloads [re-frisk.preload]&#125; :closure-defines &#123;&quot;re_frame.trace.trace_enabled_QMARK_&quot; true&#125; :dev &#123;:closure-defines &#123;&lt;&lt;project-ns&gt;&gt;.config/domain &quot;http://localhost:3000&quot;&#125;&#125;&#125; :test-app &#123;:target :browser :output-dir &quot;target/cljsbuild/public/test/js&quot; :asset-path &quot;/js&quot; :modules &#123;:app &#123;:entries [YOUR-APP.app]&#125;&#125; :release &#123;:closure-defines &#123;&lt;&lt;project-ns&gt;&gt;.config/domain &quot;https://test.url.com&quot;&#125;&#125;&#125; :prod-app &#123;:target :browser :output-dir &quot;target/cljsbuild/public/prod/js&quot; :asset-path &quot;/js&quot; :modules &#123;:app &#123;:entries [YOUR-APP.app]&#125;&#125; :release &#123;:closure-defines &#123;&lt;&lt;project-ns&gt;&gt;.config/domain &quot;https://prod.url.com&quot;&#125;&#125;&#125;&#125; å¥½å¤„ å¯ä»¥å®šä¹‰å¤šä¸ªå˜é‡ï¼Œæ¯”å¦‚ä»Žå¤šä¸ªapiåœ°å€ å¯ä»¥é…ç½®æ— é™å¤šä¸ª ä¸å¥½å¤„ å¦‚æžœæœ‰æ–°å¢žåœ°å€ï¼Œéœ€è¦ä¿®æ”¹å¤šä¸ªbuildsçš„é…ç½® åœ°å€æ˜Žæ–‡å¯è§ï¼Œæƒ³åšéƒ¨ç½²å±‚çš„ä¿å¯†çš„è¯ï¼Œä¸å¯ä»¥ã€‚ å…¶ä»–æ–¹æ¡ˆè¿˜æ˜¯åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼ŒåŽé¢æåˆ°äº†åˆ«çš„æ–¹æ¡ˆã€‚å½“å‰æ¥è¯´ä¸Šé¢çš„ä¸åˆ©ä¹‹å¤„è¿˜ä¸æ˜¯ä¸ªé—®é¢˜ï¼Œç”¨åˆ°æ—¶å†è°ƒæ•´å…¶ä»–æ–¹æ¡ˆã€‚ Conditional Reading overriding-from-the-cli using-environment-variables]]></content>
      <categories>
        <category>shadow-cljs</category>
      </categories>
      <tags>
        <tag>clojurescript</tag>
        <tag>shadow-cljs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojurescriptç¼–è¯‘åŽåˆå¹¶cssæ–‡ä»¶è§£å†³ç¼“å­˜é—®é¢˜]]></title>
    <url>%2F2020%2F01%2F02%2Fclojurescript%E7%BC%96%E8%AF%91%E5%90%8E%E5%90%88%E5%B9%B6css%E6%96%87%E4%BB%B6%E8%A7%A3%E5%86%B3%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[clojurescripté¡¹ç›®ç”¨shadow-cljsç¼–è¯‘åŽå°†æ‰€æœ‰cssæ–‡ä»¶åŽ‹ç¼©æˆä¸€ä¸ªï¼Œå¹¶åŠ ç‰ˆæœ¬å·è®¿é—®è¾ƒå°‘ç¼“å­˜ã€‚ ç®€ä¹¦åœ°å€ èƒŒæ™¯æœ¬ç¯‡è·Ÿelectronå®‰è£…åŒ…é‡Œå°è£…æµè§ˆå™¨ç›´æŽ¥è®¿é—®URLé…ç½®æœ‰å…³ã€‚ æˆ‘ä»¬ç›®å‰çš„é…ç½®ç”¨shadow-cljs release app æ‰“åŒ…å¥½jsæ–‡ä»¶åŽï¼Œéœ€è¦å°†å…¥å£æ–‡ä»¶ã€å›¾ç‰‡ã€cssã€jsä¸€èµ·copyåˆ°éƒ¨ç½²æœåŠ¡å™¨ã€‚å…¶ä¸­cssæ˜¯æ•£ç¢Žçš„å„ä¸ªé¡µé¢è‡ªè¡Œæ·»åŠ çš„æ ·å¼æ–‡ä»¶ã€‚ä½†æ˜¯ç”¨electronç›´æŽ¥è®¿é—®URLä»¥åŽï¼Œcssæ€»æ˜¯è¢«ç¼“å­˜ä¸‹æ¥ï¼Œè¿™æ ·å°±å¯¼è‡´äº†ä¸€ä¸ªç³»ç»Ÿä¿®æ”¹çš„æ ·å¼åŽåœ¨åº”ç”¨é‡Œæ‰“å¼€ä¸ç”Ÿæ•ˆçš„é—®é¢˜ã€‚ æ–¹æ¡ˆå°†åœ¨éƒ¨ç½² æ—¶å°†ä¼—å¤šcssæ–‡ä»¶å†…å®¹åˆå¹¶åˆ°ä¸€ä¸ªcssæ–‡ä»¶ï¼Œç„¶åŽåœ¨å…¥å£çš„index.htmlé‡Œå¼•å…¥è¿™ä¸ªè¢«åˆå¹¶çš„cssæ–‡ä»¶ï¼ŒåŒæ—¶åŠ ä¸Šç‰ˆæœ¬å·ï¼Œç¦æ­¢ç¼“å­˜ã€‚ å®žæ–½ ç¬¬ä¸€æ­¥ï¼Œå‡†å¤‡è„šæœ¬å› ä¸ºä½¿ç”¨jenkinså‘å¸ƒï¼Œæ‰€ä»¥å…ˆæžä¸€ä¸ªåˆå¹¶æ–‡ä»¶çš„è„šæœ¬(merge_css.sh)ï¼Œç­‰ç€åœ¨jenkinsé‡Œè¿œç«¯æ‰§è¡Œä¸€ä¸‹ã€‚å†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425#!/bin/bash#èŽ·å–ç¬¬ä¸€ä¸ªå‚æ•°,ç›®æ ‡ç›®å½•srcpath=$1#ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¾“å‡ºæ–‡ä»¶target_file=$2#å…ˆåˆ é™¤åŽŸç›®æ ‡æ–‡ä»¶rm -rf $&#123;target_file&#125;;function writeByDir()&#123; echo $1 for file in $1/* do if test -f $file then echo $file cat "$file" &gt;&gt; "$&#123;target_file&#125;" echo "" &gt;&gt; "$&#123;target_file&#125;" else writeByDir $file fi done&#125;writeByDir $&#123;srcpath&#125; å¾ˆç®€å•ï¼Œè¿žå‚æ•°åˆç†æ€§éƒ½æ²¡æœ‰æ ¡éªŒï¼Œè‡ªå·±ç”¨è‡ªå·±çŸ¥é“å°±è¡Œã€‚ ç¬¬äºŒæ­¥ï¼Œè¿œç«¯æ‰§è¡Œåœ¨jenkinsé‡Œï¼Œè·ŸåŽŸæ¥ä¸€æ ·ï¼Œå°†cssã€imgã€index.htmlã€app.jsæ ¸å¿ƒæ–‡ä»¶rsync -rzve åˆ°è¿œç«¯ä»¥åŽï¼Œå†æž„å»ºæœ€åŽåŠ ä¸€ä¸ªåˆå¹¶çš„shell1ssh -p2020 root@*.*.*.* 'bash -s ' &lt; /opt/auto-deploy-scripts/merge_css.sh /opt/site/project/css /opt/site/project/css/main.css åœ¨åŽŸæ¥çš„cssæ–‡ä»¶ä¸‹ï¼Œå°†ç”Ÿæˆä¸€ä¸ªmain.cssæ–‡ä»¶ã€‚ ç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨åˆå¹¶çš„cssæ–‡ä»¶1234567891011121314151617181920212223&lt;html lang="cn"&gt;&lt;head&gt; &lt;title&gt;å¹³å°&lt;/title&gt; &lt;meta charset="utf-8"/&gt; &lt;meta content="width=device-width, initial-scale=1" name="viewport"/&gt; &lt;link href="https://cdn.bootcss.com/antd/3.18.0/antd.min.css" rel="stylesheet"&gt;&lt;/head&gt;&lt;body&gt;&lt;!-- Our JavaScript will modify the DOM inside this element --&gt;&lt;div id="app"&gt;&lt;/div&gt;&lt;script type="text/javascript"&gt; document.write("&lt;link rel='stylesheet' type='text/css' href='css/main.css?v="+new Date().getTime()+"'&gt;");&lt;/script&gt;&lt;script type="text/javascript"&gt; document.write("&lt;script type='text/javascript' src='doctorjs/app.js?v="+new Date().getTime()+"' type='text/javascript'&gt;&lt;\/script&gt;");&lt;/script&gt;&lt;/Body&gt;&lt;/html&gt; ç»æ£€æŸ¥ï¼Œå·²ç”Ÿæ•ˆã€‚å®Œï¼ï¼ï¼ é—ç•™é—®é¢˜ æœ¬åœ°å¼€å‘å› ä¸ºæ²¡æœ‰åŽ‹ç¼©æˆä¸€ä¸ªcssæ–‡ä»¶ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæç¤ºmain.cssä¸‹è½½404ï¼Œå¯ä»¥åˆ›å»ºä¸ªåŒåç©ºæ–‡ä»¶ å› ä¸ºå•ä¸ªé¡µé¢è¿˜æ˜¯å¼•ç”¨çš„è‡ªå·±çš„cssæ–‡ä»¶ï¼Œæ‰€ä»¥é‚£äº›ç¢Žç‰‡cssæ–‡ä»¶åŠ è½½å®Œæˆå‰é¡µé¢å…ƒç´ è¿˜æ˜¯èšé›†åœ¨viewçš„å·¦ä¸Šè§’ã€‚åŠ ä¸Šåˆå¹¶çš„cssï¼Œç›¸å½“äºŽåŒé‡æ ·å¼ã€‚ è¿˜æ˜¯æŠŠcsséƒ½å¤åˆ¶åˆ°äº†è¿œç«¯ï¼Œåšå¥½äº†å½“ç„¶æ˜¯ç¼–è¯‘æ—¶å°±ç¼–è¯‘æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åŽ»é‡ï¼ŒåŽ‹ç¼©ç­‰ç­‰ï¼Œèƒ½é›†æˆwebpackäº†å†æž å‚è€ƒShellè„šæœ¬åˆå¹¶æ–‡æœ¬æ–‡ä»¶]]></content>
      <categories>
        <category>clojurescript</category>
      </categories>
      <tags>
        <tag>clojurescript</tag>
        <tag>electron</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[electronå®‰è£…åŒ…é‡Œå°è£…æµè§ˆå™¨ç›´æŽ¥è®¿é—®URLé…ç½®]]></title>
    <url>%2F2019%2F12%2F31%2Felectron%E5%AE%89%E8%A3%85%E5%8C%85%E9%87%8C%E5%B0%81%E8%A3%85%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AEURL%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸‹è½½çš„electroné‡Œç›´æŽ¥è®¿é—®æŸä¸ªurlåœ°å€ ç®€ä¹¦åœ°å€ ä¹Ÿæ˜¯å› ä¸ºclojurescriptç¼–è¯‘åŽç”¨electronæ‰“åŒ…æˆæ¡Œé¢åº”ç”¨å®‰è£…ç¨‹åºè¿™ç¯‡æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œæ‰€ä»¥è€ƒè™‘ç›´æŽ¥ç”¨electronæ‰“ä¸ªchromeæµè§ˆå™¨è¿›åŽ»ï¼Œç„¶åŽåˆ¶å®šè®¿é—®çš„ç½‘é¡µï¼Œä»£æ›¿æœ¬åœ°èµ„æºã€‚ è¯è¯´å‰ä¸€ç¯‡ä¹‹æ‰€ä»¥æ²¡æœ‰æˆåŠŸï¼Œä¹Ÿä¸æ˜¯å®Œå…¨è§£å†³ä¸äº†ï¼Œè€Œæ˜¯å› ä¸ºä¸æƒ³æŠ˜è…¾äº†ï¼Œè§£å†³çš„è¯æ€è·¯åº”è¯¥æœ‰ä¸¤æ¡ï¼š figwheelä¸æ”¯æŒnpmç¨‹åºï¼Œæ¢æˆshadow-cljsä¹‹ç±»çš„ç¼–è¯‘å™¨ å¢žåŠ electronä¾èµ–ï¼Œåœ¨åº”ç”¨å±‚è§¦å‘æ›´æ–°æ£€æŸ¥ è¿™ç¯‡è¯´æ˜Žä¸€ä¸‹ç›´æŽ¥è¿è¡ŒURLçš„é…ç½®å’Œæ³¨æ„äº‹é¡¹ã€‚ 1. ä¸‹è½½electronçš„åŽ‹ç¼©åŒ…https://electronjs.org/releases/stable ä¸‹è½½è§£åŽ‹ï¼Œå†…éƒ¨ç›®å½•å¤§æ¦‚å¦‚æ­¤ ä¸»è¦è¿è¡Œæ—¶æ–‡ä»¶å°±æ˜¯resources/default_app.asar 2. å®‰è£…asaråŒ…è§£åŽ‹ç¼©å‘½ä»¤1yum install -g asar ä¸¤ä¸ªå‘½ä»¤(asar â€“help)ï¼š12asar pack app default_app.asar asar extract|e &lt;archive&gt; &lt;dest&gt; å…¶ä»–å‘½ä»¤è‡ªè¡Œç™¾åº¦ã€‚ 3.æ ¸å¿ƒæ–‡ä»¶æ ¸å¿ƒæ–‡ä»¶å°±æ˜¯æ‰“åŒ…æˆresources/default_app.asaræ‰€éœ€è¦çš„æ–‡ä»¶ã€‚åœ¨electronçš„é¡¹ç›®ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹app ï¼Œé‡Œé¢æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ã€‚ 3.1 main.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// app æ¨¡å—æ˜¯ä¸ºäº†æŽ§åˆ¶æ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸè®¾è®¡çš„ã€‚// BrowserWindow ç±»è®©ä½ æœ‰åˆ›å»ºä¸€ä¸ªæµè§ˆå™¨çª—å£çš„æƒåŠ›ã€‚const &#123;app, BrowserWindow, Menu, ipcMain&#125; = require(&apos;electron&apos;);const nativeImage = require(&apos;electron&apos;).nativeImage;var overlay = nativeImage.createFromPath(&apos;icon.png&apos;);const mainWindowURL = &apos;https://www.baidu.com&apos;;let mainWindow;//api:https://wizardforcel.gitbooks.io/electron-doc/content/api/browser-window.htmlfunction createWindow () &#123; console.log(&quot;createWindow......&quot;); mainWindow = new BrowserWindow(&#123; // fullscreen: true, maximizable: true, //æ”¯æŒæœ€å¤§åŒ– show: false, //ä¸ºäº†è®©åˆå§‹åŒ–çª—å£æ˜¾ç¤ºæ— é—ªçƒï¼Œå…ˆå…³é—­æ˜¾ç¤ºï¼Œç­‰å¾…åŠ è½½å®ŒæˆåŽå†æ˜¾ç¤ºã€‚ // icon: &quot;https://medical.3vyd.com/alk/prod/pc/icon/icon.ico&quot; &#125;) // Emitted when the window is closed. mainWindow.on(&apos;closed&apos;, function () &#123; console.log(&quot;closed......&quot;); mainWindow = null; &#125;) // mainWindow.once(&apos;ready-to-show&apos;, () =&gt; &#123; //å¼€å¯è¿™ä¸ªä»¥åŽç‚¹å‡»äº†å›¾ç‰‡è™½ç„¶æ²¡æœ‰ç™½å±ï¼Œä½†æ˜¯ä¼šæ„Ÿè§‰ä¸åˆ°ç‚¹äº†æ²¡ç‚¹ mainWindow.maximize(); //æ‰“å¼€æ—¶æœ€å¤§åŒ–æ‰“å¼€ï¼Œä¸æ˜¯å…¨å±ï¼Œä¿ç•™çŠ¶æ€æ  // &#125;) // mainWindow.setOverlayIcon(overlay, &quot;åŒ»æ•&quot;) mainWindow.setTitle(&quot;è¿‡æ•æ€§ç–¾ç—…é«˜ç«¯ç”¨æˆ·å¹³å°&quot;); mainWindow.setAutoHideMenuBar(true);//è‡ªåŠ¨éšè—èœå• mainWindow.loadURL(mainWindowURL); // app.commandLine.appendSwitch(&quot;--disable-http-cache&quot;) ç¦ç”¨ç¼“å­˜ // mainWindow.webContents.openDevTools(&#123;mode:&apos;bottom&apos;&#125;); mainWindow.show();&#125;app.on(&apos;ready&apos;, function() &#123; console.log(&quot;ready......&quot;); createWindow();&#125;);// Quit when all windows are closed.app.on(&apos;window-all-closed&apos;, function () &#123; // On OS X it is common for applications and their menu bar // to stay active until the user quits explicitly with Cmd + Q if (process.platform !== &apos;darwin&apos;) &#123; app.quit(); &#125;&#125;) 3.2 package.json12345&#123; &quot;name&quot;: &quot;electron&quot;, &quot;productName&quot;: &quot;Electron&quot;, &quot;main&quot;: &quot;main.js&quot;&#125; æ³¨æ„ï¼šproductNameçš„å€¼åƒä¸‡ä¸éœ€è¦æ”¹ã€‚ 4. æ‰“åŒ…åœ¨electron/resourcesç›®å½•ä¸‹æ‰§è¡Œï¼š12rm -rf default_app.asarasar pack app default_app.asar ä¹Ÿå°±æ˜¯ç”¨è‡ªå·±å¿ƒå¤§çš„asaræ–‡ä»¶æ›¿æ¢åŽŸæ¥æ—§çš„ã€‚ 5. æµ‹è¯•åœ¨windowsä¸Šè®¿é—®è¯¥exeåº”ç”¨ï¼Œä¸€èˆ¬åº”è¯¥æ²¡æœ‰é—®é¢˜æ‰“å¼€ç™¾åº¦çš„ã€‚ é—®é¢˜ï¼š electronç¼“å­˜é—®é¢˜æµè§ˆå™¨è®¿é—®çš„èµ„æºéƒ½ä¼šè¢«ç¼“å­˜ï¼Œå‡ ç§æ–¹å¼é¿å…ç¼“å­˜ã€‚ åœ¨cssæˆ–è€…jsç­‰èµ„æºåŽé¢åŠ ç‰ˆæœ¬å· æ‰“åŒ…æ—¶ç¦ç”¨ç¼“å­˜ï¼Œå‚è€ƒï¼šelectron å¦‚ä½•ç¦ç”¨æœ¬åœ°ç¼“å­˜ï¼Ÿå¼ºåˆ¶åˆ·æ–°ç¼“å­˜æ–¹æ¡ˆ æ¸…é™¤æœ¬åœ°cache windowsä¸Šä½ç½®ï¼šThe Electron stores itâ€™s cache in these folders:Windows:C:\Users\\AppData\Roaming\\CacheLinux:/home//.config//CacheOS X:/Users//Library/Application Support//Cache å‡çº§é—®é¢˜å› ä¸ºç›´æŽ¥è®¿é—®urlï¼Œæ‰€ä»¥ä¸å­˜åœ¨ä¸Šä¸€ç¯‡è¯´çš„ç‰ˆæœ¬æ›´æ–°é—®é¢˜ã€‚]]></content>
      <categories>
        <category>electron</category>
      </categories>
      <tags>
        <tag>clojurescript</tag>
        <tag>electron</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojurescriptç¼–è¯‘åŽç”¨electronæ‰“åŒ…æˆæ¡Œé¢åº”ç”¨å®‰è£…ç¨‹åº]]></title>
    <url>%2F2019%2F12%2F22%2Fclojurescript%E7%BC%96%E8%AF%91%E5%90%8E%E7%94%A8electron%E6%89%93%E5%8C%85%E6%88%90%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[ç”¨electronæŠŠclojurescriptç¼–è¯‘åŽçš„é™æ€èµ„æºæ–‡ä»¶æ‰“åŒ…æˆwindowså®‰è£…ç¨‹åº ç®€ä¹¦åœ°å€ clojurescriptæœ€ç»ˆè¿˜æ˜¯ç¼–è¯‘æˆjavascriptåœ¨æµè§ˆå™¨æ‰§è¡Œï¼Œæœ¬æ–‡æè¿°çš„æ˜¯åœ¨é¡¹ç›®æœ¬èº«åœ¨C/SçŽ¯å¢ƒä¸Šè¿è¡Œæ²¡æœ‰é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œæ€Žä¹ˆå°†è¿™äº›èµ„æºæ–‡ä»¶ç”¨electronæ‰“åŒ…æˆwindowsæˆ–è€…macçš„B/Såº”ç”¨ã€‚ æŠ€æœ¯è¯­è¨€å’Œå·¥å…·ï¼š clojurescript electronjs electron-builder ç¬¬ä¸€æ­¥ï¼šæ‰“åŒ…cljsæˆå¯é€šè¿‡æµè§ˆå™¨æµè§ˆçš„ç½‘ç»œèµ„æºæˆ‘è¿™ä¸ªé¡¹ç›®æ˜¯ç”¨figwheelç¼–è¯‘çš„ï¼Œæ‰“åŒ…å‘½ä»¤å¦‚ä¸‹:1lein cljsbuild once min-doctor å¦‚æžœæ˜¯ç”¨shadow-cljsç¼–è¯‘é¡¹ç›®çš„è¯ï¼Œå‘½ä»¤åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š1shadow-cljs release app é‡ç‚¹æ¥äº†ï¼šè¿™äº›ç¼–è¯‘æ–‡ä»¶åªæ˜¯å°†cljsæ‰“åŒ…æˆapp.jsæ–‡ä»¶ï¼Œç›®å½•ä¸€èˆ¬åœ¨targetç›®å½•çš„æŸä¸ªé—®é¢˜ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯è¿™æ ·çš„ã€‚ä½†æ˜¯ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿è¡Œä¸€ä¸ªç½‘é¡µåªè¦ä¸€ä¸ªjsè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œåœ¨ç”¨luminusåˆ›å»ºå‡ºæ¥çš„æ¨¡æ¿é‡Œï¼Œcsså’Œimageæ–‡ä»¶éƒ½åœ¨resource/publicç›®å½•ä¸‹ï¼ŒåŒ…æ‹¬å…¥å£çš„index.htmlæ–‡ä»¶ã€‚ ç”¨nginxç­‰éƒ¨ç½²æ—¶éœ€è¦å°†è¿™äº›æ–‡ä»¶ä¹Ÿä¸€å¹¶copyåˆ°nginxæœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸€æ­¥å°±ä¸è¯´äº†ã€‚ ç¬¬äºŒæ­¥ï¼šå°†è¿™äº›ç½‘ç»œèµ„æºæ‰“åŒ…æˆelectronå®‰è£…ç¨‹åºæœ‰äº†ä¸Šé¢çš„å…¥å£æ–‡ä»¶ï¼Œcsså’Œimageï¼Œä»¥åŠå”¯ä¸€çš„ä¸€ä¸ªjsæ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™äº›æ–‡ä»¶å’Œelectronçš„é…ç½®æ–‡ä»¶æ”¾åœ¨ä¸€èµ·ä¾¿å¯ä»¥äº†è¿›è¡Œä¸‹ä¸€æ­¥äº†ã€‚ 1. æž„å»ºelectronçš„æ‰“åŒ…ç›®å½•æˆ‘åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºäº†ä¸ªelectronæ–‡ä»¶å¤¹ï¼Œä¼šå°†èµ„æºæ–‡ä»¶copyåˆ°è¿™ä¸ªä½ç½®ä¸‹ã€‚æ‰€ä»¥æ•´ä¸ªé¡¹ç›®ç»“æž„å¤§æ¦‚å¦‚ä¸‹ï¼š1234567891011121314151617181920â”œâ”€â”€ project â”‚ â”œâ”€â”€ resource â”‚ â”‚ â””â”€â”€public â”‚ â”‚ â””â”€â”€ img â”‚ â”‚ â”œâ”€â”€ logo.png â”‚ â”‚ â”œâ”€â”€ user-header.png â”‚ â”‚ â””â”€â”€ css â”‚ â”‚ â””â”€â”€ js â”‚ â”‚ â””â”€â”€ index.html â”‚ â”œâ”€â”€ src â”‚ â”œâ”€â”€ electron â”‚ â”‚ â””â”€â”€public â”‚ â”‚ â””â”€â”€ img â”‚ â”‚ â”œâ”€â”€ logo.png â”‚ â”‚ â”œâ”€â”€ user-header.png â”‚ â”‚ â””â”€â”€ css â”‚ â”‚ â””â”€â”€ js â”‚ â”‚ â””â”€â”€ index.html â”‚ â”‚ â””â”€â”€package.json â”‚ â”‚ â””â”€â”€main.js å…¶ä¸­electronä¸‹çš„publicæ–‡ä»¶å¤¹å†…å®¹ç»“æž„å°±è·Ÿå¾€nginxéƒ¨ç½²æ—¶æ˜¯ä¸€æ ·çš„ï¼Œmain.jså’Œpackage.jsonæ˜¯ä¸ºelectronæ‰‹åŠ¨åŠ å…¥çš„ã€‚main.jsæ˜¯winçš„é»˜è®¤è¡Œä¸ºçš„æŒ‡å®šæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// Modules to control application life and create native browser windowconst &#123;app, BrowserWindow&#125; = require(&apos;electron&apos;)// Keep a global reference of the window object, if you don&apos;t, the window will// be closed automatically when the JavaScript object is garbage collected.let mainWindowconst mainWindowURL = &apos;http://localhost:10386/doc.html&apos;;function createWindow () &#123; // Create the browser window. mainWindow = new BrowserWindow(&#123; //fullscreen: true, webPreferences: &#123; &#125;, &#125;) // and load the index.html of the app.// mainWindow.loadFile(&apos;index.html&apos;) mainWindow.loadURL(mainWindowURL) // Emitted when the window is closed. mainWindow.on(&apos;closed&apos;, function () &#123; // Dereference the window object, usually you would store windows // in an array if your app supports multi windows, this is the time // when you should delete the corresponding element. mainWindow = null &#125;)&#125;function bootstrapServer() &#123; const handler = require(&apos;serve-handler&apos;); const http = require(&apos;http&apos;); const server = http.createServer((request, response) =&gt; &#123; // You pass two more arguments for config and middleware // More details here: https://github.com/zeit/serve-handler#options return handler(request, response, &#123; public: &apos;resources/app.asar/public&apos;, &#125;); &#125;) server.listen(10386, () =&gt; &#123; createWindow() &#125;);&#125;app.on(&apos;ready&apos;, bootstrapServer)// Quit when all windows are closed.app.on(&apos;window-all-closed&apos;, function () &#123; // On OS X it is common for applications and their menu bar // to stay active until the user quits explicitly with Cmd + Q if (process.platform !== &apos;darwin&apos;) &#123; app.quit() &#125;&#125;)app.on(&apos;activate&apos;, function () &#123; // On OS X it&apos;s common to re-create a window in the app when the // dock icon is clicked and there are no other windows open. if (mainWindow === null) &#123; createWindow() &#125;&#125;)// In this file you can include the rest of your app&apos;s specific main process// code. You can also put them in separate files and require them here. package.jsonçš„å†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334&#123; &quot;name&quot;: &quot;eallergy&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;license&quot;: &quot;&quot;, &quot;main&quot;: &quot;main.js&quot;, &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;electron .&quot;, &quot;dist&quot;: &quot;electron-builder -c.extraMetadata.main=main.js&quot;, &quot;dist-32&quot;: &quot;electron-builder -c.extraMetadata.main=main.js --ia32&quot; &#125;, &quot;build&quot;: &#123; &quot;productName&quot;: &quot;eallergy&quot;, &quot;appId&quot;: &quot;alk.doctor&quot;, &quot;copyright&quot;:&quot;çº¢åˆ›ç§‘æŠ€&quot;, &quot;directories&quot;: &#123; &quot;buildResources&quot;: &quot;public&quot; &#125;, &quot;files&quot;: [ &quot;main.js&quot;, &quot;public/**/*&quot;, &quot;node_modules/**/*&quot; ], &quot;mac&quot;: &#123; &quot;category&quot;: &quot;your.app.category.type&quot; &#125; &#125;, &quot;devDependencies&quot;: &#123; &quot;electron&quot;: &quot;^5.0.7&quot;, &quot;electron-builder&quot;: &quot;^21.0.15&quot; &#125;, &quot;dependencies&quot;: &#123; &quot;serve-handler&quot;: &quot;^6.1.0&quot; &#125;&#125; å°†èµ„æºæ–‡ä»¶copyåˆ°electron/public/ä½ç½®åŽæ‰§è¡Œyarnå’Œyarn distå‘½ä»¤ï¼ˆæ‰§è¡Œå‡ºé”™çš„è¯·çœ‹ä¸‹é¢çš„è§£å†³æ–¹æ¡ˆï¼‰ã€‚ 2. æ‰“åŒ…æ‰§è¡Œæ‰“åŒ…ä¹‹å‰è¿˜æœ‰ç‚¹çŽ¯å¢ƒå‡†å¤‡å·¥ä½œ å®‰è£…nodeå®‰è£…yarnå®‰è£…electronå®‰è£…electron-builder ç„¶åŽå¯ä»¥åœ¨electronç›®å½•ä¸‹è½½æ‰§è¡Œæ‰“åŒ…æ“ä½œ1234567891011121314151617181920212223242526# yarnyarn install v1.21.1warning package.json: License should be a valid SPDX license expressionwarning eallergy@1.0.0: License should be a valid SPDX license expression[1/4] Resolving packages...[2/4] Fetching packages...[3/4] Linking dependencies...[4/4] Building fresh packages...Done in 13.47s.$$$$ yarn distyarn run v1.21.1warning package.json: License should be a valid SPDX license expression$ electron-builder -c.extraMetadata.main=main.js â€¢ electron-builder version=21.0.15 os=10.0.18363 â€¢ loaded configuration file=package.json ("build" field) â€¢ description is missed in the package.json appPackageFile=Z:\git\redcreation\alk-wxapi\alk-web\electron\package.json â€¢ author is missed in the package.json appPackageFile=Z:\git\redcreation\alk-wxapi\alk-web\electron\package.json â€¢ packaging platform=win32 arch=x64 electron=5.0.7 appOutDir=dist\win-unpacked â€¢ default Electron icon is used reason=application icon is not set â€¢ building target=nsis file=dist\eallergy Setup 1.0.0.exe archs=x64 oneClick=true perMachine=false â€¢ building block map blockMapFile=dist\eallergy Setup 1.0.0.exe.blockmapDone in 45.81s.$ 3. æ‰“åŒ…æ–‡ä»¶ electronå’Œelectron-builderç›¸å…³æ–‡ä»¶å®‰è£…å¤±è´¥è§£å†³æ–¹æ¡ˆé”™è¯¯ç‰ˆæœ¬ä¸å°½ç›¸åŒï¼Œä½†æ˜¯å¤§æ¦‚å¦‚ä¸‹å§12345678910111213141516171819202122232425262728293031323334353637$ yarn distyarn run v1.21.1warning package.json: License should be a valid SPDX license expression$ electron-builder -c.extraMetadata.main=main.js â€¢ electron-builder version=21.0.15 os=10.0.18363 â€¢ loaded configuration file=package.json ("build" field) â€¢ description is missed in the package.json appPackageFile=Z:\git\redcreation\alk-wxapi\alk-web\electron\package.json â€¢ author is missed in the package.json appPackageFile=Z:\git\redcreation\alk-wxapi\alk-web\electron\package.json â€¢ packaging platform=win32 arch=x64 electron=5.0.7 appOutDir=dist\win-unpacked â€¢ default Electron icon is used reason=application icon is not set â€¢ building target=nsis file=dist\eallergy Setup 1.0.0.exe archs=x64 oneClick=true perMachine=false â€¢ downloading url=https://github.com/electron-userland/electron-builder-binaries/releases/download/nsis-3.0.3.2/nsis-3.0.3.2.7z size=1.4 MB parts=1 â€¢ retrying attempt=1 â€¢ retrying attempt=2 â€¢ retrying attempt=3 â¨¯ part download request failed with status code 403github.com/develar/app-builder/pkg/download.(*Part).doRequest /Volumes/data/Documents/app-builder/pkg/download/Part.go:126github.com/develar/app-builder/pkg/download.(*Part).download /Volumes/data/Documents/app-builder/pkg/download/Part.go:67github.com/develar/app-builder/pkg/download.(*Downloader).DownloadResolved.func1.1 /Volumes/data/Documents/app-builder/pkg/download/downloader.go:107github.com/develar/app-builder/pkg/util.MapAsyncConcurrency.func2 /Volumes/data/Documents/app-builder/pkg/util/async.go:68runtime.goexit /usr/local/Cellar/go/1.12.7/libexec/src/runtime/asm_amd64.s:1337 â¨¯ Z:\git\redcreation\alk-wxapi\alk-web\electron\node_modules\app-builder-lib\node_modules\app-builder-bin\win\x64\app-builder.exe exited with code ERR_ELECTRON_BUILDER_CANNOT_EXECUTE stackTrace= Error: Z:\git\redcreation\alk-wxapi\alk-web\electron\node_modules\app-builder-lib\node_modules\app-builder-bin\win\x64\app-builder.exe exited with code ERR_ELECTRON_BUILDER_CANNOT_EXECUTEat ChildProcess.childProcess.once.code (Z:\git\redcreation\alk-wxapi\alk-web\electron\node_modules\app-builder-lib\node_modules\builder-util\src\util.ts:239:14) at Object.onceWrapper (events.js:273:13) at ChildProcess.emit (events.js:182:13) at maybeClose (internal/child_process.js:962:16) at Process.ChildProcess._handle.onexit (internal/child_process.js:251:5) From previous event: at processImmediate (timers.js:632:19) From previous event: at NsisTarget.buildInstaller (Z:\git\redcreation\alk-wxapi\alk-web\electron\node_modules\app-builder-lib\src\targets\nsis\NsisTarget.ts:202:29) å®‰è£…electronä¾èµ–æ—¶è¢«å¢™åŸºæœ¬ä¸Šèº²ä¸è¿‡åŽ»çš„ï¼Œè¿æ°”ä¸å¥½çš„æ—¶å€™å°±æ˜¯ä¸€å®šèº²ä¸è¿‡åŽ»ï¼Œè¿™æ—¶å€™æœ‰ä¸‰ç§æ–¹æ¡ˆ è®¾ç½®electronçš„é•œåƒä¸ºæ·˜å®é•œåƒ,ç„¶åŽç»§ç»­æ‰§è¡Œï¼ˆæŽ¨èæ­¤æ–¹æ¡ˆï¼‰ 1234567set ELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/set SELENIUM_CDNURL=http://npm.taobao.org/mirrorss/seleniumset CHROMEDRIVER_CDNURL=https://npm.taobao.org/mirrors/chromedriverset SASS_BINARY_SITE=https://npm.taobao.org/mirrors/node-sass/ ä½¿ç”¨è¿…é›·æˆ–è€…æµè§ˆå™¨æ‰‹åŠ¨ä¸‹è½½downloadå¤±è´¥çš„æ–‡ä»¶ä¸‹è½½å®ŒåŽæ‹–åˆ°C:\Users\mahaiqiang\AppData\Local\electron-builder\Cache\è¿™ä¸ªç›®å½•ï¼Œè§£åŽ‹å¥½ï¼Œé‡æ–°distï¼Œä¼šä¼˜å…ˆä½¿ç”¨ç¼“å­˜ä¸­çš„æ–‡ä»¶ã€‚æ³¨æ„ç‰ˆæœ¬ä¸€è‡´ã€‚æ‰”ä¸ŠåŽ»å¯èƒ½æ˜¯è¿™æ ·ï¼š åœ¨å‡ºé”™çš„å‘½ä»¤ä¸Šæ‰‹åŠ¨æŒ‡å®šé•œåƒæ‰§è¡Œç±»ä¼¼ä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨çœŸæ­£çš„å‘½ä»¤å‰åŠ å‚æ•° 1ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ yarn install æŽ¨èæ–¹æ¡ˆä¸€ã€‚ ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ›´æ–°â€”-è¿™ä¸€æ­¥æ²¡æœ‰æˆåŠŸå°±æ¢æ–¹æ¡ˆäº†ï¼Œä¸å€¼å¾—çœ‹123456789101112131415$ npm install electron-updater --savenpm WARN rm not removing /Users/mahaiqiang/git/redcreation/alk-wxapi/alk-web/electron/node_modules/.bin/semver as it wasn&apos;t installed by /Users/mahaiqiang/git/redcreation/alk-wxapi/alk-web/electron/node_modules/semver&gt; ejs@2.7.4 postinstall /Users/mahaiqiang/git/redcreation/alk-wxapi/alk-web/electron/node_modules/ejs&gt; node ./postinstall.jsThank you for installing EJS: built with the Jake JavaScript build tool (https://jakejs.com/)npm notice created a lockfile as package-lock.json. You should commit this file.npm WARN eallergy@1.0.0 No repository field.npm WARN eallergy@1.0.0 No license field.+ electron-updater@4.2.0added 20 packages from 19 contributors, removed 10 packages, updated 289 packages and audited 909 packages in 304.234sfound 0 vulnerabilities ä¸ºäº†é…åˆæ‰“åŒ… package.json éœ€è¦ç»™ build æ–°å¢žé…ç½®é¡¹ï¼š123456789&quot;build&quot;: &#123; &quot;publish&quot;: [ &#123; &quot;provider&quot;: &quot;generic&quot;, &quot;url&quot;: &quot;http://127.0.0.1:5500/&quot; #è¿™é‡Œæ˜¯æˆ‘æœ¬åœ°å¼€çš„æœåŠ¡å™¨çš„åœ°å€ &#125; ], ...&#125; å‚è€ƒæ–‡æ¡£ï¼š electronå…¥é—¨å¿ƒå¾—ä½¿ç”¨ electron-builder ä¸Ž electron-packager çš„ JSAPI æž„å»º electron æ¡Œé¢åº”ç”¨å®‰è£…ç¨‹åº]]></content>
      <categories>
        <category>electron</category>
      </categories>
      <tags>
        <tag>clojurescript</tag>
        <tag>electron</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[emacsé‡Œç”¨agå…¨å±€æ£€ç´¢æ˜¯æŽ’é™¤æŸäº›ç›®å½•]]></title>
    <url>%2F2019%2F12%2F22%2Femacs%E9%87%8C%E7%94%A8ag%E5%85%A8%E5%B1%80%E6%A3%80%E7%B4%A2%E6%98%AF%E6%8E%92%E9%99%A4%E6%9F%90%E4%BA%9B%E7%9B%AE%E5%BD%95%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®æ ¹ç›®å½•åˆ›å»º.projectileæ–‡ä»¶ï¼Œç»´æŠ¤agæœç´¢è¦æŽ’é™¤çš„ç›®å½•ï¼Œå¦‚åŒ.gitignoreä¸€æ ·ã€‚ ç®€ä¹¦åœ°å€ å¦‚æžœä¸åšä¸‹é¢çš„é…ç½®ï¼Œåœ¨emacsé‡Œæ‰§è¡Œå…¨å±€æœç´¢æ—¶ä¼šæœç´¢æ‰€æœ‰ç›®å½•ï¼Œæ¯”å¦‚node_mudulesï¼Œtargetç­‰ç›®å½•ã€‚ å› ä¸ºæˆ‘ä»¬æ˜¯shadow-cljså’ŒleinåŠŸèƒ½ï¼Œæ˜¯ä»Žluminuså“­åˆ›å»ºçš„ï¼Œæ‰€ä»¥æœ‰è¿™ä¸ªé—®é¢˜ éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸ªæ–‡ä»¶.projectile , å†…å®¹å¦‚ä¸‹ï¼š1234-/log-/tmp-/node_modules-/target% å†™æ³•ä¸Ž.gitignoreå¦‚å‡ºä¸€è¾™ã€‚ è¿™æ ·é…ç½®åŽï¼Œå†ä½¿ç”¨agæœç´¢ï¼Œä¾¿ä¸ä¼šå†åŽ»è¿™äº›ç›®å½•ä¸‹æœç´¢ã€‚]]></content>
      <categories>
        <category>emacs</category>
      </categories>
      <tags>
        <tag>emacs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoä¹‹é«˜çº§ç¾ŽåŒ–ç¯‡]]></title>
    <url>%2F2019%2F11%2F15%2Fhexo%E4%B9%8B%E9%AB%98%E7%BA%A7%E7%BE%8E%E5%8C%96%E7%AF%87%2F</url>
    <content type="text"><![CDATA[å¢žåŠ ä¸€äº›å…¶ä»–åŠŸèƒ½ ç®€ä¹¦åœ°å€ å‚è€ƒåŽŸæ–‡åœ°å€ï¼šhexoå»ºç«™è®° ä¸»åŠ¨æŽ¨é€åˆ°ç™¾åº¦å‚è€ƒHexoæ’ä»¶ä¹‹ç™¾åº¦ä¸»åŠ¨æäº¤é“¾æŽ¥å®‰è£…hexo-baidu-url-submitæ’ä»¶ï¼š1npm install hexo-baidu-url-submit --save è¯¥æ’ä»¶åœ¨githubä¸Šï¼šhexo-baidu-url-submit åœ¨æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­å¢žåŠ baidu_url_submitå­—æ®µï¼Œæ›´æ”¹deployå­—æ®µ123456789101112131415baidu_url_submit: count: 1000 ## æäº¤æœ€æ–°çš„ä¸€ä¸ªé“¾æŽ¥ host: alili.tech ## åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå token: xxxxx ## è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠåšå®¢æºä»£ç å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ! path: baidu_urls.txt ## æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æŽ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ xz_appid: &apos;xxxxxx&apos; ## ä½ çš„ç†ŠæŽŒå· appid xz_token: &apos;xxxxxx&apos; ## ä½ çš„ç†ŠæŽŒå· token xz_count: 10 ## ä»Žæ‰€æœ‰çš„æäº¤çš„æ•°æ®å½“ä¸­é€‰å–æœ€æ–°çš„10æ¡,è¯¥æ•°é‡è·Ÿä½ çš„ç†ŠæŽŒå·è€Œå®šdeploy:- type: git repo: https://github.com/dfface/dfface.github.io.git branch: master- type: baidu_url_submitter # ç™¾åº¦- type: baidu_xz_url_submitter # ç™¾åº¦ç†ŠæŽŒå· ç†ŠæŽŒå·çš„idå’Œtokenï¼Œè¯·çœ‹å›¾ï¼š ç„¶åŽåœ¨ä¸»é¢˜ä¸­å¼€å¯:12# Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEObaidu_push: true è‡ªåŠ¨æ¢èƒŒæ™¯å‚è€ƒï¼šinjectsé¦–å…ˆå†™å…¥ï¼šsource/_data/auto-bg.styl: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// èƒŒæ™¯æ›´æ¢è®¾ç½®ï¼ŒåŽŸæ¥ï¼šbackground:url(https://source.unsplash.com/random/1600x900);body &#123; background:url(&quot;https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature&amp;return=302&quot;); background-repeat: no-repeat; -webkit-background-size:100%; background-size:cover; -webkit-background-size: cover !important; -moz-background-size: cover !important; -o-background-size: cover; background-attachment:fixed, scroll; padding-top: 0px;&#125;.main-inner &#123; margin-top: 2rem; padding: 2rem; background: #fff; opacity: 0.7; min-height: 500px; transition: opacity 1s;&#125;header,footer &#123; opacity: 0.7; transition: opacity 1s;&#125;.main-inner:hover &#123; opacity:1.0;&#125;header:hover &#123; opacity:1.0;&#125;footer:hover &#123; opacity:1.0;&#125;body &#123; -moz-user-select:none; /* Firefoxç§æœ‰å±žæ€§ */ -webkit-user-select:none; /* WebKitå†…æ ¸ç§æœ‰å±žæ€§ */ -ms-user-select:none; /* IEç§æœ‰å±žæ€§(IE10åŠä»¥åŽ) */ -khtml-user-select:none; /* KHTMLå†…æ ¸ç§æœ‰å±žæ€§ */ -o-user-select:none; /* Operaç§æœ‰å±žæ€§ */ user-select:none; /* CSS3å±žæ€§ */&#125; ç„¶åŽåœ¨_config.ymlä¸­æ³¨é‡Šï¼š1234567891011custom_file_path: #head: source/_data/head.swig #header: source/_data/header.swig #sidebar: source/_data/sidebar.swig #postMeta: source/_data/post-meta.swig #postBodyEnd: source/_data/post-body-end.swig #footer: source/_data/footer.swig #bodyEnd: source/_data/body-end.swig #variable: source/_data/variables.styl #mixin: source/_data/mixins.styl style: source/_data/auto-bg.styl]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬--Gource:è®©gitå¼€å‡ºèŠ±æ¥]]></title>
    <url>%2F2019%2F11%2F13%2FGource%2F</url>
    <content type="text"><![CDATA[gource æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®, å¤„ç†å„ç§ä»£ç ç®¡ç†å·¥å…·(git,svn,hg,bzr,cvs2cl)çš„åŽ†å², ç”¨åŠ¨ç”»å±•ç¤ºä»£ç ç»“æž„å’Œä½œè€…çš„çŠ¶æ€ã€‚ ç®€ä¹¦åœ°å€ gourceä»‹ç»gitçš„åŽ†å²æ˜¯ä¸€éƒ¨ç”µå½±, gourceçš„èƒ½è®©å®ƒæ´»èµ·æ¥, ffmpegeå¯ä»¥æŠŠè¿™æ®µè§†é¢‘ä¿å­˜ä¸‹æ¥ã€‚ gource æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®, å¤„ç†å„ç§ä»£ç ç®¡ç†å·¥å…·(git,svn,hg,bzr,cvs2cl)çš„åŽ†å², ç”¨åŠ¨ç”»å±•ç¤ºä»£ç ç»“æž„å’Œä½œè€…çš„çŠ¶æ€ã€‚ ä¸‹é¢è¿™æ®µgifå±•ç¤ºäº†è¿‡æ•å¹³å°é¡¹ç›®å¼€å§‹çš„æ—¶å€™ä»Ž4æœˆ25åˆ°4æœˆ30ä¹‹é—´MarvinåŒå­¦å¿™ç¢ŒäºŽä»£ç åº“å„å¤„çš„æƒ…å½¢ã€‚ä¸­é—´çš„é‚£ä¸ªå°çº¢äººæ˜¯MarvinðŸ˜‚ å¾ˆå¸…å§ï¼ gource --title &quot;ALK-project&quot; --date-format &quot;%y-%m-%d:%R&quot; alk-wxapi å®‰è£…å¥½å·¥å…·ä»¥åŽï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤æ¥çœ‹åˆ°ä¸€æ ·çš„ç»“æžœã€‚ gourceä½¿ç”¨123456789# å®‰è£…gourcebrew install gource# å®‰è£…ffmpegbrew install ffmpeg# æ‰§è¡Œgource project.git# ç”Ÿæˆmp4ç”µå½±gource --title "ALK project" --date-format "%D" -1280x720 alk-wxapi -o - | ffmpeg -y -r 60 -f image2pipe -vcodec ppm -i - -vcodec libx264 -preset ultrafast -pix_fmt yuv420p -crf 1 -threads 0 -bf 0 gource.mp4 è‡ªå·±è¯•è¯•å§ã€‚]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬--macä¸Šshellç»ˆç«¯ç¼–è¾‘å‘½ä»¤è¡Œå¿«æ·é”®]]></title>
    <url>%2F2019%2F11%2F11%2F%E8%BD%AC--%E4%BB%8EEclipse%E8%BD%AC%E7%A7%BB%E5%88%B0IntelliJ%20IDEA%E4%B8%80%E7%82%B9%E5%BF%83%E5%BE%97%20copy%2F</url>
    <content type="text"><![CDATA[macOS ä¸Šshellç»ˆç«¯ç¼–è¾‘å‘½ä»¤è¡Œå¿«æ·é”® ç®€ä¹¦åœ°å€ mac shellç»ˆç«¯ç¼–è¾‘å‘½ä»¤è¡Œå¿«æ·é”®â€”â€”è¡Œé¦–ï¼Œè¡Œå°¾ Ctrl + d åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äºŽé€šå¸¸çš„Deleteé”®ï¼ˆå‘½ä»¤è¡Œè‹¥æ— æ‰€æœ‰å­—ç¬¦ï¼Œåˆ™ç›¸å½“äºŽexitï¼›å¤„ç†å¤šè¡Œæ ‡å‡†è¾“å…¥æ—¶ä¹Ÿè¡¨ç¤ºeofï¼‰ Ctrl + h é€€æ ¼åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äºŽé€šå¸¸çš„Backspaceé”® Ctrl + u åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ°è¡Œé¦–çš„å­—ç¬¦Ctrl + k åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ°è¡Œå°¾çš„å­—ç¬¦ Ctrl + c å–æ¶ˆå½“å‰è¡Œè¾“å…¥çš„å‘½ä»¤ï¼Œç›¸å½“äºŽCtrl + Break Ctrl + a å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–ï¼ˆAhead of lineï¼‰ï¼Œç›¸å½“äºŽé€šå¸¸çš„Homeé”®Ctrl + e å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼ˆEnd of lineï¼‰Ctrl + f å…‰æ ‡å‘å‰(Forward)ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½®Ctrl + b å…‰æ ‡å¾€å›ž(Backward)ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½® Ctrl + l æ¸…å±ï¼Œç›¸å½“äºŽæ‰§è¡Œclearå‘½ä»¤Ctrl + p è°ƒå‡ºå‘½ä»¤åŽ†å²ä¸­çš„å‰ä¸€æ¡ï¼ˆPreviousï¼‰å‘½ä»¤ï¼Œç›¸å½“äºŽé€šå¸¸çš„ä¸Šç®­å¤´Ctrl + n è°ƒå‡ºå‘½ä»¤åŽ†å²ä¸­çš„ä¸‹ä¸€æ¡ï¼ˆNextï¼‰å‘½ä»¤ï¼Œç›¸å½“äºŽé€šå¸¸çš„ä¸Šç®­å¤´Ctrl + r æ˜¾ç¤ºï¼šå·æç¤ºï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥æŸ¥æ‰¾ç›¸å…³åŽ†å²å‘½ä»¤ï¼ˆreverse-i-searchï¼‰Ctrl + w åˆ é™¤ä»Žå…‰æ ‡ä½ç½®å‰åˆ°å½“å‰æ‰€å¤„å•è¯ï¼ˆWordï¼‰çš„å¼€å¤´Ctrl + y ç²˜è´´æœ€åŽä¸€æ¬¡è¢«åˆ é™¤çš„å•è¯å…¶ä»–Command-LineæŠ€å·§æç¤ºâ€¢è¾“å…¥å‘½ä»¤open .å¯ä»¥ç”¨Finderæ‰“å¼€å½“å‰çš„ä½ç½®ã€‚ â€¢åœ¨Terminalçš„åå¥½é‡Œé¢å¯ä»¥è®¾å®šå®ƒçš„å¤–è§‚å’Œé£Žæ ¼ã€‚ â€¢ä¸­æ­¢ä¸€ä¸ªé”™è¯¯çš„æˆ–è€…å‘ç–¯çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ç»„åˆé”®control + Cã€‚ â€¢ä½ å¯ä»¥åœ¨æ‰§è¡Œå‰ç¼–è¾‘å‘½ä»¤ï¼Œåªéœ€è¦ä½¿ç”¨ç®­å¤´å’Œé”®ç›˜ä¸Šçš„å…¶ä»–å­—æ¯ã€‚ â€¢æ²¡æœ‰è¾“å…¥ä»»ä½•å‘½ä»¤æ—¶ï¼Œä½ å¯ä»¥ç”¨â–²å’Œâ–¼æ¥æµè§ˆåŽ†å²å‘½ä»¤ã€‚åŒæ ·å¯ä»¥ç¼–è¾‘å’Œå†æ¬¡æ‰§è¡Œã€‚ â€¢ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨historyå‘½ä»¤æŸ¥çœ‹åŽ†å²è®°å½•ã€‚ Command + K æ¸…å± Command + T æ–°å»ºæ ‡ç­¾ Command +W å…³é—­å½“å‰æ ‡ç­¾é¡µ Command + S ä¿å­˜ç»ˆç«¯è¾“å‡º Command + D åž‚ç›´åˆ†éš”å½“å‰æ ‡ç­¾é¡µ Command + Shift + D æ°´å¹³åˆ†éš”å½“å‰æ ‡ç­¾é¡µ Command + shift + {æˆ–} å‘å·¦/å‘å³åˆ‡æ¢æ ‡ç­¾]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojure&clojurescriptå‰åŽç«¯å®žçŽ°websocketåè®®é€šä¿¡]]></title>
    <url>%2F2019%2F11%2F03%2Fclojure%26clojurescript%E5%89%8D%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0websocket%E5%8D%8F%E8%AE%AE%E9%80%9A%E4%BF%A1%2F</url>
    <content type="text"><![CDATA[åŽå°çš„luminusæ¨¡æ¿çš„clojureé¡¹ç›®å’Œå‰ç«¯reagent clojurescripté¡¹ç›®ï¼Œå„è‡ªæ­å»ºwebsocketé€šä¿¡ ç®€ä¹¦åœ°å€ æœåŠ¡ç«¯æœåŠ¡ç«¯é…ç½®websocketç›¸å¯¹æ¥è¯´æŒºç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬é¡¹ç›®å½“åˆnewçš„æ—¶å€™æ²¡æœ‰åŠ websocketï¼ŒçŽ°åœ¨æ˜¯å‚è€ƒluminusweb websocketå¾€é‡Œå¢žåŠ å…³é”®ä»£ç  åˆ›å»ºws-routeåˆ›å»ºå¦‚ä¸‹routeï¼Œå¹¶è·Ÿæ™®é€šhttp api routeä¸€æ ·åŠ å…¥handleråºåˆ—ä¸­ã€‚1234567891011121314(ns alk-wxapi.routes.websockets (:require [alk-wxapi.routes.service.ws-service :refer [ws-handler countdown]]))(defn websocket-routes [] ["/ws" &#123;:swagger &#123;:tags ["websocket"]&#125;&#125; ["" &#123;:get &#123;:summary "websocket å…¥å£" :parameters &#123;&#125; :handler (fn [request] (ws-handler request))&#125;&#125;] ]) åˆ›å»ºws-serviceå³ä¸Šé¢requireçš„ws-serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536(ns alk-wxapi.routes.service.ws-service (:require [clojure.tools.logging :as log] [immutant.web.async :as async] [immutant.web.sse :as sse]))(defonce channels (atom #&#123;&#125;))(defn broadcast-msg "å¹¿æ’­æ¶ˆæ¯" [data] (log/info "å¹¿æ’­æ¶ˆæ¯ï¼š" data) (doseq [channel @channels] (async/send! channel (str data))))(defn notify-clients! [channel data] (log/info (java.util.Date.) "æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„messageï¼š" data) (async/send! channel (str &#123;:message data :type "reply"&#125;)))(defn connect! [channel] (log/info "channel open") (swap! channels conj channel))(defn disconnect! [channel &#123;:keys [code reason]&#125;] (log/info "close code:" code "reason:" reason) (swap! channels #(remove #&#123;channel&#125; %)))(def websocket-callbacks "WebSocket callback functions" &#123;:on-open connect! :on-close disconnect! :on-message notify-clients!&#125;)(defn ws-handler [request] (async/as-channel request websocket-callbacks)) æµ‹è¯•è¿žæŽ¥è¿™æ ·å†æ¬¡å¯åŠ¨replï¼Œåœ¨å¯åŠ¨http æŽ¥å£çš„åŒæ—¶å°±åœ¨åŒä¸€ç«¯å£å¯åŠ¨äº†wsåè®®çš„websocketæœåŠ¡ï¼Œå¯ä»¥ç”¨wscatå‘½ä»¤è¡Œæµ‹è¯•å·¥å…·æˆ–è€…åœ¨åœ¨çº¿æµ‹è¯•å·¥å…·è¿›è¡Œè¿žæŽ¥æµ‹è¯•ã€‚123$ wscat -c ws://localhost:3000/api/wsConnected (press CTRL+C to quit)&gt; å®¢æˆ·ç«¯åœ¨ä»»æ„ä¸€ä¸ªé¡µé¢æ‰¾ä¸ªå¥‘æœºå¼€å§‹åˆ›å»ºè¿žæŽ¥ï¼Œå‚è€ƒmulti-client-ws-immutantåˆ›å»ºæ—¶æŒ‡å®šæ¶ˆæ¯å¤„ç†å›žè°ƒå‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š æ ¹ç›®å½•æˆ–è€…ä»»æ„ç›®å½•åˆ›å»ºwsè¿žæŽ¥å·¥å…·ç±»12345678910111213141516171819(defn- receive-transit-msg! [update-fn] (fn [msg] (js/clearTimeout clear-time) (update-fn (cljs.reader/read-string (.-data msg)))))(defn- send-transit-msg! [msg] (if @ws-chan (.send @ws-chan msg) (throw (js/Error. &quot;Websocket is not available!&quot;))))(defn make-websocket! [url receive-handler] (println &quot;attempting to connect websocket&quot;) (if-let [chan (js/WebSocket. url)] (do (set! (.-onmessage chan) (receive-transit-msg! receive-handler)) (reset! ws-chan chan) (println &quot;Websocket connection established with: &quot; url)) (throw (js/Error. &quot;Websocket connection failed!&quot;)))) åœ¨æŸä¸ªé¡µé¢è§¦å‘websocketè¿žæŽ¥12345678(require ' [alk-doc.ws :as ws :refer [webSocketUrl click-one]])(defn handler-ws-msg â€œå¯ä»¥æ ¹æ®æ¶ˆæ¯å†…å®¹æˆ–è€…è‡ªå®šä¹‰çš„ç±»åž‹ï¼Œè¿›è¡Œç›¸åº”çš„ä¸šåŠ¡å¤„ç†â€ [msg] (js/console.info "æ”¶åˆ°å¹¿æ’­æ¶ˆæ¯:" msg))(ws/make-websocket! webSocketUrl handler-ws-msg) è¿™æ ·å°±å»ºç«‹äº†å‰åŽç«¯wsé€šä¿¡ã€‚ ç”Ÿäº§çŽ¯å¢ƒä¸Šçš„ç‰¹æ®Šå¤„ç†ä½†æ˜¯åœ¨ç”Ÿäº§çŽ¯å¢ƒ(https+nginx)ä¸Šè¦åšç‚¹ç‰¹æ®Šå¤„ç†ï¼Œè¿™é‡Œçš„å¤„ç†ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æœ‰ã€‚ ç”Ÿäº§çŽ¯å¢ƒå¤šæ˜¯httpsçš„ï¼Œè¿™å°±è¦æ±‚é¡µé¢é‡Œé¢çš„websocketå¿…é¡»è¦æ˜¯wssçš„ï¼Œè€Œä¸èƒ½æ˜¯wsçš„ å› æ­¤websocketçš„è¿žæŽ¥å˜æˆäº†wss://www.abc.com/api/ws/ æœåŠ¡ç«¯nginxé…ç½®æ”¯æŒwebsocket ç”Ÿäº§çŽ¯å¢ƒæœåŠ¡ç«¯çš„æŽ¥å£ä½¿ç”¨nginxåšäº†åå‘ä»£ç†ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œä¸Šé¢çš„è¿žæŽ¥å³ä½¿æ”¹æˆwssä¹Ÿè¿žæŽ¥ä¸æˆåŠŸï¼Œéœ€è¦nginxçš„é…ç½®å¦‚ä¸‹ï¼š1234567891011121314151617http &#123; map $http_upgrade $connection_upgrade &#123; default upgrade; &apos;&apos; close; &#125; server &#123; ... location /chat/ &#123; proxy_pass http://backend; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $connection_upgrade; proxy_read_timeout 600s; &#125; &#125; æœ€é‡è¦çš„ï¼Œå®¢æˆ·ç«¯åŠ å…¥å¿ƒè·³æ£€æµ‹ï¼Œç«¯å£åŽè‡ªåŠ¨é‡è¿ž æˆ‘ä»¬çš„ç¨‹åºæ˜¯ä¸€ä¸ªjarç›´æŽ¥javaå¯åŠ¨çš„ï¼Œè¿™æ ·åœ¨è¿žæŽ¥ä¸ŠåŽä¸ä¼šè‡ªå·±æ–­å¼€çš„ï¼Œä½†æ˜¯ä¸Šé¢è¯´äº†ï¼Œç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨nginxä»£ç†çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ©ç”¨nginxä»£ç†websocketçš„æ—¶å€™ï¼Œå‘çŽ°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ¡æ‰‹æˆåŠŸåŽï¼Œå¦‚æžœåœ¨60sæ—¶é—´å†…æ²¡æœ‰æ•°æ®äº¤äº’ï¼Œè¿žæŽ¥å°±ä¼šè‡ªåŠ¨æ–­å¼€ã€‚å› æ­¤ä¸Šé¢é…ç½®äº†proxy_read_timeout 600sï¼Œä¹Ÿå°±æ˜¯10åˆ†é’Ÿæ²¡æœ‰é€šä¿¡å†æ–­å¼€ã€‚è¿™ä¸ªæ—¶é—´å¯ä»¥é•¿ï¼Œä½†æˆ‘æ²¡è¯•è¿‡æ˜¯ä¸æ˜¯å¯ä»¥æ— é™é•¿ã€‚æ‰€ä»¥æœ€å¥½æ˜¯åœ¨å®¢æˆ·ç«¯åŠ ä¸Šå¿ƒè·³æ£€æµ‹ï¼Œæ–­å¼€åŽæœ‰èƒ½åŠ›è‡ªå·±é‡è¿žï¼ŒåŠæ—¶æœåŠ¡å™¨ä¸è®¾ç½®10åˆ†é’Ÿï¼Œ60ç§’é’Ÿæ–­å¼€ä¹Ÿå¯ä»¥è‡ªå·±é‡è¿žã€‚ç»ˆæžæ–¹æ¡ˆæ˜¯å¿ƒè·³æ£€æµ‹+å»¶é•¿read-timeoutæ—¶é—´ï¼Œå®¢æˆ·ç«¯çš„ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566(require &apos;[reagent.core :as reagent :refer [atom]])(defonce ws-chan (atom nil))(def lockReconnect (atom false))(def clear-time (atom nil))(def click-one (atom true))(def webSocketUrl &quot;ws://182.61.51.177:3055/api/ws&quot;)(defn receive-transit-msg! [update-fn] (fn [msg] (js/clearTimeout clear-time) (update-fn (cljs.reader/read-string (.-data msg)))))(defn send-transit-msg! [msg] (if @ws-chan (.send @ws-chan msg) (throw (js/Error. &quot;Websocket is not available!&quot;))))(set! (.-onbeforeunload js/window) (fn [] (.close (js/WebSocket. webSocketUrl))))(defn initEventHandle [url chan receive-handler] (do (set! (.-onmessage chan) (receive-transit-msg! receive-handler)) (reset! ws-chan chan) (js/console.log &quot;Websocket connection established with: &quot; url) (set! (.-onopen chan) (fn [] (js/console.log &quot;è¿žæŽ¥æˆåŠŸ&quot;) (js/clearTimeout clear-time))) (set! (.-onclose chan) (fn [] (js/console.log &quot;è¿žæŽ¥æ–­å¼€&gt;&gt;&gt;&quot;) (reset! lockReconnect true) (if (true? @lockReconnect) (do ;;æ²¡è¿žæŽ¥ä¸Šä¼šä¸€ç›´é‡è¿žï¼Œè®¾ç½®å»¶è¿Ÿé¿å…è¯·æ±‚è¿‡å¤š (reset! clear-time (js/setTimeout (fn [] (initEventHandle webSocketUrl (js/WebSocket. url) receive-handler) (reset! lockReconnect false)) 2000)) (reset! lockReconnect false)) (do (js/clearTimeout clear-time))))) (set! (.-onerror chan) (fn [] (js/console.Error &quot;è¿žæŽ¥é”™è¯¯&quot;) (reset! lockReconnect true) (if (true? @lockReconnect) (do ;;æ²¡è¿žæŽ¥ä¸Šä¼šä¸€ç›´é‡è¿žï¼Œè®¾ç½®å»¶è¿Ÿé¿å…è¯·æ±‚è¿‡å¤š (reset! clear-time (js/setTimeout (fn [] (initEventHandle webSocketUrl (js/WebSocket. url) receive-handler) (reset! lockReconnect false)) 2000)) (reset! lockReconnect false)) (do (js/clearTimeout clear-time)))))))(defn make-websocket! [url receive-handler] (js/console.log &quot;attempting to connect websocket&quot;) (if-let [chan (js/WebSocket. url)] (initEventHandle url chan receive-handler) (throw (js/Error. &quot;Websocket connection failed!&quot;)))) å‚è€ƒå®˜æ–¹demoçš„å®žçŽ°åŽï¼Œåªæ˜¯æˆåŠŸè¿›è¡Œäº†è¿žæŽ¥ï¼Œå¹¶ä¸èƒ½ä¿è¯çœŸæ­£çš„é•¿è¿žï¼Œå› æ­¤ä¸Šé¢ä»£ç é‡Œå¯¹å½“å‰channelçš„oncloseå’Œonerroräº‹ä»¶çš„å¤„ç†æ˜¯æˆ‘ä»¬å‰ç«¯çš„å§‘å¨˜å‚è€ƒWebSocketåŠ å…¥å¿ƒè·³åŒ…é˜²æ­¢è‡ªåŠ¨æ–­å¼€è¿žæŽ¥jsç‰ˆæœ¬ç”¨cljsåšçš„å®žçŽ°ï¼Œç»™å¥¹ç‚¹ä¸ªèµžðŸ‘ã€‚ åˆ°è¿™é‡Œï¼Œclojureå’Œclojurescripté‡Œæ­å»ºwebsocketé€šä¿¡å°±ç®—æ˜¯å¯ç”¨äº†ã€‚ client testing12345678910111213141516171819202122232425(require &apos;[reagent.core :as reagent :refer [atom]])(defonce messages (reagent/atom []))(defn message-list [] [:ul (for [[i message] (map-indexed vector @messages)] ^&#123;:key i&#125; [:li message])])(defn message-input [] (reagent/with-let [value (reagent/atom nil)] [:input &#123;:type :text :placeholder &quot;è¾“å…¥&amp;å›žè½¦å‘é€&quot; :value @value :on-change #(reset! value (-&gt; % .-target .-value)) :on-key-down #(when (= (.-keyCode %) 13) (send-transit-msg! &#123;:message @value&#125;) (reset! value nil))&#125;]))(defn update-messages! [&#123;:keys [message]&#125;] (js/console.info &quot;æ”¶åˆ°æœåŠ¡ç«¯è¿”å›žçš„æ¶ˆæ¯&quot;) (swap! messages #(vec (take 10 (conj % message))))) 123456789101112131415(make-websocket! webSocketUrl update-messages!)(defn home-page [] [:div.container [:div.row [:div.col-md-12 [:h2 &quot;Welcome to chat&quot;] [:h4 &quot;æœåŠ¡ç«¯å°†ä½ å‘é€çš„å†…å®¹åŠ äº†ä¸ªkeyåšäº†å›žç­”&quot;]]] [:div.row [:div.col-sm-6 [message-list]]] [:div.row [:div.col-sm-6 [message-input]]]])[home-page] å‚è€ƒimmutant websockets sample WebSocket proxying WebSocketåŠ å…¥å¿ƒè·³åŒ…é˜²æ­¢è‡ªåŠ¨æ–­å¼€è¿žæŽ¥]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>cljs</tag>
        <tag>websocket</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¨‹åºçŒ¿çš„MacOSå¼€å‘çŽ¯å¢ƒä¹‹ä¸€]]></title>
    <url>%2F2019%2F11%2F02%2F%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84MacOS%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B9%8B%E4%B8%80%2F</url>
    <content type="text"><![CDATA[ç¨‹åºçŒ¿çš„macOSä¸Šåº”è¯¥æœ‰çš„è½¯ä»¶å’Œå°æ’ä»¶ ç®€ä¹¦åœ°å€ æ¯ä¸ªæ±Ÿæ¹–ä¸Šçš„é«˜æ‰‹éƒ½æœ‰è‡ªå·±è¶æ‰‹çš„å…µå™¨ï¼Œä½ ä¹Ÿåº”è¯¥æœ‰ä½ è‡ªå·±çš„é‚£æŠŠå°æŽé£žåˆ€ã€‚å°æŽé£žåˆ€è¿™ä¸ªå…µå™¨è¿˜çœŸä¸æ˜¯çªç„¶æƒ³åˆ°çš„ã€‚ è¦æ˜¯é—®æˆ‘ä»€ä¹ˆä¸æ˜¯æ–¹å¤©ç”»æˆŸã€é’é¾™åƒæœˆåˆ€ã€ä¸ˆå…«è›‡çŸ›äº‘äº‘ï¼Œæˆ–è€…ä¸ºå•¥ä¸æ˜¯ç‹¬å­¤æ±‚è´¥çš„åˆ©å‰‘ã€ç´«è–‡è½¯å‰‘ã€çŽ„é“é‡å‰‘ä¹‹ç±»çš„ã€‚æˆ‘å°±å‘µå‘µäº†ï¼Œä½ è§è¿‡å“ªä¸ªé“æ³•é«˜æ·±çš„ç¥žä»™ï¼Œéšèº«æ‰‹é‡Œæ‰›ç€è¿™ä¹ˆå¤§çš„å…µå™¨ï¼Œå…³äºŒå“¥æ‹‰å±Žæ—¶åº”è¯¥ä¸ä¼šæ‰›ç€é’é¾™åƒæœˆåˆ€å§ã€‚ å°æŽé£žåˆ€åˆ™ä¸ç„¶ï¼Œéšèº«æºå¸¦ï¼Œæ€ä¼¤åŠ›ä¸å¼±äºŽå…¶ä»–ï¼Œæœ€é‡è¦çš„å…¶å®žæ˜¯å°æŽé£žåˆ€æ˜¯åœ¨æµªå­æŽå¯»æ¬¢æ‰‹é‡Œï¼ŒæŽå¯»æ¬¢æ­¤äººæ˜¯ä¸€ä¸ªå€¾å€’å¤©ä¸‹å¤šæƒ…çº¢é¢œçš„æ½‡æ´’æµªå­ï¼Œä¸€ä¸ªé‡æƒ…é‡ä¹‰çš„æ‚²æƒ…è‹±é›„ï¼Œä¸€ç”Ÿéƒ½è¢«èº«å¿ƒçš„ç—›è‹¦æŠ˜ç£¨ï¼Œå´åˆä¸è½»æ˜“æ˜¾ç¤ºå–œæ€’å“€ä¹ï¼Œå¤æ‚çš„å†…å¿ƒæƒ…æ„Ÿå…¨é çœ¼ç¥žè¡¨çŽ°ã€‚æ‰€ä»¥è®¡ç®—å¼å°æŽé£žåˆ€åªæ˜¯åœ¨ç™¾æ™“ç”Ÿå…µå™¨è°±ä¸ŠæŽ’ç¬¬ä¸‰ï¼Œæˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ï¼Œä¹Ÿè®¸æˆ‘æ˜¯ä¸å–œæ¬¢å¤©æœºè€äººçš„æ‡¦å¼±ï¼Œå’Œä¸Šå®˜é‡‘è™¹çš„æ¶éœ¸è¡Œä¸ºã€‚ æœ‰äººè¯´ï¼Œè‡ªå¤æ²¡æœ‰æœ€åŽ‰å®³çš„å…µå™¨ï¼Œåªæœ‰æœ€åŽ‰å®³çš„äººã€‚ä¹Ÿæ˜¯ï¼Œå­¤ç‹¬å‰è¾ˆçš„ç¬¬å››æŠŠå‰‘å°±æ˜¯æœ¨å‰‘ï¼Œâ€œå››åå²åŽï¼Œè‰æœ¨ç«¹çŸ³å‡å¯ä¸ºå‰‘â€ï¼Œä½•å…¶é›„å£®ï¼Œäººå®¶æœ‰å‚²è§†ç¾¤é›„çš„æœ¬äº‹çš„å•Šï¼Œè¿™å¢ƒç•Œå¤ªé«˜äº†ï¼Œæ²¡å‡ ä¸ªèƒ½è¾¾åˆ°çš„ã€‚ æˆ‘ä¸åå¯¹ä¸Šé¢çš„è§‚ç‚¹ï¼Œä½†æ˜¯é¡ºæ‰‹çš„å…µå™¨æ€»ä¹Ÿæ˜¯èƒ½ä¸ºå¹³åº¸çš„äººå¢žæ·»æˆ˜æ–—åŠ›ï¼Œè¦ä¸ç„¶é‚£ä¹ˆå¤šäººåŽ»æŠ¢å€šå¤©å‰‘ã€å± é¾™åˆ€ã€‚ åºŸè¯å¤ªå¤šäº†å“ˆã€‚ã€‚ã€‚ðŸ˜ ä½œä¸ºä¸€å¨ç¨‹åºçŒ¿ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯æ‰“é€ è‡ªå·±æœ€è¶æ‰‹ï¼Œæœ€é€‚åˆè‡ªå·±å·¥ä½œçš„å·¥å…·â€”-è¦ä¸æ¢ä¸ªæ ‡é¢˜ï¼šMacOSç³»ç»Ÿä¸Šå¸¸ç”¨çš„è½¯ä»¶å’Œæ’ä»¶ã€‚ å…³é”®è¯ï¼šç¨‹åºçŒ¿ã€MacOS æ‰€ä»¥æˆ‘è¦è¯´å¾®ä¿¡ï¼ŒQQä¹‹ç±»çš„ä¼°è®¡æ‚¨çš„ææˆ‘äº†ã€‚ å…ˆæŽ¨èä¸¤ä¸ªèµ„æºä¸‹è½½åœ°å€ï¼š xclient.infoçˆ±æƒ…å®ˆæœ›è€… å¿…å¤‡åº”ç”¨ï¼š gitå®¢æˆ·ç«¯ï¼šgitKarkenï¼ŒsourceTree æŽ¥å£æµ‹è¯•å·¥å…·ï¼špostman ç¬”è®°å·¥å…·ï¼šä¸ºçŸ¥ç¬”è®°ï¼Œå°è±¡ç¬”è®° IDEï¼šIntellij Ideaï¼ŒVS codeï¼ŒEmcas markdownå†™ä½œå·¥å…·ï¼šTypora ç¿»å¢™å®¢æˆ·ç«¯ï¼šShadowsocks æ‰‹æœºæŠ•å±è½¯ä»¶ï¼šVysorï¼Œæœ‰è°·æ­Œæµè§ˆå™¨æ’ä»¶ ç¡¬ç›˜Uç›˜è¯»å†™è½¯ä»¶ï¼šTuxera Disk Manager ####ä¸€äº›åœ¨çº¿å·¥å…·å’Œç½‘å€: å‘èµ·åœ¨çº¿é—®å·è°ƒæŸ¥ï¼šhttps://www.wenjuan.com/åœ¨çº¿å®šæ—¶ä»»åŠ¡æ‰§è¡Œå†™æ³•å·¥å…·ï¼šhttp://cron.qqe2.com/å›½é™…æŽ¨èä½¿ç”¨ï¼šhttps://cdnjs.com/ä¸‹è½½ç³»ç»ŸåŠå·¥å…·ï¼šhttp://msdn.itellyou.cnä¼˜é›…é«˜æ•ˆçš„å…è´¹åœ¨çº¿APPåŽŸåž‹å·¥å…· http://www.xiaopiu.com/showdocæ–‡æ¡£å·¥å…·ï¼šhttps://www.showdoc.cc/web/#/å„ç§javaå·¥å…·ï¼šhttp://www.hutool.cn/åœ¨çº¿æ— æŸåŽ‹ç¼©å›¾ç‰‡ï¼šhttps://squoosh.app/ç”ŸæˆçŸ­é“¾æŽ¥ï¼šhttp://www.surl.sinaapp.com/åœ¨çº¿å·¥å…·é›†åˆï¼šhttp://oktools.netåœ¨çº¿å·¥å…·é›†åˆ2 ï¼šhttp://www.atoolbox.netmockjs: http://mockjs.com/lispé‡Œjsonè½¬edn/mapï¼šhttp://pschwarz.bicycle.io/json-to-edn/ 1. shellå®¢æˆ·ç«¯iterm2æˆªæ­¢ç›®å‰æœ€å–œæ¬¢çš„shellå®¢æˆ·ç«¯ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¹‹æ‰€ä»¥åŠ ä¸ªæˆªæ­¢ç›®å‰ï¼Œæ˜¯å› ä¸ºä»Šå¹´ç”¨emcasï¼Œéƒ½è¯´è¿™é‡Œé¢çš„shellä¹Ÿå¾ˆèµžã€‚ åšåŽç«¯å¼€å‘ï¼Œç»å¸¸è¦å¿«é€Ÿè¿›å…¥æŸä¸€å°è¿œç«¯æœåŠ¡å™¨ï¼Œç„¶åŽçœ‹ä¸ªlogï¼Œæ”¹ä¸ªé…ç½®å•¥çš„ï¼Œè¿™æ—¶å€™iterm+sshpasså°±èƒ½è®©ä½ äº‹åŠåŠŸå€äº†ã€‚å…³äºŽæ€Žä¹ˆé…ï¼Œæ­¤å¤„ä¸å†ç»†è¯´ã€‚123456wget http://sourceforge.net/projects/sshpass/files/sshpass/1.05/sshpass-1.05.tar.gz tar xvzf sshpass-1.05.tar.gz cd sshpass-1.05./configure make make install [ç«™å¤–å›¾ç‰‡ä¸Šä¼ ä¸­â€¦(image-aefec1-1572691340926)] æŽ¨èä¸¤ä¸ªç½‘å‹çš„æ°ä½œï¼Œä¸€ä¸ªå®‰è£…ï¼Œä¸€ä¸ªä½¿ç”¨ã€‚macä¸‹ä½¿ç”¨sshpasså®žçŽ°sshè®°ä½å¯†ç Macä¸‹ï¼Œä½¿ç”¨sshpassè®©iTerm2æ”¯æŒsshç™»å½•ä¿¡æ¯ä¿å­˜ å®‰è£…sshpassæœ‰é—®é¢˜çš„ç”¨æˆ·ï¼Œå¯ä»¥è¯•è¯•12345678910brew install https://raw.githubusercontent.com/kadwanev/bigboybrew/master/Library/Formula/sshpass.rbUpdating Homebrew...Warning: Calling Non-checksummed download of sshpass formula file from an arbitrary URL is deprecated! Use &apos;brew extract&apos; or &apos;brew create&apos; and &apos;brew tap-new&apos; to create a formula file in a tap on GitHub instead.######################################################################## 100.0%==&gt; Downloading http://sourceforge.net/projects/sshpass/files/sshpass/1.06/sshpass-1.06.tar.gz==&gt; Downloading from https://netcologne.dl.sourceforge.net/project/sshpass/sshpass/1.06/sshpass-1.06.tar.gz######################################################################## 100.0%==&gt; ./configure --prefix=/usr/local/Cellar/sshpass/1.06==&gt; make installðŸº /usr/local/Cellar/sshpass/1.06: 9 files, 45.8KB, built in 9 seconds å®‰è£…æˆåŠŸã€‚ itermé‡Œå¦ä¸€ä¸ªä¸å¾—ä¸ç”¨çš„æ˜¯Zshå’ŒOh My Zshå®¶åº­å¥—é¤ï¼Œç‚¹åˆ°ä¸ºæ­¢ï¼Œç½‘ä¸Šä¸€æœä¸€å¤§æŠŠï¼Œé€‰ä¸ªè‡ªå·±å–œæ¬¢çš„themeç”¨å°±è¡Œäº†ã€‚ iterm2çš„profilesé‡Œæ‰§è¡Œä¸€ä¸ªç™»å½•çš„å‘½ä»¤1/usr/local/bin/sshpass -f /Users/mahaiqiang/Documents/sshpass/&lt;file_name&gt; ssh -p&lt;port&gt; marvin@ip file_name åªå­˜å‚¨è¿™ä¸ªipå¯¹åº”çš„ç”¨æˆ·ç™»å½•å¯†ç ï¼Œè€Œä¸”æ–‡ä»¶æ²¡æœ‰åŽç¼€ã€‚ å¦‚æžœæ²¡æœ‰å®‰è£…æˆåŠŸsshpassï¼Œä¹Ÿå¯ä»¥ç”¨itermçš„å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œä¸€ä¸ªshellè„šæœ¬ï¼Œè„šæœ¬çš„å†…å®¹å¯èƒ½è£å¹¸123456789101112#!/usr/bin/expect -fset user &lt;user-name&gt;set host &lt;ip&gt;set password &lt;password&gt;set port &lt;port&gt;set timeout -1spawn ssh -p $port $user@$hostexpect "*assword:*"send "$password\r"interactexpect eof Highèµ·æ¥å§ 2. Navicat PermiumNavicat Premium æ˜¯ä¸€å¥—æ•°æ®åº“å¼€å‘å·¥å…·ï¼Œè®©ä½ ä»Žå•ä¸€åº”ç”¨ç¨‹åºä¸­åŒæ—¶è¿žæŽ¥ MySQLã€MariaDBã€MongoDBã€SQL Serverã€Oracleã€PostgreSQL å’Œ SQLite æ•°æ®åº“ã€‚å®ƒä¸Ž Amazon RDSã€Amazon Auroraã€Amazon Redshiftã€Microsoft Azureã€Oracle Cloudã€MongoDB Atlasã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘å’ŒåŽä¸ºäº‘ç­‰äº‘æ•°æ®åº“å…¼å®¹ã€‚ä½ å¯ä»¥å¿«é€Ÿè½»æ¾åœ°åˆ›å»ºã€ç®¡ç†å’Œç»´æŠ¤æ•°æ®åº“ã€‚ æ•°æ®åº“å·¥å…·åœ¨Macä¸Šæˆ‘æ¯”è¾ƒé’Ÿæƒ…è¿™æ¬¾ï¼Œå¯¼å…¥å¯¼å‡ºéƒ½å¾ˆæ–¹ä¾¿ï¼Œå…¶ä»–ä¸æŽ¨èã€‚ä¸è¦è¯´ä¸æ˜¯å…è´¹ç‰ˆï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šæœ‰åŠžæ³•å…è´¹ï¼Œè€Œä¸”ä½ è¿˜èƒ½æžä¸ªæ±‰åŒ–ç‰ˆã€‚ åœ¨Windowsæˆ‘ç”¨çš„æœ€å¤šHeidiSQLï¼Œè½»é‡çº§ï¼Œéžå¸¸ç¨³å®šçš„æ•°æ®åº“å®¢æˆ·ç«¯ã€‚æ˜¯å¯æƒœæ²¡æœ‰macç‰ˆã€‚ 3. transmitç›¸åŒåŠŸèƒ½çš„æˆ‘è¿˜ç”¨è¿‡çš„filezillaå’ŒWinScpï¼Œä½†æ˜¯ä»Žä½“éªŒå’Œè§†è§‰ä¸Šæ¥è¯´ï¼Œæˆ‘æ›´å–œæ¬¢transmitï¼Œç®€æ´ç›´è§‚ 4. tinyCalè¿™ä¸ªå°æ—¥åŽ†å¯äº†ä¸å¾—ï¼Œè¯•å›¾æ¯”macè‡ªå¸¦çš„æ—¥åŽ†å°ï¼Œä½†æ˜¯åˆæ¯”macçŠ¶æ€æ ä¸Šé‚£ä¸ªè¿˜ä¸å¦‚æ²¡æœ‰æ—¥åŽ†è¡¨å¥½ã€‚æˆªå›¾å¦‚ä¸‹ï¼š è¿˜æœ‰å†œåŽ†ï¼Œçœ‹ç€ä¸é”™å§ï¼Œåœ¨è®¾ç½®ä¸ªå¼€æœºè‡ªå¯ï¼Œç³»ç»Ÿè‡ªå¸¦çš„å¯ä»¥å…³é—­äº†ã€‚ 5. Alfredè¿™ä¸ªæ˜¯åœ¨åŽ»å¹´åœ¨æµ·å°”ä¸€èµ·å·¥ä½œçš„å°å”åŒå­¦é‚£é‡Œçœ‹æ¥çš„ï¼Œç›´æŽ¥æŠ„ä¸€ä¸‹åŽŸåˆ›ï¼šAlfredä½œä¸ºè€ç‰Œæ•ˆçŽ‡ç¥žå™¨ï¼Œç½‘ä¸Šå¾ˆå¤šå¸–å­éƒ½å·²ç»åšè¿‡ä»‹ç»ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹Alfredçš„å‰ªè´´æ¿ã€‚ [ç«™å¤–å›¾ç‰‡ä¸Šä¼ ä¸­â€¦(image-2652a3-1572691340926)]Alfredçš„å‰ªè´´æ¿å¯ä»¥ä¿å­˜æœ€è¿‘å‡ å¤©ä½äºŽç³»ç»Ÿå‰ªè´´æ¿çš„æ‰€æœ‰å†…å®¹ã€‚å› æ­¤å¦‚æžœå½“é”®å…¥å‘½ä»¤æ—¶ï¼Œçªç„¶æƒ³èµ·æ¥è¿™ä¸ªå‘½ä»¤æˆ‘æ˜¨å¤©å¥½åƒå¤åˆ¶è¿‡ï¼Œé‚£å°±å¯ä»¥ç›´æŽ¥è°ƒå‡ºæ¥ï¼Œè´´è¿›å‘½ä»¤è¡Œå³å¯ã€‚ è¿™æ¬¾ç¥žå™¨å¯æ˜¯Best-AppæŽ’è¡ŒNO.1çš„ï¼Œå¯è§ä¸€æ–‘ã€‚ ä½¿ç”¨æ•™ç¨‹ï¼š5åˆ†é’Ÿä¸Šæ‰‹Macæ•ˆçŽ‡ç¥žå™¨Alfredä»¥åŠAlfredå¸¸ç”¨æ“ä½œ 6. LICECap æ•æ‰å±å¹•ç”ŸæˆGIF1brew cask install LICECap ç›¸å¯¹åº”çš„æˆªå›¾è½¯ä»¶æŽ¨èxnipappä¸€æ¬¾å…è´¹çš„æˆªå›¾è½¯ä»¶ï¼Œè¿˜æ”¯æŒæ»šåŠ¨æˆªå›¾ï¼Œç¦»çº¿æ“ä½œã€‚ 7. Recorder itå±å¹•å½•åˆ¶è½¯ä»¶ï¼Œå¯ä»¥åœ¨xclient.infoä¸Šä¸‹è½½åˆ°ã€‚ 8. keycastr æ˜¾ç¤ºå¿«æ·é”®åœ¨ä½ æƒ³åšä¸€ä¸ªæ•™ç¨‹æ—¶ï¼Œä¸ç®¡æ˜¯gifäº†ï¼Œè¿˜æ˜¯å½•å±äº†ï¼Œä½ æˆ–è®¸åœ¨å†¥æ€è‹¦æƒ³åˆ°åº•æ€Žä¹ˆè§£é‡Šæˆ‘åœ¨é”®ç›˜ä¸ŠæŒ‰äº†å•¥ï¼Œè¿™å›žä¸ç”¨è§£é‡Šäº†ï¼Œä½ æŒ‰äº†å•¥æœ‰è½¯ä»¶å¸®ä½ æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œç®€å•æ˜Žäº†ã€‚ 1brew cask install keycastr é…åˆä¸Šç”Ÿæˆgifæžä¸ªå°æ•™ç¨‹ç®€ç›´ä¸è¦å¤ªçˆ½ã€‚ 9. ssh tunnelå†å¤åˆ¶å°å”åŒå­¦æŽ¨èçš„ä¸€ä¸ªç¥žå™¨ssh tunnelã€‚ åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦æ­å»ºå¼€å‘çŽ¯å¢ƒï¼Œä½¿å¾—æœ¬åœ°çš„web server/api server èƒ½å¤Ÿè®¿é—®ä½äºŽäº‘æœåŠ¡å™¨ä¸Šå±€åŸŸç½‘çŽ¯å¢ƒä¸­çš„æ•°æ®åº“ï¼Œä¾‹å¦‚ç™¾åº¦äº‘æä¾›çš„æ•°æ®åº“æœåŠ¡ã€‚è¿™äº›æ•°æ®åº“æœåŠ¡å™¨å¯ä»¥åœ¨ç™¾åº¦äº‘çš„æœºå™¨ä¸Šç›´æŽ¥è®¿é—®ï¼Œè€Œä¸èƒ½åœ¨å…¬ç½‘çŽ¯å¢ƒä¸‹é€šè¿‡å…¬ç½‘ipè®¿é—®ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ç™¾åº¦äº‘çš„æ™®é€šserverå»ºä¸€ä¸ªtunnelï¼Œä»Žè€Œå®žçŽ°æ•°æ®è®¿é—®ã€‚åœ¨xshellä¸­ä¹Ÿæœ‰ç±»ä¼¼åŠŸèƒ½ï¼Œä¸­æ–‡ç¿»è¯‘åšï¼šéš§é“ã€‚ ç•Œé¢å±•ç¤ºï¼š å¦‚å›¾ä¾¿æ˜¯å»ºç«‹äº†ä¸‰ä¸ªtunnelï¼Œåˆ†åˆ«è¿žå‘äº†ä¸¤ä¸ªå…³ç³»åž‹æ•°æ®åº“æœåŠ¡å™¨å’Œä¸€ä¸ªredisæœåŠ¡å™¨ã€‚ä¸¾ä¾‹æ¥è¯´ç¬¬ä¸€æ¡éš§é“è¿žæŽ¥ï¼Œä½¿ç”¨æ—¶çš„è®¿é—®æ–¹æ³•ï¼Œå°±æ˜¯ç›´æŽ¥localhost:13306å³å¯ã€‚å½“ç„¶ï¼Œç›´æŽ¥ç”¨sshå‘½ä»¤ä¹Ÿå¯è§£å†³ï¼Œä½†éº»çƒ¦ä¸æ˜¯ã€‚ç¨‹åºå‘˜å°±åº”è¯¥èƒ½å·æ‡’çš„æ—¶å€™å°½å¯èƒ½å·æ‡’ï¼Œç¾Žå…¶åæ›°ï¼šè§£æ”¾å’Œå‘å±•ç”Ÿäº§åŠ›~å‘½ä»¤è¡Œï¼š 1ssh -CfNg -L 16306:postgresql94.rd*****lwr2zr.rds.bj.baidubce.com:3306 root@180.***.***.189 åŽŸä½œè€…ï¼štangxqa 10. PicGoå›¾åºŠï¼Œä¸Šä¼ å›¾ç‰‡åŽç›´æŽ¥å°†å¤åˆ¶å¤åˆ¶åˆ°äº†ç²˜è´´æ¿ï¼Œéžå¸¸æ–¹ä¾¿ï¼Œå°¤å…¶è¦å†™markdown1brew cask install PicGo å¦‚æžœå¸¸å†™markdownçš„è¯ï¼Œç»å¯¹æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè°è¿˜æ¯ä¸ªgithubè´¦å·ï¼Œåˆç†ä½¿ç”¨èµ„æºå°±è¡Œäº†ï¼Œå›¾ç‰‡æ‹–è¿›ä¸Šä¼ åŒºï¼Œç›´æŽ¥å°±èƒ½è¿”å›žæ¥ä¸ªmarkdownçš„åœ°å€æ”¾åˆ°ç²˜è´´æ¿é‡Œäº†ã€‚è‡³äºŽæ€Žä¹ˆåˆ©ç”¨githubåšå›¾åºŠè‡ªè¡Œgoogleä¸‹ã€‚ 11. CharlesæŠ“åŒ…å·¥å…·Charlesæ˜¯ä¸€æ¬¾æŠ“åŒ…ä»£ç†è°ƒè¯•å·¥å…·ã€ç±» Fiddlerã€‚iosç³»ç»Ÿæ‰‹æœºä¸Šæœ‰ä¸€æ¬¾æŠ“åŒ…ç¥žå™¨ï¼šstreamå®‰å“æ‰‹æœºä¸Šä¸€èˆ¬ç”¨ï¼šPacket Captureï¼Œæˆ–è€…æŠ“åŒ…ç²¾çµ 12. å†…ç½‘ç©¿é€å·¥å…·è¿™ä¸ªä¸œè¥¿ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¦‚æžœä¸çŸ¥é“è¿˜æœ‰ä¸ªè¿™ä¹ˆä¸ªçŽ©æ„å„¿é‚£å°±æœ‰ç‚¹lowäº†ã€‚æˆ‘ç”¨è¿‡serveoå’Œngrokï¼Œngrokç›¸å¯¹ç¨³å®šï¼Œä½†æ˜¯ä½¿ç”¨ä¾¿æ·æ€§èµ¶ä¸ä¸Šä»€ä¹ˆéƒ½ä¸ç”¨serveoä¸€å¥å‘½ä»¤çš„å¿«ã€‚æˆ‘çš„ä¸¤ä¸ªæ€»ç»“ï¼šä½¿ç”¨serveoä¸€ç§’é’Ÿå®žçŽ°å†…ç½‘ç©¿é€ä½¿ç”¨ngrokä¸€åˆ†é’Ÿå®žçŽ°å†…ç½‘ç©¿é€ 13. ä¸ºçŸ¥ç¬”è®°|å°è±¡ç¬”è®°æœ‰æ—¶å€™ä½ ä¼šæœ‰ä¸¤å°ç”µè„‘ï¼Œæˆ–è€…éœ€è¦ç”¨ç§»åŠ¨ç«¯çœ‹çœ‹æ›¾ç»æŠ¥é”™çš„ä¸€äº›æœ‰æ•ˆèµ„æºï¼Œè¿™æ—¶å€™å¦‚æžœæ²¡æœ‰ä¸ªäº‘ç¬”è®°ï¼Œæœ‰ç‚¹è¯´ä¸è¿‡åŽ»äº†ï¼Œè€Œä¸”è¿™ç§ç¬”è®°ä¸ç®¡æ˜¯ä¿å­˜è‡ªå·±çš„ä¸œè¥¿ï¼Œè¿˜å¯ä»¥é€šè¿‡googleæµè§ˆå™¨æ’ä»¶å¿«é€Ÿæ”¶è—ç½‘é¡µï¼Œå°†æŸä¸€ç¯‡åšå®¢å‰ªåˆ‡æˆè‡ªå·±çš„ä¸œè¥¿ç¬”è®°ã€‚ [ç«™å¤–å›¾ç‰‡ä¸Šä¼ ä¸­â€¦(image-7835d8-1572691340926)] 14. Parallelsè™šæ‹Ÿæœºç¥žå™¨å¸¦ä½ é£ž~ 15. LogTail æ—¥å¿—ç›‘æŽ§æŸ¥çœ‹å·¥å…·å‰é¢è¯´åˆ°çš„itermé…åˆsshpassç™»å½•åˆ°æœåŠ¡å™¨ä¸æ˜¯ä¸ªå•¥é—®é¢˜äº†ï¼Œä½†æ˜¯æœ€è¿‘ç”¨çš„ä¸ç®¡æ˜¯é˜¿é‡Œäº‘å’Œç™¾åº¦äº‘çš„ECSï¼Œåœ¨ç»ˆç«¯è¿žæŽ¥ä¸€ä¼šå„¿åŽå°±ä¼šè‡ªåŠ¨æ–­å¼€ï¼Œè€Œä¸”æˆ‘ä¹Ÿä¸çŸ¥é“å’‹æžï¼Œå°±ç®—æ˜¯tail äº†ï¼Œä¸€ä¼šå„¿æ²¡æœ‰åŠ¨å°±è‡ªå·±æ–­å¼€äº†ï¼Œéžå¸¸ç³Ÿå¿ƒã€‚ ä»Šå¤©ç»ˆäºŽæ‰¾åˆ°äº†ä¸€æ¬¾æˆ‘ä¼—é‡Œå¯»ä»–åƒç™¾åº¦çš„logtailï¼Œæˆ‘ç®€ç›´çˆ±æ­»ä»–äº†ï¼ŒæŸ¥çœ‹äº‘æœåŠ¡å™¨æ—¥å¿—å±…ç„¶è¿˜æœ‰è¿™ä¹ˆä¸ªçŽ©æ„å„¿ï¼Œç®€ç›´ç¥žå™¨å•Šï¼Œæ¥ä¸¤å¼ å›¾çœ‹çœ‹ï¼š æœ‰äº†å®ƒæœåŠ¡å™¨ä¸Šçš„æ—¥å¿—å°±ä¸éœ€è¦æ­å»ºç±»ä¼¼ELKæˆ–è€…EFKçŽ¯å¢ƒäº†ã€‚ 16. mpvï¼šä¸€ä¸ªé«˜å¯é…çš„ç¨‹åºçŒ¿ä¸“ç”¨è§†é¢‘æ’­æ”¾å™¨å®‰è£…ï¼š1brew cask install mpv è¿™æ˜¯ä¸€æ¬¾ä¸€ä¸ªè·¨å¹³å°ã€ç®€æ´ã€å¼€æºã€å…è´¹ã€ä¸”æ€§èƒ½å’ŒåŠŸèƒ½å…¼å¤‡ä¸‡èƒ½è§†é¢‘æ’­æ”¾å™¨ã€‚MPV æ˜¯ä¸€ä¸ªåŸºäºŽ MPlayer å’Œ mplayer2 çš„å¼€æºæžç®€å…¨èƒ½æ’­æ”¾å™¨ã€‚æ”¯æŒå„ç§è§†é¢‘æ ¼å¼ã€éŸ³é¢‘è§£ç ã€æ”¯æŒç‰¹æ•ˆå­—å¹•ï¼ˆç”µå½±åŠ¨æ¼«çš„assç‰¹æ•ˆå­—å¹•éƒ½æ²¡å•¥é—®é¢˜ï¼‰ï¼Œä¸ä»…æ”¯æŒæœ¬åœ°æ’­æ”¾ï¼ŒåŒæ ·æ”¯æŒç½‘ç»œæ’­æ”¾ã€‚é‡ç‚¹æ˜¯ MPV å…·æœ‰å¤šç³»ç»Ÿå¹³å°æ”¯æŒã€å‘½ä»¤è¡Œã€è‡ªå®šä¹‰ã€GPU è§£ç ã€è„šæœ¬æ”¯æŒç­‰ç‰¹ç‚¹â€¦â€¦ çœ‹è¿™ç¯‡ä»‹ç» 17 Moomæˆ–è®¸æœ‰è®¸å¤šäººå’Œå°ç¼–ä¸€æ ·ï¼Œæ„Ÿè§‰Mac OSåœ¨ä½¿ç”¨æ—¶å„ç§éƒ½å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å°±æ˜¯å¯¹äºŽçª—å£å¤§å°çš„è°ƒæ•´éœ€è¦ç”¨é¼ æ ‡åŽ»æ‹–åŠ¨å¤§å°ä¸æ»¡æ„ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ›´ä¸ºå¿«é€Ÿçš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ è¿…é€Ÿçš„æœ€å¤§åŒ–ã€æœ€å°åŒ–å„ç§çª—å£ï¼Œç”šè‡³å’ŒWIN10ç³»ç»Ÿä¸€æ ·åšåˆ°å·¦å³å¯¹åŠåˆ†é…ä¸¤ä¸ªçª—å£å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼åªéœ€è¦åœ¨ä½ çš„Macä¸Šå®‰è£…Moomè¿™ä¸€æ¬¾å°è½¯ä»¶å³å¯å®žçŽ°ã€‚ Moomæ˜¯è‹¹æžœoså¹³å°ä¸Šä¼˜ç§€çš„çª—å£ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿä¿®æ”¹å½“å‰çª—å£çš„å¤§å°å¹¶æ”¾ç½®åœ¨æŒ‡å®šä½ç½®ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‹¥æœ‰äº”ç§å°ºå¯¸å¯é€‰ï¼Œå•å‡»é€‰é¡¹å³å¯æ›´æ”¹çª—å£å¤§å°ï¼Œå¦‚æœ€å¤§åŒ–ï¼Œç§»åŠ¨åˆ°å·¦è¾¹ã€å³è¾¹ç­‰æ“ä½œï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰çª—å£ï¼Œè®©ç”¨æˆ·å¯ä»¥æ›´å¥½çš„æŸ¥çœ‹macä¸Šçš„å†…å®¹ã€‚ 18. PopClipä¸€æ¬¾åœ¨ Mac ä¸Šäººå°½çš†çŸ¥çš„å°å·¥å…·ï¼Œå®ƒç®€å•é«˜æ•ˆï¼Œå…·æœ‰å¼ºå¤§çš„æ‹“å±•åŠŸèƒ½ï¼ŒPopClip æœ€åŸºæœ¬çš„åŠŸèƒ½å³ç”¨é¼ æ ‡é€‰ä¸­ä¸€æ®µæ–‡å­—å°±å¯ä»¥åšå¤åˆ¶ç²˜è´´çš„åŠ¨ä½œï¼ŒçœåŽ»äº†æˆ‘ä»¬å¹³æ—¶ Command+C or V çš„éº»çƒ¦ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå†æ— æ‹“å±•æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®é¼ æ ‡é€‰ä¸­çš„å†…å®¹ï¼ŒPopClip è¿˜è‡ªèº«æ”¯æŒé“¾æŽ¥çš„è·³è½¬æ‰“å¼€ã€è‡ªå¸¦è¯å…¸çš„ç¿»è¯‘ã€é‚®ä»¶åœ°å€è·³è½¬ã€æœç´¢å¼•æ“Žæœç´¢ã€å•è¯çº æ­£ç­‰åŠŸèƒ½ï¼Œä½†è¿™ä¸ªå·¥å…·çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºŽå®ƒçš„æ‹“å±•åŠŸèƒ½çš„ä½¿ç”¨å“¦ã€‚ å°æ’ä»¶ Bartenderå±•å¼€å’Œæ”¶ç¼©çŠ¶æ€æ  å¤–æŽ¥2Kæ˜¾ç¤ºå™¨æ— æ³•å¼€å¯hign dpiæ—¶çš„å¤„ç† å¼€å¯æ•™ç¨‹ï¼šhttps://bbs.feng.com/forum.php?mod=viewthread&amp;tid=11669269&amp;page=1ç”¨åˆ°çš„ä¸‰ä¸ªè½¯ä»¶ï¼š è®¾ç½®å®Œæˆä¹‹åŽï¼Œåœ¨å¤–æŽ¥æ˜¾ç¤ºå™¨ä¹Ÿå¯ä»¥çœ‹åˆ°hign dpiçš„é€‰é¡¹ï¼š Go2Shellåœ¨è®¿è¾¾é‡Œå¢žåŠ ä¸€ä¸ªæ‰“å¼€å‘½ä»¤è¡Œçš„å¿«æ·å…¥å£ï¼Œå¿«é€Ÿè¿›å…¥å‘½ä»¤è¡Œ è¿˜å¯ä»¥è®¾ç½®åœ¨å“ªæ‰“å¼€ FeHelperä¸€æ¬¾è°·æ­Œæµè§ˆå™¨æ’ä»¶ï¼Œä¸»è¦æ˜¯å…è´¹çš„å·¥å…·é›†åˆã€‚ Octotreeè¿™åˆæ˜¯ä¸€æ¬¾chromeæ’ä»¶ï¼Œèƒ½å°†githubé¡¹ç›®åœ¨å·¦ä¾§è¾¹æ ä»¥ç›®å½•æ ‘å½¢ç»“æž„å±•ç¤ºã€‚è®©ä½ æ›´ç›´è§‚åœ°æ„Ÿå—è‡ªå·±æˆ–åˆ«äººçš„é¡¹ç›®ã€‚æ„Ÿè°¢@æœ‹å‹ä½ çš„å­¦ç”Ÿå¡æŽ‰äº† åŒå­¦çš„æŽ¨è WeChatPlugin macmacå¾®ä¿¡åŠ©æ‰‹ï¼Œmacå¾®ä¿¡åŠ©æ‰‹ï¼ŒåŠŸèƒ½å…¨æ–°å‡çº§ï¼Œæœ‰å¾ˆå¤šæ¯”å¦‚æ¶ˆæ¯é˜²æ’¤å›žã€è¿œç¨‹æŽ§åˆ¶(å·²æ”¯æŒè¯­éŸ³)ã€å¾®ä¿¡å¤šå¼€ã€ç¬¬äºŒæ¬¡ç™»å½•å…è®¤è¯ç­‰ç­‰çš„åŠŸèƒ½ã€‚ æŽ¨èå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨-ç¨‹åºå‘˜å·¥å…·æŽ¨èæ­£æ˜¯æœ‰äº†è¿™äº›ç¥žå™¨ï¼Œè®©æˆ‘å†ä¹Ÿç¦»ä¸å¼€Macï¼]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[emacsä¸Šä½¿ç”¨pxè½¬æ¢vwæ’ä»¶]]></title>
    <url>%2F2019%2F10%2F30%2Femacs%E4%B8%8A%E4%BD%BF%E7%94%A8px%E8%BD%AC%E6%8D%A2vw%E6%8F%92%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[å­¦ä¹ ä½¿ç”¨elispç»™emacså†™ä¸€ä¸ªpxè½¬æ¢æˆvwçš„æ’ä»¶ ç®€ä¹¦åœ°å€ å› ä¸ºemacsç¼ºå°‘ä¸€ä¸ªæ’ä»¶å·²ç»å½±å“äº†å‰ç«¯åŒå­¦å¯¹emacsçš„å…´è¶£äº†ï¼Œè¿™æœ‰ç‚¹å°´å°¬ï¼Œå…¶å®žemacså¾ˆå¼ºå¤§çš„ã€‚å¯¹æ ‡vs codeçš„px2vwæ’ä»¶ï¼Œä»Šå¤©èŠ±åŠå¤©å®žçŽ°äº†ä¸€ä¸ªç®€æ˜“çš„ç›¸ä¼¼åŠŸèƒ½çš„emacsæ’ä»¶ã€‚ é…ç½®å‚è€ƒpx2vw-px2vw-emacs-pluginä¸Šä¸­å¼è‹±æ–‡è¯´æ˜Žä¹Ÿèƒ½çœ‹æ‡‚ã€‚ ä¸‹è½½px2vw.elåˆ°æœ¬åœ°~/emacs.d/lisp/ç›®å½•ä¸‹ã€‚ æˆ–åœ¨~/emacs.d/lisp/è‡ªä»¶ä¸€ä¸ªåä¸ºpx2vw.elæ–‡ä»¶ï¼Œå°†ä»£ç å¤åˆ¶è¿›åŽ»ï¼Œä¿å­˜ã€‚ åœ¨~/.emacs.d/custom.elæ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š123(require &apos;px-to-vw-vh)(global-set-key (kbd &quot;C-c w&quot;) &apos;px-&gt;vw) å¦‚æžœè¿™ä¸ªæ“ä½œå¾ˆå¸¸ç”¨çš„è¯ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªæ›´ç®€æ´çš„å¿«æ·é”®ï¼Œæ¯”å¦‚F9ï¼Œé‚£å°±å°†ä¸Šé¢çš„ç¬¬äºŒè¡Œæ¢æˆ1(global-set-key [f9] &apos;px-&gt;vw) é‡å¯emacsã€‚ ä½¿ç”¨åœ¨pxä»£ç å‡ºï¼ŒæŒ‰ä¸‹ä½ è®¾ç½®çš„å¿«æ·é”®ï¼Œå°†æ‰§è¡Œç»‘å®šçš„å‡½æ•°ï¼Œè¿™ä¼šæŠŠæ¯”å¦‚200px;æ¢ç®—æˆ13.8889vwä¿ç•™äº†4ä½å°æ•°ç‚¹ï¼Œæ›¿æ¢æŽ‰åŽŸæ¥çš„ä»¥pxä¸ºå•ä½çš„ä»£ç ã€‚ å±€é™è¯´æ˜Ž ç›®å‰æ’ä»¶å†…ç½®äº†å®½åº¦æ˜¯1440ï¼Œå¦‚æžœéœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥åœ¨ä¸‹è½½ä¸‹æ¥çš„px2vw.elé‡ŒæŠŠç¬¬ä¸€è¡Œå®šä¹‰çš„å¸¸é‡viewpoint-widthæ”¹æˆä½ éœ€è¦çš„å€¼ã€‚ é‰´äºŽvhå¾ˆå°‘ç”¨åˆ°ï¼Œå› æ­¤è¿˜æ²¡æœ‰åšé€‚åº”ï¼Œéœ€è¦çš„æ—¶å€™æ‰‹åŠ¨è®¡ç®—ä¸‹ã€‚ å‚è€ƒæ–‡æ¡£æŽæ€çš„Elispå­¦ä¹ ç¬”è®°Emacs Lisp px2vw.elé™„ä»¶12345678910111213141516171819202122232425262728293031323334353637383940(defvar viewpoint-width 1440) (defvar viewpoint-height 900) (defun kill-thing-at-point (thing) &quot;Kill the `thing-at-point&apos; for the specified kind of THING.&quot; (let ((bounds (bounds-of-thing-at-point thing))) (if bounds (kill-region (car bounds) (cdr bounds)) (error &quot;No %s at point&quot; thing))))(defun kill-word-at-point () &quot;Kill the word at point.&quot; (interactive) (kill-thing-at-point &apos;word))(defun convert-to-vw (px-v) (format &quot;%.2f&quot; (/ (float (* (string-to-number px-v) 100)) viewpoint-width)))(defun convert-to-vh (px-v) (format &quot;%.2f&quot; (/ (float (* (string-to-number px-v) 100)) viewpoint-height )))(defun px-&gt;vw () &quot;Convert word at point (or selected region) from px to vw.&quot; (interactive) (let* ((char (if (use-region-p) (cons (region-beginning) (region-end)) (thing-at-point &apos;symbol)))) (when (and char (not (string-blank-p char)) ) (if (string-match &quot;px&quot; char) (progn (setq word (current-word char)) (setq px-v (substring word 0 (- (length word) 2))) (kill-word-at-point) (insert (concat (convert-to-vw px-v) &quot;vw&quot;))) (print &quot;there&apos;s no px value to converting&quot;)))));;(global-set-key (kbd &quot;C-c w&quot;) &apos;px-&gt;vw);;(global-set-key [f9] &apos;px-&gt;vw)(provide &apos;px2vw) å¤§ç¥žåŠ å¼ºç‰ˆä¸Šé¢çš„pluginä¸æ”¯æŒæ•´ä¸ªæ–‡ä»¶æˆ–è€…é€‰ä¸­åŒºåŸŸä¸€æ¬¡æ€§æ“ä½œæ˜¯ä¸ªç¡¬ä¼¤ã€‚å¤§ç¥žç‰ˆä¼˜åŒ–çš„åŒæ—¶ï¼ŒåŒæ—¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å†™çš„ä»£ç æœ‰é•¿åˆçƒ‚çš„åŽŸå› åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯å­¦çš„å¤ªæµ…ã€‚ 1234567891011121314151617181920(defun k-test (string &amp;optional posBegin posEnd) &quot;æ”¯æŒå½“å‰æ®µè½å’Œé€‰ä¸­åŒºåŸŸï¼ˆregionï¼‰.&quot; (interactive (if (use-region-p) (list nil (region-beginning) (region-end)) (let ((bds (bounds-of-thing-at-point &apos;paragraph))) (progn (goto-char (car bds)) (list nil (car bds) (cdr bds)))))) (while (re-search-forward &quot;\\([0-9.]+\\)\\(px\\)&quot; posEnd t) (let* ((px-digit-str (match-string 1)) (px-digit (string-to-number px-digit-str)) (vw-digit (format &quot;%.2f&quot; (/ (* 100.0 px-digit) 1400.0)))) (replace-match (concat vw-digit &quot;vw&quot;) t nil) )))]]></content>
      <categories>
        <category>emacs</category>
      </categories>
      <tags>
        <tag>emacs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojurescripté¡µé¢å®šæ—¶åˆ·æ–°]]></title>
    <url>%2F2019%2F10%2F24%2Fclojurescript-timer-refresh%2F</url>
    <content type="text"><![CDATA[clojurescript é¡µé¢å®šæ—¶å™¨ ç®€ä¹¦åœ°å€ åœºæ™¯æœ€è¿‘åšè“ç‰™è®¾å¤‡çš„è¿žæŽ¥ï¼Œéœ€è¦åœ¨appä¸Šå®žæ—¶æ˜¾ç¤ºè“ç‰™çš„è¯»æ•°ï¼Œæ¯•ç«Ÿåªæœ‰ä½¿ç”¨è®¾å¤‡çš„æ—¶å€™æ‰è¦æ±‚å®žæ—¶æ€§ï¼Œç®€æ˜“æœŸé—´æˆ‘ä»¬ä½¿ç”¨æœåŠ¡ç«¯é€šä¿¡ï¼Œæˆ–è€…socketè¿™ç§åŒå‘é€šä¿¡çš„ï¼Œç›´æŽ¥åœ¨é¡µé¢æ—¶å®šæ—¶åˆ·æ–° ä»£ç 123456789101112131415(require &apos;[reagent.core :as r])(require &apos;[re-frame.core :as rf])(defn dispatch-timer-event [] (let [now (js/Date.)] (rf/dispatch [:timer now])))(defonce do-timer (js/setInterval dispatch-timer-event 1000))(rf/reg-event-db :timer (fn [db [_ new-time]] (prn &quot;&lt;&lt;&lt;&lt;&lt; this is a test log &gt;&gt;&gt;&gt;&gt;&quot; (str new-time)) (assoc db :time new-time))) åœæ­¢åœæ­¢ä¸€ä¸ªintervalä½¿ç”¨å¦‚ä¸‹æ“ä½œ1234(r/render-component (r/create-element &quot;button&quot; #js &#123;:onClick #(. js/window (clearInterval do-timer))&#125; &quot;åœæ­¢åˆ·æ–°&quot; ) js/klipse-container) åˆ’é‡ç‚¹ï¼šå®šæ—¶ä»»åŠ¡å¯åŠ¨åŽå¿…é¡»æ‰¾åˆ°å¯¹åº”çš„æ‰èƒ½åœæ­¢æŽ‰ï¼Œåœ¨å®žé™…å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¹Ÿä¸€å®šä¸å¸Œæœ›å•é¡µé¢çš„åº”ç”¨ï¼Œåªè¦å®šæ—¶ä»»åŠ¡å¯åŠ¨äº†ï¼Œå…³é—­äº†å½“å‰é¡µå®šæ—¶ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œç€ï¼Œä¸€å®šæ˜¯è¦æ‰¾åˆ°æŸä¸ªåˆé€‚çš„å¥‘æœºåœæ­¢æŽ‰çš„ã€‚æˆ‘ä»¬æ˜¯è¿™æ ·å®žçŽ°çš„ï¼Œä¸€ä¸ªæŒ‰é’®æŽ§åˆ¶è·³é¡µåŒæ—¶å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼ŒsetIntervalçš„è¿”å›žå€¼ç”¨atomæˆ–è€…dbä¿å­˜èµ·æ¥ã€‚é¡µé¢é€€å‡ºï¼Œæˆ–è€…å…¶ä»–buttonæœ‰æ“ä½œæ—¶ï¼Œè°ƒç”¨clearIntervalå°†atomæˆ–è€…dbé‡Œè®¢é˜…çš„intervalåœæ­¢æŽ‰ã€‚ æ•ˆæžœå®žé™…ä½¿ç”¨ä¸­æˆ‘ä»¬å½“ç„¶ä¸æ˜¯åªæ‰“ä¸ªlogï¼Œæ˜¯è°ƒç”¨æŽ¥å£ï¼Œæ•ˆæžœå¦‚ä¸‹ï¼š å‚è€ƒhttps://github.com/Day8/re-frame/blob/master/examples/simple/src/simple/core.cljs]]></content>
      <categories>
        <category>clojurescript</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>clojurescript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[emacsä¸Šå®‰è£…ç±»ä¼¼exploreræ’ä»¶neotree]]></title>
    <url>%2F2019%2F10%2F24%2Femacs%E4%B8%8A%E5%AE%89%E8%A3%85%E7%B1%BB%E4%BC%BCexplorer%E6%8F%92%E4%BB%B6neotree%2F</url>
    <content type="text"><![CDATA[emacsä½¿ç”¨æ„Ÿå—å’Œä¸¤ä¸ªæ’ä»¶ ç®€ä¹¦åœ°å€ emacsæŽ¨èåŽŸå› æˆ‘å¼€å§‹å­¦clojureæ˜¯ç”¨intellij ideaçš„ï¼Œæ„Ÿè§‰è¿™æ¬¾ç¥žå™¨é…ä¸Šcursive plugin + Rainbow Bracketsæ’¸ç æ•ˆæžœä¹Ÿè¿˜ä¸é”™ï¼ŒçŽ°åœ¨æƒ³æƒ³å¯èƒ½è¿™ç§æ„Ÿè§‰æ¥è‡ªå½“æ—¶å¤ªä¸ä¹ æƒ¯clojureçš„å†™ä½œä¹ æƒ¯ï¼Œå’Œä¸ç†Ÿæ‚‰clojureçš„å“ªæ€•æœ€åŸºç¡€çš„å‡½æ•°ã€‚ ä½¿ç”¨çš„ä¸€ä¸ªå¤šæœˆæœŸé—´ï¼Œæ•´ä½“code fomatterä¸Žå¤§ç¥žçš„emacsä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ‰“å¼€ä¸€ä¸ªnamespaceæ€»æ˜¯ä¼šé‡æ–°æ ¹æ®cursiveè®¤ä¸ºçš„ç¼©è¿›ç»™åŠ å‡æ‹¬å·ï¼Œå‡ å¤©é‡Œæ€»ä¼šå‡ºçŽ°é‚£ä¹ˆä¸€ä¸¤æ¬¡ï¼Œæ‹¬å·ä¹±çš„åŒ¹é…ä¸ä¸Šï¼Œè´¹å¾ˆå¤§åŠ²ã€‚ å­¦ä¹ æœŸé—´ï¼Œçœ‹é«˜æ‰‹çŽ©å¼„ä»£ç ï¼Œå°¤å…¶æ˜¯repläº¤äº’é‡Œï¼Œæ‰å¼€å§‹è§‰å¾—intellij ideaæ¬ ç¼ºç‚¹ä»€ä¹ˆã€‚äºŽæ˜¯å¼€å§‹ä½¿ç”¨emacsï¼Œå„ç§æŸ¥ï¼Œå„ç§é—®ï¼Œå¼ºè¿«è‡ªå·±ä¹ æƒ¯ï¼Œä¹Ÿå°±ä¸€å‘¨çš„æ—¶é—´ï¼Œå¸¸ç”¨çš„å¿«æ·é”®ä¹Ÿå°±èƒ½è®°å·®ä¸å¤šäº†ï¼ˆæ¯•ç«Ÿèœé¸Ÿçº§çš„å…¥é—¨ç”¨æˆ·å¸¸ç”¨çš„ä¹Ÿä¸å¤šðŸ˜ï¼‰ã€‚ ä¸¤ä¸‰å‘¨ä»¥åŽæˆ‘å°±çœŸçš„ä¸æƒ³å†åœ¨intellijä¸ŠçŽ©äº†ï¼Œå°¤å…¶æ˜¯å­¦ä¼šæ‹¬å·åƒè¿›ã€åå‡ºè¿™ç§åŽæ¥éžå¸¸éžå¸¸å¸¸ç”¨çš„å¿«æ·é”®ï¼Œç†Ÿæ‚‰äº†ä¹‹åŽæ„Ÿè§‰åœ¨emascé‡Œç¼–è¾‘clojureä¹Ÿæ˜¯ä¸€ç§äº«å—ã€‚ Visual Studio Codeä¹Ÿæœ‰å¥½å‡ ä¸ªclojureæ’ä»¶ï¼Œé…ä¸Šå½©è™¹æ‹¬å·ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿè¿˜ä¸é”™ï¼Œä½†æ˜¯ç¼–è¾‘èµ·æ¥å°±æ›´ä¸å¦‚intellij ideaäº†ï¼Œå› ä¸ºè¿žå‡½æ•°éƒ½è·³ä¸è¿›åŽ»ï¼Œåˆ é™¤å’Œå‰ªåˆ‡æ—¶é˜²æ­¢æ‹¬å·åŒ¹é…é”™è¯¯ç­‰ç­‰éƒ½æ²¡æœ‰ï¼Œæ›´æ²¡æœ‰replçŽ¯å¢ƒï¼Œæ€»ä¹‹å¯¹ç¼–è¾‘clojureæ¥è¯´å¤ªæ¬¡~~~æ•ˆçŽ‡ä¹Ÿä¸ä¼šé«˜ã€‚ ç¼ºé™·è¡¥å……ä½†æ˜¯äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼Œæ¯•ç«Ÿèåœç™½èœå„æœ‰æ‰€çˆ±ï¼Œemacsä¹Ÿæœ‰å®ƒä¸è¶³çš„åœ°æ–¹ï¼Œé™¤äº†å¿«æ·é”®æ¯”è¾ƒéº»çƒ¦ä»¥å¤–ï¼Œæœ‰äººè¯´ç¼–å†™äº†ä»£ç å¿…é¡»æŒ‰ä¸‹C+x C+sä¿å­˜ï¼Œéº»çƒ¦ã€‚å¬çš„æ›´å¤šçš„æ˜¯emacsæ²¡æœ‰æƒ³åˆ«çš„ideä¸€æ ·çš„explorerå¯ä»¥çœ‹æ•´ä¸ªå·¥ç¨‹çš„ç»“æž„ï¼Œå› æ­¤æˆ‘å°†è‡ªå·±çš„å°è¯•å†™ä¸€ä¸‹ï¼Œæ­£åœ¨ä½¿ç”¨æˆ–æœ‰æ„å‘ä½¿ç”¨emacsçš„æƒ³åŠ çš„å¯ä»¥è‡ªå·±åŠ ï¼Œä¹Ÿå¯ä»¥æ‰¾æˆ‘å…è´¹ä¸Šé—¨å®‰è£…ðŸ˜ðŸ˜„ðŸ˜ æˆ‘ä¹Ÿå®‰è£…çš„æ˜¯å¤§ç¥žæŽ¨èçš„purcell/emacs.dçš„é…ç½®ï¼Œä½†æ˜¯åšäº†ä¸¤ç‚¹æ”¹åŠ¨ã€‚ è‡ªåŠ¨ä¿å­˜æ’ä»¶æœ‰äº†è¿™ä¸ªæ’ä»¶å¯ä»¥ä¸ç”¨å†æŒ‰ä¸‹C+x C+sä¿å­˜äº†ã€‚é»˜è®¤1sé’Ÿä½ ä¸åŠ¨ï¼Œç¨‹åºå°±ä¼šè‡ªå·±ä¿å­˜ï¼Œå¹¶ä¸”ä¸ä¼šå†æœ‰é‚£äº›#æ–‡ä»¶ï¼Œç¨‹åºå¯åŠ¨çš„è¯ä¹Ÿä¼šè‡ªå·±ç¼–è¯‘ï¼Œæˆ‘ä½¿ç”¨çš„æ—¶å€™é™é»˜æ—¶é—´æ”¹æˆ3sã€‚å‚è€ƒæ–‡ç« Emacsï¼šæˆ‘å·²ç»åå¹´æ²¡æœ‰æŒ‰è¿‡ä¿å­˜æŒ‰é”®äº†ï¼ˆé™„å¸¦ auto-save.el æºç è§£æžï¼‰åšçš„ï¼Œç›¸ä¿¡æœ‰è¿™æƒ³æ³•çš„è¯ï¼Œåº”è¯¥è°éƒ½ä¼šï¼Œæˆ‘è¿™æŽ¨èä¸‹ç›¸å…³é“¾æŽ¥ã€‚ æ’ä»¶ä»£ç ï¼šauto-save.el éœ€è¦ä¿®æ”¹é™é»˜æ—¶é—´çš„è¯ä¿®æ”¹.elæ–‡ä»¶é‡Œçš„auto-save-idleå‡½æ•°å‚æ•°å³å¯ï¼Œå•ä½æ˜¯ç§’ã€‚ neotreeæ’ä»¶ä»Žç½‘ä¸Šæœä¸€ä¸‹çš„è¯ï¼Œè¿™æ ·çš„éœ€æ±‚è¿˜çœŸä¸æ˜¯åªæœ‰æˆ‘ä»¬æƒ³è¦ï¼Œæ¯”å¦‚:A good project tree browser for Emacs?,emacsçœŸæ˜¯åƒäººåƒæ ·ï¼Œæˆ‘ä»Žå„ä½å¤§ç¥žé«˜åº¦çš„è‡ªå®šåˆ¶æ–¹æ¡ˆé‡Œæ‰¾åˆ°äº†neotreeå’Œsidebarä¸¤æ¬¾ï¼Œæˆ‘ä½¿ç”¨çš„å‰è€…ï¼Œå®‰è£…ç®€å•ï¼Œä¹Ÿèƒ½è¾¾åˆ°ç›®çš„ï¼ˆæˆ‘ä¹Ÿæ‹…å¿ƒä¹±ä¸ƒå…«ç³Ÿå®‰è£…å¤šäº†ï¼Œä¼šä¸ä¼šå½±å“eamcså¯åŠ¨è¿è¡Œé€Ÿåº¦ï¼Œæ‰€ä»¥æ¯”é‡å°±è½»ï¼‰ã€‚ æŽ¨èF8ä½œä¸ºæŽ§åˆ¶æ˜¾ç¤ºå’Œéšè—çš„å¿«æ·é”®ï¼Œå†™å¤šäº†ï¼Œä¸€å›¾èƒœåƒè¨€~]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>emacs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¥žèˆŸç²¾ç›¾T47T1å®‰è£…é»‘è‹¹æžœ]]></title>
    <url>%2F2019%2F10%2F19%2F%E7%A5%9E%E8%88%9F%E7%B2%BE%E7%9B%BET47T1%E5%AE%89%E8%A3%85%E9%BB%91%E8%8B%B9%E6%9E%9C%2F</url>
    <content type="text"><![CDATA[æ–°ä¹°çš„ç¥žèˆŸç²¾ç›¾8Gå†…å­˜ï¼Œ1Tå›ºæ€ï¼Œä¹°æ¥å®‰è£…é»‘è‹¹æžœçš„æ—¶å€™ä¸€ç‚¹å°é—®é¢˜è®°å½• ç®€ä¹¦åœ°å€ æœ€è¿‘åœ¨åŒäº‹çš„é¼“åŠ¨ä¸‹ä¸‹æ‰‹äº†ç¥žèˆŸç²¾ç›¾UT471è¿™æ¬¾æœ¬å­ï¼Œ14å¯¸è¶…è–„æœ¬ã€‚ åŒäº‹åŠä¸ªå¤šæœˆå‰å°±æ˜¯ä¹°çš„è¿™æ¬¾ï¼Œå·²ç»æŠ˜è…¾å¥½äº†é»‘è‹¹æžœï¼Œæ­£æ˜¯åŸºäºŽè¿™ä¸ªåŽŸå› ï¼Œæˆ‘çŠ¹è±«ä¸­å¸¦ç€ä¸å®‰è¿˜æ˜¯ä¹°äº†è¿™æ¬¾ï¼ŒæŠ˜è…¾é»‘è‹¹æžœç¡®å®žæ˜¯ä¸ªå¤´ç–¼çš„äº‹ï¼Œé™¤éžèˆå¾—èŠ±é’±ã€‚ã€‚ã€‚ ä¸Žä¹‹å‰ä¸åŒçš„äº‹è¿™æ¬¡è¿™ä¸ªç¬”è®°æœ¬åªæœ‰ä¸€å—å„¿ç¡¬ç›˜ï¼Œæ‰€ä»¥å®‰è£…äºŽä»¥å‰ä¸åŒäº†ï¼Œè¶ç€æœ‰å°è±¡ï¼Œè®°å½•ä¸‹å’‹å¹²çš„ã€‚ 1ã€é¦–å…ˆï¼Œç³»ç»Ÿåˆ†åŒºå¾—è¦ä¸¤ä¸ªESPåŒºï¼Œä¸€ä¸ªå¼•å¯¼cloverï¼Œä¸€ä¸ªå¼•å¯¼Windowsï¼Œå°±æ˜¯å› ä¸ºæ²¡æœ‰æžæ‡‚è¿™ä¸ªï¼Œè€æ˜¯æƒ³åœ¨ä¸€ä¸ªESPä¸ŠæŠŠä¸¤ä¸ªå¼•å¯¼éƒ½åŠ ä¸Šï¼Œæœ€åŽå¯¼è‡´æ­£ç‰ˆçš„windows10åºŸäº†ï¼Œè£…äº†ä¸ªç›—ç‰ˆçš„ã€‚ 2ã€é»‘è‹¹æžœçš„æ— çº¿ç½‘å¡å’Œè“ç‰™æ˜¯é“å®šé©±åŠ¨ä¸äº†çš„ï¼Œå½“æ—¶è”æƒ³æ‹¯æ•‘è€…è¿˜èŠ±150å¤§æ´‹ï¼Œä¹°äº†ä¸ªé»‘è‹¹æžœæ— çº¿ç½‘å¡æ¢ä¸ŠåŽ»ï¼Œä¸€åˆ‡å®Œç¾Žäº†ï¼Œä½†æ˜¯è¿™æ¬¡å°±æƒ¨äº†ï¼Œæ®åŒäº‹è¯´ï¼Œå¸‚é¢ä¸Šæ²¡æœ‰æ’å£ä¸Žä¹‹èƒ½åŒ¹é…çš„é»‘è‹¹æžœæ— çº¿ç½‘å¡ï¼Œä»–ä¹°äº†ä¸€æ¬¡æ‹¿å›žæ¥è¯•è¿‡äº†ï¼Œä¸èƒ½ç”¨ã€‚å› æ­¤wifiå’Œè“ç‰™åªèƒ½ç”¨USBé©±åŠ¨äº†ï¼Œè¿™æ ·ä¸€ä¸ªç”µè„‘ä¸Šå°±è¦è‡³å°‘æ’ä¸¤ä¸ªè®¾å¤‡ï¼Œè€Œä¸”å°±ç®—æ’ä¸¤ä¸ªï¼Œairdropè¿™ä¹ˆèµžçš„æŠ•å±åŠŸèƒ½ä¹Ÿä¸å±žäºŽä½ äº†ã€‚ 3ã€è¦é©±åŠ¨USBè“ç‰™ï¼Œå°±è¦å…ˆç¦æ­¢æŽ‰macè‡ªå¸¦çš„è“ç‰™ï¼Œè™½ç„¶è‡ªå¸¦çš„ä¸èƒ½ç”¨ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯ç«™ç€çŸ›ç›¾ä¸æ‹‰å±Žï¼Œä¸ç¦æ­¢æŽ‰USBçš„é€‚é…å™¨æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œå› æ­¤macOSåªè®¤ä¸€ä¸ªã€‚äºŽæ˜¯å¯ä»¥å‚è€ƒä¸‹æ–‡è®¾ç½®ç¦æ­¢ä¸€ä¸‹ï¼š å°ç±³ç¬”è®°æœ¬è£…MACï¼ˆé»‘è‹¹æžœï¼‰ï¼Œå¤–æŽ¥USBè“ç‰™ï¼Œç¦æ­¢ç¬”è®°æœ¬è‡ªå¸¦çš„è“ç‰™æ–¹æ³• 4ã€ç¦æ­¢ABCè¾“å…¥æ³•å‚è€ƒï¼šåˆ é™¤MACç³»ç»Ÿè‡ªå¸¦çš„ABCè¾“å…¥æ³• 5ã€ç¾Žä¸­ä¸è¶³çš„åœ°æ–¹ï¼Œç”µè„‘å¯åŠ¨æ—¶è¦å…ˆæ–­å¼€ç”µæºï¼Œå¦åˆ™ä¼šå¯¼è‡´é”®ç›˜æ— æ³•é©±åŠ¨ï¼Œå¼€æœºåŽå†å……ç”µï¼Œæ­¤æ—¶é”®ç›˜æ¢å¤æ­£å¸¸ã€‚]]></content>
      <categories>
        <category>mac</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>é»‘è‹¹æžœ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojureä¹‹åˆ¶ä½œleinæ¨¡æ¿ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2019%2F10%2F09%2Fclojure%E4%B9%8B%E5%88%B6%E4%BD%9Clein%E6%A8%A1%E6%9D%BF%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨å¼€æºluminusæ¨¡æ¿ç­–ç•¥ï¼Œåˆ¶ä½œå±žäºŽè‡ªå·±çš„é¡¹ç›®æ¨¡æ¿ ç®€ä¹¦åœ°å€ ä¼ é€é—¨Writing TemplatesWriting Lein template â€” quick tutorial åˆ¶ä½œç›®æ ‡é¡¹ç›®1ã€åˆ›å»ºå·¥ç¨‹123456789101112131415161718192021âžœ mygitrepo lein new template hc-template --to-dir hc-templateGenerating a Luminus project.âžœ mygitrepo cd hc-templateâžœ hc-template tree.â”œâ”€â”€ CHANGELOG.mdâ”œâ”€â”€ LICENSEâ”œâ”€â”€ README.mdâ”œâ”€â”€ project.cljâ”œâ”€â”€ resourcesâ”‚ â””â”€â”€ leiningenâ”‚ â””â”€â”€ newâ”‚ â””â”€â”€ hc_templateâ”‚ â””â”€â”€ foo.cljâ””â”€â”€ src â””â”€â”€ leiningen â””â”€â”€ new â””â”€â”€ hc_template.clj7 directories, 6 filesâžœ hc-template 2ã€ æ ¹ç›®å½•æ‰‹åŠ¨å¢žåŠ shadow-cljs.ednæ–‡ä»¶123456789101112131415161718192021;; This file is generated by lein-shadow, do not manually edit. Instead, edit project.clj shadow-cljs key.&#123;:nrepl &#123;:port 7002&#125;, :builds &#123;:app &#123;:target :browser, :output-dir &quot;target/cljsbuild/public/js&quot;, :asset-path &quot;/js&quot;, :modules &#123;:app &#123;:entries [hc-template.app]&#125;&#125;, :devtools &#123;:watch-dir &quot;resources/public&quot;, :preloads [re-frisk.preload]&#125;, :dev &#123;:closure-defines &#123;&quot;re_frame.trace.trace_enabled_QMARK_&quot; true&#125;&#125; :release &#123;:output-dir &quot;dist/&quot; :module-hash-names true :build-options &#123;:manifest-name &quot;cljs-manifest.json&quot;&#125;&#125;&#125;&#125; , :test &#123;:target :node-test, :output-to &quot;target/test/test.js&quot;, :autorun true&#125;&#125;, :dev-http &#123;8000 &#123;:roots [&quot;resources/public&quot; &quot;target/cljsbuild/public&quot;]&#125;&#125; :lein true&#125; 3ã€å¼•å…¥antd1npm install antd --save package.jsoné…ç½®æ–‡ä»¶12345678910&#123; &quot;dependencies&quot;: &#123; &quot;antd&quot;: &quot;^3.22.0&quot;, &quot;create-react-class&quot;: &quot;15.6.3&quot;, &quot;react&quot;: &quot;16.8.6&quot;, &quot;react-dom&quot;: &quot;16.8.6&quot;, &quot;shadow-cljs&quot;: &quot;2.8.39&quot; &#125;, &quot;devDependencies&quot;: &#123;&#125;&#125; 4ã€é…ç½®å…¥å£æ–‡ä»¶åœ¨resources/publicç›®å½•ä¸‹æ–°å»ºindex.htmlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819&lt;!DOCTYPE html&gt;&lt;html lang=&quot;cn&quot;&gt;&lt;head&gt; &lt;title&gt;åŽå°ç®¡ç†ç³»ç»Ÿ&lt;/title&gt; &lt;meta charset=&quot;utf-8&quot;/&gt; &lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; name=&quot;viewport&quot; /&gt; &lt;link href=&quot;https://cdn.bootcss.com/antd/3.18.0/antd.min.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;!-- Our JavaScript will modify the DOM inside this element --&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;!-- All our ClojureScript gets compiled into this file --&gt;&lt;script&gt; document.write(&quot;&lt;script type=&apos;text/javascript&apos; src=&apos;/js/app.js?v=&quot;+Math.random()+&quot;&apos; type=&apos;text/javascript&apos;&gt;&lt;\/script&gt;&quot;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 5ã€å¯åŠ¨é¡¹ç›®ï¼ŒéªŒè¯æ˜¯å¦æ­£å¸¸12345678910111213141516âžœ shadow-cljs serverPreparing npm packagesInstalling npm packagesnpm packages successfully installedRunning shadow-cljs...2019-08-25 20:13:00,880 [main] DEBUG org.jboss.logging - Logging Provider: org.jboss.logging.Slf4jLoggerProvider2019-08-25 20:13:02,199 [main] DEBUG io.undertow - starting undertow server io.undertow.Undertow@31ff09472019-08-25 20:13:02,207 [main] INFO org.xnio - XNIO version 3.7.0.Final2019-08-25 20:13:02,398 [main] INFO org.jboss.threads - JBoss Threads version 2.3.2.Final2019-08-25 20:13:02,423 [main] DEBUG io.undertow - Configuring listener with protocol HTTP for interface 0.0.0.0 and port 9630shadow-cljs - server version: 2.8.39 running at http://localhost:9630shadow-cljs - nREPL server started on port 7002shadow-cljs - watching build :app[:app] Configuring build.[:app] Compiling ...[:app] Build completed. (345 files, 344 compiled, 0 warnings, 62.36s) clojureç¼–è¯‘å™¨æ¦‚è§ˆ: http://localhost:9630 å®žæ—¶å¼€å‘çš„é¢„è§ˆ: http://localhost:8000 å‚è€ƒluminus-templateå®žçŽ°æœºåˆ¶ç¼–å†™sourceåŠ è½½ä»£ç å‚è€ƒleiningençš„åŽŸå› æ˜¯Writing Lein template â€” quick tutorialè¿™æ–‡ä¸­å¦¹å­æ²¡æœ‰è€ƒè™‘clojureæœ¬èº«ä¸¤ä¸ªå¤§æ‹¬å·è¿™ç§è¯­æ³•æ˜¯å­˜åœ¨çš„ï¼Œæ‰€ä»¥å¦‚æžœç”¨å¥¹çš„æ–¹å¼ï¼Œä»£ç ä¸­æœ¬æ¥å°±æ˜¯çš„è¯­æ³•å°†åˆ›å»ºæ¨¡æ¿ä¸æˆåŠŸï¼Œæˆ‘æƒ³è¿™ä¹Ÿæ˜¯leiningenä½¿ç”¨è¿žä¸ªå°–æ‹¬å·&lt;&lt;name&gt;&gt;æ¥ç»™å˜é‡èµ‹å€¼çš„åŽŸå› ã€‚ ä¸Šæ ¸å¿ƒä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445(ns leiningen.new.common (:require [selmer.parser :as selmer] [leiningen.new.templates :refer [renderer raw-resourcer -&gt;files]] [clojure.pprint :refer [code-dispatch pprint with-pprint-dispatch]] [clojure.string :as string] [clojure.java.io :as io]))(def template-name &quot;hc-template&quot;)(defn render-template [template options] (selmer/render (str &quot;&lt;% safe %&gt;&quot; template &quot;&lt;% endsafe %&gt;&quot;) options &#123;:tag-open \&lt; :tag-close \&gt; :filter-open \&lt; :filter-close \&gt;&#125;))(defn init-render [] (renderer template-name render-template))(defn slurp-resource [path] (-&gt; (str &quot;leiningen/new/hc_template/&quot; path) io/resource slurp))(selmer/add-tag! :include (fn [args context-map] (-&gt; (slurp-resource (first args)) (render-template context-map) (string/replace #&quot;^\n+&quot; &quot;&quot;) (string/replace #&quot;\n+$&quot; &quot;&quot;))))(defn render-asset [render options asset] (if (string? asset) asset (let [[target source] asset] [target (render source options)])))(defn render-assets [assets binary-assets options] (let [render (init-render) raw (raw-resourcer template-name)] (apply -&gt;files options (into (map (partial render-asset render options) assets) (map (fn [[target source]] [target (raw source)]) binary-assets))))) éœ€è¦åŠ è½½çš„èµ„æºæ–‡ä»¶ç›®å½•æ˜¯sources/leiningen/new/hc_templateç›®å½•ä¸‹ï¼ŒåŠ è½½æ–‡ä»¶ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596(ns leiningen.new.hc-template (:require [leiningen.new.templates :refer [multi-segment sanitize-ns renderer name-to-path -&gt;files project-name year sanitize]] [leiningen.core.main :as main] [selmer.parser :as selmer] [clojure.string :as string] [leiningen.new.common :refer :all] [clojure.java.io :as io]))(def timestamp (.format (java.text.SimpleDateFormat. &quot;yyyyMMddHHmmss&quot;) (java.util.Date.)))(def project-assets [[&quot;dev-config.edn&quot; &quot;dev-config.edn&quot;] [&quot;.gitignore&quot; &quot;gitignore&quot; ] [&quot;Procfile&quot; &quot;Procfile&quot; ] [&quot;project.clj&quot; &quot;project.clj&quot; ] [&quot;Dockerfile&quot; &quot;Dockerfile&quot; ] [&quot;Capstanfile&quot; &quot;Capstanfile&quot; ] [&quot;README.md&quot; &quot;README.md&quot;] [&quot;shadow-cljs.edn&quot; &quot;shadow-cljs.edn&quot; ] [&quot;package.json&quot; &quot;package.json&quot; ]])(def clj-core-assets [[&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/core.clj&quot; &quot;src/clj/core.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/nrepl.clj&quot; &quot;src/clj/nrepl.clj&quot; ] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/config.clj&quot; &quot;src/clj/config.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/handler.clj&quot; &quot;src/clj/handler.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/middleware.clj&quot; &quot;src/clj/middleware.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/middleware/formats.clj&quot; &quot;src/clj/middleware/formats.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/middleware/exception.clj&quot; &quot;src/clj/middleware/exception.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/db/core.clj&quot; &quot;src/clj/db/core.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/routes/services.clj&quot; &quot;src/clj/routes/services.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/routes/guestbook.clj&quot; &quot;src/clj/routes/guestbook.clj&quot;] ;;test [&quot;&#123;&#123;backend-test-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/test/handler.clj&quot; &quot;test/clj/handler.clj&quot;] [&quot;&#123;&#123;backend-test-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/test/db/core.clj&quot; &quot;test/clj/db/core.clj&quot;] ;; hc clj [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/db/redis.clj&quot; &quot;src/clj/db/redis.clj&quot;] [&quot;&#123;&#123;backend-path&#125;&#125;/&#123;&#123;sanitized&#125;&#125;/common/result.clj&quot; &quot;src/clj/common/result.clj&quot;]]);;è¿™é‡Œè¿˜æœ‰å…¶ä»–å¾ˆå¤šä»£ç ã€‚ã€‚ã€‚ã€‚ã€‚(def db-assets [[(str &quot;&#123;&#123;resource-path&#125;&#125;/migrations/&quot; timestamp &quot;-add-users-table.down.sql&quot;) &quot;resources/migrations/20190831145908-add-users-table.down.sql&quot;] [(str &quot;&#123;&#123;resource-path&#125;&#125;/migrations/&quot; timestamp &quot;-add-users-table.up.sql&quot;) &quot;resources/migrations/20190831145908-add-users-table.up.sql&quot;] [&quot;&#123;&#123;resource-path&#125;&#125;/sql/queries.sql&quot; &quot;resources/sql/queries.sql&quot;]])(def binary-assets [[&quot;&#123;&#123;resource-path&#125;&#125;/public/favicon.ico&quot; &quot;resources/public/favicon.ico&quot;] [&quot;&#123;&#123;resource-path&#125;&#125;/public/index.html&quot; &quot;resources/public/index.html&quot;] [&quot;&#123;&#123;resource-path&#125;&#125;/public/img/warning_clojure.png&quot; &quot;resources/public/img/warning_clojure.png&quot;]])(def core-assets (vec (concat project-assets clj-core-aeests environment-assets db-assets cljs-core-assets system-assets)))(def project-relative-paths &#123;:backend-path &quot;src/clj&quot; :backend-test-path &quot;test/clj&quot; :client-path &quot;src/cljs&quot; :client-test-path &quot;test/cljs&quot; :resource-path &quot;resources&quot; :cljc-path &quot;src/cljc&quot; :db-path &quot;src/clj&quot; :source-paths [&quot;src/clj&quot;] :resource-paths [&quot;resources&quot;] :now (java.util.Date.)&#125;)(def render (renderer &quot;hc-template&quot; render-template))(defn generate-project &quot;Create a new Luminus project&quot; [options] (main/info &quot;Generating a hc-template project.&quot;) (main/info &quot;Please read README.md firstly!!!&quot;) (render-assets core-assets binary-assets options))(defn hc-template &quot;init function&quot; [name] (let [options (merge project-relative-paths &#123;:name (project-name name) :selmer-renderer render-template :min-lein-version &quot;2.0.0&quot; :project-ns (sanitize-ns name) :sanitized (name-to-path name) :year (year) &#125;)] (generate-project options))) æ¨¡æ¿å¼€å‘å’Œæµ‹è¯• æºä»£ç ç›®å½•ï¼š resources/leiningen/new/hc_template/åŠ è½½æ¨¡æ¿æ–‡ä»¶ï¼šsrc/leiningen/new/hc_template.clj å¼€å‘æ­¥éª¤ï¼š å°†è‡ªå·±çš„ä»£ç æ–‡ä»¶ä¿å­˜åœ¨resources/leiningen/new/hc_template/å¯¹åº”çš„ç›®å½•ä¸‹ã€‚ ä¿®æ”¹æ–‡ä»¶çš„namespaceåç§°ä¸ºå¾…èµ‹å€¼çš„&lt;&lt;project-ns&gt;&gt;,éœ€è¦å¼•å…¥çš„å…¶ä»–å˜é‡ä¹Ÿä¸€æ ·ç”¨å°–æ‹¬å·æ‹¬èµ·æ¥ï¼Œæ¯”å¦‚é¡¹ç›®åç§°&lt;&gt;ã€‚ å°†è‡ªå·±çš„æºä»£ç åœ¨src/leiningen/new/hc_template.clj åŠ å…¥åˆ°renderé˜Ÿåˆ—é‡Œã€‚ cdåˆ°æ¨¡æ¿é¡¹ç›®rcclojuretemplateï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ 1lein new hc-template test testing ç›®å½•åˆ™ä¸ºç”¨æ¨¡æ¿åˆ›å»ºçš„ç›®æ ‡å·¥ç¨‹ è¿è¡Œå‰ç«¯ï¼Œåˆ†åˆ«æ‰§è¡Œ1yarn 1yarn start å¯åŠ¨åŽåœ¨æµè§ˆå™¨æœ¬åœ°9630ç«¯å£æŸ¥çœ‹é¡¹ç›®ç¼–è¯‘æƒ…å†µï¼Œ8000ç«¯å£æŸ¥çœ‹å‰ç«¯é¡µé¢æ˜¯å¦åŠ è½½æ­£å¸¸ è¿è¡ŒåŽç«¯ï¼šé€šè¿‡ideå¯åŠ¨åŽå°é¡¹ç›®ï¼ŒæŸ¥çœ‹èƒ½å¦æ­£å¸¸å¯åŠ¨ï¼ŒæŸ¥çœ‹3000ç«¯å£swaggeræ˜¾ç¤ºå¦èƒ½æ­£å¸¸æ˜¾ç¤º å‰åŽå°éƒ½æµ‹è¯•é€šè¿‡åŽï¼Œåˆ é™¤testingç›®å½•ï¼Œæäº¤æºä»£ç ã€‚ éƒ¨ç½²æ›´æ–°ï¼šä¿®æ”¹æ ¹ç›®å½•ä¸‹project.cljé‡Œçš„ç‰ˆæœ¬å·ï¼Œæœ€åŽä¸€ä½+1å³å¯ï¼Œé€šè¿‡å‘½ä»¤lein deployéƒ¨ç½²æœ€æ–°ç‰ˆï¼Œè´¦å·å¯†ç ï¼šmarvin/Mw99267@,é¦–æ¬¡éƒ¨ç½²ï¼Œä¼šæœ‰releaseç‰ˆæœ¬æŽˆæƒé”™è¯¯æç¤ºï¼Œéœ€è¦å®‰è£…gpgï¼Œå…³äºŽgpgçš„ä½¿ç”¨ï¼Œè¯·å‚è€ƒ GPGå…¬ç§é’¥çš„ä½¿ç”¨å’ŒQ&amp;A è®°ä¸€æ¬¡å‘mavenä¸­å¤®ä»“åº“æäº¤ä¾èµ–åŒ… å¦‚æžœæœ¬åœ°æ›´æ–°æµ‹è¯•ä¸å……åˆ†æˆ–è€…ä¸æƒ³é…ç½®gpgï¼Œå¯ä»¥å…ˆpushä»£ç ï¼Œæ‰¾é©¬æµ·å¼ºå‘å¸ƒæ–°ç‰ˆæœ¬ã€‚]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql è‡ªåŠ¨å¤‡ä»½]]></title>
    <url>%2F2019%2F09%2F30%2Fmysql%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%2F</url>
    <content type="text"><![CDATA[åœ¨linuxä¸Šå®‰è£…mysql å®šæ—¶ä»»åŠ¡è¿è¡Œå¤‡ä»½è„šæœ¬ç®€ä¹¦åœ°å€ è„šæœ¬æ–‡ä»¶ä½ç½®ï¼š/opt/chuangke/db/script/mysql_backup.shdbå¤‡ä»½æ–‡ä»¶ï¼š/opt/chuangke/db/backupå¤‡ä»½è„šæœ¬ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102#!/bin/bash#==============================================================================#TITLE: mysql_backup.sh#DESCRIPTION: script for automating the daily mysql backups on development computer#USAGE: ./mysql_backup.sh#CRON: # example cron for daily db backup @ 9:15 am # min hr mday month wday command # 15 9 * * * /Users/[your user name]/scripts/mysql_backup.sh#RESTORE FROM BACKUP #$ gunzip &lt; [backupfile.sql.gz] | mysql -u [uname] -p[pass] [dbname]#==============================================================================# CUSTOM SETTINGS#==============================================================================# directory to put the backup filesBACKUP_DIR=/opt/chuangke/db/backup# MYSQL ParametersMYSQL_UNAME=user2018MYSQL_PWORD=9bJk!mDp@58.# Don&apos;t backup databases with these names # Example: starts with mysql (^mysql) or ends with _schema (_schema$)IGNORE_DB=&quot;(^mysql|_schema$)&quot;# include mysql and mysqldump binaries for cron bash userPATH=$PATH:/usr/local/mysql/bin# Number of days to keep backupsKEEP_BACKUPS_FOR=30 #days#==============================================================================# METHODS#==============================================================================# YYYY-MM-DDTIMESTAMP=$(date +%F)function delete_old_backups()&#123; echo &quot;Deleting $BACKUP_DIR/*.sql.gz older than $KEEP_BACKUPS_FOR days&quot; find $BACKUP_DIR -type f -name &quot;*.sql.gz&quot; -mtime +$KEEP_BACKUPS_FOR -exec rm &#123;&#125; \;&#125;function mysql_login() &#123; local mysql_login=&quot;-u $MYSQL_UNAME&quot; if [ -n &quot;$MYSQL_PWORD&quot; ]; then local mysql_login+=&quot; -p$MYSQL_PWORD&quot; fi echo $mysql_login&#125;function database_list() &#123; local show_databases_sql=&quot;SHOW DATABASES WHERE \`Database\` NOT REGEXP &apos;$IGNORE_DB&apos;&quot; echo $(mysql $(mysql_login) -e &quot;$show_databases_sql&quot;|awk -F &quot; &quot; &apos;&#123;if (NR!=1) print $1&#125;&apos;)&#125;function echo_status()&#123; printf &apos;\r&apos;; printf &apos; %0.s&apos; &#123;0..100&#125; printf &apos;\r&apos;; printf &quot;$1&quot;&apos;\r&apos;&#125;function backup_database()&#123; backup_file=&quot;$BACKUP_DIR/$TIMESTAMP.$database.sql.gz&quot; output+=&quot;$database =&gt; $backup_file\n&quot; echo_status &quot;...backing up $count of $total databases: $database&quot; $(mysqldump $(mysql_login) $database | gzip -9 &gt; $backup_file) printf &quot;path = $&#123;backup_file&#125;&quot; #scp copy to other server scp $backup_file haieradmin@10.135.26.78:/opt/chuangke/db/backup/&#125;function backup_databases()&#123; local databases=$(database_list) local total=$(echo $databases | wc -w | xargs) local output=&quot;&quot; local count=1 for database in $databases; do backup_database local count=$((count+1)) done echo -ne $output | column -t&#125;function hr()&#123; printf &apos;=%.0s&apos; &#123;1..100&#125; printf &quot;\n&quot;&#125;#==============================================================================# RUN SCRIPT#==============================================================================delete_old_backupshrbackup_databaseshrprintf &quot;All backed up!\n\n&quot; æ·»åŠ å®šæ—¶ä»»åŠ¡12345678[root@localhost ~]# crontab [é€‰é¡¹]é€‰é¡¹: -e: ç¼–è¾‘crontabå®šæ—¶ä»»åŠ¡ -l: æŸ¥è¯¢crontabä»»åŠ¡ -r: åˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„crontabä»»åŠ¡[root@localhost ~]# crontab -e # ç¼–è¾‘å®šæ—¶ä»»åŠ¡# æ·»åŠ å¦‚ä¸‹å®šæ—¶ä»»åŠ¡ï¼Œä½¿ç”¨è„šæœ¬çš„æ–¹æ³•ï¼Œæ¯æ™š2ç‚¹æ‰§è¡Œ* 2 * * * /opt/chuangke/db/script/mysql_backup.sh]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Proéƒ¨ç½²åœ¨nginxä¸Šå¸¦äºŒçº§ç›®å½•]]></title>
    <url>%2F2019%2F09%2F29%2FAnt%20Design%20Pro%E9%83%A8%E7%BD%B2%E5%9C%A8nginx%E4%B8%8A%E5%B8%A6%E4%BA%8C%E7%BA%A7%E7%9B%AE%E5%BD%95%2F</url>
    <content type="text"><![CDATA[ä»¥éƒ¨ç½²antd proç®¡ç†ç³»ç»Ÿä¸ºä¾‹ï¼Œå°†webpacké¡¹ç›®éƒ¨ç½²åœ¨nginxçš„äºŒçº§ç›®å½•ä¸‹ã€‚ ç®€ä¹¦åœ°å€ ä¸€èˆ¬æˆ‘ä»¬npm buildåŽçš„æ‰€æœ‰é™æ€æ–‡ä»¶åœ¨disté‡Œï¼Œéƒ¨ç½²åœ¨nginxçš„ç«¯å£æ ¹ç›®å½•æ˜¯ä»€ä¹ˆä¹Ÿä¸éœ€è¦åšä¿®æ”¹çš„ï¼Œä½†æ˜¯ååæœ‰æ—¶å€™å› ä¸ºèµ„æºé—®é¢˜ï¼Œéœ€è¦åœ¨åŒä¸€ä¸ªç«¯å£ä¸‹ç”¨äºŒçº§ç›®å½•æ¥åŒºåˆ†å·¥ç¨‹ã€‚ æˆ‘ä»¬çŽ°åœ¨æµè¡Œçš„js projectç¼–è¯‘åŽéƒ½æ˜¯åœ¨ä¸€ä¸ªdiståç§°çš„ç›®å½•ä¸‹ï¼Œå…¥å£æ–‡ä»¶ä¸€èˆ¬æ˜¯index.htmlï¼ŒAnt design proä¹Ÿæ²¡æœ‰ä¾‹å¤–ã€‚åˆ†ä¸¤ç§æƒ…å†µçœ‹çŽ°çŠ¶ã€‚ 1ã€ éƒ¨ç½²åœ¨nginxç«¯å£çš„è·Ÿç›®å½•yarn buildå‘½ä»¤åŽå°†distæ–‡ä»¶å¤¹ä¸‹çš„ç›®å½•copyåˆ°nginxèƒ½è®¿é—®åˆ°çš„æŒ‡å®šç›®å½•ï¼Œæ¯”å¦‚æœ¬æ–‡çš„/opt/site/test/antd-proå¦‚ä¸‹ï¼š12345678910111213141516171819root@instance-ffkcm2y2:/opt/site/test/antd-pro# pwd/opt/site/test/antd-proroot@instance-ffkcm2y2:/opt/site/test/antd-pro# ls28.614fa0c1.async.js p__404.2636ef73.async.js p__profile__advanced__model.ts.53b2cc97.async.js29.e6e2e94a.async.js p__account__center__model.ts.e7d2b570.async.js p__profile__basic__model.ts.666ea347.async.js30.ed953c68.async.js p__account__settings__model.ts.18871ae5.async.js p__user__login.42c71fa9.async.js31.26eb59f0.async.js p__dashboard__analysis__model.tsx.d7334d5e.async.js p__user__login.69c29ea4.chunk.css32.858d1d30.async.js p__dashboard__monitor__model.ts.2295eb87.async.js p__user__login__model.ts.d7f50bee.async.jsasset-manifest.json p__dashboard__workplace__model.ts.25c12073.async.js p__user__register.440437ac.chunk.cssfavicon.png p__form__advanced-form__model.ts.83317f1b.async.js p__user__register.a695f9b3.async.jsicons p__form__basic-form__model.ts.4ec9fad5.async.js p__user__register__model.ts.474a7318.async.jsindex.html p__form__step-form__model.ts.2182323a.async.js p__user__register-result.3718897d.async.jslayouts__BasicLayout.6bb2089d.chunk.css p__list__basic-list__model.ts.ee583322.async.js p__user__register-result.b1bdabda.chunk.csslayouts__BasicLayout.d3a07379.async.js p__list__card-list__model.ts.a5f25999.async.js umi.0385b6b1.csslayouts__BlankLayout.17fcb893.async.js p__list__search__applications__model.ts.05817605.async.js umi.1ffff763.jslayouts__BlankLayout.6a502b55.chunk.css p__list__search__articles__model.ts.9b3e67e3.async.js vendors.1acb639b.chunk.csslayouts__UserLayout.265c2404.async.js p__list__search__projects__model.ts.b50103cf.async.js vendors.bda2d737.async.jslayouts__UserLayout.50d9ab78.chunk.css p__list__table-list__model.ts.7288e948.async.js viz.40029ece.async.jsroot@instance-ffkcm2y2:/opt/site/test/antd-pro# nginxçš„é…ç½®æ–‡ä»¶:12345678910111213141516171819202122232425262728root@instance-ffkcm2y2:/usr/local/nginx/conf/vhost# cat antd.test.5055.confserver &#123; listen 5055; server_name 182.61.51.177; index index.html; root /opt/site/test/antd-pro/; location / &#123; try_files $uri $uri/ /doc.html; &#125; location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ &#123; expires 30d; &#125; location ~ .*\.(js|css)?$ &#123; expires 12h; &#125; location ~ /\. &#123; deny all; &#125; access_log /opt/nginxlog/antd-pro-access.log; &#125;root@instance-ffkcm2y2:/usr/local/nginx/conf/vhost# è®¿é—®çœ‹çœ‹æ‰€æœ‰jså’Œcssç›´æŽ¥åœ¨ç«¯å£ä»¥ä¸‹é¦–å±‚ã€‚ 2ã€éƒ¨ç½²æ—¶æºå¸¦äºŒçº§ç›®å½• 1ã€ä¿®æ”¹å·¥ç¨‹æ ¹ç›®å½•ä¸‹çš„config/config.jsæ–‡ä»¶ä¸¤å¤„ä¿®æ”¹ï¼Œ export defaultä¸‹å¢žåŠ baseå’ŒpublicPathä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«é…ç½®ä¸€æ ·çš„å‚æ•°/children-pathmainfest ä¸‹ä¿®æ”¹basePathä»ŽåŽŸæ¥çš„â€™/â€˜æ”¹ä¸ºâ€™/children-path/â€˜ï¼Œæ³¨æ„ç»“å°¾æœ‰æ–œçº¿ã€‚ ä¿®æ”¹çŽ©åŽé‡æ–°npm installï¼Œç„¶åŽæœ¬åœ°å¯åŠ¨ï¼Œæœ¬åœ°å¯åŠ¨æ²¡é—®é¢˜ï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚ 2ã€æ‰“åŒ…dist 3ã€å°†distä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨ 4ã€é…ç½®nginx12345678910111213141516171819202122232425262728293031server &#123; listen 5055; server_name 182.61.51.177; index index.html; root /opt/site/test/antd-pro/; location / &#123; try_files $uri $uri/ /doc.html; &#125; location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ &#123; expires 30d; &#125; location ~ .*\.(js|css)?$ &#123; expires 12h; &#125; location ~ /\. &#123; deny all; &#125; location /children-path &#123; alias /opt/site/test/antd-pro2; &#125; access_log /opt/nginxlog/antd-pro-access.log; &#125; è®¿é—®çœ‹çœ‹æ•ˆæžœ ç´¯èµ˜åˆ°æœ€åŽå‘çŽ°ï¼Œè‡ªå·±æ˜¯ä¸ªå¤§å‚»é€¼ï¼Œä¸çœ‹æ–‡æ¡£çš„åŽæžœå¾ˆä¸¥é‡ã€‚ å¤šçœ‹æ–‡æ¡£ï¼å¤šçœ‹æ–‡æ¡£ï¼ï¼å¤šçœ‹æ–‡æ¡£ï¼ï¼ï¼é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ æ–‡æ¡£åœ¨å“ªé‡Œï¼Ÿä¸æ˜¯çžŽå­åº”è¯¥å°±èƒ½æ‰¾åˆ°ï¼šhttps://pro.ant.design/docs/deploy-cn]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å·¥ä½œä¸­å¸¸ç”¨çš„SQL]]></title>
    <url>%2F2019%2F08%2F27%2Fmysql-%E5%B7%A5%E4%BD%9C%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84SQL%2F</url>
    <content type="text"><![CDATA[å·¥ä½œä¸­å¶å°”ç”¨ä½†æ˜¯åˆå¾ˆå®¹æ˜“å¿˜è®°çš„sql ç®€ä¹¦åœ°å€ çŽ°åœ¨é¡¹ç›®ä¸­ç”¨çš„æœ€å¤šçš„æ˜¯å…è´¹çš„mysqlï¼Œå› æ­¤ä¸‹é¢çš„sqlåªä¿è¯åœ¨mysqlä¸Šå¥æ•ˆã€‚ 1ã€æ—¶é—´æˆ³æ ¼å¼åŒ– &amp; case-whenæŸ¥è¯¢ç³»ç»Ÿå‘æ”¾çš„çº¢åŒ…çš„æœ‰æ•ˆæ—¶é—´å’ŒçŠ¶æ€ï¼š12345678910111213141516171819202122232425262728293031323334353637SELECT a.amount çº¢åŒ…é¢é¢, a.member_phone é¢†å–äºº, a.amount_range ä½¿ç”¨é—¨æ§›, FROM_UNIXTIME( LEFT ( a.rule_start, 10 ), '%Y-%m-%d %T' ) ç”Ÿæ•ˆæ—¶é—´, FROM_UNIXTIME( LEFT ( a.rule_end, 10 ), '%Y-%m-%d %T' ) è¿‡æœŸæ—¶é—´, a.send_time å‘é€æ—¶é—´,CASE a.`status` WHEN '10' THEN 'æœªä½¿ç”¨' WHEN '20' THEN 'å·²ä½¿ç”¨' WHEN '30' THEN 'å°†è¿‡æœŸ' WHEN '40' THEN 'å·²è¿‡æœŸ' WHEN '50' THEN 'å·²å ç”¨' ELSE 'å…¶ä»–' END AS 'å½“å‰çŠ¶æ€', a.useage_range_name ä½¿ç”¨èŒƒå›´, b.remarks æ´»åŠ¨åç§°, b.rule_start è§„åˆ™å¼€å§‹æ—¶é—´, b.rule_end è§„åˆ™æˆªæ­¢æ—¶é—´, a.`use_date` AS ä½¿ç”¨æˆ–è¿‡æœŸæ—¶é—´ FROM `hl_benefit_redpackage_user` a INNER JOIN `hl_benefit_redpackage` b ON a.redpackage_id = b.redpackage_id WHERE a.redpackage_id != '' AND ! ISNULL( a.redpackage_id ); 2ã€group byçš„åˆç†ä½¿ç”¨ä¸€èˆ¬åœ°ï¼ŒselectåŽé¢åªèƒ½æ˜¯group by çš„å­—æ®µæˆ–è€…è·Ÿäº›èšåˆå‡½æ•°ï¼Œæ¯”å¦‚æŸ¥è¯¢æŸå¤©ä»¥åŽæ²¡å¤©æ³¨å†Œç”¨æˆ·æ•°é‡ï¼š123456789SELECT DATE_FORMAT( member_regist_time, '%Y-%m-%d' ) AS 'æ—¥æœŸ', COUNT( 1 ) AS 'ç”¨æˆ·æ•°' FROM hl_member WHERE DATE_FORMAT( member_regist_time, '%Y-%m-%d' ) &gt;= '2015-08-20' GROUP BY DATE_FORMAT( member_regist_time, '%Y-%m-%d' ) è¿™ç§æŸ¥è¯¢èƒ½å‡ºçš„å­—æ®µæœ‰é™ï¼Œé‚£ä¹ˆå¦‚æžœè¦æŸ¥å‡ºæ›´å¤šï¼ŒåŒæ—¶groupå‘¢ï¼Ÿ123select * from user where id in( select min(id) from user where name = 'Java3y' and pv = 20 and time='7-25' group by name,pv,time;) å°†æŸ¥è¯¢åŽçš„ç»“æžœä½œä¸ºå­æŸ¥è¯¢ï¼Œæ”¾åœ¨å¤–éƒ¨æŸ¥è¯¢çš„where å­å¥åŽï¼Œè¿™æ ·å¤–éƒ¨æŸ¥è¯¢æ˜¯å¯ä»¥select å‡ºå…¶ä»–å­—æ®µçš„ã€‚è¿˜æœ‰ä¸€ä¸ªå¸¸è§åœºæ™¯é‚£å°±æ˜¯æŸ¥è¯¢ä¸€ä¸ªè¡¨æŸäº›å­—æ®µé‡å¤çš„æ•°æ®12345678910111213141516171819SELECT * FROM hl_custom_item a WHERE ( a.custom_item_name, a.parent_id ) IN (SELECT custom_item_name, parent_id FROM hl_custom_item GROUP BY custom_item_name, parent_id HAVING COUNT( * ) &gt; 1 ) GROUP BY custom_item_name; 3ã€select updateæ›´æ–°ä¼šå‘˜é¢†å–çº¢åŒ…è¡¨çš„æ‰‹æœºå·ä¸ºä¼šå‘˜è¡¨çš„æ‰‹æœºå·12345UPDATE `hl_benefit_redpackage_user` aSET a.member_phone = (SELECT b.member_phone_no FROM `hl_member` b where a.member_id=b.member_Id)where a.member_id != NULL; 4ã€ update selectéƒ¨é—¨è¡¨ç¤ºä¸ªæ ‘ç»“æž„çš„è¡¨ï¼Œé‡Œé¢æœ‰å‡ ä¸‡æ¡æ•°æ®ï¼Œæ›´æ–°æ—¶ä¼šæœ‰æ•ˆçŽ‡é—®é¢˜ï¼ŒåŽŸSQLå¦‚ä¸‹ï¼š123UPDATE t_department d set d.parent_id=dept_id ,d.update_time=NOW()WHERE d.dept_code in (SELECT t.dept_code FROM t_idm_department twhere t.parent_code=NEW.dept_code); ä¼˜åŒ–SQLå¦‚ä¸‹1234UPDATE t_department d JOIN (SELECT t.dept_code FROM t_idm_department twhere t.parent_code=NEW.dept_code) e on d.dept_code = e.dept_code set d.parent_id=dept_id ,d.update_time=NOW() 5ã€insert selectå°†ä»Žæ‚£è€…è¡¨æŸ¥å‡ºçš„æ•°æ®æŸäº›å­—æ®µæ’å…¥åˆ°ä¸€ä¸ªæ–°çš„è¡¨1234INSERT INTO t_wx_user (id, openid, gender, nick_name, headimgurl, create_time)SELECT patient_id, openid, gender, nick_name, headimgurl, NOW()FROM t_patient; å‚è€ƒåœ¨å·¥ä½œä¸­å¸¸ç”¨åˆ°çš„SQL]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojureScript é›¶é›¶ç¢Žç¢Ž]]></title>
    <url>%2F2019%2F08%2F27%2FclojureScript%E9%9B%B6%E9%9B%B6%E7%A2%8E%E7%A2%8E%2F</url>
    <content type="text"><![CDATA[clojure script åšå‰ç«¯ç‚¹ç‚¹æ»´æ»´é›¶ç¢ŽçŸ¥è¯†æ€»ç»“ ç®€ä¹¦åœ°å€ æŽ§åˆ¶å°æŸ¥çœ‹dbä¿¡æ¯åœ¨æµè§ˆå™¨ä¸­å¼€å¯è‡ªå®šä¹‰æ—¥å¿—åŽå¯ä»¥åœ¨consoleä¸­æŸ¥çœ‹re-frameç®¡ç†çš„dbé‡Œçš„å†…å®¹ï¼ŒåŠ æ ¼å¼åŒ–ã€‚å¼€å¯æ–¹å¼ï¼šhttps://github.com/binaryage/cljs-devtools/blob/master/docs/faq.md#why-some-custom-formatters-were-not-rendered åœ¨consoleé‡Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹1re_frame.db.app_db.state æ•ˆæžœï¼š ç”¨kee-frameå’Œre-frameä¿®æ”¹dbçš„å€¼ç›®æ ‡ç»™dbçš„ã€demoã€‘ä¸‹å¢žåŠ ä¸€ä¸ªkeyï¼Œå€¼æ˜¯ä¸€ä¸ªajaxçš„è¿”å›žç»“æžœå¼•å…¥ä¸¤ä¸ªåŒ…re-frameå’Œkee-frame ä½¿ç”¨re-frame/reg-event-dbä¿®æ”¹db 12345678910111213141516171819202122(require &apos;[kee-frame.core :as kf])(require &apos;[re-frame.core :as rf])(defn- concat-key [keys] (concat [:demo] keys))(defn- data-&gt;db [db keys value] (assoc-in db (concat-key keys) value))(kf/reg-event-fx ::demo-detail-ajax (fn [&#123;:keys [db]&#125; [id]] &#123;:http-xhrio &#123;:uri (&quot;http://localhost:3000/api/demo?id=&quot; id) :method :get :timeout 10000 :on-failure [:common/ajax-get-failuer] :response-format (ajax/json-response-format &#123;:keywords? true&#125;) :on-success [::set-db-demo-detail]&#125;&#125;))(rf/reg-event-db ::set-db-demo-detail (fn [db [_ res]] (data-&gt;db db [:selected :detail] (:data res)))) ä¸Šé¢çš„æ“ä½œç”¨kee-frameå®žçŽ° 123456789101112(kf/reg-chain-named ::demo-detail-ajax (fn [ctx [params]] &#123;:http-xhrio &#123;:uri (&quot;http://localhost:3000/api/demo?id=&quot; (:id params) :method :get :timeout 10000 :on-failure [:common/ajax-get-failuer] :response-format (ajax/json-response-format &#123;:keywords? true&#125;)&#125;&#125;) :å°†è¿”å›žç»“æžœæ•°æ®å­˜å…¥db (fn [&#123;:keys [db]&#125; [_ res]] &#123;:db (data-&gt;db db [:demo-detail] (:data res))&#125;)) åŒºåˆ«ï¼š re-frameé‡Œå‘èµ·è¯·æ±‚å’Œå­˜å‚¨dbéœ€è¦ä¸¤ä¸ªäº‹ä»¶æ¥å®žçŽ°ï¼Œè€Œkee-frameéœ€è¦ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªè¿˜å¯ä»¥èµ·ä¸­æ–‡çš„åå­—ï¼Œä¾¿äºŽåœ¨æŽ§åˆ¶å°æŸ¥çœ‹ã€‚ re-frame/reg-event-dbè¿”å›žçš„æ˜¯(assoc db :key value)ï¼Œè€Œkee-frame/reg-chainè¿”å›žçš„æ˜¯{:db (assoc db :key value} kee-frameçš„è¿™ç§è¿”å›žç±»ä¼¼äºŽre-frame/reg-event-fxçš„å¦ä¸€ç§å½¢å¼ 123456789(defn h ;; maybe choose a better name like `delete-item` [coeffects event] ;; `coeffects` holds the current state of the world. (let [item-id (second event) ;; extract id from event vector db (:db coeffects)] ;; extract the current application state &#123;:db (dissoc-in db [:items item-id])&#125;)) ;; effect is &quot;change app state to ...&quot;(rf/reg-event-fx ;; a part of the re-frame API :delete-item ;; the kind of event h) è¿™ä¸ªå¤„ç†githubä¸Šæ˜¯æœ‰çš„ï¼Œè¿™ä¸ªhå‡½æ•°æ¢å¯ä»¥ç®€åŒ–ä¸€ä¸‹ 123(defn h [&#123;:keys [db]&#125; [_ item-id]] ;; &lt;--- new: obtain db and id directly &#123;:db (dissoc-in db [:items item-id])&#125;) ;; same as before kee-frame/reg-chainå¤„ç†å¤šæ¬¡æœ‰ä¾èµ–è¯·æ±‚å’Œå‚æ•°ä¼ é€’æœ‰ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼Œcontrolleré‡Œstartéœ€è¦è§¦å‘ä¸æ­¢ä¸€ä¸ªajaxè¯·æ±‚æ•°æ®ä¾›é¡µé¢æ¸²æŸ“ï¼Œé€šå¸¸çš„åšæ³•æ˜¯dispatchå¤šä¸ªeventï¼Œè¿™åœ¨starté‡Œå¾ˆå¥½å†™çš„ï¼Œå› ä¸ºstartæœ¬æ¥æŽ¥å—å‡½æ•°æˆ–è€…eventçš„é›†åˆã€‚ä½†æ˜¯å¦‚æžœæˆ‘ä»¬çš„å¤šä¸ªajaxè¯·æ±‚é—´æœ‰ä¾èµ–ï¼Œæ¯”å¦‚ç¬¬äºŒä¸ªajaxéœ€è¦ä½¿ç”¨ç¬¬ä¸€ä¸ªajaxçš„è¯·æ±‚ç»“æžœä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¹Ÿè¦ä½¿ç”¨å‘èµ·ç¬¬ä¸€ä¸ªajaxæ—¶ä½¿ç”¨çš„å‚æ•°ï¼Œæ€Žä¹ˆæžå‘¢ï¼Ÿçœ‹çœ‹å®žçŽ°ï¼š12345678910111213141516171819202122232425(defn data-&gt;db [db keys values] (prn &quot;å°†å¤šä¸ªç»“æžœå­˜å…¥db&quot;))(kf/reg-chain-named ::demo-detail-ajax1 (fn [ctx [params]] &#123;:http-xhrio &#123;:uri (&quot;http://ajax-demo1?id=&quot; :params params :method :get :timeout 10000 :on-failure [:common/ajax-get-failuer] :response-format (ajax/json-response-format &#123;:keywords? true&#125;)&#125;&#125;) ::å‘èµ·ç¬¬äºŒä¸ªè¯·æ±‚ (fn [ctx [params res1]] &#123;:http-xhrio &#123;:uri (&quot;http://ajax-demo2&quot; :params params :method :post :timeout 10000 :on-failure [:common/ajax-get-failuer] :response-format (ajax/json-response-format &#123;:keywords? true&#125;)&#125;&#125;) :å°†ä¸Šä¸¤ä¸ªè¯·æ±‚è¿”å›žç»“æžœæ•°æ®å­˜å…¥db (fn [&#123;:keys [db]&#125; [_ res1 res2]] &#123;:db (data-&gt;db db [key1 key2] [res1 res2]&#125;)) è¯´æ˜Žï¼šchainåœ¨reframeä¸Šæ‰©å±•çš„è¿™ä¸ªeventå‚æ•°å’Œç»“æžœæ˜¯ä¸€ç›´å¾€ä¸‹ç´¯è®¡çš„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯dispatchæ—¶çš„å‚æ•°ï¼Œå¾€åŽæ¯ä¸ªå‡½æ•°çš„ç¬¬äºŒç»„å‚æ•°ä¾æ¬¡æ˜¯æ¯ä¸€æ¬¡è¯·æ±‚çš„ç»“æžœã€‚ antdçš„ç»„ä»¶ä¸­ä½¿ç”¨ç»„ä»¶ä¸€äº›ç»„ä»¶éœ€è¦çš„å±žæ€§çš„å‚æ•°ç±»åž‹æ˜¯ReactNodeï¼Œ æ¯”å¦‚Inputçš„prefixå±žæ€§è¿™éœ€è¦ ä½¿ç”¨Reagentçš„as-elementå‡½æ•° (as-element form) Turns a vector of Hiccup syntax into a React element. Returns form unchanged if it is not a vector. 1234(defn page1 [] [:&gt; ant/Input &#123;:prefix (r/as-element [:&gt; ant/Icon &#123;:type &quot;user&quot;&#125;])&#125;]) ä¿®æ”¹é¡µé¢atomå…ƒç´ èµ‹å€¼å’Œä¿®æ”¹åˆå­¦è€…åŒ…æ‹¬å°èœé¸¡æˆ‘æ˜¯ä¸æ˜¯ä¼šç¢°åˆ°ä¸ªé—®é¢˜ï¼Œä»Ždbé‡Œè®¢é˜…çš„æ•°æ®æ¸²æŸ“é¡µé¢æ—¶ç¬¬ä¸€æ¬¡æ²¡æœ‰ï¼Œç¬¬äºŒæ¬¡ä»¥åŽå°±éƒ½æ­£å¸¸äº†ï¼Œæˆ–è€…ä½ æƒ³ä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªå€¼é‡æ–°æäº¤åˆ°æŽ¥å£ä¸Šï¼Œå‘çŽ°å€¼æ”¹ä¸äº†ã€‚ å¯èƒ½ä½ çš„ä»£ç æ˜¯è¿™æ ·çš„1234567(defn page2 [] (let [ data @(re-frame/subscribe [:db-key])] (fn [] [:div [ant/input &#123;:default-value (:name @data) :type &quot;text&quot; :on-change #(swap! item assoc item-str (-&gt; % .-target .-value))&#125;]]))) äº¦æˆ–æ˜¯è¿™æ ·çš„:123456(defn page3 [] (fn [] (let data @(re-frame/subscribe [:db-key]) [:div [ant/input &#123;:default-value (:name @data) :type &quot;text&quot; :on-change #(swap! item assoc item-str (-&gt; % .-target .-value))&#125;]]))) æ­å–œï¼Œè¿™ä¸¤ç§æ–¹å¼å®Œç¾Žè¸©é›·ï¼Œæˆ‘ä»¬å¤§ç¥žè¯´å› ä¸ºæˆ‘æ²¡æœ‰çœ‹reagentçš„Guideä¸€äºŒä¸‰ï¼Œå¥½å§ï¼Œç¡®å®žæ²¡çœ‹ã€‚ çŽ°çŠ¶å’ŒåŽŸå›  ç¬¬ä¸€ç§å†™æ³•çš„çŽ°çŠ¶ï¼šé¡µé¢çš„inputé‡Œç¬¬ä¸€æ¬¡æ— æ³•èµ‹å€¼ ç¬¬ä¸€ç§å†™æ³•çš„åŽŸå› ï¼šé¡µé¢åŠ è½½ä¸€æ¬¡ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡è®¢é˜…ä¸åˆ°dbé‡Œçš„æ•°æ®ï¼Œå› ä¸ºdbé‡Œè¿˜æ²¡æœ‰æ•°æ® ç¬¬äºŒç§å†™æ³•çš„çŽ°çŠ¶ï¼šé¡µé¢inputä¸Šæœ‰å€¼äº†ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ï¼Œæç¤ºreactçš„valueä¸èƒ½è¢«ä¿®æ”¹ ç¬¬äºŒç§å†™æ³•çš„åŽŸå› ï¼šä»Ždbé‡Œè®¢é˜…çš„å€¼dataè®¢é˜…ä¹‹åŽå°±ä¸Žè®¢é˜…æ²¡æœ‰å…³ç³»äº†ï¼Œè¯´ç™½äº†ï¼Œä¹Ÿå°±ä¸æ˜¯atomäº†ï¼Œæ‰€ä»¥ä¸èƒ½ä¿®æ”¹ã€‚ æ–¹æ¡ˆï¼š12345678910111213(require &apos;[reagent.ratom :as ratom :refer [reaction]])(def db-value (reaction @(re-frame/subscribe [:db-key])))(def change-value (atom nil))(defn page4 [] (fn [] (reset! change-value @(if (nil? @db-value) (atom (deref (rf/subscribe [:db-key]))) db-value)) [:div [ant/input &#123;:default-value (:name @db-value) :type &quot;text&quot; :on-change #(swap! item assoc item-str (-&gt; % .-target .-value))&#125;]])) å½“ç„¶ï¼Œå¦‚ä½ æ‰€çŸ¥ï¼Œå†™æ³•æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚è¿™ä¸ªchange-valueä½ å¯ä»¥åœ¨fné‡Œç”¨letå®šä¹‰ï¼Œå¹¶ä¸”æ¯”è¾ƒæŽ¨èã€‚ kee-frame/reg-controller æœ‰æ²¡æœ‰å¥½å¥½çœ‹æ–‡æ¡£ï¼Ÿ1234567891011121314151617181920212223242526(defn reg-controller "Put a controller config map into the global controller registry. Parameters: `id`: Must be unique in controllere registry. Will appear in logs. `controller`: A map with the following keys: `:params`: A function that receives the route data and returns the part that should be sent to the `start` function. A nil return means that the controller should not run for this route. `:start`: A function or an event vector. Called when `params` returns a non-nil value different from the previous invocation. The function receives whatever non-nil value that was returned from `params`, and returns a re-frame event vector. If the function does nothing but returning the vector, the surrounding function can be omitted. `:stop`: Optional. A function or an event vector. Called when previous invocation of `params` returned non-nil and the current invocation returned nil. If the function does nothing but returning the vector, the surrounding function can be omitted." [id controller] (when-not (s/valid? ::spec/controller controller) (e/expound ::spec/controller controller) (throw (ex-info "Invalid controller" (s/explain-data ::spec/controller controller)))) (when (get @state/controllers id) (console :warn "Overwriting controller with id " id)) (swap! state/controllers update id merge controller)) kee-frameå¼•å…¥controlleræ¥ä¼˜åŒ–è·¯ç”±è·¯ç”±ç®¡ç†ï¼Œç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ‰€ä»¥åœ¨è·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶ç¨‹åºé‡Œçš„æ‰€æœ‰controleréƒ½ä¼šç«–èµ·è€³æœµï¼Œå½“ç„¶æœ€å¥½æ˜¯åªæœ‰è¿™ä¸ªå˜åŒ–å’Œè‡ªå·±æœ‰å…³ï¼Œæ‰åŽ»å“åº”ã€‚è¿™å°±è¦åœ¨paramsé‡ŒåŠ handlerçš„åˆ¤æ–­ã€‚ :params å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°åŒ…å«è·¯ç”±ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯èŽ·å–handleré‡Œçš„è·¯ç”±åœ°å€ï¼Œå½“ç„¶åŒ…å«å‚æ•°ã€‚å¦‚æžœè¿”å›žnilçš„è¯ï¼ŒåŽé¢startå°±ä¸ä¼šæ‰§è¡Œï¼Œå…¶ä»–æƒ…å†µå°±ä¼šè§¦å‘:startã€‚ :start ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ç»„äº‹ä»¶çš„é›†åˆï¼Œå‡½æ•°é‡Œå¯ä»¥å¤„ç†å‚æ•°ç­‰ï¼Œå¦‚æžœæ˜¯ä¸€å †eventçš„è¯ï¼Œå¯ä»¥åœ¨å‡½æ•°é‡Œå‘èµ·dispatchæˆ–è€…ç›´æŽ¥è¿”å›ž[:event1 ::event2]ç­‰ç­‰ã€‚æ¥ä¸ªåŸºç¡€çš„ä¾‹å­ï¼š 123456(kf/reg-controller :bind-user-page &#123;:params (fn [params] (when (= :bind-user-page (get-in params [:data :name])) true)) :start (fn [] (prn &quot;?????????===&quot;) (re-frame/dispatch [:choose-hospital]))&#125;) æºå¸¦queryå‚æ•°çš„ä¾‹å­ï¼š123456789101112;;è·¯ç”±å¸¦å‚è·³è½¬ä¸åŒé¡µé¢(kf/reg-controller :è·¯ç”±å¸¦å‚è·³è½¬ä¸åŒé¡µé¢ &#123;:params (fn [route-data] (when (-&gt; route-data :data :name (= :weixin-redirect)) (:query-string route-data))) :start (fn [_ params] (re-frame/dispatch [:weixin-redirect (reduce-kv (fn [m k v] (assoc m (keyword k) v)) &#123;&#125; (into &#123;&#125; (map #(clojure.string/split % #&quot;=&quot;) (clojure.string/split params #&quot;&amp;&quot;))))]))&#125;) å¦‚æžœæƒ³è¦æ¯æ¬¡è·¯ç”±å˜åŒ–ï¼Œéƒ½è§¦å‘æŸä¸ªcontrollerçš„startï¼Œåªéœ€è¦åœ¨paramsé‡Œè¿”å›židentityå³å¯ã€‚ clojurescript å’Œ javascriptäº¤äº’æœ‰æ—¶å€™æˆ‘ä»¬çš„clojurescriptéœ€è¦å’Œjavascriptäº¤äº’ã€‚æ¯”å¦‚ç”¨jsæ‰“ä¸ªlogï¼Œæ¯”å¦‚ç”¨jsèŽ·å–windowçš„locationæ•°æ®ç­‰ï¼Œä¸¾ä¸ªåˆ—å­123(.log js/console &quot;æ‰“ä¸ªlog&quot;)(.-location js/window)(.-search (.-location js/window)) cljsè¿˜æä¾›äº†cljså’Œjsäº’è½¬çš„å‡½æ•°clj-&gt;jså’Œjs-&gt;cljçœ‹çœ‹ä¾‹å­ï¼š 1(def js-object (clj-&gt;js :a 1 :b [1 2 3] :c #&#123;"d" true :e nil&#125;)) è¾“å‡ºç»“æžœ12345&#123; &quot;a&quot;: 1, &quot;b&quot;: [1, 2, 3], &quot;c&quot;: [null, &quot;d&quot;, &quot;e&quot;, true]&#125; ä¹Ÿå¯ä»¥ç®€åŒ–ç”¨#js12345678910(def js-object #js &#123;:a 1 :b #js [1 2 3] :c #js ["d" true :e nil]&#125;)# è¾“å‡º&#123; "c": &#123; "e": null, "d": true &#125;, "b": [1, 2, 3 ], "a": 1&#125; jsæœ‰æ—¶å€™éœ€è¦è½¬æˆcljsï¼Œç”¨js-&gt;cljå®žçŽ°,æ¯”å¦‚ï¼š12345678(require &apos;[reagent.core :as r])(defn get-form &quot;è¿”å›žåˆFrom.createåˆ›å»ºçš„ `form` è¿™ä¸ªå‡½æ•°åªèƒ½åœ¨formå†…éƒ¨è°ƒç”¨, å› ä¸ºä½¿ç”¨äº†reaget/current-component.&quot; [] (-&gt; (r/current-component) (r/props) (js-&gt;clj :keywordize-keys true) (:form))) å¤§ç¥žåœ¨4clojureåšå®¢ä¸Šä¹Ÿæœ‰jsæ“ä½œDOMå’Œå¼•å…¥highchartsçš„ä½¿ç”¨çš„ä¾‹å­ã€‚æ›´å¤šäº¤äº’çš„æ“ä½œå‚è€ƒClojureScript: JavaScript Interop å’ŒClojurescript interop with javascript ç”¨figwheelç¼–è¯‘å·¥ç¨‹ï¼Œå¯åŠ¨æœåŠ¡ä¸‰æ­¥å¯åŠ¨ figwheelï¼šUsing the Figwheel REPL within nREPLåœ¨emacsé‡Œå¯åŠ¨cider-jack-in-cljsé€‰æ‹©figwheel123(use &apos;figwheel-sidecar.repl-api)(start-figwheel!)(cljs-repl) åœ¨alké¡¹ç›®é‡Œçš„ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556user&gt; (use 'figwheel-sidecar.repl-api)niluser&gt; (start-figwheel!)Figwheel: Starting server at http://0.0.0.0:3449Figwheel: Watching build - patient-appCompiling build :patient-app to "target/cljsbuild/public/patientjs/app.js" from ["src/cljs/patient" "src/cljc" "env/dev/cljs/patient"]...Successfully compiled build :patient-app to "target/cljsbuild/public/patientjs/app.js" in 5.142 seconds.Figwheel: Starting CSS Watcher for paths ["resources/public/css"]Figwheel: Starting nREPL server on port: 7002niluser&gt; (cljs-repl)Launching ClojureScript REPL for build: patient-appFigwheel Controls: (stop-autobuild) ;; stops Figwheel autobuilder (start-autobuild id ...) ;; starts autobuilder focused on optional ids (switch-to-build id ...) ;; switches autobuilder to different build (reset-autobuild) ;; stops, cleans, and starts autobuilder (reload-config) ;; reloads build config and resets autobuild (build-once id ...) ;; builds source one time (clean-builds id ..) ;; deletes compiled cljs target files (print-config id ...) ;; prints out build configurations (fig-status) ;; displays current state of system (figwheel.client/set-autoload false) ;; will turn autoloading off (figwheel.client/set-repl-pprint false) ;; will turn pretty printing off Switch REPL build focus: :cljs/quit ;; allows you to switch REPL to another build Docs: (doc function-name-here) Exit: :cljs/quit Results: Stored in vars *1, *2, *3, *e holds last exception objectPrompt will show when Figwheel connects to your applicationTo quit, type: :cljs/quitnil cljs.user&gt; (fig-status) cljs.user&gt; (fig-status) Figwheel System Status----------------------------------------------------Watching builds: [patient-app]Client Connections patient-app: 1 connection----------------------------------------------------nilcljs.user&gt; (build-once doctor-app)Figwheel: Building once - doctor-appCompiling build :doctor-app to "target/cljsbuild/public/doctorjs/app.js" from ["src/cljs/doctor" "src/cljc" "env/dev/cljs/doctor"]...Successfully compiled build :doctor-app to "target/cljsbuild/public/doctorjs/app.js" in 14.038 seconds.nilcljs.user&gt; (fig-status) Figwheel System Status----------------------------------------------------Watching builds: [patient-app]Client Connections patient-app: 0 connections doctor-app: 1 connection----------------------------------------------------nilcljs.user&gt; ç”¨æµè§ˆå™¨é“¾æŽ¥åŽå¯ä»¥åœ¨replé‡ŒæŸ¥çœ‹çŠ¶æ€1(fig-status) è¿˜æœ‰å…¶ä»–æ“ä½œï¼ŒæŽ§åˆ¶å°æœ‰æç¤º1234567891011121314151617181920user&gt; (cljs-repl)Launching ClojureScript REPL for build: devFigwheel Controls: (stop-autobuild) ;; stops Figwheel autobuilder (start-autobuild [id ...]) ;; starts autobuilder focused on optional ids (switch-to-build id ...) ;; switches autobuilder to different build (reset-autobuild) ;; stops, cleans, and starts autobuilder (reload-config) ;; reloads build config and resets autobuild (build-once [id ...]) ;; builds source one time (clean-builds [id ..]) ;; deletes compiled cljs target files (print-config [id ...]) ;; prints out build configurations (fig-status) ;; displays current state of system Switch REPL build focus: :cljs/quit ;; allows you to switch REPL to another build Docs: (doc function-name-here) Exit: Control+C or :cljs/quit Results: Stored in vars *1, *2, *3, *e holds last exception objectPrompt will show when Figwheel connects to your applicationTo quit, type: :cljs/quitcljs.user&gt;]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>cljs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkins + statistics å®žçŽ°ä»£ç ç»Ÿè®¡]]></title>
    <url>%2F2019%2F08%2F26%2Fjenkins%20%2B%20statistics%20%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E7%BB%9F%E8%AE%A1%2F</url>
    <content type="text"><![CDATA[git çš„statisticsç»Ÿè®¡åˆ†é¡µï¼Œå¾…é¡µé¢ ç®€ä¹¦åœ°å€ä¸€ä¸ªä¸é”™çš„ä»£ç ç»Ÿè®¡æ’ä»¶statistics å®‰è£…statisticséœ€è¦å…ˆåœ¨æ”¶é›†ä»£ç çš„æœåŠ¡å™¨ä¸Šæ­å»ºstatisticsï¼Œå…·ä½“æ­¥éª¤ä¸Šé¢é“¾æŽ¥æœ‰ã€‚æˆ‘æ˜¯centosç³»ç»Ÿï¼Œå› æ­¤åªéœ€ä¸€å¥å‘½ä»¤ï¼š1yum install gitstats jenkinsé…ç½®12345#æ‰§è¡Œè„šæœ¬echo &quot;git stats start&quot;/opt/auto-deploy-scripts/code_statistics.sh questionnaire masterecho &quot;git stats end&quot;echo &quot;review address:http://10.138.46.76:8888/questionnaire/&quot; æ”¶é›†è„šæœ¬code_statistics.sh1234567891011121314151617181920212223242526272829303132333435[root@1169CKT questionnaire]# vi /opt/auto-deploy-scripts/code_statistics.sh#!/bin/bashname=$1branch=$2if [ name == &quot;&quot; ] ;then echo &quot;project name is null&quot; exit 5else if [ branch == &quot;&quot; ] ;then branch = master fi echo &quot;Deploy $&#123;branch&#125; of $&#123;name&#125; project !&quot; cd /opt/chuangke/gitstats/projects/$&#123;name&#125;/ git pull git checkout $&#123;branch&#125; cd /opt/chuangke/gitstats/gitstats/ rm -rf /opt/chuangke/gitstats/result/$&#123;name&#125;/* ./gitstats /opt/chuangke/gitstats/projects/$&#123;name&#125; /opt/chuangke/gitstats/result/$&#123;name&#125;/ echo &quot;Deploy success!&quot;fi å…³äºŽè„šæœ¬çš„ä¸€ç‚¹è§£é‡Š ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯é¡¹ç›®åï¼Œç¬¬äºŒä¸ªæ˜¯åˆ†æ”¯å /opt/chuangke/gitstats/projects/${name}/ç›®å½•æ˜¯$nameé¡¹ç›®ä»Žgitåº“pullä¸‹æ¥çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¦ç»Ÿè®¡çš„ç›®æ ‡é¡¹ç›®ã€‚ /opt/chuangke/gitstats/result/${name}/ç›®å½•æ˜¯$nameé¡¹ç›®ç»Ÿè®¡å®Œä»¥åŽç”Ÿæˆçš„é™æ€æ–‡ä»¶ç›®å½•ï¼Œä¹Ÿæ˜¯nginxè¦è®¿é—®çš„ç›®å½•ã€‚ gitstatsé¡¹ç›®çš„ç›®å½•ä¸‹æ‰§è¡Œgitstatsè„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„é¡¹ç›®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç»Ÿè®¡æ–‡ä»¶å­˜æ”¾çš„ç›®å½• nginx é…ç½®12345678910111213141516171819202122232425262728293031323334353637server &#123; listen 8888; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; #location / &#123; # root html; # index index.html index.htm; #&#125; index index.html index.htm; client_max_body_size 100m; location /questionnaire &#123; alias /opt/chuangke/gitstats/result/questionnaire; &#125; location /portal &#123; alias /opt/chuangke/gitstats/result/Portal; &#125; location /portalmanage &#123; alias /opt/chuangke/gitstats/result/portalmanage; &#125; error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125;&#125; æ¥ä¸ªæˆªå›¾ æ³¨æ„é…ç½®çš„nginxè¦èƒ½åœ¨æµè§ˆå™¨è®¿é—®ï¼Œéœ€è¦ä¿è¯centosçš„é˜²ç«å¢™é…ç½®å“Ÿã€‚12345678910111213141516å¼€å¯ç«¯å£[root@centos7 ~]# firewall-cmd --zone=public --add-port=80/tcp --permanentæŸ¥è¯¢ç«¯å£å·80 æ˜¯å¦å¼€å¯ï¼š[root@centos7 ~]# firewall-cmd --query-port=80/tcpé‡å¯é˜²ç«å¢™ï¼š[root@centos7 ~]# firewall-cmd --reloadæŸ¥è¯¢æœ‰å“ªäº›ç«¯å£æ˜¯å¼€å¯çš„:[root@centos7 ~]# firewall-cmd --list-port]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springboot ä¹‹ åˆ©ç”¨logbackå‘é€å¼‚å¸¸è­¦å‘Šé‚®ä»¶]]></title>
    <url>%2F2019%2F08%2F24%2FSpringboot%20%E4%B9%8B%20%E5%88%A9%E7%94%A8logback%E5%8F%91%E9%80%81%E5%BC%82%E5%B8%B8%E8%AD%A6%E5%91%8A%E9%82%AE%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[åˆ©ç”¨logbackè‡ªåŠ¨å°†å¼‚å¸¸é‚®ä»¶å‘é€åˆ°è¿ç»´é‚®ç®±é‡Œã€‚ ç®€ä¹¦åœ°å€ logbackä½œä¸ºé»˜è®¤çš„æ—¥å¿—å®žçŽ°åœ¨springbooté¡¹ç›®é‡Œå¾ˆå¤šï¼Œå°¤å…¶æ˜¯æœ‰äº†lombokã€‚ logæ‰“åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œå¹¶ä¸”åˆ†sqlã€infoã€errorè¿™äº›éƒ½å¤ªeasyï¼ŒéšåŽæˆ‘ä¼šé™„ä¸Šæˆ‘çš„é…ç½®ã€‚ é‚£ä¹ˆæ€Žä¹ˆç”¨è¿™ä¸œè¥¿å°†å¼‚å¸¸é‚®ä»¶å‘é€ç»™è¿ç»´äººå‘˜å‘¢ï¼Ÿ propertiesé…ç½®123456789logback.logdir=/opt/chuangke/log/pre/apilogback.appname=mobileofficespring.mail.host=smtp.exmail.qq.comspring.mail.username=mailtest@3vyd.comspring.mail.password=xxxspring.mail.default-encoding=UTF-8spring.mail.error.subject=[ERROR] in project namespring.mail.error.to=marvin.ma@3vyd.com,303764416@qq.com å¤šäººæ—¶ï¼Œé‚®ç®±ä¹‹é—´ç”¨è‹±æ–‡é€—å·åˆ†éš” logbackæ–‡ä»¶è·Ÿå‘é€é‚®ä»¶ç›¸å…³çš„æ—¶è¿™å‡ å¥123456789101112131415161718192021222324252627282930313233 &lt;!-- é‚®ä»¶é…ç½® --&gt; &lt;springProperty scope="context" name="smtpHost" source="spring.mail.host" /&gt; &lt;springProperty scope="context" name="username" source="spring.mail.username" /&gt; &lt;springProperty scope="context" name="password" source="spring.mail.password" /&gt; &lt;springProperty scope="context" name="mailSubject" source="spring.mail.error.subject" /&gt; &lt;springProperty scope="context" name="mailTo" source="spring.mail.error.to" /&gt; &lt;appender name="MAIL" class="ch.qos.logback.classic.net.SMTPAppender"&gt; &lt;smtpHost&gt;$&#123;smtpHost&#125;&lt;/smtpHost&gt; &lt;smtpPort&gt;25&lt;/smtpPort&gt; &lt;username&gt;$&#123;username&#125;&lt;/username&gt; &lt;password&gt;$&#123;password&#125;&lt;/password&gt; &lt;SSL&gt;false&lt;/SSL&gt; &lt;asynchronousSending&gt;true&lt;/asynchronousSending&gt; &lt;to&gt;$&#123;mailTo&#125;&lt;/to&gt; &lt;from&gt;$&#123;username&#125;&lt;/from&gt; &lt;subject&gt;$&#123;mailSubject&#125;: %logger&#123;0&#125; &lt;/subject&gt; &lt;charsetEncoding&gt;UTF-8&lt;/charsetEncoding&gt; &lt;cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTracker"&gt; &lt;!-- æ¯ä¸ªç”µå­é‚®ä»¶åªå‘é€ä¸€ä¸ªæ—¥å¿—æ¡ç›® --&gt; &lt;bufferSize&gt;1&lt;/bufferSize&gt; &lt;/cyclicBufferTracker&gt; &lt;layout class="ch.qos.logback.classic.html.HTMLLayout"/&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;/filter&gt; &lt;/appender&gt;&lt;logger name="com.hczt" level="INFO" additivity="false"&gt; &lt;appender-ref ref="fileInfoLog" /&gt; &lt;appender-ref ref="fileErrorLog" /&gt; &lt;appender-ref ref="MAIL"/&gt;&lt;/logger&gt; åœ¨å“ªä¸ªçº§åˆ«æˆ–è€…åŒ…ä¸Šéœ€è¦å°†å¼‚å¸¸å‘é€é‚®ä»¶ï¼Œå°±appenderä¸ŠMAILå°±å¯ä»¥äº†ã€‚ å®Œæ•´çš„logback-spring.xmlæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145&lt;configuration&gt; &lt;!-- application.properties ä¼ é€’å‚æ•°ï¼Œä¸èƒ½ä½¿ç”¨logbackè‡ªå¸¦çš„&lt;property&gt;æ ‡ç­¾ --&gt; &lt;springProperty scope="context" name="appname" source="logback.appname" /&gt; &lt;springProperty scope="context" name="logdir" source="logback.logdir" /&gt; &lt;contextName&gt;$&#123;appname&#125;&lt;/contextName&gt; &lt;!-- é‚®ä»¶é…ç½® --&gt; &lt;springProperty scope="context" name="smtpHost" source="spring.mail.host" /&gt; &lt;springProperty scope="context" name="username" source="spring.mail.username" /&gt; &lt;springProperty scope="context" name="password" source="spring.mail.password" /&gt; &lt;springProperty scope="context" name="mailSubject" source="spring.mail.error.subject" /&gt; &lt;springProperty scope="context" name="mailTo" source="spring.mail.error.to" /&gt; &lt;appender name="MAIL" class="ch.qos.logback.classic.net.SMTPAppender"&gt; &lt;smtpHost&gt;$&#123;smtpHost&#125;&lt;/smtpHost&gt; &lt;smtpPort&gt;25&lt;/smtpPort&gt; &lt;username&gt;$&#123;username&#125;&lt;/username&gt; &lt;password&gt;$&#123;password&#125;&lt;/password&gt; &lt;SSL&gt;false&lt;/SSL&gt; &lt;asynchronousSending&gt;true&lt;/asynchronousSending&gt; &lt;to&gt;$&#123;mailTo&#125;&lt;/to&gt; &lt;from&gt;$&#123;username&#125;&lt;/from&gt; &lt;subject&gt;$&#123;mailSubject&#125;: %logger&#123;0&#125; &lt;/subject&gt; &lt;charsetEncoding&gt;UTF-8&lt;/charsetEncoding&gt; &lt;cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTracker"&gt; &lt;!-- æ¯ä¸ªç”µå­é‚®ä»¶åªå‘é€ä¸€ä¸ªæ—¥å¿—æ¡ç›® --&gt; &lt;bufferSize&gt;1&lt;/bufferSize&gt; &lt;/cyclicBufferTracker&gt; &lt;layout class="ch.qos.logback.classic.html.HTMLLayout"/&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- å¼€å‘çŽ¯å¢ƒ å…¨éƒ¨è¾“å‡ºåˆ°æŽ§åˆ¶å°--&gt; &lt;springProfile name="dev"&gt; &lt;!-- è¾“å‡ºåˆ°æŽ§åˆ¶å° --&gt; &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt; &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;!-- æŒ‡å®šæœ€åŸºç¡€çš„æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt; &lt;root level="INFO"&gt; &lt;appender-ref ref="STDOUT"/&gt; &lt;/root&gt; &lt;/springProfile&gt; &lt;!-- æµ‹è¯•çŽ¯å¢ƒ+å‡†ç”Ÿäº§çŽ¯å¢ƒ+ç”Ÿäº§çŽ¯å¢ƒ è¾“å‡ºåˆ°æ–‡ä»¶ --&gt; &lt;springProfile name="test,pre,prod"&gt; &lt;!-- è¾“å‡ºåˆ°æ–‡ä»¶-infoçº§åˆ« --&gt; &lt;appender name="fileInfoLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!-- å¦‚æžœåªæ˜¯æƒ³è¦Infoçº§åˆ«çš„æ—¥å¿—ï¼Œåªæ˜¯è¿‡æ»¤infoè¿˜æ˜¯ä¼šè¾“å‡ºErroræ—¥å¿—ï¼Œå› ä¸ºErrorçš„çº§åˆ«é«˜ï¼Œä½¿ç”¨filterï¼Œå¯ä»¥é¿å…è¾“å‡ºErroræ—¥å¿— --&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;!--è¿‡æ»¤ Error--&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;!--åŒ¹é…åˆ°å°±ç¦æ­¢--&gt; &lt;onMatch&gt;DENY&lt;/onMatch&gt; &lt;!--æ²¡æœ‰åŒ¹é…åˆ°å°±å…è®¸--&gt; &lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt; &lt;/filter&gt; &lt;!-- æ—¥å¿—åç§°ï¼Œå¦‚æžœæ²¡æœ‰Fileå±žæ€§ï¼Œé‚£ä¹ˆåªä¼šä½¿ç”¨FileNamePatternçš„æ–‡ä»¶è·¯å¾„è§„åˆ™ å¦‚æžœåŒæ—¶æœ‰&lt;File&gt;å’Œ&lt;FileNamePattern&gt;ï¼Œé‚£ä¹ˆå½“å¤©æ—¥å¿—æ˜¯&lt;File&gt;ï¼Œæ˜Žå¤©ä¼šè‡ªåŠ¨æŠŠä»Šå¤©çš„æ—¥å¿—æ”¹åä¸ºä»Šå¤©çš„æ—¥æœŸ å³ï¼Œ&lt;File&gt;çš„æ—¥å¿—éƒ½æ˜¯å½“å¤©çš„ --&gt; &lt;File&gt;$&#123;logdir&#125;/info.$&#123;appname&#125;.log&lt;/File&gt; &lt;!-- æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰ç…§æ—¶é—´æ»šåŠ¨ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!-- æ–‡ä»¶è·¯å¾„ï¼Œå®šä¹‰äº†æ—¥å¿—çš„åˆ‡åˆ†æ–¹å¼ æŠŠæ¯ä¸€å¤©çš„æ—¥å¿—å½’æ¡£åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä»¥é˜²æ­¢æ—¥å¿—å¡«æ»¡æ•´ä¸ªç£ç›˜ç©ºé—´ --&gt; &lt;FileNamePattern&gt;$&#123;logdir&#125;/info.$&#123;appname&#125;.%d&#123;yyyy-MM-dd&#125;.log&lt;/FileNamePattern&gt; &lt;/rollingPolicy&gt; &lt;!-- æ—¥å¿—è¾“å‡ºç¼–ç æ ¼å¼åŒ– --&gt; &lt;encoder&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level %logger Line:%-3L [%X&#123;requestId&#125;] - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- è¾“å‡ºåˆ°æ–‡ä»¶-error --&gt; &lt;appender name="fileErrorLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!--å¦‚æžœåªæ˜¯æƒ³è¦ Error çº§åˆ«çš„æ—¥å¿—ï¼Œé‚£ä¹ˆéœ€è¦è¿‡æ»¤ä¸€ä¸‹ï¼Œé»˜è®¤æ˜¯ info çº§åˆ«çš„ï¼ŒThresholdFilter--&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;Error&lt;/level&gt; &lt;/filter&gt; &lt;!--æ—¥å¿—åç§°ï¼Œå¦‚æžœæ²¡æœ‰File å±žæ€§ï¼Œé‚£ä¹ˆåªä¼šä½¿ç”¨FileNamePatternçš„æ–‡ä»¶è·¯å¾„è§„åˆ™ å¦‚æžœåŒæ—¶æœ‰&lt;File&gt;å’Œ&lt;FileNamePattern&gt;ï¼Œé‚£ä¹ˆå½“å¤©æ—¥å¿—æ˜¯&lt;File&gt;ï¼Œæ˜Žå¤©ä¼šè‡ªåŠ¨æŠŠä»Šå¤©çš„æ—¥å¿—æ”¹åä¸ºä»Šå¤©çš„æ—¥æœŸã€‚ å³ï¼Œ&lt;File&gt; çš„æ—¥å¿—éƒ½æ˜¯å½“å¤©çš„ã€‚ --&gt; &lt;File&gt;$&#123;logdir&#125;/error.$&#123;appname&#125;.log&lt;/File&gt; &lt;!--æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰ç…§æ—¶é—´æ»šåŠ¨ TimeBasedRollingPolicy--&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--æ–‡ä»¶è·¯å¾„,å®šä¹‰äº†æ—¥å¿—çš„åˆ‡åˆ†æ–¹å¼â€”â€”æŠŠæ¯ä¸€å¤©çš„æ—¥å¿—å½’æ¡£åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­,ä»¥é˜²æ­¢æ—¥å¿—å¡«æ»¡æ•´ä¸ªç£ç›˜ç©ºé—´--&gt; &lt;FileNamePattern&gt;$&#123;logdir&#125;/error.$&#123;appname&#125;.%d&#123;yyyy-MM-dd&#125;.log&lt;/FileNamePattern&gt; &lt;/rollingPolicy&gt; &lt;!--æ—¥å¿—è¾“å‡ºç¼–ç æ ¼å¼åŒ–--&gt; &lt;encoder&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level %logger Line:%-3L [%X&#123;requestId&#125;] - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name="sqlLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;File&gt;$&#123;logdir&#125;/sql.$&#123;appname&#125;.log&lt;/File&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;FileNamePattern&gt;$&#123;logdir&#125;/sql.$&#123;appname&#125;.%d&#123;yyyy-MM-dd&#125;.log&lt;/FileNamePattern&gt; &lt;!--åªä¿ç•™æœ€è¿‘7å¤©çš„æ—¥å¿—--&gt; &lt;maxHistory&gt;7&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;!--æ—¥å¿—è¾“å‡ºç¼–ç æ ¼å¼åŒ–--&gt; &lt;encoder&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level %logger Line:%-3L [%X&#123;requestId&#125;] - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;logger name="com.hczt" level="INFO" additivity="false"&gt; &lt;appender-ref ref="fileInfoLog" /&gt; &lt;appender-ref ref="fileErrorLog" /&gt; &lt;appender-ref ref="MAIL"/&gt; &lt;/logger&gt; &lt;logger name="com.haier" level="INFO" additivity="false"&gt; &lt;appender-ref ref="fileInfoLog" /&gt; &lt;appender-ref ref="fileErrorLog" /&gt; &lt;appender-ref ref="MAIL"/&gt; &lt;/logger&gt; &lt;logger name="org" level="ERROR" additivity="false"&gt; &lt;appender-ref ref="fileErrorLog" /&gt; &lt;appender-ref ref="MAIL"/&gt; &lt;/logger&gt; &lt;logger name="p6spy" level="INFO" additivity="false"&gt; &lt;appender-ref ref="sqlLog" /&gt; &lt;/logger&gt; &lt;root level="ERROR"&gt; &lt;appender-ref ref="fileErrorLog" /&gt; &lt;appender-ref ref="MAIL"/&gt; &lt;/root&gt; &lt;/springProfile&gt;&lt;/configuration&gt; é™„ä¸Šæˆªå›¾ å®Œç¾Žï¼ï¼]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springboot ä¹‹ é…ç½®æ–‡ä»¶å±žæ€§åŠ å¯†]]></title>
    <url>%2F2019%2F08%2F22%2FSpringboot%20%E4%B9%8B%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E5%8A%A0%E5%AF%86%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨Jasyptå¯¹springbooté¡¹ç›®çš„é…ç½®å±žæ€§åŠ å¯†ã€‚ç®€ä¹¦åœ°å€ å†™è¿™ç¯‡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†åˆ›æ–°ï¼Œè€Œæ˜¯å¤‡å¿˜ï¼Œæœ€è¿‘å­¦ä¹ clojureï¼ŒjavaåŸºæœ¬ä¸Šå·²ç»æ”¾ä¸‹äº†ï¼Œä½†æ˜¯æ›¾ä»Šç”¨è¿‡çš„ä¸œè¥¿å¦‚æžœä¸è®°å½•ä¸€ä¸‹ï¼Œä»¥åŽç”¨èµ·æ¥ä¼°è®¡è¿žæŸ¥ä»€ä¹ˆå…³é”®å­—éƒ½ä¸çŸ¥é“äº†ï¼Œå› æ­¤åœ¨ä¸»é¡µä¸Šåšä¸ªç¬”è®°ã€‚ åŽŸæ¥æˆ‘ä»¬å†™çš„springbootçš„é…ç½®æ–‡ä»¶å¤§æ¦‚æ˜¯è¿™æ ·çš„12345spring: datasource: url: jdbc:mysql://localhost:3306/test?useUnicode=true&amp;useSSL=false username: root password: 123456 æ€Žä¹ˆçœ‹ä¹Ÿæ˜¯èµ¤è£¸è£¸çš„ï¼Œå¤§æ¦‚ä½ ä¹Ÿæƒ³è¿‡è¦æ˜¯èƒ½åŠ å¯†å°±å¥½äº†ï¼Œå¦‚æžœåªæ˜¯æƒ³æƒ³çš„è¯ï¼Œè‚¯å®šä¸ä¼šè‡ªå·±åŠ å¯†ï¼Œè¿™é‡Œå°±ä»‹ç»ä¸ªéžå¸¸æ–¹ä¾¿æ˜“ç”¨çš„åŠ å¯†å·¥å…·jasyptã€‚ å¸¸è§„ä½¿ç”¨åœ¨springbootä¸­å¼•å…¥ä¾èµ–12345 &lt;dependency&gt; &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt; &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.1.1&lt;/version&gt;&lt;/dependency&gt; ä¿®æ”¹åŽçš„é…ç½®æ–‡ä»¶123456789101112131415spring: datasource: url: jdbc:mysql://localhost:3306/test?useUnicode=true&amp;zeroDateTimeBehavior=convertToNull&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&amp;tinyInt1isBit=false # å¯¹åº”ç”¨æˆ·å root ï¼Œå¯†ç  123456 username: ENC[KHRM9dKY8KykzzYbt8rRZQ==] password: ENC[RWmQMxlcukotJAb36PrKSA==]jasypt: encryptor: # ä»»æ„çš„éšæœºå­—ç¬¦ä¸²å‡å¯ password: SBPstLlrFzXW01Okb62R95qvpj4J83Dn property: # è‡ªå®šä¹‰å±žæ€§è§„åˆ™ï¼Œé»˜è®¤å‰ç¼€æ˜¯â€œENC(â€ï¼ŒåŽç¼€ä¸ºâ€œ)â€ prefix: &quot;ENC[&quot; suffix: &quot;]&quot; è¿™é‡ŒåªåŠ å¯†äº†ç”¨æˆ·åå’Œå¯†ç ï¼Œå…¶å®žæ‰€æœ‰å±žæ€§ï¼ŒæŠ¥è¿‡jdbcçš„urlä¹Ÿæ˜¯å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼åŠ å¯†çš„ã€‚ç•™æ„åˆ°ä¸Šé¢è¿™æ®µé…ç½®çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ ENC[xxx] è¿™ç§æ ¼å¼çš„ï¼Œå…¶ä¸­ ENC[] æ˜¯è‡ªå®šä¹‰é…ç½®çš„ï¼Œè¿™ä¹Ÿæ˜¯ Jasypt èƒ½æ­£å¸¸è¯†åˆ«å¾…è§£å¯†æ•°æ®çš„è§„åˆ™ï¼Œé‚£å…¶ä¸­çš„åŠ å¯†ä¸²åˆæ˜¯ä»Žå“ªæ¥çš„å‘¢ï¼Ÿå½“ç„¶æ˜¯è¿ç®—å‡ºæ¥çš„ã€‚æœ€ç®€å•çš„é…ç½®ï¼Œå¼€å‘è€…åªéœ€è¦å†è¡¥å……å®Œ jasypt.encryptor.password=xxx å±žæ€§å³å¯ï¼ˆåŒä¸Šï¼Œè¿˜æ”¯æŒä½¿ç”¨ DERã€PEM è¿™ç§è¯ä¹¦çš„ private/public keys åŠ è§£å¯†æ–¹å¼ï¼‰ï¼Œå…·ä½“çš„ç”Ÿæˆä»£ç åœ¨ä¸‹æ–¹ï¼š 1234567891011121314151617181920212223242526272829@Slf4j@SpringBootApplication@EnableEncryptablePropertiespublic class JasyptSpringBootApplication &#123; public static void main(String[] args) &#123; ConfigurableApplicationContext context = SpringApplication.run(JasyptSpringBootApplication.class, args); JasyptSpringBootApplication application = context.getBean(JasyptSpringBootApplication.class); // è¿™é‡Œå¯ä»¥å°†æ˜Žæ–‡(ç”¨æˆ·åã€å¯†ç )è½¬æ¢æˆç›¸åº”å¯†æ–‡ application.jasypt("root"); application.jasypt("123456"); // ä¸è¿‡ç¨‹åºæœ€åŽè¿˜æ˜¯é€šè¿‡æ˜Žæ–‡ä¿¡æ¯è¿›è¡Œæ•°æ®åº“è¿žæŽ¥ HikariDataSource hikariDataSource = (HikariDataSource) context.getBean(DataSource.class); log.info("DB username: &#123;&#125; , password: &#123;&#125;", hikariDataSource.getUsername(), hikariDataSource.getUsername()); &#125; @Resource private StringEncryptor stringEncryptor; public void jasypt(String text) &#123; // å³ä½¿æ˜¯ç›¸åŒæ˜Žæ–‡ï¼Œä½†è¿™é‡Œæ¯æ¬¡ç”Ÿæˆçš„éƒ½æ˜¯ä¸åŒçš„å¯†æ–‡ String encryptedText = stringEncryptor.encrypt(text.trim()); String decryptedText = stringEncryptor.decrypt(encryptedText); log.info("ORIGINAL: &#123;&#125; ; ENCRYPTED: &#123;&#125; ; DECRYPTED: &#123;&#125;", text, encryptedText, decryptedText); &#125;&#125; åœ¨å¼€å‘çŽ¯å¢ƒè¦åˆ‡æ¢jdbcï¼Œæˆ–è€…çœ‹çœ‹å¯†ç åˆ°åº•æ˜¯å•¥ï¼Œä¸ºå•¥æŠ¥jdbcé“¾æŽ¥é”™è¯¯æ—¶ï¼Œå¯ä»¥ç”¨è¿™ä¸ª12345678910111213141516171819202122232425262728293031323334353637import lombok.extern.slf4j.Slf4j;import org.jasypt.encryption.StringEncryptor;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import javax.annotation.Resource;import java.util.List;@RunWith(SpringRunner.class)@SpringBootTest(classes = MobileOfficeApplication.class)@Slf4jpublic class MobileOfficeApplicationTests &#123; //@Test public void te()&#123; System.out.println(userService.encodePwd()); &#125; @Autowired private StringEncryptor stringEncryptor; @Test public void contextLoads() &#123; &#125; @Test public void testEncrypt() &#123; System.out.println(&quot;=====================================&quot;); System.out.println(&quot;key1:&quot; + stringEncryptor.encrypt(&quot;jdbc:p6spy:mysql://127.0.0.1:3306/chuangke?characterEncoding=utf-8&amp;useSSL=false&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Hongkong&amp;autoReconnect=true\n&quot;)); System.out.println(&quot;key2:&quot; + stringEncryptor.encrypt(&quot;root&quot;)); System.out.println(&quot;key3:&quot; + stringEncryptor.encrypt(&quot;root&quot;)); System.out.println(&quot;=====================================&quot;); &#125;&#125; è¿›é˜¶ä¸Šé¢çš„ä¾‹å­æ˜¯å°†passwordè®¾ç½®åœ¨ä¸Žå¯†æ–‡ä¸€èµ·çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿™æ ·æ–¹ä¾¿æ˜¯æ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰å¯†ç ï¼Œæœ‰å¯†æ–‡ï¼ŒçŸ¥é“åŠ å¯†ç®—æ³•ï¼Œè°ä¹Ÿå¯ä»¥è§£å¯†å‘€ï¼ˆå®‰å…¨æ˜¯ç›¸å¯¹çš„ï¼Œå…¶å®žè¿™ä¸ªå·²ç»å¾ˆä¸é”™äº†ï¼‰ï¼Œé‚£æœ‰ä¹ˆæœ‰æ›´å®‰å…¨çš„æ–¹å¼å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼ï¼ï¼ï¼æœ‰ä¸¤ç§åŠžæ³•: éƒ¨ç½²æ—¶è®¾ç½®passwordä¸ºäº†é˜²æ­¢salt(ç›)æ³„éœ²,åè§£å‡ºå¯†ç .å¯ä»¥åœ¨é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™ä½¿ç”¨å‘½ä»¤ä¼ å…¥salt(ç›)å€¼ 1java -jar -Djasypt.encryptor.password=G0CvDz7oJn6 xxx.jar å°†passwordé…ç½®åˆ°æœåŠ¡å™¨çš„çŽ¯å¢ƒå˜é‡é‡Œ 1234567891011# æ‰“å¼€/etc/profileæ–‡ä»¶vim /etc/profile#æ–‡ä»¶æœ«å°¾æ’å…¥export JASYPT_PASSWORD = G0CvDz7oJn6#ç¼–è¯‘ source /etc/profile#è¿è¡Œ java -jar -Djasypt.encryptor.password=$&#123;JASYPT_PASSWORD&#125; xxx.jar å‚è€ƒè¿˜å°†å¯†ç æ˜Žæ–‡å†™åœ¨é…ç½®æ–‡ä»¶ï¼Ÿè¯•è¯• Jasypt Spring Boot]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¿®æ”¹gitlabï¼Œgitosis-adminçš„é»˜è®¤ç«¯å£22åŽ]]></title>
    <url>%2F2019%2F08%2F19%2F%E4%BF%AE%E6%94%B9gitlab%EF%BC%8Cgitosis-admin%E7%9A%84%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A322%E5%90%8E%2F</url>
    <content type="text"><![CDATA[æœ¬åœ°é…ç½®è¿œç«¯serverçš„ç«¯å£ä¾›sshä½¿ç”¨ ç®€ä¹¦åœ°å€ ä»¥gitosis-adminä½œä¸ºgitä»£ç åº“ç®¡ç†å·¥å…·åŽï¼Œä¿®æ”¹äº†é»˜è®¤çš„22ç«¯å£ï¼Œæ­¤æ—¶sshçš„è¿žæŽ¥è‡ªç„¶æ‹¿ä¸åˆ°ä»£ç ï¼Œæ€Žä¹ˆåŠžå‘¢ï¼Ÿ åœ¨æœ¬åœ°.sshçš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªconfigæ–‡ä»¶ï¼Œæ²¡æœ‰æ‰©å±•åå“¦ã€‚ å†…å®¹å¦‚ä¸‹:1234567host 106.14.1.1hostname 106.14.1.1port 2093host git.server.comhostname git.server.comport 2093 è¿™å°±æ˜¯è¿žæŽ¥åˆ°hostnameçš„2093ç«¯å£çš„æ„æ€ã€‚ æ·»åŠ äº†æœ¬é…ç½®å°±å¯ä»¥è®¿é—®gitæœåŠ¡å™¨äº†ã€‚]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨serveoä¸€ç§’é’Ÿå®žçŽ°å†…ç½‘ç©¿é€]]></title>
    <url>%2F2019%2F08%2F09%2F%E4%BD%BF%E7%94%A8serveo%E4%B8%80%E7%A7%92%E9%92%9F%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%2F</url>
    <content type="text"><![CDATA[ä¸€ç‚¹ä¸å¤¸å¼ ï¼Œ1ç§’é’Ÿï¼ï¼ï¼ï¼1ssh -R 80:localhost:3000 serveo.net ç®€ä¹¦åœ°å€åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´ç”¨ngrokï¼Œè‡ªå·±ä¹Ÿæ€»ç»“è¿‡ä½¿ç”¨ngrokä¸€åˆ†é’Ÿå®žçŽ°å†…ç½‘ç©¿é€,ç®€å•çš„å°†æœ¬åœ°æœåŠ¡æ˜ å°„æˆå…¬ç½‘è®¿é—®çš„åœ°å€ï¼Œåæ­£æˆ‘æ˜¯ç”¨ä¸äº†1åˆ†é’Ÿã€‚ ä»Šå¤©å¶ç„¶çœ‹åˆ°ä¸€ç¯‡æ–‡ç« å®Œè´¥ngrok?ä¸€é”®å¼€å¯å†…ç½‘ç©¿é€ç¥žå™¨serveoï¼Œè¿™æ¬¡åˆé¢ è¦†äº†æˆ‘çš„è®¤çŸ¥ï¼ŒäºŽæ˜¯å†³å®šèŠ±1ç§’é’Ÿä½“éªŒä¸‹ã€‚ çœŸçš„æ˜¯1ç§’é’Ÿå“¦ï¼Œçœ‹çœ‹å‘½ä»¤ï¼š12345678Last login: Fri Aug 9 08:28:43 on consoleâžœ ~ ssh -R 80:localhost:3000 serveo.netThe authenticity of host &apos;serveo.net (159.89.214.31)&apos; can&apos;t be established.RSA key fingerprint is SHA256:07jcXlJ4SkBnyTmaVnmTpXuBiRx2+Q2adxbttO9gt0M.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;serveo.net,159.89.214.31&apos; (RSA) to the list of known hosts.Forwarding HTTP traffic from https://vilicus.serveo.netPress g to start a GUI session and ctrl-c to quit. è®¿é—®è¯•è¯•ï¼š æžœçœŸå…­å…­å…­~~~~ ä»¥åŽå°±ç”¨è¿™ä¸ªäº†ã€‚ å…¶ä»–é«˜é˜¶ä½¿ç”¨ç”¨çš„æ—¶å€™ä¸Šå®˜ç½‘æŸ¥è¯¢ï¼Œå¦‚æžœæˆ‘ç”¨åˆ°äº†æˆ‘å†å®Œå–„è¿™ç¯‡ã€‚]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>tools</tag>
        <tag>server</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojure web(luminus)æŽ¥å£å¼€å‘]]></title>
    <url>%2F2019%2F07%2F31%2Fclojure%20web(luminus)%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[clojureä¸­è°ƒç”¨java,è§£å†³jaråŒ…ä¾èµ–å†²çª ç®€ä¹¦åœ°å€ é¡¹ç›®æ¡†æž¶æœ¬é¡¹ç›®ä½¿ç”¨luminusåšæ¨¡æ¿ï¼Œå‚è€ƒluminus-template,æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤initå·¥ç¨‹:1lein new luminus alk-wxapi +mysql +service ç›¸å…³æ–‡æ¡£ åŽå°åŸºç¡€æ¡†æž¶luminus åŽå°sqlæ”¯æŒHugSQL åŽå°webæ¡†æž¶ å‰åŽç«¯è·¯ç”±æ¡†æž¶ å‰ç«¯çŠ¶æ€ç®¡ç†æ¡†æž¶ å‰ç«¯PCç‰ˆUIæ¡†æž¶-antizer clojure å‡½æ•°å®šä¹‰åŠdemoæŸ¥è¯¢ clojureç¼–ç¨‹é£Žæ ¼æŒ‡å— spec guide å•å…ƒæµ‹è¯• é¡¹ç›®è¿è¡Œåœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­å¯åŠ¨ç”¨leinå¯åŠ¨ä¸€ä¸ªreplï¼Œleinæ²¡æœ‰å®‰è£…çš„éœ€è¦è‡ªè¡Œç™¾åº¦ã€‚1234567891011121314âžœ ~ cd git/redcreation/alk-wxapiâžœ alk-wxapi git:(master) lein replnREPL server started on port 50529 on host 127.0.0.1 - nrepl://127.0.0.1:50529REPL-y 0.4.3, nREPL 0.6.0Clojure 1.10.0Java HotSpot(TM) 64-Bit Server VM 1.8.0_192-b12 Docs: (doc function-name-here) (find-doc &quot;part-of-name-here&quot;) Source: (source function-name-here) Javadoc: (javadoc java-object-or-class-here) Exit: Control+D or (exit) or (quit) Results: Stored in vars *1, *2, *3, an exception in *euser=&gt; ç„¶åŽåœ¨Intellij Ideaä¸­è¿œç¨‹è¿žæŽ¥ runè¿™ä¸ªé…ç½®ï¼Œç„¶åŽåœ¨ä¸‹é¢çš„replçŽ¯å¢ƒä¸­æ‰§è¡Œ(start)å³å¯åŠ¨serverã€‚ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ1ã€å¤„ç†requestå®žé™…é¡¹ç›®å¼€å‘ä¸­ç»å¸¸éœ€è¦æ‰“å°requestå†…å®¹ï¼Œè¿™éƒ¨åˆ†åœ¨springMVCä¸­ä¸€èˆ¬ç”¨aopæ¥è§£å†³ã€‚clojureä¸­æ²¡æœ‰å¯¹è±¡ï¼Œæ›´åˆ«æaopäº†ï¼Œä½†æ˜¯æ²¡æœ‰æ¡†æž¶çš„æŸç¼šï¼Œå¤„ç†èµ·requestå’Œresponseåè€Œæ›´åŠ çµæ´»ï¼Œæ˜¯ç”¨clojureçš„middlewareå¤„ç†çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªæ‰“å°å‡ºå…¥å‚çš„middlewareå¦‚ä¸‹ï¼š123456789101112131415161718(require '[clojure.tools.logging :as log])(defn log-wrap [handler] (fn [request] (if-not (:dev env) (let [request-id (java.util.UUID/randomUUID)] (log/info (str "\n================================ REQUEST START ================================" "\n request-id:" request-id "\n request-uri: " (:uri request) "\n request-method: " (:request-method request) "\n request-query: " (:query (:parameters request)) "\n request-body: " (:body (:parameters request)))) (let [res (handler request)] (log/info (str "response: " (:body res) "\n request-id:" request-id)) (log/info (str "\n================================ response END ================================")) res)) (handler request)))) å°†æ­¤swapé…ç½®åœ¨å…¨å±€è·¯ç”±ä¸­å³å¯,ä¸€èˆ¬æ˜¯æœ‰ä¸ªç»Ÿä¸€é…ç½®formatçš„middlewareçš„ï¼Œæ”¾åœ¨ä¸€èµ·å³å¯ã€‚ 2ã€åœ¨handlerä¸­ä½¿ç”¨requesté‡Œè‡ªå®šä¹‰çš„å¯¹è±¡æœ‰äº†ä¸Šé¢è¯´çš„middlewareèƒ½å¤„ç†requestï¼Œé‚£ä¹ˆå¾€requesté‡Œæ”¾ä¸ªå¯¹è±¡ï¼Œè‡ªç„¶ä¸åœ¨è¯ä¸‹ï¼Œæ¯”å¦‚è®²headeré‡Œçš„tokenè½¬æ¢æˆuserå¯¹è±¡ç½®äºŽrequestä¸­ï¼Œåœ¨åŽé¢handlerä¸­ç›´æŽ¥æ˜¯ç”¨ã€‚1234567891011(defn token-wrap [handler] (fn [request] (let [token (get-in request [:headers "token"]) user (-&gt; token str-&gt;jwt :claims)] (log/info (str "è§£æžåŽçš„userï¼š" (-&gt; token str-&gt;jwt :claims))) (log/info (str "******* the current user is " (:iss user))) (handler (assoc request :current-user (:iss user)))))) 3ã€hendlerèŽ·å–bodyï¼Œpathï¼Œqueryçš„å‚æ•°åœ¨handleå‰åŽï¼Œå¯ä»¥ç”¨(keys request)æŸ¥çœ‹requesté‡Œè‡ªå·±ä¼ å…¥çš„å‚æ•°ï¼Œé‚£ä¹ˆåœ¨handleré‡Œæ€Žä¹ˆèŽ·å–è¿™äº›å‚æ•°å‘¢,åœ¨Luminusä¸­å®šä¹‰äº†ä¸‰ç§ä¸ŽspringMVCç±»ä¼¼çš„å‚æ•°å…³é”®è¯ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š mvc request luminus å«ä¹‰ @RequestParam query-params parameters -&gt; query queryå‚æ•°ï¼ŒURLåŽé¢é—®å·çš„å‚æ•°ï¼Œæˆ–formçš„å‚æ•° @PathVariable path-params parameters -&gt; path pathå‚æ•°ï¼ŒURLä¸­/çš„å‚æ•° @RequestBody body-params parameters -&gt;body post/putæ–¹æ³•é‡Œçš„bodyå‚æ•° è¿™ä¸‰ä¸ªkeywordæ˜¯ringè‡ªèº«çš„å¤„ç†ï¼Œæ˜¯åŽŸå§‹requesté‡Œçš„å‚æ•°ï¼Œä½†æ˜¯query-paramså‚æ•°è¢«å¤„ç†æˆmapçš„keyä¸æ˜¯keywordsï¼Œæ˜¯æ™®é€šçš„stringï¼Œå¾—ç”¨(query-params â€œidâ€)è¿™æ ·æ¥å–å€¼ã€‚å› æ­¤æŽ¨èå¦‚ä¸‹ç¤ºä¾‹ä½¿ç”¨ï¼šæŽ¨èä»Žrequestçš„parametersä¸­èŽ·å–ï¼Œå…³é”®å­—åˆ†åˆ«æ˜¯queryï¼Œpathï¼Œ bodyã€‚èŽ·å–çš„ä¾‹å­ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344;;éžæŽ¨èæ–¹å¼;;apiè¿”å›žç»“æžœ: &#123;"data": "path params: &#123;:id \"1\"&#125;\n query params: &#123;\"name\" \"2\"&#125;\n body params: &#123;:message \"22\"&#125;"&#125;["/path/bad/:id" &#123;:post &#123;:summary "è·¯å¾„ä¸Šä¼ å‚--ä¸æŽ¨èæ­¤æ–¹æ³•èŽ·å–--queryå‚æ•°keyå˜æˆäº†str" :parameters &#123;:path &#123;:id int?&#125; :query &#123;:name string?&#125; :body &#123;:message string?&#125;&#125; :handler (fn [&#123;:keys [path-params query-params body-params]&#125;] &#123;:status 200 :body &#123;:data (str "path params: " path-params "\n query params: " query-params "\n body params: " body-params)&#125;&#125;)&#125;&#125;];;good handler apiè¿”å›žç»“æžœ:;&#123;; "code": 1,; "message": "æ“ä½œæˆåŠŸ",; "data": "path params: &#123;:id 1&#125;, query params: &#123;:name \"2\"&#125;, body params: &#123;:message \"22\"&#125; ";&#125;["/path/good/:id" &#123;:post &#123;:summary "è·¯å¾„ä¸Šä¼ å‚--GOOD--èŽ·å–åˆ°3ç§map" :parameters &#123;:path &#123;:id int?&#125; :query &#123;:name string?&#125; :body &#123;:message string?&#125;&#125; :handler (fn [&#123;&#123;:keys [body query path]&#125; :parameters&#125;] (ok (format "path params: %s, query params: %s, body params: %s " path query body)))&#125;&#125;];;good handler, æŽ¥å£é‡Œä¸‰ç§å‚æ•°éƒ½æœ‰ï¼Œå¹¶ä¸”æƒ³ç›´æŽ¥èŽ·å–mapä¸­keyçš„vals;; apiè¿”å›žç»“æžœ:;&#123;;"code": 1,;"message": "æ“ä½œæˆåŠŸ",;"data": "path params 'id': 1, query params 'name': 2 , body params: &#123;:message \"22\"&#125; ";&#125;["/path/good-all-params/:id" &#123;:post &#123;:summary "è·¯å¾„ä¸Šä¼ å‚--GOOD--ç›´æŽ¥å¾—åˆ°keyçš„val" :parameters &#123;:path &#123;:id int?&#125; :query &#123;:name string?&#125; :body &#123;:message string?&#125;&#125; :handler (fn [&#123;&#123;:keys [body]&#125; :parameters &#123;&#123;:keys [id]&#125; :path&#125; :parameters &#123;&#123;:keys [name]&#125; :query&#125; :parameters&#125;] (ok (format "path params 'id': %s, query params 'name': %s , body params: %s " id name body)))&#125;&#125;] åŽŸå› åˆ†æžï¼šæˆ‘ä»¬åœ¨handler.cljçš„ring/routeråŽé¢ä½¿ç”¨[reitit.ring.middleware.dev :as dev]çš„{:reitit.middleware/transform dev/print-request-diffs}æ–¹æ³•æ‰“å°å‡ºä¸­é—´ä»¶çš„å¤„ç†é€»è¾‘ï¼Œ ç»“æžœå¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373--- Middleware --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;&#125;--- Middleware :reitit.ring.middleware.parameters/parameters --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;&#125;--- Middleware :reitit.ring.middleware.muuntaja/format-negotiate --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;, +:muuntaja/request #muuntaja.core.FormatAndCharset &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, +:muuntaja/response #muuntaja.core.FormatAndCharset &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;&#125;--- Middleware :reitit.ring.middleware.muuntaja/format-response --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;, :muuntaja/request &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, :muuntaja/response &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;&#125;--- Middleware :reitit.ring.middleware.exception/exception --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;, :muuntaja/request &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, :muuntaja/response &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;&#125;--- Middleware :reitit.ring.middleware.muuntaja/format-request --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;, :muuntaja/request &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, :muuntaja/response &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, +:body-params &#123;:message &quot;22&quot;&#125;&#125;--- Middleware :reitit.ring.coercion/coerce-request --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :body-params &#123;:message &quot;22&quot;&#125;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;, :muuntaja/request &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, :muuntaja/response &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, +:parameters &#123;:body &#123;:message &quot;22&quot;&#125;, :path &#123;:id 1&#125;, :query &#123;:name &quot;2&quot;&#125;&#125;&#125;2019-06-22 11:09:16,537 [XNIO-2 task-2] INFO alk-wxapi.middleware.log-interceptor - ================================ REQUEST START ================================ request-id:8ddb3169-e72f-4b90-8811-d500c50d3057 request-uri: /api/guestbooks/path/good-all-params/1 request-method: :post request-query: &#123;:name &quot;2&quot;&#125; request-body: &#123;:message &quot;22&quot;&#125; --- Middleware --- &#123;:body #&lt;io.undertow.io.UndertowInputStream@39931c66&gt;, :body-params &#123;:message &quot;22&quot;&#125;, :character-encoding &quot;ISO-8859-1&quot;, :content-length 21, :content-type &quot;application/json&quot;, :context &quot;&quot;, :cookies &#123;&quot;JSESSIONID&quot; &#123;:value &quot;GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU&quot;&#125;, &quot;_ga&quot; &#123;:value &quot;GA1.1.521496834.1555489511&quot;&#125;, &quot;_gid&quot; &#123;:value &quot;GA1.1.947080805.1561170619&quot;&#125;&#125;, :flash nil, :form-params &#123;&#125;, :handler-type :undertow, :headers &#123;&quot;accept&quot; &quot;application/json&quot;, &quot;accept-encoding&quot; &quot;gzip, deflate, br&quot;, &quot;accept-language&quot; &quot;zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7&quot;, &quot;connection&quot; &quot;keep-alive&quot;, &quot;content-length&quot; &quot;21&quot;, &quot;content-type&quot; &quot;application/json&quot;, &quot;cookie&quot; &quot;_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619&quot;, &quot;host&quot; &quot;localhost:3000&quot;, &quot;origin&quot; &quot;http://localhost:3000&quot;, &quot;referer&quot; &quot;http://localhost:3000/api/api-docs/index.html&quot;, &quot;user-agent&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&quot;&#125;, :multipart-params &#123;&#125;, :parameters &#123;:body &#123;:message &quot;22&quot;&#125;, :path &#123;:id 1&#125;, :query &#123;:name &quot;2&quot;&#125;&#125;, :params &#123;:name &quot;2&quot;&#125;, :path-info &quot;/api/guestbooks/path/good-all-params/1&quot;, :path-params &#123;:id &quot;1&quot;&#125;, :query-params &#123;&quot;name&quot; &quot;2&quot;&#125;, :query-string &quot;name=2&quot;, :remote-addr &quot;0:0:0:0:0:0:0:1&quot;, :request-method :post, :scheme :http, :server-exchange #&lt;io.undertow.server.HttpServerExchange@78f2e776 HttpServerExchange&#123; POST /api/guestbooks/path/good-all-params/1 request &#123;Accept=[application/json], Accept-Language=[zh-CN,zh;q=0.9,zh-TW;q=0.8,en;q=0.7], Accept-Encoding=[gzip, deflate, br], Origin=[http://localhost:3000], User-Agent=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36], Connection=[keep-alive], Content-Length=[21], Content-Type=[application/json], Cookie=[_ga=GA1.1.521496834.1555489511; JSESSIONID=GpSiQENkmzM7qQwqWdYxjehYKvNKoEGMG6MIwqwU; _gid=GA1.1.947080805.1561170619], Referer=[http://localhost:3000/api/api-docs/index.html], Host=[localhost:3000]&#125; response &#123;Server=[undertow]&#125;&#125;&gt;, :server-name &quot;localhost&quot;, :server-port 3000, :session nil, :ssl-client-cert nil, :uri &quot;/api/guestbooks/path/good-all-params/1&quot;, :muuntaja/request &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;, :muuntaja/response &#123;:charset &quot;utf-8&quot;, :format &quot;application/json&quot;, :raw-format &quot;application/json&quot;&#125;&#125; å¯ä»¥çœ‹åˆ°åœ¨reitit.ring.coercion/coerce-requestä¸­é—´ä»¶å¤„ç†åŽrequesté‡Œå¢žåŠ äº†:parameters { :body {:message &quot;22&quot;}, :path {:id 1}, :query {:name &quot;2&quot;}}3ç§ç±»åž‹ä¸€è‡´çš„mapï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆæŽ¨èä½¿ç”¨çš„åŽŸå› ã€‚ handleré‡ŒèŽ·å–requestè‡ªå®šä¹‰çš„å¯¹è±¡ï¼š é‚£ä¹ˆï¼Œåœ¨ä¸Šä¸€æ­¥handleä¸­åŠ å…¥åˆ°requestä¸­äº†ä¸€ä¸ªcurrent-useræ€Žä¹ˆèŽ·å–å’Œä½¿ç”¨å‘¢ï¼Ÿå…¶å®žï¼Œbody-paramsï¼Œquery-paramsè¿™äº›ä¹Ÿåªæ˜¯ä»Žrequestä¸­èŽ·å–åˆ°çš„è€Œå·²ï¼Œæ—¢ç„¶èƒ½ä»Žrequestä¸­èŽ·å–è¿™äº›ï¼Œé‚£ä¹ˆrequesté‡Œçš„å…¶ä»–æ‰€æœ‰è‡ªç„¶ä¹Ÿèƒ½åœ¨handlerä¸­èŽ·å–ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š123456789101112131415161718["/reset/pwd" &#123;:post &#123;:summary "ä¿®æ”¹å¯†ç " :parameters &#123;:body (s/keys :req-un [::old-pwd ::new-pwd])&#125; :handler (fn [&#123;&#123;&#123;:keys [old-pwd new-pwd]&#125; :body&#125; :parameters :as request&#125;] (let [current-id (-&gt; request :current-user :user-id) db-user (db/get-user-id &#123;:user-id current-id&#125;)] (if (check-old-pwd old-pwd (:password db-user)) (do (conman.core/with-transaction [*db*] (db/update-pwd! &#123;:password (d/sha-256 new-pwd) :user-id current-id&#125;)) &#123;:status 200 :body &#123;:code 1 :message "ä¿®æ”¹æˆåŠŸï¼Œè¯·ç”¨æ–°å¯†ç ç™»å½•"&#125;&#125;) &#123;:status 400 :body &#123;:code 0 :message "å¯†ç é”™è¯¯ï¼Œè¯·è¾“å…¥æ­£ç¡®çš„å¯†ç ï¼"&#125;&#125;)))&#125;&#125;] :as requestçš„æ„æ€æ˜¯åŒ…å«å‰é¢æŒ‡å®šèŽ·å–çš„å‚æ•°çš„æ‰€æœ‰ã€‚ 4ã€åˆ†é¡µï¼ŒåŠ¨æ€hugsqlåœ¨springbooté‡Œä¹ æƒ¯ä½¿ç”¨spring data jpaï¼Œåˆ†é¡µä½¿ç”¨Pageableã€PageRequestï¼Œè¿˜èƒ½æºå¸¦Sortï¼Œæ”¾å›žç»“æžœè‡ªåŠ¨åˆ†é¡µï¼Œç¡®å®žæ–¹ä¾¿ã€‚åœ¨luminuswebé‡Œæ²¡æœ‰çœ‹åˆ°åˆ†é¡µçš„è¯´æ˜Žï¼ŒäºŽæ˜¯åœ¨åº•å±‚çš„HugSQLé‡Œæ‰¾åˆ°çš„æ–¹æ¡ˆ,ä¸¾ä¸ªåŠ¨æ€sqlï¼Œå¹¶ä¸”ä½¿ç”¨likeæ¨¡ç³ŠæŸ¥è¯¢çš„ä¾‹å­ï¼š123456789101112131415161718192021222324252627-- :name get-patient-like :? :*-- :doc æ¨¡ç³ŠæŸ¥è¯¢æ‚£è€…åˆ—è¡¨SELECT/*~ (if (:count params) */ count(*) AS &apos;total-elements&apos;/*~*/ p.`patient_id`, p.`name`, p.`headimgurl`, p.`patient_no`/*~ ) ~*/FROM `t_patient` pWHERE p.deleted = FALSE AND p.`hospital_id` = :hospital-id/*~ (if (= nil (:keywords params)) */ AND 1=1/*~*/ AND ( p.`name` LIKE :keywords OR p.mobile LIKE :keywords OR p.patient_no LIKE :keywords )/*~ ) ~*/ORDER BY p.`create_time` DESC--~ (if (:count params) &quot;;&quot; &quot;LIMIT :page, :size ;&quot;) è°ƒç”¨ï¼š1234567891011121314151617181920212223["/patient/search" &#123;:get &#123;:summary "åŒ»ç”Ÿæ¨¡ç³Šæ£€ç´¢æ‚£è€…åˆ—è¡¨" :parameters &#123;:query (s/keys :req-un [:base/page :base/size] :opt-un [::keywords])&#125; :handler (fn [&#123;&#123;&#123;:keys [page size keywords]&#125; :query&#125; :parameters :as request&#125;] (let [hospital-id (-&gt; request :doctor :hospital-id)] &#123;:status 200 :body &#123;:code 1 :data &#123;:total-elements (-&gt;&gt; (db-pat/get-patient-like &#123;:count true :keywords (str "%" keywords "%") :hospital-id hospital-id&#125;) (map :total-elements) (first)) :content (db-pat/get-patient-like &#123;:page page :size size :hospital-id hospital-id :keywords (str "%" keywords "%")&#125;)&#125;&#125;&#125;))&#125;&#125;] è¯´æ˜Žï¼šæŽ¥å£çš„page,sizeä¸ºå¿…é¡»å‚æ•°ï¼Œkeywordsæ˜¯éžå¿…é¡»å‚æ•°ï¼Œsqlä¸­æ ¹æ®countçš„booleanå€¼åˆ¤æ–­æ˜¯ä¸æ˜¯æ±‚countï¼Œæ ¹æ®keywordsæ˜¯å¦æœ‰å€¼åˆ¤æ–­æ˜¯å¦åŠ æ¨¡ç³ŠæŸ¥è¯¢æ¡ä»¶ï¼Œå®žçŽ°åŠ¨æ€sqlè°ƒç”¨ã€‚æ›´å¤šhugSQLçš„é«˜é˜¶ä½¿ç”¨ï¼Œä½¿ç”¨æ—¶å‚è€ƒå®˜ç½‘è¾¹ç”¨è¾¹å­¦å§ã€‚ ä¸€ä¸ªinæŸ¥è¯¢çš„ä¾‹å­ï¼Œä¸‹ä¾‹ä¸­çš„typeç”¨é€—å·éš”å¼€ä¼ å…¥: 12345678:get &#123;:summary "åˆ†é¡µèŽ·å–æ‚£è€…æ£€æŸ¥æŠ¥å‘Šåˆ—è¡¨" :parameters &#123;:query (s/keys :req-un [:base/patient-id ::type])&#125; :handler (fn [&#123;&#123;&#123;:keys [type, patient-id]&#125; :query&#125; :parameters&#125;] &#123;:status 200 :body &#123;:code 1 :data (db/get-examine-reports &#123;:patient-id patient-id :types (str/split type #",")&#125;)&#125;&#125;)&#125; sqlï¼š 123456-- :name get-reports :? :*-- :doc æŸ¥è¯¢åˆ—è¡¨SELECT*FROM `t_report`WHERE `deleted` = FALSE AND `id` =:id AND `type` in (:v*:types) è°ƒç”¨å¤„ä¿è¯typesæ˜¯ä¸ªarrayå°±è¡Œï¼š 12345678:get &#123;:summary "èŽ·å–æŠ¥å‘Šåˆ—è¡¨" :parameters &#123;:query (s/keys :req-un [:base/id ::type])&#125; :handler (fn [&#123;&#123;&#123;:keys [type, id]&#125; :query&#125; :parameters&#125;] &#123;:status 200 :body &#123;:code 1 :data (db/get-reports &#123;:id id :types (str/split type #",")&#125;)&#125;&#125;)&#125; æ‰¹é‡æ“ä½œ,hugsqlæ”¯æŒæ‰¹é‡æ“ä½œï¼Œè¯­æ³•æ˜¯:t*ï¼Œçœ‹çœ‹sql 1234-- :name batch-create-cure-reaction-detail! :! :n-- :doc: æ–°å»ºINSERT INTO `t_cure_reaction_detail` (`main_id`, `type`, `dict_key_id`, `dict_key_name`, `dict_value_id`, `dict_value_name`) VALUES :t*:reaction-detail ä¸€ä¸ªUTï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748(ns alk-wxapi.routes.service.cure-reaction-service-test (:require [clojure.test :as t] [alk-wxapi.routes.service.cure-reaction-service :as sut] [alk-wxapi.db.db-patient-cure :as db] [alk-wxapi.db.core :refer [*db*]] [luminus-migrations.core :as migrations] [clojure.java.jdbc :as jdbc] [alk-wxapi.config :refer [env]] [mount.core :as mount]))(t/use-fixtures :once (fn [f] (mount/start #'alk-wxapi.config/env #'alk-wxapi.db.core/*db*) (migrations/migrate ["migrate"] (select-keys env [:database-url])) (f)))(def test-batch-create-cure-reaction-detail-data '[[1 "REACTION" 62 "å“®å–˜ç—‡çŠ¶" 68 "æ°”é—­"] [1 "REACTION" 58 "å…¨èº«éžç‰¹å¼‚æ€§ååº”" 59 "å‘çƒ­"] [1 "DISPOSE" 86 "å¤„ç†æ–¹å¼" 89 "å±€éƒ¨å¤„ç†(å†°æ•·)"]])(t/deftest test-batch-create-cure-reaction-detail (jdbc/with-db-transaction [t-conn *db*] (jdbc/db-set-rollback-only! t-conn) (t/is (= 2 (db/batch-create-cure-reaction-detail-data! &#123;:reaction-detail test-batch-create-cure-reaction-detail-data&#125;))))) æ‰§è¡Œç»“æžœï¼š 123456789101112131415161718192021222324(alk-wxapi.db.db-patient-cure/batch-create-cure-reaction-detail! &#123;:reaction-detail [[1 &quot;REACTION&quot; 62 &quot;å“®å–˜ç—‡çŠ¶&quot; 68 &quot;æ°”é—­&quot;] [1 &quot;REACTION&quot; 58 &quot;å…¨èº«éžç‰¹å¼‚æ€§ååº”&quot; 59 &quot;å‘çƒ­&quot;] [1 &quot;DISPOSE&quot; 86 &quot;å¤„ç†æ–¹å¼&quot; 89 &quot;å±€éƒ¨å¤„ç†(å†°æ•·)&quot;]]&#125;)=&gt; 32019-06-15 15:16:06,929 [nRepl-session-353b6f60-9fd8-415c-9baa-19f7eb4a97f9] INFO jdbc.sqlonly - batching 1 statements: 1: INSERT INTO `t_cure_reaction_detail` (`main_id`, `type`, `dict_key_id`, `dict_key_name`, `dict_value_id`, `dict_value_name`) VALUES (1,&apos;REACTION&apos;,62,&apos;å“®å–˜ç—‡çŠ¶&apos;,68,&apos;æ°”é—­&apos;),(1,&apos;REACTION&apos;,58,&apos;å…¨èº«éžç‰¹å¼‚æ€§ååº”&apos;,59,&apos;å‘çƒ­&apos;),(1,&apos;DISPOSE&apos;,86,&apos;å¤„ç†æ–¹å¼&apos;,89,&apos;å±€éƒ¨å¤„ç†(å†°æ•·)&apos;) éœ€è¦æ³¨æ„çš„æ˜¯ä¼ å…¥çš„vectorï¼Œé‡Œé¢ä¹Ÿæ˜¯vectorï¼ŒæŒ‰ç…§sqlä¸­çš„é¡ºåºï¼Œä¸æ˜¯mapç»“æž„ã€‚ 5ã€mysqlä¸­çš„å­—æ®µè¡¨åå’Œå­—æ®µä¸‹åˆ’çº¿åœ¨clojureä¸­ç”¨ä¸­çº¿è¿žæŽ¥çš„ç»Ÿä¸€é€‚é…druidsæä¾›äº†å‡ ä¸ªadapterï¼Œç”¨æ¥å¤„ç†è½¬æ¢å…³ç³»ï¼Œæ¯”å¦‚æœ‰é©¼å³°ï¼Œä¸­çº¿ç­‰ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿žæŽ¥ç¬¦è½¬æ¢ï¼Œå³åˆ›å»ºconnectionæ—¶åŠ å…¥kebab-caseï¼š 123456789(defstate ^:dynamic *db* :start (do (Class/forName "net.sf.log4jdbc.DriverSpy") (if-let [jdbc-url (env :database-url)] (conman/connect! &#123;:jdbc-url jdbc-url&#125;) (do (log/warn "database connection URL was not found, please set :database-url in your config, e.g: dev-config.edn") *db*))) :stop (conman/disconnect! *db*))(conman/bind-connection *db* &#123;:adapter (kebab-adapter)&#125; "sql/queries.sql") è¿™ä¸ªadapteråœ¨inité¡¹ç›®æ—¶å·²ç»å¼•å…¥äº†ï¼Œå°±çœ‹ä½¿ç”¨ä¸ä½¿ç”¨ã€‚ 6ã€èŽ·å–çŽ¯å¢ƒå˜é‡çš„å€¼çŽ¯å¢ƒå˜é‡æ¯”è¾ƒå¥½èŽ·å–ï¼Œæ¯”å¦‚å¾®ä¿¡çš„é…ç½®å’ŒèŽ·å– 12&#123;:weixin &#123;:app-id "wx9258d165932dad73" :secret "my-secret"&#125; åœ¨dev/test/prodä¸­é…ç½®ç»“æž„ç›¸åŒï¼Œ 1234567891011(require '[alk-wxapi.config :refer [env]])(defn get-weixin-access-token [code] (let [url (format "https://api.weixin.qq.com/sns/oauth2/access_token?appid=%s&amp;secret=%s&amp;code=%s&amp;grant_type=authorization_code" (-&gt; env :weixin :app-id) (-&gt; env :weixin :secret) code)] (log/info "è¯·æ±‚å¾®ä¿¡access-token, url: %s" url) url)) å¦‚æžœé…ç½®æ˜¯ä¸€å±‚ï¼Œä½¿ç”¨ä¹Ÿåªéœ€å†™ä¸€å±‚keyã€‚ç‰¹åˆ«è¯´æ˜Žï¼šåœ¨å°†redisçš„connetionä»Žcljä¿®æ”¹æˆä»ŽçŽ¯å¢ƒå˜é‡ä¸­èŽ·å–æ—¶ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„é…ç½®å’ŒèŽ·å–ï¼Œä½†æ˜¯ç¢°åˆ°äº†é—®é¢˜ï¼Œåœ¨requesté‡ŒæŸ¥çœ‹envä¸­çš„redisçš„å„é¡¹éƒ½æœ‰å€¼ï¼Œä½†æ˜¯è°ƒç”¨redisçš„åœ°æ–¹å´æç¤ºæ— æ³•åˆ›å»ºconnectionï¼Œ 123456789101112131415(ns alk-wxapi.db.redis (:require [taoensso.carmine :as car :refer (wcar)] [alk-wxapi.config :refer [env]] [mount.core :refer [defstate]]))(def server1-conn :start &#123;:pool &#123;&#125; :spec &#123;:host (-&gt; env :redis-host) :port (-&gt; env :redis-port) :password (-&gt; env :redis-password) :timeout-ms (-&gt; env :redis-timeout-ms) :db (-&gt; env :redis-db)&#125;&#125;)(defmacro wcar* [&amp; body] `(car/wcar server1-conn ~@body)) æœ€åŽå¾—çŸ¥æ˜¯å› ä¸ºenvè¢«å®šä¹‰äº†ä¸ªstateï¼Œ 123456789101112(ns alk-wxapi.config (:require [cprop.core :refer [load-config]] [cprop.source :as source] [mount.core :refer [args defstate]]))(defstate env :start (load-config :merge [(args) (source/from-system-props) (source/from-env)])) ä½†æ˜¯æŒ‰ç…§è¯´æ˜Žæ–‡æ¡£redisçš„connæ˜¯ä¸ªå¸¸è§„çš„defå®šä¹‰çš„å‡½æ•°ï¼Œä½†æ˜¯å®ƒä¸‹é¢çš„ä½¿ç”¨æ˜¯ä¸ªå®defmacroï¼Œå®æ˜¯åœ¨ç¼–è¯‘çš„æ‰§è¡Œçš„ï¼Œå› æ­¤åœ¨åˆå§‹åŒ–æ—¶evnçŽ¯æ²¡æœ‰readyï¼Œæ‰€ä»¥æ— æ³•åˆ›å»ºå‡ºconnectionã€‚éœ€è¦å°†server1-connæ”¹æˆä¸€ä¸ªstateï¼Œstateæœ‰ä¾èµ–çŠ¶æ€ï¼Œä¼šç­‰åˆ°envå®ŒæˆåŽæ‰äº§ç”Ÿã€‚ 123(defstate server1-conn ...) 7ã€jarå¼•å…¥åŠä¾èµ–å†²çªè§£å†³ï¼š lein deps :tree æŸ¥çœ‹åŒ…ä¾èµ–ã€‚ å¼•å…¥æ–°çš„jaræ—¶åœ¨project.cljçš„:dependenciesæŒ‰è¯´æ˜Žå¼•å…¥ï¼Œè·Ÿmavenä¸€æ ·ï¼Œåˆ†groupIdã€artifactIdã€versionã€‚ æŽ’é™¤æŸsdké‡Œçš„æŸäº›å†²çªåŒ… 12[com.baidu.aip/java-sdk &quot;4.11.0&quot; :exclusions [org.slf4j/slf4j-simple]] 8ã€specä½¿ç”¨specçš„ä½¿ç”¨éœ€è¦å¼•å…¥[clojure.spec.alpha :as s]å’Œ[spec-tools.core :as st]ï¼Œçœ‹ä¸ªspecçš„å®šä¹‰ï¼š 12345678910111213(s/def ::page (st/spec &#123;:spec int? :description "é¡µç ï¼Œä»Ž0å¼€å§‹" :swagger/default "0" :reason "é¡µç å‚æ•°ä¸èƒ½ä¸ºç©º"&#125;))(s/def ::size (st/spec &#123;:spec int? :description "æ¯é¡µæ¡æ•°" :swagger/default 10 :reason "æ¡æ•°å‚æ•°ä¸èƒ½ä¸ºç©º"&#125;)) ä½¿ç”¨ï¼š 12345678910111213["/page" &#123;:get &#123;:summary "åˆ†é¡µèŽ·å–å­—å…¸æ•°æ®" :parameters &#123;:query (s/keys :req-un [::page ::size]) :handler (s/keys :req-un [page] :opt-un [size])&#125; :handler (fn [&#123;&#123;&#123;:keys [page, size]&#125; :query&#125; :parameters :as request&#125;] &#123;:status 200 :body &#123;:code 10 :data &#123;:total-elements (-&gt;&gt; (db/get-dicts-page &#123;:count true&#125;) (map :total-elements) (first)) :content (db/get-dicts-page &#123;:page page :size size&#125;)&#125;&#125;&#125;)&#125;&#125;] specçš„å‚æ•°ä¹Ÿå¯ä»¥å®šä¹‰åœ¨å…¶ä»–namespaceé‡Œï¼Œä½¿ç”¨æ—¶åŠ ä¸Šnamespaceçš„åå­—å³å¯ï¼Œæ¯”å¦‚ä¸€ä¸ªå«baseçš„namespaceé‡Œå®šä¹‰å‚æ•°å¦‚ä¸‹ï¼š 12345(s/def :base/role (st/spec &#123;:spec #&#123;"PATIENT", "DOCTOR"&#125; :description "è§’è‰²" :reason "è§’è‰²ä¸èƒ½ä¸ºç©º"&#125;)) è¿™ä¸ªæžšä¸¾ç±»åž‹çš„specåœ¨å¦ä¸€ä¸ªnamespaceé‡Œä½¿ç”¨æ—¶ä¸éœ€è¦åœ¨requireé‡Œå¼•å…¥è¿™ä¸ªbaseï¼Œè€Œç›´æŽ¥åœ¨specé‡ŒåŠ namespaceçš„åå­—ï¼Œæ˜¯è¿™æ ·çš„ï¼š 1:parameters &#123;:header (s/keys :req-un [:base/role])&#125; ç”¨coll-ofå®šä¹‰å‡ºä¸€ä¸ªlist 12345678(s/def ::head-id id?)(s/def ::url string?)(s/def ::unmatched-head (s/keys :req [::head-id ::url]))(s/def ::unmatched-head-result (st/spec &#123;:spec (s/coll-of ::unmatched-head)&#125;)) å†æ¯”å®šä¹‰ä¸€ä¸ªä¸‹é¢çš„postçš„bodyä½“ï¼š1234567891011&#123; &quot;patient-id&quot;: &quot;string&quot;, &quot;patient-ext-list&quot;: [ &#123; &quot;dict-id&quot;: 0, &quot;dict-type&quot;: &quot;string&quot;, &quot;dict-value&quot;: &quot;string&quot;, &quot;other-value&quot;: &quot;string&quot; &#125; ]&#125; specå®šä¹‰123456(s/def ::dict-id int?)(s/def ::dict-value string?)(s/def ::dict-type string?)(s/def ::other-value string?)(s/def ::patient-ext-list (s/coll-of (s/keys :req-un [::dict-id ::dict-type ::dict-value ::other-value])))(s/def ::ext-body (s/keys :req-un [:base/patient-id ::patient-ext-list])) coll-ofå‡½æ•°è¿˜æŽ¥æ”¶å¯é€‰çš„å‚æ•°ï¼Œç”¨æ¥å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œé™åˆ¶ï¼Œå¯é€‰å‚æ•°æœ‰å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰:kind- - - -å¯ä»¥æŒ‡å®šæ•°ç»„çš„ç±»åž‹ï¼Œvectorï¼Œsetï¼Œlistç­‰ï¼› ï¼ˆ2ï¼‰:count- - - -å¯ä»¥é™å®šæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼› ï¼ˆ3ï¼‰:min-count- - - -é™å®šæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°çš„æœ€å°å€¼ ï¼ˆ4ï¼‰:max-count- - - -é™å®šæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°çš„æœ€å¤§å€¼ ï¼ˆ5ï¼‰:distinct- - - -æ•°ç»„æ²¡æœ‰é‡å¤çš„å…ƒç´  ï¼ˆ6ï¼‰:into- - - -å¯ä»¥å°†æ•°ç»„çš„å…ƒç´ æ’å…¥åˆ°[],(),{},#{}è¿™äº›å…¶ä¸­ä¹‹ä¸€ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ”¹å˜conformå‡½æ•°çš„è¿”å›žç»“æžœ å®šä¹‰ä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„ 123456(s/def ::id (st/spec &#123;:spec (s/and string? #(= (count %) 6)) :description "ä¸€ä¸ªé•¿åº¦ä¸º6å­—ç¬¦ä¸²" :swagger/default "666666" :reason "å¿…é¡»æ˜¯é•¿åº¦ä¸º6çš„å­—ç¬¦ä¸²"&#125;)) ä½¿ç”¨å‡½æ•°éªŒè¯å‚æ•°åˆæ³•æ€§ 123456789(s/def ::head-body-id (st/spec &#123;:spec (s/and string? (fn [s] (let [[head-id body-id] (clojure.string/split s #&quot;-&quot;)] (and (s/valid? ::head-id head-id) (s/valid? ::body-id body-id))))) :description &quot;ä¸€ä¸ªé•¿åº¦ä¸º13å­—ç¬¦ä¸², head-id å’Œ body-id ç”¨â€˜-â€™ è¿žèµ·æ¥&quot; :swagger/default &quot;666666-999999&quot; :reason &quot;å¿…é¡»æ˜¯é•¿åº¦ä¸º13çš„å­—ç¬¦ä¸²ï¼Œç”¨-æŠŠbody-idå’Œhead-idè¿žèµ·æ¥&quot;&#125;)) å®šä¹‰æ•°ç»„ 12(s/def ::dict-id [string?]) ;Good(s/def ::dict-id vector?) ;Bad æ›´å¤šä½¿ç”¨å‚è€ƒï¼šclojure.specåº“å…¥é—¨å­¦ä¹  9ã€æ–°å¢žæŽ¥å£åŠ å…¥routeåˆ›å»ºä¸€ä¸ªæ–°çš„namespaceï¼Œå‚è€ƒå®˜ç½‘è¯´æ˜Žå®šä¹‰å‡ºä¸€ä¸ªrouteså‡½æ•°ï¼Œç„¶åŽå°†å…¶åŠ å…¥åˆ°handle.cljä¸­å³å¯ï¼Œåƒä¸‹é¢è¿™æ ·ä¸€ç›´conjå³å¯ï¼š 10ã€æ–‡ä»¶ä¸Šä¼ æŽ¥å£æŽ¥å£å®šä¹‰ 123456789101112131415161718192021222324252627282930313233343536(defn format-date-time [timestamp] (-&gt; "yyyyMMddHHmmss" (java.text.SimpleDateFormat.) (.format timestamp)));;ä¸Šä¼ åˆ°æœ¬åœ°(defn upload-file-local [type file] (let [file-path (str (-&gt; env :file-path) type "/" (format-date-time (java.util.Date.)) "/" (:filename file))] (io/make-parents file-path) (with-open [writer (io/output-stream file-path)] (io/copy (:tempfile file) writer)) (get-image-data file-path) file-path))(defn common-routes [] ["/common" &#123;:swagger &#123;:tags ["æ–‡ä»¶æŽ¥å£"]&#125; :parameters &#123;:header (s/keys :req-un [::token ::role])&#125; :middleware [token-wrap]&#125; ["/files" &#123;:post &#123;:summary "é™„ä»¶ä¸Šä¼ æŽ¥å£" :parameters &#123;:multipart &#123;:file multipart/temp-file-part :type (st/spec &#123;:spec string? :description "ç±»åž‹" :reason "ç±»åž‹å¿…å¡«"&#125;)&#125;&#125; :responses &#123;200 &#123;:body &#123;:code int?, :data &#123;:file-url string?&#125;&#125;&#125;&#125; :handler (fn [&#123;&#123;&#123;:keys [type file]&#125; :multipart&#125; :parameters&#125;] &#123;:status 200 :body &#123;:code 1 :message "ä¸Šä¼ æˆåŠŸ" :data &#123;:file-url (:url (upload-file-local type file))&#125;&#125;&#125;)&#125;&#125;]]) å¦‚æžœè¦å°†å›¾ç‰‡ä¸Šä¼ è‡³ä¸ƒç‰›ç­‰æœ‰CDNèƒ½åŠ›çš„äº‘å­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨åˆ«äººçš„è½®å­ï¼Œæˆ–è€…è‡ªå·±éœ€è¦é€ è½®å­ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªåˆ«äººé€ çš„ä¸Šä¼ ä¸ƒç‰›çš„è½®å­,å…ˆåœ¨:dependenciesé‡ŒåŠ å…¥ä¾èµ–1[clj.qiniu &quot;0.2.1&quot;] è°ƒç”¨api 12345678910111213141516171819202122232425262728293031(require '[clj.qiniu :as qiniu]);;ä¸Šä¼ åˆ°ä¸ƒç‰›é…ç½®(defn set-qiniu-config [] (qiniu/set-config! :access-key "my-key" :secret-key "my-secret"))(def qiniu-config &#123;:bucket "medical" :domain "http://prfmkg8tt.bkt.clouddn.com/" :prefix "alk/weixin/"&#125;)(defn qiniu-upload-path [type filename] (str (-&gt; qiniu-config :prefix) type "/" (utils/format-date-time (java.util.Date.)) "/" filename));;ä¸ƒç‰›äº‘ä¸Šä¼ ï¼Œè¿”å›žä¸Šä¼ åŽåœ°å€(defn upload-file-qiniu [type file] (set-qiniu-config) (let [filename (:filename file) bucket (-&gt; qiniu-config :bucket) key (qiniu-upload-path type filename) res (qiniu/upload-bucket bucket key (:tempfile file))] (log/info "ä¸Šä¼ ä¸ƒç‰›äº‘ç»“æžœï¼š" res) (if-not (= 200 (-&gt; res :status)) (throw (Exception. " é™„ä»¶ä¸Šä¼ å¤±è´¥ "))) (str (-&gt; qiniu-config :domain) key))) ä½¿ç”¨çš„æ—¶å€™å°†ä¸Šä¼ localæ”¹æˆupload-file-qiniuå³å¯ã€‚ 11ã€å…¨å±€è·¨åŸŸé…ç½®åœ¨middlewareçš„wrap-baseä¸­åŠ å…¥è·¨åŸŸä¿¡æ¯ï¼Œå…ˆé…ç½®ä¸ª*çš„ 12345678910111213141516171819(ns alk-wxapi.middleware (:require [alk-wxapi.env :refer [defaults]] [alk-wxapi.config :refer [env]] [ring.middleware.flash :refer [wrap-flash]] [immutant.web.middleware :refer [wrap-session]] [ring.middleware.cors :refer [wrap-cors]] [ring.middleware.defaults :refer [site-defaults wrap-defaults]]))(defn wrap-base [handler] (-&gt; ((:middleware defaults) handler) wrap-flash (wrap-session &#123;:cookie-attrs &#123;:http-only true&#125;&#125;) (wrap-cors :access-control-allow-origin [#".*"] :access-control-allow-methods [:get :put :post :delete]) (wrap-defaults (-&gt; site-defaults (assoc-in [:security :anti-forgery] false) (dissoc :session))))) 12ã€å¢žåŠ æ‰“åŒ…çŽ¯å¢ƒæ¯”å¦‚å¢žåŠ preçŽ¯å¢ƒï¼Œåœ¨project.cljä¸­é…ç½®uberjarå³å¯ï¼Œåœ¨:profilesé‡Œå¢žåŠ ,å¯ä»¥å‚è€ƒtestçŽ¯å¢ƒï¼Œæ¯”å¦‚å¢žåŠ çš„uberjar-testçŽ¯å¢ƒï¼š 123456:uberjar-test &#123;:omit-source true :aot :all :uberjar-name &quot;alk-wxapi-test.jar&quot; :source-paths [&quot;env/test/clj&quot;] :resource-paths [&quot;env/test/resources&quot;] :jvm-opts [&quot;-Dconf=test-config.edn&quot;]&#125; æ‰“åŒ…:1234567891011121314151617181920212223242526272829303132333435363738âžœ alk-wxapi git:(master) âœ— lein with-profiles uberjar-test uberjarCompiling alk-wxapi.common.utilsCompiling alk-wxapi.configCompiling alk-wxapi.coreCompiling alk-wxapi.db.coreCompiling alk-wxapi.db.db-dictsCompiling alk-wxapi.db.db-doctorCompiling alk-wxapi.db.db-guestbookCompiling alk-wxapi.db.db-hospitalCompiling alk-wxapi.db.db-patientCompiling alk-wxapi.db.redisCompiling alk-wxapi.envCompiling alk-wxapi.handlerCompiling alk-wxapi.middlewareCompiling alk-wxapi.middleware.exceptionCompiling alk-wxapi.middleware.formatsCompiling alk-wxapi.middleware.interceptorCompiling alk-wxapi.middleware.log-interceptorCompiling alk-wxapi.middleware.token-interceptorCompiling alk-wxapi.nreplCompiling alk-wxapi.routes.baseCompiling alk-wxapi.routes.dictsCompiling alk-wxapi.routes.doctorCompiling alk-wxapi.routes.fileCompiling alk-wxapi.routes.guestbookCompiling alk-wxapi.routes.hospitalCompiling alk-wxapi.routes.patientCompiling alk-wxapi.routes.patient-costCompiling alk-wxapi.routes.patient-examineCompiling alk-wxapi.routes.publicCompiling alk-wxapi.routes.userCompiling alk-wxapi.routes.weixinCompiling alk-wxapi.validationWarning: skipped duplicate file: config.ednWarning: skipped duplicate file: logback.xmlCreated /Users/mahaiqiang/git/redcreation/alk-wxapi/target/uberjar+uberjar-test/alk-wxapi-0.1.0-SNAPSHOT.jarCreated /Users/mahaiqiang/git/redcreation/alk-wxapi/target/uberjar/alk-wxapi-test.jarâžœ alk-wxapi git:(master) âœ— 13ã€äº‹åŠ¡å‘èµ·äº‹åŠ¡ä½¿ç”¨conman.core/with-transactionï¼Œä¸€ä¸ªä¾‹å­ï¼š 123456789(let [timestamp (java.util.Date.) id (utils/generate-db-id)] (conman.core/with-transaction [*db*] (db/create-guestbook! (assoc body-params :timestamp timestamp :id id)) (db/get-guestbook &#123;:id id&#125;) (throw (ex-info (str "å¼‚å¸¸ï¼Œäº‹åŠ¡å›žæ»šï¼Œåˆ—è¡¨ä¸­æŸ¥çœ‹è¯¥idçš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œid:" id) &#123;&#125;)))) æ³¨æ„ï¼šåªæœ‰åœ¨transactionä¸­çš„exceptionå‘ç”Ÿï¼Œäº‹åŠ¡çš„æœºåˆ¶æ‰ä¼šç”Ÿæ•ˆï¼Œæˆ‘æµ‹è¯•æ—¶å°±æ­£å¥½ç¨€é‡Œç³Šæ¶‚æŠŠthrowæ”¾åˆ°äº†with-transactioné‡Œé¢ï¼Œå¯¼è‡´æ€»æ˜¯ä¸ä¼šå›žæ»šã€‚ 14ã€å·¥å…·ç±»å·¥å…·ç±»Utilså•ç‹¬ä¸€ä¸ªnamespaceï¼Œç›®å‰æ”¶çº³ èŽ·å–uuid 12(defn generate-db-id [] (clojure.string/replace (str (java.util.UUID/randomUUID)) "-" "")) æ—¥æœŸæ—¶é—´æ ¼å¼åŒ– 123456789(defn format-time [timestamp] (-&gt; "yyyy-MM-dd HH:mm:ss" (java.text.SimpleDateFormat.) (.format timestamp)))(defn format-date-time [timestamp] (-&gt; "yyyyMMddHHmmss" (java.text.SimpleDateFormat.) (.format timestamp))) 15ã€å®šæ—¶ä»»åŠ¡æœ‰ä¸ªæ¯”è¾ƒé‡é‡çº§çš„http://clojurequartz.info/articles/guides.htmlåº“ï¼Œquartzä¸Žåœ¨javaé‡Œçš„ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯clojureçš„å®žçŽ°ã€‚æˆ‘ä»¬é¡¹ç›®é‡Œæ²¡æœ‰å¾ˆå¤æ‚çš„éœ€è¦åŠ¨æ€ä¿®æ”¹çš„å®šæ—¶ä»»åŠ¡ï¼Œå› æ­¤é€‰æ‹©äº†ä¸€ä¸ªè½»é‡çº§çš„åº“:chimeï¼Œapiå‚è€ƒgithubã€‚ä¸‹é¢æ˜¯é¡¹ç›®ä¸­çš„ä¸€ä¸ªdemo 1234567891011121314151617181920212223242526272829(ns alk-wxapi.common.scheduler (:require [chime :refer [chime-ch]] [clj-time.core :as t] [clj-time.periodic :refer [periodic-seq]] [clojure.core.async :as a :refer [&lt;! go-loop]] [clojure.tools.logging :as log]) (:import org.joda.time.DateTimeZone));; FIXME å®šæ—¶åŠŸèƒ½åº”è¯¥è¿˜æ²¡æœ‰åš (^_^)(defn times [] (rest (periodic-seq (.. (t/now) (withZone (DateTimeZone/getDefault)) #_(withTime 0 0 0 0)) (t/minutes 10))))(defn channel [] (a/chan))(defn chime [] (chime-ch (times) &#123;:ch (channel)&#125;))(defn start-scheduler [] (let [chime-channle (chime)] (go-loop [] (when-let [msg (&lt;! chime-channle)] (log/error (format "äº²çˆ±çš„ %s, Clojure replæžä¸€ä¸ªå°æ—¶äº†ï¼Œä¼‘æ¯ä¸€ä¸‹ï¼Ÿ" (System/getProperty "user.name"))) (recur))) chime-channle)) è¯¥å®šæ—¶ä»»åŠ¡é¡¹ç›®å¯åŠ¨åŽä¸€ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œåªæ˜¯ç®€å•æ‰“ä¸ªlogï¼Œæ•ˆæžœå¦‚ä¸‹ï¼š 16ã€ä¼˜é›…åœ°æ‰“å°jdbcçš„æ‰§è¡Œsqlé¡¹ç›®ä¸­é»˜è®¤çš„jdbcé©±åŠ¨æ˜¯mysqlè‡ªèº«çš„å¯åŠ¨ï¼Œæ‰€ä»¥é»˜è®¤çš„databaseurlä¹Ÿè®¸æ˜¯è¿™æ ·çš„ 1:database-url "mysql://localhost:3306/demo?user=root&amp;password=password ç„¶è€Œï¼Œè¿™æ ·çš„é…ç½®æ˜¯ä¸ä¼šæ‰“å°å‡ºjdbcæ‰§è¡Œçš„çœŸæ­£sqlçš„ï¼Œè€Œæˆ‘ä»¬æœ‰æ—¶å€™å¾ˆéœ€è¦è¿™äº›sqlï¼Œå› ä¸ºä»–ä»¬ä»£è¡¨ç€é€»è¾‘ï¼Œæœ‰æ—¶å€™debugä¹Ÿä¼šéœ€è¦ã€‚é‚£ä¹ˆæ€Žä¹ˆé…ç½®æ‰èƒ½è¾¾åˆ°ç›®çš„å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯log4jdbcï¼Œå› æ­¤éœ€è¦åœ¨project.cljä¸­å¼•å…¥è¯¥åº“ï¼Œ 1[com.googlecode.log4jdbc/log4jdbc "1.2"] å¼•å…¥ä»¥åŽä¿®æ”¹éœ€è¦æŸ¥çœ‹sqlçš„profileé‡Œçš„edné…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚æœ¬åœ°dev-config.edn 1:database-url "jdbc:log4jdbc:mysql://localhost:3306/demo?user=root&amp;password=password ç„¶åŽjdbcè¿žæŽ¥å¤„è‡ªç„¶ä¹Ÿå¾—å˜,routes/db/core.clj 12345678(defstate ^:dynamic *db* :start (do (Class/forName "net.sf.log4jdbc.DriverSpy") (if-let [jdbc-url (env :database-url)] (conman/connect! &#123;:jdbc-url jdbc-url&#125;) (do (log/warn "database connection URL was not found, please set :database-url in your config, e.g: dev-config.edn") *db*))) :stop (conman/disconnect! *db*)) é»˜è®¤çš„logé…ç½®ï¼Œä½¿ç”¨logbackæ˜¯é…ç½®çš„æ–¹å¼ã€‚è¿™æ ·ä¼šåœ¨logæŽ§åˆ¶å°çœ‹åˆ°å¾ˆå¤šjdbcçš„logï¼Œå› ä¸ºé»˜è®¤è¿™äº›æ—¥å¿—éƒ½æ˜¯infoçš„ï¼Œéœ€è¦è°ƒæ•´logbacké‡Œæ—¥å¿—çº§åˆ«ã€‚ä¸ºäº†åˆ†å¼€æ‰“å°logã€errorã€sqlçš„logï¼Œé™„ä¸Šæˆ‘æœ¬åœ°çš„logbacké…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;10 seconds&quot;&gt; &lt;statusListener class=&quot;ch.qos.logback.core.status.NopStatusListener&quot;/&gt; &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!-- å¦‚æžœåªæ˜¯æƒ³è¦Infoçº§åˆ«çš„æ—¥å¿—ï¼Œåªæ˜¯è¿‡æ»¤infoè¿˜æ˜¯ä¼šè¾“å‡ºErroræ—¥å¿—ï¼Œå› ä¸ºErrorçš„çº§åˆ«é«˜ï¼Œä½¿ç”¨filterï¼Œå¯ä»¥é¿å…è¾“å‡ºErroræ—¥å¿— --&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&gt; &lt;!--è¿‡æ»¤ Error--&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;!--åŒ¹é…åˆ°å°±ç¦æ­¢--&gt; &lt;onMatch&gt;DENY&lt;/onMatch&gt; &lt;!--æ²¡æœ‰åŒ¹é…åˆ°å°±å…è®¸--&gt; &lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt; &lt;/filter&gt; &lt;file&gt;log/info-wxapi.log&lt;/file&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;log/info-wxapi.%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!-- keep 30 days of history --&gt; &lt;maxHistory&gt;30&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;pattern&gt;%date&#123;ISO8601&#125; [%thread] %-5level %logger&#123;36&#125; - %msg %n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name=&quot;ERRORFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!--å¦‚æžœåªæ˜¯æƒ³è¦ Error çº§åˆ«çš„æ—¥å¿—ï¼Œé‚£ä¹ˆéœ€è¦è¿‡æ»¤ä¸€ä¸‹ï¼Œé»˜è®¤æ˜¯ info çº§åˆ«çš„ï¼ŒThresholdFilter--&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt; &lt;level&gt;Error&lt;/level&gt; &lt;/filter&gt; &lt;file&gt;log/error-wxapi.log&lt;/file&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;log/error-wxapi.%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!-- keep 30 days of history --&gt; &lt;maxHistory&gt;10&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;pattern&gt;%date&#123;ISO8601&#125; [%thread] %-5level %logger&#123;36&#125; - %msg %n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name=&quot;SQLFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;file&gt;log/sql-wxapi.log&lt;/file&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;log/sql-wxapi.%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!-- keep 30 days of history --&gt; &lt;maxHistory&gt;10&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;pattern&gt;%date&#123;ISO8601&#125; [%thread] %-5level %logger&#123;36&#125; - %msg %n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;logger name=&quot;org.apache.http&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;org.xnio.nio&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;com.zaxxer.hikari&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;io.undertow.session&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;io.undertow.request&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;jdbc.audit&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;jdbc.sqltiming&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;jdbc.connection&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;jdbc.resultset&quot; level=&quot;warn&quot;/&gt; &lt;logger name=&quot;wxapi&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt; &lt;appender-ref ref=&quot;FILE&quot;/&gt; &lt;appender-ref ref=&quot;ERRORFILE&quot;/&gt; &lt;/logger&gt; &lt;logger name=&quot;jdbc.sqlonly&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt; &lt;appender-ref ref=&quot;SQLFILE&quot;/&gt; &lt;/logger&gt; &lt;root level=&quot;ERROR&quot;&gt; &lt;appender-ref ref=&quot;ERRORFILE&quot;/&gt; &lt;appender-ref ref=&quot;FILE&quot;/&gt; &lt;/root&gt;&lt;/configuration&gt; :as requestçš„æ„æ€æ˜¯åŒ…å«å‰é¢æŒ‡å®šèŽ·å–çš„å‚æ•°çš„æ‰€æœ‰ã€‚å½“ç„¶ï¼Œå¦‚ä½ æ‰€çŸ¥ï¼Œclojureç¡®å®žè¶³å¤Ÿçµæ´»ï¼Œå–å‚æ–¹å¼ä¹Ÿè¿˜æœ‰æ–¹å¼ï¼Œæ¯”å¦‚12345678["/path/good-all-params/:id" &#123;:post &#123;:summary "æ›´å¤šæ–¹å¼" :parameters &#123;:path &#123;:id int?&#125; :query &#123;:name string?&#125; :body &#123;:message string?&#125;&#125; :handler (fn [&#123;&#123;data :body&#125; :parameters &#123;&#123;:keys [id]&#125; :path&#125; :parameters] (ok (format " body params: %s " data)))&#125;&#125;] è¿™é‡Œå‚æ•°åç§°dataå¯ä»¥å®šä¹‰æˆä»»ä½•ä½ æƒ³å«çš„åå­—ã€‚]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojureçˆ¬å‘ä¹‹é¡¹ç›®é‡Œå¤„ç†è¿‡çš„å¤æ‚é€»è¾‘]]></title>
    <url>%2F2019%2F07%2F31%2Fclojure%E7%88%AC%E5%9D%91%E4%B9%8B%E9%A1%B9%E7%9B%AE%E9%87%8C%E5%A4%84%E7%90%86%E8%BF%87%E7%9A%84%E5%A4%8D%E6%9D%82%E9%80%BB%E8%BE%91%2F</url>
    <content type="text"><![CDATA[clojureä¸­è°ƒç”¨java,è§£å†³jaråŒ…ä¾èµ–å†²çª ç®€ä¹¦åœ°å€ 1ã€ä¸€ä¸ªé«˜é˜¶å‡½æ•°çš„ä½¿ç”¨ï¼šå°†dbæŸ¥è¯¢ç»“æžœæ—¥æœŸè¿›è¡Œformatï¼Œå¹¶ä¸”groupå’Œæ±‚sumï¼Œé‡æ–°ç»„ç»‡ç»“æž„ä»ŽDBä¸­æŸ¥åˆ°çš„mapç»“æžœé›†å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435(alk-wxapi.db.db-patient/get-patient-cost &#123;:page 0, :size 10, :patient-id 222&#125;)=&gt;(&#123;:deleted 0, :drug-flag 1, :drug-id 1, :cost-date #object[java.time.LocalDate 0x2d30b554 &quot;2019-05-07&quot;], :id &quot;1&quot;, :create-time #object[java.time.LocalDateTime 0x76211aed &quot;2019-06-05T22:42:14&quot;], :count 2, :drug-name &quot;å®‰è„±è¾¾&quot;, :patient-id &quot;222&quot;, :sum 58.0&#125; &#123;:deleted 0, :drug-flag 1, :drug-id 1, :cost-date #object[java.time.LocalDate 0x9e55443 &quot;2019-06-05&quot;], :id &quot;3&quot;, :create-time #object[java.time.LocalDateTime 0x7114ec3c &quot;2019-06-05T22:42:01&quot;], :count 10, :drug-name &quot;å®‰è„±è¾¾&quot;, :patient-id &quot;222&quot;, :sum 120.0&#125; &#123;:deleted 0, :drug-flag 1, :drug-id 4, :cost-date #object[java.time.LocalDate 0x59267d5f &quot;2019-05-07&quot;], :id &quot;2&quot;, :create-time #object[java.time.LocalDateTime 0x27aef2e4 &quot;2019-06-05T22:41:50&quot;], :count 15, :drug-name &quot;å¥¥é©¬ç &quot;, :patient-id &quot;222&quot;, :sum 200.0&#125;) jsonä»¥åŽæ ¼å¼æ˜¯ä¸€æ¡æ¡çš„recordï¼š1234567891011121314151617181920212223242526272829303132333435363738&quot;data&quot;: [ &#123; &quot;deleted&quot;: 0, &quot;drug-flag&quot;: 1, &quot;drug-id&quot;: 1, &quot;cost-date&quot;: &quot;2019-05-07&quot;, &quot;id&quot;: &quot;1&quot;, &quot;create-time&quot;: &quot;2019-06-05T22:42:14&quot;, &quot;count&quot;: 2, &quot;drug-name&quot;: &quot;å®‰è„±è¾¾&quot;, &quot;patient-id&quot;: &quot;222&quot;, &quot;sum&quot;: 58 &#125;, &#123; &quot;deleted&quot;: 0, &quot;drug-flag&quot;: 1, &quot;drug-id&quot;: 1, &quot;cost-date&quot;: &quot;2019-06-05&quot;, &quot;id&quot;: &quot;3&quot;, &quot;create-time&quot;: &quot;2019-06-05T22:42:01&quot;, &quot;count&quot;: 10, &quot;drug-name&quot;: &quot;å®‰è„±è¾¾&quot;, &quot;patient-id&quot;: &quot;222&quot;, &quot;sum&quot;: 120 &#125;, &#123; &quot;deleted&quot;: 0, &quot;drug-flag&quot;: 1, &quot;drug-id&quot;: 4, &quot;cost-date&quot;: &quot;2019-05-07&quot;, &quot;id&quot;: &quot;2&quot;, &quot;create-time&quot;: &quot;2019-06-05T22:41:50&quot;, &quot;count&quot;: 15, &quot;drug-name&quot;: &quot;å¥¥é©¬ç &quot;, &quot;patient-id&quot;: &quot;222&quot;, &quot;sum&quot;: 200 &#125; ] è€Œé¢„æœŸçš„jsonæ˜¯å¹²è¿™ä¹ˆå‡ ä»¶äº‹: 1ã€æ ¹æ®æ—¥æœŸå°†åˆ†ç»„ï¼Œä»¥æŒ‡å®šå­—æ®µä¸ºkeyï¼Œgroupçš„æ—¥æœŸä¸ºvalue2ã€å¯¹æ—¥æœŸè¿›è¡Œæ ¼å¼åŒ–3ã€åŒä¸€æ—¥æœŸä¸‹çš„æ•°æ®ï¼Œä»¥listä¸ºkeyï¼Œrecordä½œä¸ºvalue4ã€å¯¹æ¯ä¸ªlisté‡Œrecordçš„sumå­—æ®µæ±‚å’Œï¼Œä¸ŽliståŒçº§ï¼Œä»¥total-costä¸ºkeyï¼Œå’Œä¸ºvalue5ã€åŒ4ç±»ä¼¼ï¼Œå¯¹listé‡Œçš„recordçš„countæ±‚å’Œï¼Œä¸ŽliståŒçº§ï¼Œä»¥total-countä¸ºkeyï¼Œå’Œä¸ºvalue123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&#123;"content": [ &#123; "cost-date": "2019-05-07", "list": [ &#123; "deleted": 0, "drug-flag": 1, "drug-id": 1, "cost-date": "2019-05-07", "id": "1", "create-time": "2019-06-05T22:42:14", "count": 2, "drug-name": "å®‰è„±è¾¾", "patient-id": "222", "sum": 58 &#125;, &#123; "deleted": 0, "drug-flag": 1, "drug-id": 4, "cost-date": "2019-05-07", "id": "2", "create-time": "2019-06-05T22:41:50", "count": 15, "drug-name": "å¥¥é©¬ç ", "patient-id": "222", "sum": 200 &#125; ], "total-cost": 258, "total-count": 17 &#125;, &#123; "cost-date": "2019-06-05", "list": [ &#123; "deleted": 0, "drug-flag": 1, "drug-id": 1, "cost-date": "2019-06-05", "id": "3", "create-time": "2019-06-05T22:42:01", "count": 10, "drug-name": "å®‰è„±è¾¾", "patient-id": "222", "sum": 120 &#125; ], "total-cost": 120, "total-count": 10 &#125; ]&#125; é‚£ä¹ˆè¿™ä¸ªå¤„ç†å‡½æ•°åº”è¯¥æ€Žä¹ˆå†™å‘¢ï¼Ÿæä¾›ä¸€ä¸ªå·¥å…·ç±»ï¼Œå¤„ç†å°†å…³ç³»æ•°æ®åº“çš„recordæžæˆtreeçš„å‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061(defn group-data-by-keys "å¯¹ä¸€ç»„æ•°æ®åº“è¿”å›žç»“æžœ&#123;data&#125;è¿›è¡Œå¤„ç†, ä½¿ç”¨&#123;group-keys&#125;ä¸­çš„keyè¿›è¡Œgroup-by: (sut/group-data-by-keys test-dict [:group-code1 :group-code2] ) å¯ä»¥å¸¦å¤šç»„é¢å¤–çš„é›†åˆå‡½æ•°ï¼Œå¤šç»„[key reducing-function init-value]çš„æ ¼å¼ï¼š (sut/group-data-by-keys test-dict [:group-code] :a (fn [v e] (+ v (:id e))) 0 :b (fn [v e] (+ v (:id e))) 0 )" ([data group-keys] (-&gt;&gt; data (group-by (fn [m] (select-keys m group-keys))) (reduce-kv (fn [m k v] (assoc m k &#123;:list (mapv (fn [e] (apply dissoc e group-keys)) v)&#125;)) &#123;&#125;) (mapv (fn [e] (apply merge e))))) ([data group-keys key r-func val &amp; krvs] (-&gt;&gt; data (group-by (fn [m] (select-keys m group-keys))) (reduce-kv (fn [m k v] (assoc m k (if (empty? krvs) &#123;:list (mapv (fn [e] (apply dissoc e group-keys)) v) key (reduce r-func val v)&#125; (apply assoc &#123;:list (mapv (fn [e] (apply dissoc e group-keys)) v) key (reduce r-func val v)&#125; (let [krvs-seq (partition 3 krvs)] (mapcat (fn [krv] (let [[key r-func val] krv] [key (reduce r-func val v)])) krvs-seq)))))) &#123;&#125;) (map (fn [e] (apply merge e)))))) åœ¨æä¾›ä¸€ä¸ªç›¸åä½œç”¨çš„å‡½æ•°12345678910111213141516171819202122(defn list-from-group-by "åŽ»é™¤åˆ†ç»„, ä½œç”¨å’Œgroup-data-by-key ç›¸å: ä¸€å±‚åµŒå¥—: (list-from-group-by &#123;:y 1 :a [&#123;:b 2&#125; &#123;:b 3&#125;]&#125; ))) -&gt; [&#123;:b 2, :y 1&#125; &#123;:b 3, :y 1&#125;] åŒå±‚åµŒå¥—: (mapcat sut/list-from-group-by (sut/list-from-group-by &#123;:y 1 :a [&#123;:b [&#123;:x 99&#125;]&#125; &#123;:b [&#123;:x 77&#125;]&#125;]&#125; )) -&gt; [&#123;:x 99, :y 1&#125; &#123;:x 77, :y 1&#125;] " [m] (reduce-kv (fn [r k v] (if (vector? v) (-&gt;&gt; (apply conj r v) (map #(merge % (dissoc m k)))) r)) [] m)) 2ã€ä¸€äº›æœ‰ç”¨çš„utils12345678910111213141516(defn lower-case-keywrod "æŠŠè¾“å…¥çš„å­—ç¬¦ä¸²å˜æˆkeywrokd \"ABC\" -&gt; :abc " [s] (keyword (clojure.string/lower-case s)))(defn parse-int "string è½¬ int" [s] (Integer/parseInt (re-find #"\A-?\d+" s)))(defn parse-double "string è½¬ doule" [s] (Double/parseDouble (re-find #"\A-?\d+" s))) 3ã€ç­›é€‰å’Œåˆ¤æ–­ä¸€ç»„æ•°æ®ä¸­ä¸ä¸ºnilçš„æœ‰è¿™ä¹ˆä¸€ç»„æ•°ï¼š1(def x '[(nil nil nil nil nil) (nil nil nil nil nil) (&#123;:drug-id "300", :drug-name "è¥¿æ›¿åˆ©å—ªï¼Œå·¦è¥¿æ›¿åˆ©å—ªï¼ˆä»™ç‰¹æœ—ï¼Œä¼˜æ³½ï¼‰", :checked true, :dosage "1111", :dosage-unit "æ»´/å¤©"&#125; nil &#123;:drug-id "302", :drug-name "è°ˆè¯´æ–¯æ±€ï¼ˆUPDATEï¼‰", :checked true, :dosage "1111", :dosage-unit "æ»´/å¤©"&#125; nil) ()]) æ‰¾å‡ºä¸ä¸ºnilçš„1(filter (complement nil?) (mapcat identity x)) 4ã€ä¸¤ä¸ªæ•°ä¸­æ‰¾åˆ°ä¸ä¸ºnilçš„ç¬¬ä¸€ä¸ªæ•°12(first (filter (complement nil?) [a b]))]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlä¸­å­˜å‚¨å¸¦ç‰¹æ®Šç¬¦å·çš„å¾®ä¿¡æ˜µç§°]]></title>
    <url>%2F2019%2F07%2F20%2Fmysql%E4%B8%AD%E5%AD%98%E5%82%A8%E5%B8%A6%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%98%B5%E7%A7%B0%2F</url>
    <content type="text"><![CDATA[å¾®ä¿¡æ˜µç§°ä¸­æœ‰è¡¨æƒ…ç¬¦å·ï¼Œåœ¨èŽ·å–åˆ°å¾®ä¿¡ä¸ªäººä¿¡æ¯ä¿å­˜åˆ°mysqlæ—¶ï¼Œæ ¼å¼ä¸æ”¯æŒå¯¼è‡´ä¿å­˜å¤±è´¥ï¼Œæ€Žä¹ˆè§£å†³ï¼Ÿ ç®€ä¹¦åœ°å€ é—®é¢˜ï¼šå¾®ä¿¡æ˜µç§°ä¸­æœ‰è¡¨æƒ…ç¬¦å·ï¼Œåœ¨èŽ·å–åˆ°å¾®ä¿¡ä¸ªäººä¿¡æ¯ä¿å­˜åˆ°mysqlæ—¶ï¼Œæ ¼å¼ä¸æ”¯æŒå¯¼è‡´ä¿å­˜å¤±è´¥ã€‚çŽ°è±¡ï¼š é”™è¯¯ï¼š12345678Caused by: java.sql.SQLException: Incorrect string value: &apos;\xF0\x9F\x8C\xB2\xE6\x97...&apos; for column &apos;nick_name&apos; at row 1 at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129) ~[alk-wxapi.jar:na] at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97) ~[alk-wxapi.jar:na] at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[alk-wxapi.jar:na] at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:975) ~[alk-wxapi.jar:na] at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1114) ~[alk-wxapi.jar:na] at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:854) ~[alk-wxapi.jar:na] ... 82 common frames omitted è§£å†³æ€è·¯ï¼š1ã€ä¿®æ”¹mysqlçš„é…ç½®ï¼Œä¸å¤–ä¹Žserverç«¯ï¼Œå®¢æˆ·ç«¯ï¼ŒDB2ã€æ•°æ®åº“å­˜base64ï¼Œbase64è¿žå›¾ç‰‡éƒ½èƒ½æžï¼Œä¸€ä¸ªè¡¨æ¸…åº”è¯¥æ˜¯okçš„ï¼Œåªä¸è¿‡éœ€è¦å­˜å‚¨çš„æ—¶å€™encodeï¼Œæ‹¿å‡ºæ¥å†decode è§£å†³æ–¹æ¡ˆï¼šæžœæ–­é‡‡ç”¨ç¬¬ä¸€ç§å•Šï¼Œå¹¶å®žè·µè¯æ˜Žï¼Œæ˜¯ç§‘å­¦+åˆç†+å¿«æ·çš„æ–¹å¼ã€‚ä¿®æ”¹mysqlçš„é…ç½®ï¼Œé…ç½®æ–‡ä»¶ä½ç½®å„ä¸ç›¸åŒï¼Œä¸å†ç´¯èµ˜ã€‚ ä¿®æ”¹ç‚¹å°±ä¸€ä¸ªï¼Œmysqldä¸ŠåŠ ä¸ªcharacter-set-server = utf8mb4ï¼Œå°±è¿™ä¸€ä¸ªè€Œå·²ã€‚ ç„¶åŽä¿®æ”¹æ•°æ®åº“ã€è¿™ä¸ªè¡¨ã€è¿™ä¸ªå­—æ®µçš„å­—ç¬¦é›†ç±»åž‹ä¸ºutf8mb4ï¼Œokäº†ã€‚ éªŒè¯ï¼š ç¬¬äºŒç§æ–¹å¼ä¹Ÿç§°åº”ç”¨å±‚è§£å†³æ–¹æ¡ˆ base64å¯ä»¥ç”¨java.util.Base64ï¼Œä¹Ÿå¯ä»¥ç”¨apacheæä¾›çš„ã€‚]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Proæˆ–è€…å…¶ä»–npmç®¡ç†çš„é¡¹ç›®ä¸€é”®è¿œç¨‹éƒ¨ç½²]]></title>
    <url>%2F2019%2F07%2F17%2FAnt%20Design%20Pro%E6%88%96%E8%80%85%E5%85%B6%E4%BB%96npm%E7%AE%A1%E7%90%86%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%80%E9%94%AE%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2%2F</url>
    <content type="text"><![CDATA[npmé¡¹ç›®æ²¡æœ‰jenkinsè¿™æ ·çš„è‡ªåŠ¨æ‰“åŒ…å·¥å…·çš„è¯ï¼Œæœ¬åœ°é…ç½®å¥½å…å¯†ç™»å½•ï¼Œä¸€å¥å‘½ä»¤å®žçŽ°è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿˜æ˜¯æŒºç¾Žæ»‹æ»‹çš„ã€‚ ç®€ä¹¦åœ°å€ å¬èµ·æ¥titleæœ‰ç‚¹ç»•ï¼Œå…¶å®žç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯æœ¬åœ°ä¸€æ¡ç®€å•å‘½ä»¤ï¼Œå®žçŽ°å°†é¡¹ç›®æ‰“åŒ…å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨è¿™ä¹ˆä¸ªåŠŸèƒ½ã€‚ å…·ä½“å®žçŽ° åœ¨é¡¹ç›®æ ¹ç›®å½•çš„package.jsonæ–‡ä»¶ä¸­æ‰¾åˆ°scriptsï¼Œç›¸ä¿¡ä½ èƒ½çœ‹åˆ°ä¸å°‘å‘½ä»¤ï¼Œstartã€buildç­‰ç­‰ï¼Œåœ¨æ­¤å¤„å¢žåŠ ä¸€æ¡å‘½ä»¤ï¼Œå†…å®¹å¤§æ¦‚å¦‚ä¸‹ï¼š1&quot;dist&quot;: &quot;npm run build &amp;&amp; rsync -p22 -avz --delete-after dist/ root@x.x.x.x:/opt/site/test/antd-pro&quot;, å…¶ä»–æ›´å¤šå‘½ä»¤ï¼Œåœ¨åŽé¢æ‹¼æŽ¥ å¤šä¸ª&amp;&amp;å°±å¯ä»¥ã€‚ è¿è¡Œï¼š1yarn dist æˆ–è€…1npm run dist è§£é‡Šï¼šè¿™å¥è¯ä¼šå…ˆæ‰§è¡Œnpm run buildç„¶åŽå†å°†distç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œå½“ç„¶éœ€è¦æ‚¨é…å¥½æœ¬åœ°åˆ°æœåŠ¡å™¨çš„å…å¯†ç™»å½•ã€‚]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macä¸Šå°†mysqlåŠ å…¥çŽ¯å¢ƒå˜é‡classpath]]></title>
    <url>%2F2019%2F07%2F16%2FMac%E4%B8%8A%E5%B0%86mysql%E5%8A%A0%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fclasspath%2F</url>
    <content type="text"><![CDATA[macç³»ç»Ÿä¸Šå®‰è£…äº†mysql serverä»¥åŽï¼Œå‘½ä»¤è¡Œé‡Œæ²¡æœ‰ï¼Œæç¤º command not found: mysqlç®€ä¹¦åœ°å€ macä¸ŠçŽ©å¼€å‘çš„åŒå¿—å¤šåœ¨ä½¿ç”¨itemsçš„oh-my-zshè¿™ä¸ªç¥žå¥‡ï¼Œä¸çŸ¥é“çš„å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ã€‚ é—®é¢˜:æˆ‘æœ¬åœ°å®‰è£…çš„mysqlæœåŠ¡å·²ç»ç”¨äº†å¤§åŠå¹´äº†ï¼Œä»Šå¤©ä¸€ç”¨å‘½ä»¤è¡Œï¼Œå‘çŽ°å±…ç„¶æ²¡æœ‰12345âžœ ~ which mysqlmysql not foundâžœ ~ whereis mysqlâžœ ~ mysqlzsh: command not found: mysql è™½ç„¶æˆ‘åŸºæœ¬ä¸ä¼šç”¨ï¼Œä½†æ˜¯æ—¢ç„¶çŸ¥é“äº†ï¼Œå²‚èƒ½ä¸æŠŠå®ƒæžå¥½ï¼Œä¸‡ä¸€ç”¨å‘¢ï¼ˆå…¶å®žä¸å¤§å¯èƒ½ï¼‰ã€‚ è¿˜æ˜¯stackoverflowå¥½ä½¿ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­å¾ˆå¿«å°±æ‰¾åˆ°äº†ç­”æ¡ˆï¼Œè€Œä¸”é…ç½®ä¹Ÿéžå¸¸easyï¼Œä½†æ˜¯æ¯•ç«Ÿä¸æ˜¯è‡ªå·±çš„ï¼ŒäºŽæ˜¯å°±ç®€å•è®°å½•ä¸€ä¸‹ã€‚ æˆ‘æœ¬åœ°çš„.bash_profileæ–‡ä»¶é‡Œé¢æœ€åŽé¢å·²ç»åŠ äº†ä¸‹é¢çš„å†…å®¹äº†1export PATH=$&#123;PATH&#125;:/usr/local/mysql/bin/ ä½†æ˜¯ä¾ç„¶æ²¡æœ‰ï¼Œè¿™æ˜¯å‰æã€‚ æ–¹æ¡ˆï¼šä¿®æ”¹~/.zshrcæ–‡ä»¶ï¼Œåœ¨æœ€åŽåŠ å…¥1export PATH=$&#123;PATH&#125;:/usr/local/mysql/bin/ ç„¶åŽ1source ~/.zshrc å†æŸ¥çœ‹1234âžœ ~ mysql --versionmysql Ver 14.14 Distrib 5.7.25, for macos10.14 (x86_64) using EditLine wrapperâžœ ~ mysql -root -pEnter password: å®Œã€‚]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>mac</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macä¸Šå®‰è£…å’Œä½¿ç”¨nginx]]></title>
    <url>%2F2019%2F07%2F10%2FMac%E4%B8%8A%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8nginx%2F</url>
    <content type="text"><![CDATA[macç³»ç»Ÿä¸Šå®‰è£…å’Œé…ç½®nginxä¾›å¼€å‘ä½¿ç”¨ ç®€ä¹¦åœ°å€ nginxå®‰è£…åœ¨macç³»ç»Ÿä¸Šï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰è½¯ä»¶éƒ½å¯ä»¥ç”¨brew(brew åˆå«Homebrewï¼Œbrewç±»ä¼¼CentOSç³»ç»Ÿä¸‹çš„Yumè½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½åœ¨Macä¸­æ–¹ä¾¿çš„å®‰è£…è½¯ä»¶æˆ–è€…å¸è½½è½¯ä»¶ )è¿™ä¸ªç¥žå™¨æžå®šï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸€æžšç©·å±Œä¸ä¸ºå•¥éžè¦èˆå¼ƒå›½æ°‘é’ççš„windowsç³»ç»Ÿï¼Œè€Œè´¹åŠ²å·´æ‹‰çš„éžè¦çŽ©é»‘è‹¹æžœçš„åŽŸå› ã€‚è¨€å½’æ­£ä¼ ï¼Œ123brew search nginx # brew æŸ¥è¯¢Nginxbrew install nginx # brew å®‰è£…Nginx å®‰è£…å®ŒæˆåŽï¼Œå¯åœ¨ç»ˆç«¯è¾“é€šè¿‡ brew list nginx æ¥æ˜¾ç¤ºnginxå®‰è£…è·¯å¾„ï¼š é€šè¿‡brew installå®‰è£…åº”ç”¨ä¼šåœ¨/usr/local/Cellar/ç›®å½•ä¸‹ï¼› æŸäº›åº”ç”¨ä¼šè‡ªåŠ¨åˆ›å»ºè½¯é“¾æŽ¥æ”¾åœ¨ /usr/bin æˆ–è€… /usr/sbinï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½å°†æ•´ä¸ªæ–‡ä»¶å¤¹æ”¾åœ¨/usr/local å¯ä»¥ä½¿ç”¨ brew list è½¯ä»¶å (æ¯”å¦‚ brew list Nginx)ç¡®å®šNginxå®‰è£…ä½ç½®ã€‚1234567891011121314151617181920212223242526272829303132333435âžœ ~ brew list nginx/usr/local/Cellar/nginx/1.17.1/.bottle/etc/ (15 files)/usr/local/Cellar/nginx/1.17.1/bin/nginx/usr/local/Cellar/nginx/1.17.1/homebrew.mxcl.nginx.plist/usr/local/Cellar/nginx/1.17.1/html -&gt; ../../../var/www/usr/local/Cellar/nginx/1.17.1/share/man/man8/nginx.8/usr/local/Cellar/nginx/1.17.1/share/nginx/ (2 files)âžœ ~ ll /usr/local/Cellar/nginx/1.17.1total 624-rw-r--r-- 1 mahaiqiang staff 290K 6 25 20:19 CHANGES-rw-r--r-- 1 mahaiqiang staff 678B 7 10 18:57 INSTALL_RECEIPT.json-rw-r--r-- 1 mahaiqiang staff 1.4K 6 25 20:19 LICENSE-rw-r--r-- 1 mahaiqiang staff 49B 6 25 20:19 READMEdrwxr-xr-x 3 mahaiqiang staff 102B 6 25 20:19 bin-rw-r--r-- 1 mahaiqiang staff 571B 7 10 18:57 homebrew.mxcl.nginx.plistlrwxr-xr-x 1 mahaiqiang staff 16B 7 10 18:57 html -&gt; ../../../var/wwwdrwxr-xr-x 4 mahaiqiang staff 136B 6 25 20:19 shareâžœ ~# Nginx wwwç›®å½•âžœ ~ cd /usr/local/Cellar/nginx/1.17.1âžœ 1.17.1 ll ../../../var/wwwtotal 16-rw-r--r-- 1 mahaiqiang staff 494B 6 25 20:19 50x.html-rw-r--r-- 1 mahaiqiang staff 612B 6 25 20:19 index.htmlâžœ 1.17.1 pwd/usr/local/Cellar/nginx/1.17.1âžœ# å¯»æ‰¾Nginx é…ç½®æ–‡ä»¶âžœ ~ find /usr/ -name &quot;nginx.conf&quot;/usr//local/Cellar/nginx/1.17.1/.bottle/etc/nginx/nginx.conf/usr//local/etc/nginx/nginx.conffind: /usr//local/mysql-5.7.25-macos10.14-x86_64/data: Permission deniedfind: /usr//local/mysql-5.7.25-macos10.14-x86_64/keyring: Permission deniedfind: /usr//sbin/authserver: Permission deniedâžœ ~ æ‰§è¡Œnginxå‘½ä»¤å¯åŠ¨ ä½¿ç”¨ä¸€ä¸‹æŒ‡åé…ç½®æ–‡ä»¶ä½ç½®ä¿¡æ¯ï¼Œæ›´å¤šä½¿ç”¨å‚è€ƒLinux ä¸Šæˆ‘å¸¸ç”¨çš„å‡ ç§nginxé…ç½® 1ã€é…ç½®æ–‡ä»¶ä½ç½®1/usr/local/etc/nginx/nginx.conf 2ã€è½¯è¿žæŽ¥12345$ which nginx/usr/local/bin/nginx # /usr/bin/nginx æç¤ºæ²¡æƒé™ï¼Œç›´æŽ¥ç”¨ /usr/local/bin/nginx$ ln -s /usr/local/sbin/nginx /usr/local/bin/nginx 3ã€Nginx éšè—ç‰ˆæœ¬å·nginx é…ç½®æ–‡ä»¶é‡Œå¢žåŠ  server_tokens off;server_tokensä½œç”¨åŸŸæ˜¯http server locationè¯­å¥å—server_tokensé»˜è®¤å€¼æ˜¯onï¼Œè¡¨ç¤ºæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œè®¾ç½®server_tokenså€¼æ˜¯offï¼Œå°±å¯ä»¥åœ¨æ‰€æœ‰åœ°æ–¹éšè—nginxçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚éšè—äº† Nginx ç‰ˆæœ¬å·åŽï¼Œé‡å¯Nginxå³å¯ 4ã€å¤šæ–‡ä»¶é…ç½®ç»†å¿ƒçš„ä½ æ‰“å¼€nginx.configä¼šå‘çŽ°æ–‡ä»¶æœ€åŽä¸€è¡Œæ˜¯è¿™å¥ include servers/*; æ²¡é”™ï¼Œè¿™å¥çš„æ„æ€ä½ å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸‹æ”¾è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªserverç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ä¼šè¢«åŠ å…¥åˆ°ä¸»é…ç½®æ–‡ä»¶ä¸­ã€‚ å‰©ä¸‹çš„çŽ©æ³•è¯·å‚è€ƒLinux ä¸Šæˆ‘å¸¸ç”¨çš„å‡ ç§nginxé…ç½®ã€‚]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èŽ·å–å¾®ä¿¡å…¬ä¼—å·çš„openidå¹¶å‘é€æ¨¡æ¿æ¶ˆæ¯ä¹‹å‰åŽç«¯]]></title>
    <url>%2F2019%2F06%2F22%2F%20%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E7%9A%84openid%E5%B9%B6%E5%8F%91%E9%80%81%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF%E4%B9%8B%E5%89%8D%E5%90%8E%E7%AB%AF%2F</url>
    <content type="text"><![CDATA[å¾®ä¿¡å…¬ä¼—å·èŽ·å–æŽˆæƒï¼ŒèŽ·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”å‘é€æ¨¡æ¿æ¶ˆæ¯ã€‚ ç®€ä¹¦åœ°å€ å¦‚ä»Šçš„å¼€å‘æ„Ÿè§‰å·²ç»ç¦»ä¸å¼€å¾®ä¿¡äº†ï¼Œè™½ç„¶ç›¸å…³çš„æ–‡ç« å·²ç»æ¯”å¾®ä¿¡å®˜ç½‘è¿˜è¦å¤šäº†ï¼Œä½†æ˜¯åˆ«äººå®¶çš„å†å¥½ä¹Ÿæ˜¯åˆ«äººå®¶çš„ï¼Œè‡ªå·±èµ°ä¸€éè¿˜æ˜¯æŒºæœ‰æ„ä¹‰çš„ã€‚ å¦‚æžœæ˜¯å¼€å‘çŽ¯å¢ƒï¼Œè¿˜æ²¡æœ‰å®¡æ ¸çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œé‚£è‡ªç„¶æ˜¯ä¸èƒ½å‘é€æ¨¡æ¿æ¶ˆæ¯çš„ï¼Œåªèƒ½èŽ·å–åˆ°å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯ã€‚éœ€è¦ç”³è¯·ä¸ªæµ‹è¯•çš„å…¬ä¼—å·ï¼Œå®˜ç½‘å…è´¹ç”³è¯·ã€‚ç”³è¯·å¥½ä»¥åŽï¼Œéœ€è¦åœ¨â€ç½‘é¡µæœåŠ¡â€-&gt;â€ç½‘é¡µè´¦å·â€é‡Œé…ç½®ä¸€ä¸‹oauth2.0çš„æŽˆæƒå›žè°ƒåœ°å€ã€‚ åŽé¢çš„æ“ä½œå°±è·Ÿä¸‹é¢æˆ‘æ­£å¼çš„å¼€å‘è€…å¹³å°ä¸€æ ·äº†ã€‚ ä½œä¸ºå‰ç«¯å°ç™½ï¼Œæœ‰æœºä¼šä»Žé›¶å¼€å§‹ç”³è¯·å…¬ä¼—å·ï¼Œå¼€å‘å…¬ä¼—å·ï¼Œè‡ªç„¶è¦å­¦åˆ°ä»€ä¹ˆè®°å½•ä»€ä¹ˆã€‚æœ¬ç¯‡è®°å½•ä¸‹å¼€å‘çŽ¯å¢ƒæ€Žä¹ˆèŽ·å–openidå¹¶ä¸”å‘é€æ¨¡æ¿æ¶ˆæ¯çš„ã€‚ å‚è€ƒå¾®ä¿¡ç½‘é¡µå¼€å‘æŽˆæƒå®˜æ–¹æ–‡æ¡£å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œå¾®ä¿¡ç½‘é¡µæŽˆæƒï¼Œredirect_uriå‚æ•°é”™è¯¯ï¼Œè§£å†³æ–¹æ³• èŽ·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯1ã€å…³æ³¨å¾®ä¿¡å…¬ä¼—å· 2ã€ç»‘å®šå¾®ä¿¡å·ç§°ä¸ºç½‘é¡µå¼€å‘è€… 3ã€ä¿®æ”¹å¾®ä¿¡ç½‘é¡µæŽˆæƒå…³äºŽç½‘é¡µæŽˆæƒå›žè°ƒåŸŸåçš„è¯´æ˜Ž åœ¨å¾®ä¿¡å…¬ä¼—å·è¯·æ±‚ç”¨æˆ·ç½‘é¡µæŽˆæƒä¹‹å‰ï¼Œå¼€å‘è€…éœ€è¦å…ˆåˆ°å…¬ä¼—å¹³å°å®˜ç½‘ä¸­çš„â€œå¼€å‘ - æŽ¥å£æƒé™ - ç½‘é¡µæœåŠ¡ - ç½‘é¡µå¸å· - ç½‘é¡µæŽˆæƒèŽ·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯â€çš„é…ç½®é€‰é¡¹ä¸­ï¼Œä¿®æ”¹æŽˆæƒå›žè°ƒåŸŸåã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œå¡«å†™çš„æ˜¯åŸŸåï¼ˆæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œè€Œä¸æ˜¯URLï¼Œå› æ­¤è¯·å‹¿åŠ  http:// ç­‰åè®®å¤´ï¼› æŽˆæƒå›žè°ƒåŸŸåé…ç½®è§„èŒƒä¸ºå…¨åŸŸåï¼Œæ¯”å¦‚éœ€è¦ç½‘é¡µæŽˆæƒçš„åŸŸåä¸ºï¼šwww.qq.comï¼Œé…ç½®ä»¥åŽæ­¤åŸŸåä¸‹é¢çš„é¡µé¢http://www.qq.com/music.html ã€ http://www.qq.com/login.html éƒ½å¯ä»¥è¿›è¡ŒOAuth2.0é‰´æƒã€‚ä½†http://pay.qq.com ã€ http://music.qq.com ã€ http://qq.comæ— æ³•è¿›è¡ŒOAuth2.0é‰´æƒ å¦‚æžœå…¬ä¼—å·ç™»å½•æŽˆæƒç»™äº†ç¬¬ä¸‰æ–¹å¼€å‘è€…æ¥è¿›è¡Œç®¡ç†ï¼Œåˆ™ä¸å¿…åšä»»ä½•è®¾ç½®ï¼Œç”±ç¬¬ä¸‰æ–¹ä»£æ›¿å…¬ä¼—å·å®žçŽ°ç½‘é¡µæŽˆæƒå³å¯ã€‚ å…ˆé…ç½®æœåŠ¡å™¨ï¼Œä¿è¯æ ¹åŸŸåä¸‹å¯ä»¥è®¿é—®åˆ°å¾®ä¿¡æä¾›çš„æµ‹è¯•æ–‡ä»¶ã€‚å¦‚æžœæ‚¨æ²¡æœ‰å¯ç”¨çš„åŸŸåï¼Œæˆ–è®¸è¿™ç¯‡æ–‡ç« å¯ä»¥ç¥æ‚¨ä¸€è‡‚ä¹‹åŠ›ã€‚é…ç½®å¥½ä»¥åŽæ˜¯è¿™æ ·çš„ï¼šé…ç½®æŽˆæƒåŸŸå æ³¨æ„ï¼šè¿™ä¸€æ­¥å¦‚æžœæ˜¯tomcatåšçš„å®¹å™¨ï¼Œå°†txtæ–‡ä»¶æ”¾åœ¨tomcat/webapps/ROOT/ä¸‹å³å¯ã€‚ å¦‚æžœç”¨çš„nginxè½¬å‘çš„ï¼Œå°†æ–‡ä»¶æ”¾åœ¨æ ¹ç›®å½•å³å¯ã€‚æ¯”å¦‚ï¼šnginxå¦‚ä¸‹ï¼š12345location / &#123; root /opt/site/alk-patient; index index.html index.htm; try_files $uri $uri/ /index.html;&#125; å¦‚æžœè¿™ä¸€æ­¥æ²¡æœ‰é…ç½®ï¼ŒåŸŸåæ˜¯åŠ ä¸ä¸ŠåŽ»çš„ã€‚ è¿™ä¸€æ­¥è¦æ˜¯æœ‰é—®é¢˜ä¸ä¼šé…ï¼Œåªèƒ½è¯´è¿™ä½åŽå°é€‚åˆåŽ»ä¹°åº†ä¸°åŒ…å­ã€‚ 4ã€èŽ·å–codeå›žè°ƒurlè¦ç”¨urlencodeå¤„ç†ï¼Œæ¯”å¦‚æˆ‘çš„å›žè°ƒåœ°å€æ˜¯https%3a%2f%2fxhapp.3vyd.com%2fMP_verify_5J1FbKvfyqtzU26N.txtè®¾ç½®åœ¨å¾®ä¿¡apié‡Œå¦‚ä¸‹https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&amp;redirect_uri=https%3a%2f%2fxhapp.3vyd.com%2fMP_verify_5J1FbKvfyqtzU26N.txt&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=123#wechat_redirect å°†è¯¥URLç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è®¿é—®åŽ åŒæ„æŽˆæƒï¼Œè·³è½¬æˆåŠŸåŽï¼Œæƒ³è¦çš„codeåœ¨urlé‡Œ 5ã€èŽ·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯èŽ·å–åˆ°äº†codeä»¥åŽï¼Œè°ƒç”¨æœåŠ¡ç«¯çš„æŽ¥å£ï¼ŒèŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼š æœåŠ¡ç«¯çœ‹å¾®ä¿¡å®˜ç½‘APIï¼Œå‡ºé—®é¢˜æ¦‚çŽ‡å¤ªå°ï¼Œä¸å†è´´ä»£ç ã€‚ç²˜ä¸€ä¸‹æœåŠ¡ç«¯æ‰“å‡ºæ¥çš„logï¼š12345678910111213141516171819202122=============== REQUEST START =============== request-id:d0ae146d-86fa-4dfb-8224-f0f90b234e4a request-uri: /api/public/weixin/authorized/001g4LGs0ns6xf1qaPGs0kS1Hs0g4LG4 request-method: :get request-query: request-body: 2019-06-22 15:54:16,796 [XNIO-1 task-2] INFO alk-wxapi.routes.weixin - è¯·æ±‚å¾®ä¿¡access-tokençš„ url: %s https://api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&amp;secret=SECRET&amp;code=001g4LGs0ns6xf1qaPGs0kS1Hs0g4LG4&amp;grant_type=authorization_code 2019-06-22 15:54:17,056 [XNIO-1 task-2] INFO alk-wxapi.routes.weixin - ====== è¯·æ±‚å¾®ä¿¡access-tokenè¿”å›žç»“æžœ ===== : &#123;:access_token 22_laqOVUrxrg5URkqS18gzDqdvgsHlkl5tXxBU6pbaqI9kIqdAdDVMk7zw0gMmoUlR2F1uQnhyzfdlmyixsP3qLA, :expires_in 7200, :refresh_token 22_eHVuzmK9VGxgQsxQV0qwCx9eNoECv7506YXsaXQH9LxEMifD5KwXkTRKAG2WxdlIkj9ZthbSC2wFbtaYGfNClg, :openid oIzsW5sck7l9kmtwDb66_RAvdepY, :scope snsapi_userinfo&#125; 2019-06-22 15:54:17,057 [XNIO-1 task-2] INFO alk-wxapi.routes.weixin - è¯·æ±‚å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯çš„ url: %s https://api.weixin.qq.com/sns/userinfo?access_token=22_laqOVUrxrg5URkqS18gzDqdvgsHlkl5tXxBU6pbaqI9kIqdAdDVMk7zw0gMmoUlR2F1uQnhyzfdlmyixsP3qLA&amp;openid=oIzsW5sck7l9kmtwDb66_RAvdepYlang=zh_CN 2019-06-22 15:54:17,256 [XNIO-1 task-2] INFO alk-wxapi.routes.weixin - ====== è¯·æ±‚å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯user-infoè¿”å›žç»“æžœ ===== : &#123;:sex 1, :nickname é©¬æµ·å¼º, :city Qingdao, :headimgurl http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqxGWwK3lTGAffuGickR7V1VjAiawaAicIsoxGGAD0yWf2toLUZGAiaFHwS8QDMvZ2vLW3QJloKTnIPQ/132, :openid oIzsW5sck7l9kmtwDb66_RAvdepY, :language zh_CN, :province Shandong, :country CN, :privilege []&#125; 2019-06-22 15:54:38,673 [XNIO-1 task-2] INFO jdbc.sqlonly - SELECT * FROM `t_patient` p WHERE p.`deleted` = FALSE AND p.`openid` = &apos;oIzsW5sck7l9kmtwDb66_RAvdepY&apos;; 2019-06-22 15:54:38,834 [XNIO-1 task-2] INFO jdbc.sqlonly - batching 1 statements: 1: INSERT INTO `t_patient`(`patient_id`, `nick_name`, `gender`, `openid`, `province`, `city`, `country`, `headimgurl`, `unionid`, `create_time`, `status`) values (&apos;a8dfb64eb45549b0b109e7170ac131e0&apos;, &apos;é©¬æµ·å¼º&apos;, &apos;ç”·&apos;, &apos;oIzsW5sck7l9kmtwDb66_RAvdepY&apos;, &apos;Shandong&apos;, &apos;Qingdao&apos;, &apos;CN&apos;, &apos;http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqxGWwK3lTGAffuGickR7V1VjAiawaAicIsoxGGAD0yWf2toLUZGAiaFHwS8QDMvZ2vLW3QJloKTnIPQ/132&apos;, NULL, NOW(), 20); 2019-06-22 15:54:38,841 [XNIO-1 task-2] INFO alk-wxapi.routes.weixin - å¾®ä¿¡å…¬ä¼—å·æ³¨å†Œæ–°ç”¨æˆ·ï¼Œç”¨æˆ·ä¿¡æ¯ï¼š%s &#123;:sex 1, :nickname é©¬æµ·å¼º, :city Qingdao, :headimgurl http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqxGWwK3lTGAffuGickR7V1VjAiawaAicIsoxGGAD0yWf2toLUZGAiaFHwS8QDMvZ2vLW3QJloKTnIPQ/132, :openid oIzsW5sck7l9kmtwDb66_RAvdepY, :language zh_CN, :province Shandong, :country CN, :privilege []&#125; 2019-06-22 15:54:38,843 [XNIO-1 task-2] INFO alk-wxapi.middleware.log-interceptor - response: &#123;:code 1, :message &quot;æ“ä½œæˆåŠŸ&quot;, :data &#123;:sex 1, :nickname &quot;é©¬æµ·å¼º&quot;, :city &quot;Qingdao&quot;, :headimgurl &quot;http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqxGWwK3lTGAffuGickR7V1VjAiawaAicIsoxGGAD0yWf2toLUZGAiaFHwS8QDMvZ2vLW3QJloKTnIPQ/132&quot;, :openid &quot;oIzsW5sck7l9kmtwDb66_RAvdepY&quot;, :language &quot;zh_CN&quot;, :province &quot;Shandong&quot;, :country &quot;CN&quot;, :privilege []&#125;&#125; request-id:d0ae146d-86fa-4dfb-8224-f0f90b234e4a 2019-06-22 15:54:38,853 [XNIO-1 task-2] INFO alk-wxapi.middleware.log-interceptor - =============== response END =============== åˆ°æ­¤ï¼ŒèŽ·å¾—ç”¨æˆ·ä¿¡æ¯ã€‚ å…¬ä¼—å¹³å°é…ç½®æ¨¡æ¿æ¶ˆæ¯å®˜æ–¹æ–‡æ¡£ 1ã€ä»Žæ¨¡æ¿åº“ä¸­é€‰æ‹©é€‚åˆè‡ªå·±çš„æ¨¡æ¿ï¼Œæ·»åŠ ç§°ä¸ºè‡ªå·±çš„æ¨¡æ¿ï¼ŒèŽ·å–çš„æ¨¡æ¿id 2ã€æŸ¥çœ‹æ¨¡æ¿æ¶ˆæ¯è¯¦æƒ…ï¼Œç¡®è®¤å­—æ®µå†…å®¹ 3ã€å…¬ä¼—å·é‡ŒåŸºæœ¬é…ç½®-&gt;IPç™½åå•é…ç½®å½“å‰ç½‘ç»œå¤–ç½‘åœ°å€IP 4ã€postmanè°ƒç”¨å‘æ¶ˆæ¯ èŽ·å–access_token å‘é€æ¨¡æ¿æ¶ˆæ¯ æ”¶åˆ°çš„æ¶ˆæ¯ å®Œç¾Žï¼æ”¶å…³ï¼]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å…¬ä¼—å·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojureä¸Šä¸€ä¸ªstartæœ€å¤šçš„é›†åˆæ•°æ®å¤„ç†åº“-specter]]></title>
    <url>%2F2019%2F06%2F21%2Fclojure%E4%B8%8A%E4%B8%80%E4%B8%AAstart%E6%9C%80%E5%A4%9A%E7%9A%84%E9%9B%86%E5%90%88%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%BA%93-specter%2F</url>
    <content type="text"><![CDATA[æ­£å¦‚ç«™ç‚¹ä»‹ç»Clojure(Script)â€™s missing piece ç®€ä¹¦åœ°å€æ­£å¦‚ç«™ç‚¹ä»‹ç»Clojure(Script)â€™s missing piece ä½¿ç”¨ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409(require '[com.rpl.specter :refer :all]) ;;; 1.1 clojure(map inc [1 2 3 4])(into #&#123;&#125; (map inc #&#123;1 2 3 4&#125;)) ;;; 1.2 specter(transform ALL inc #&#123;1 2 3 4&#125; )(transform ALL inc '(1 2 3 4)) ;;; 2 æ–¹ä¾¿çš„æ“ä½œåµŒå¥—æ•°æ®ç»“æž„ ;;; 2.1 Clojure(defn apply-fn-to-map [f m] (into &#123;&#125; (for [[k v] m] [k (f v)]) ))(apply-fn-to-map inc &#123;:a 1 :b 2&#125;)(map #(apply-fn-to-map inc %) [&#123;:a 1 :b 1&#125; &#123;:c 1 :d 1&#125;]) ;;; 2.2 Specter(transform [MAP-VALS] inc &#123;:a 1 :b 2&#125;)(transform [ALL MAP-VALS] inc [&#123;:a 1 :b 1&#125; &#123;:c 1 :d 1&#125;] )(transform [ALL MAP-VALS even?] inc [&#123;:a 1 :b 2&#125; &#123;:c 3 :d 4&#125;] ) ;;; å·¥ä½œåŽŸç†[&#123;:a 1 :b 2&#125; &#123;:c 3 :d 4&#125;] ;;; ALL&#123;:a 1 :b 2&#125;&#123;:c 3 :d 4&#125; ;;; MAP-VAL1234 ;;; even?24 ;;; inc35 ;;; é‡å»º ;;; reverse even?1335 ;;; reverse MAP-VAL&#123;:a 1 :b 3&#125;&#123;:c 3 :d 5&#125; ;;; reverse ALL[&#123;:a 1 :b 3&#125; &#123;:c 3 :d 5&#125;] ;;; å…·ä½“ä½¿ç”¨(def data &#123;:result [&#123;:hy-x 45, :ft-y 36, :immed-other-dispose "æ¶‚æŠ¹è¯æ°´2", :later-other-reaction nil, :cure-id "1", :reaction-time "2019-05-28T14:01:00", :ft-x 34, :immed-other-reaction "èƒ³è†Šçº¢è‚¿3", :list [&#123;:type "REACTION", :main-id "1", :dict-key-name "å±€éƒ¨ååº”", :list [&#123;:dict-value-name "æ‰‹è‡‚è‚¿èƒ€", :create-time "2019-05-01T14:02:25", :id-2 230, :dict-value-id 53, :show true&#125; &#123;:dict-value-name "ç–¼ç—›", :create-time "2019-05-01T14:02:25", :id-2 231, :dict-value-id 55, :show true&#125; &#123;:dict-value-name "æ´»åŠ¨å—é™", :create-time "2019-05-01T14:02:25", :id-2 232, :dict-value-id 57, :show true&#125; &#123;:dict-value-name "çƒ­", :create-time "2019-05-01T14:02:25", :id-2 247, :dict-value-id 54, :show true&#125; &#123;:dict-value-name "ç˜™ç—’", :create-time "2019-05-01T14:02:25", :id-2 248, :dict-value-id 56, :show true&#125; &#123;:dict-value-name "æ´»åŠ¨å—é™", :dict-value-code "HUODONGSHOUXIAN", :parent-id 52, :group-code "REACTION", :dict-value-sort 5, :dict-value-id 57, :show true&#125;], :dict-key-id 52&#125; &#123;:type "REACTION", :main-id "1", :dict-key-name "å…¨èº«éžç‰¹å¼‚æ€§ååº”", :list [&#123;:dict-value-name "å‘çƒ­", :create-time "2019-05-01T14:02:25", :id-2 233, :dict-value-id 59, :show true&#125; &#123;:dict-value-name "ç–²å€¦", :create-time "2019-05-01T14:02:25", :id-2 234, :dict-value-id 60, :show true&#125; &#123;:dict-value-name "å…³èŠ‚ç—›", :create-time "2019-05-01T14:02:25", :id-2 235, :dict-value-id 61, :show true&#125; &#123;:dict-value-name "å…³èŠ‚ç—›", :dict-value-code "GUANJIETONG", :parent-id 58, :group-code "REACTION", :dict-value-sort 3, :dict-value-id 61, :show true&#125;], :dict-key-id 58&#125; &#123;:type "REACTION", :main-id "1", :dict-key-name "è¿‡æ•æ€§ç»“è†œç‚Žç—‡çŠ¶", :list [&#123;:dict-value-name "çœ¼ç—’", :create-time "2019-05-01T14:02:25", :id-2 256, :dict-value-id 75, :show true&#125; &#123;:dict-value-name "çœ¼è‚¿", :create-time "2019-05-01T14:02:25", :id-2 237, :dict-value-id 79, :show true&#125; &#123;:dict-value-name "ç»“è†œå……è¡€", :create-time "2019-05-01T14:02:25", :id-2 257, :dict-value-id 77, :show true&#125; &#123;:dict-value-name "ç•å…‰", :create-time "2019-05-01T14:02:25", :id-2 258, :dict-value-id 78, :show true&#125; &#123;:dict-value-name "çœ¼è‚¿", :dict-value-code "YANZHONG", :parent-id 74, :group-code "REACTION", :dict-value-sort 5, :dict-value-id 79, :show true&#125;], :dict-key-id 74&#125; &#123;:type "DISPOSE", :main-id "1", :dict-key-name "å¤„ç†æ–¹å¼", :list [&#123;:dict-value-name "æŠ—ç»„èƒºè¯", :create-time "2019-05-01T14:02:25", :id-2 238, :dict-value-id 87, :show true&#125; &#123;:dict-value-name "Î²å—ä½“æ¿€åŠ¨å‰‚(é›¾åŒ–)", :create-time "2019-05-01T14:02:25", :id-2 239, :dict-value-id 90, :show true&#125; &#123;:dict-value-name "ç³–çš®è´¨æ¿€ç´ ", :create-time "2019-05-01T14:02:25", :id-2 263, :dict-value-id 88, :show true&#125; &#123;:dict-value-name "å±€éƒ¨å¤„ç†(å†°æ•·)", :create-time "2019-05-01T14:02:25", :id-2 264, :dict-value-id 89, :show true&#125;], :dict-key-id 86&#125; &#123;:type "REACTION", :main-id "1", :dict-key-name "å“®å–˜ç—‡çŠ¶", :list [&#123;:dict-value-name "å’³å—½", :create-time "2019-05-01T14:02:25", :id-2 249, :dict-value-id 64, :show true&#125; &#123;:dict-value-name "èƒ¸é—·", :create-time "2019-05-01T14:02:25", :id-2 250, :dict-value-id 65, :show true&#125; &#123;:dict-value-name "å’½ç—’ä¸é€‚", :dict-value-code "YANYANGBUSHI", :parent-id 62, :group-code "REACTION", :dict-value-sort 5, :dict-value-id 67, :show true&#125;], :dict-key-id 62&#125; &#123;:type "REACTION", :main-id "1", :dict-key-name "é¼»ç‚Žç—‡çŠ¶", :list [&#123;:dict-value-name "é¼»ç—’", :create-time "2019-05-01T14:02:25", :id-2 251, :dict-value-id 69, :show true&#125; &#123;:dict-value-name "å–·åš", :create-time "2019-05-01T14:02:25", :id-2 252, :dict-value-id 70, :show true&#125; &#123;:dict-value-name "æµæ¶•", :create-time "2019-05-01T14:02:25", :id-2 253, :dict-value-id 71, :show true&#125; &#123;:dict-value-name "é¼»å¡ž", :create-time "2019-05-01T14:02:25", :id-2 254, :dict-value-id 72, :show true&#125; &#123;:dict-value-name "é¼»å¹²", :create-time "2019-05-01T14:02:25", :id-2 255, :dict-value-id 73, :show true&#125; &#123;:dict-value-name "é¼»å¹²", :dict-value-code "BIGAN", :parent-id 68, :group-code "REACTION", :dict-value-sort 6, :dict-value-id 73, :show true&#125;], :dict-key-id 68&#125; &#123;:type "REACTION", :main-id "1", :dict-key-name "è¿‡æ•æ€§çš®è‚¤ç—‡çŠ¶", :list [&#123;:dict-value-name "è¨éº»ç–¹", :create-time "2019-05-01T14:02:25", :id-2 259, :dict-value-id 81, :show true&#125; &#123;:dict-value-name "æ¹¿ç–¹", :create-time "2019-05-01T14:02:25", :id-2 260, :dict-value-id 82, :show true&#125; &#123;:dict-value-name "çš®è‚¤ç˜™ç—’", :create-time "2019-05-01T14:02:25", :id-2 261, :dict-value-id 83, :show true&#125; &#123;:dict-value-name "è¡€ç®¡æ€§æ°´è‚¿", :create-time "2019-05-01T14:02:25", :id-2 262, :dict-value-id 84, :show true&#125; &#123;:dict-value-name "è¡€ç®¡æ€§æ°´è‚¿", :dict-value-code "XUEGUANIXINGSHUIZHONG", :parent-id 80, :group-code "REACTION", :dict-value-sort 4, :dict-value-id 84, :show true&#125;], :dict-key-id 80&#125;], :id 1, :later-other-dispose nil, :hy-y 33, :reaction-type "IMMED"&#125; &#123;:hy-x 66, :ft-y 33, :immed-other-dispose "", :later-other-reaction "å¤§é¢ç§¯çº¢ç‚¹", :cure-id "1", :reaction-time "2019-05-21T10:03:00", :ft-x 22, :immed-other-reaction "", :list [&#123;:type "REACTION", :main-id "2", :dict-key-name "å…¨èº«éžç‰¹å¼‚æ€§ååº”", :list [&#123;:dict-value-name "å‘çƒ­", :create-time "2019-05-03T14:03:56", :id-2 240, :dict-value-id 59, :show true&#125; &#123;:dict-value-name "å…³èŠ‚ç—›", :create-time "2019-05-03T14:03:56", :id-2 241, :dict-value-id 61, :show true&#125; &#123;:dict-value-name "å…³èŠ‚ç—›", :dict-value-code "GUANJIETONG", :parent-id 58, :group-code "REACTION", :dict-value-sort 3, :dict-value-id 61&#125;], :dict-key-id 58&#125; &#123;:type "REACTION", :main-id "2", :dict-key-name "å“®å–˜ç—‡çŠ¶", :list [&#123;:dict-value-name "å–˜æ¯", :create-time "2019-05-03T14:03:56", :id-2 242, :dict-value-id 63, :show true&#125; &#123;:dict-value-name "æ°”é—­", :create-time "2019-05-03T14:03:56", :id-2 243, :dict-value-id 66, :show true&#125; &#123;:dict-value-name "å’½ç—’ä¸é€‚", :create-time "2019-05-03T14:03:56", :id-2 244, :dict-value-id 67, :show true&#125; &#123;:dict-value-name "å’½ç—’ä¸é€‚", :dict-value-code "YANYANGBUSHI", :parent-id 62, :group-code "REACTION", :dict-value-sort 5, :dict-value-id 67&#125;], :dict-key-id 62&#125; &#123;:type "DISPOSE", :main-id "2", :dict-key-name "å¤„ç†æ–¹å¼", :list [&#123;:dict-value-name "ç³–çš®è´¨æ¿€ç´ ", :create-time "2019-05-03T14:03:56", :id-2 245, :dict-value-id 88, :show true&#125; &#123;:dict-value-name "å±€éƒ¨å¤„ç†(å†°æ•·)", :create-time "2019-05-03T14:03:56", :id-2 246, :dict-value-id 89, :show true&#125;], :dict-key-id 86&#125;], :id 2, :later-other-dispose "æŠ¹è¯", :hy-y 88, :reaction-type "LATER"&#125;]&#125;) ;;; 2.2.1 select(select [:result ALL :list ALL :list ALL :show ] data) ;;; æ‰¾åˆ°:dict-value-name(select [:result ALL :list ALL :list ALL (submap [:dict-value-name :show]) ] data) ;;; ä½¿ç”¨transformåšæ•°æ®æ›´æ–°(transform [:result ALL :list ALL :list] (constantly "sdsdsdsdsdd") data) ;;; ä½¿ç”¨setvalåšæ•°æ®æ›´æ–° ;;; æ›¿æ¢ä¸€ä¸ªå€¼(setval [:result FIRST :hy-x ] "------" data) ;;; æ›¿æ¢ä¸€ä¸ªcollectionçš„å€¼(setval [:result ALL :list ALL ] "------" data) ;;; æ’å…¥ä¸€ä¸ªæ–°å€¼(setval [:result FIRST :list FIRST :list (nthpath 1) ] "------" data)]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>specter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojureç¼–ç¨‹åˆä½“éªŒ]]></title>
    <url>%2F2019%2F06%2F10%2Fclojure%E7%BC%96%E7%A8%8B%E5%88%9D%E4%BD%93%E9%AA%8C%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨clojureå¼€å‘webæŽ¥å£å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ ç®€ä¹¦åœ°å€ æ”¶è—çš„å­¦ä¹ åœ°å€ï¼šLeiningenä¸­æ–‡æ•™ç¨‹luminuswebå®˜æ–¹æ–‡æ¡£Clojureå¸¸ç”¨åŒ…leiningen API å­¦ä¹ ä¸­å‘½ä»¤è¡Œé‡Œæ•²è¿‡çš„123456789101112131415161718192021222324252627282930313233343536373839404142434445(+ 11 11 1111)(/ 1 2)(doc /)(Take 5 (repeat 10))(1 2 3) =&gt; error&apos;(1 2 3) =&gt; (1 2 3)(doc if)(def a-array [1 2 3])(def b-array [1 2 3])(idertical? a-array b-array)(def a-list (1 2 3))(def b-list [1 2 3])(type a-list)(type b-list)(conj a-list 9)(conj b-list 9)(def my-add (fn [x y] (+ x y)))(my-add 4 2)`#&#123;1 2 3&#125;`(type #&#123;1 2 3&#125;)(type &#123;:a a&#125;)(filter even? [1 2 3 ])(map inc [1 2 3]) å¸¸ç”¨çš„ä¸€äº›å‡½æ•°çš„ä½¿ç”¨ä½“ä¼š map123456789101112131415161718192021222324252627282930313233343536# map éåŽ†listï¼Œæ ¼å¼åŒ–listé‡Œmapçš„keyå¯¹åº”çš„value(require &apos;[clj-time.format :as f])=&gt; nil(def custom-formatter (f/formatter &quot;yyyyMMdd&quot;))=&gt; #&apos;user/custom-formatter(defn convert-format [d] (f/unparse custom-formatter (f/parse (f/formatter :date-hour-minute-second ) d)))=&gt; #&apos;user/convert-format(map (fn [m] (assoc m :create-time (convert-format (:create-time m))) ) [&#123;:id 1 :create-time &quot;2019-04-17T14:47:24&quot;&#125; &#123; :id 2 :create-time &quot;2019-04-17T14:47:44&quot;&#125;])=&gt; (&#123;:id 1, :create-time &quot;20190417&quot;&#125; &#123;:id 2, :create-time &quot;20190417&quot;&#125;)# åœ¨å†™ä¸€ä¸ª(map (fn [m] (assoc m :office-name (format &quot;%s-%s&quot; (:office-id m) (:office-name m)))) [&#123; :office-id &quot;1&quot;, :office-name &quot;è€³é¼»å–‰ç§‘&quot;, :hospital-id &quot;1&quot;, :create-time &quot;2019-04-17T14:47:24&quot;, :deleted 0 &#125;, &#123; :office-id &quot;2&quot;, :office-name &quot;å˜æ€ååº”ç§‘&quot;, :hospital-id &quot;1&quot;, :create-time &quot;2019-04-17T14:47:44&quot;, :deleted 0 &#125;])=&gt;(&#123;:office-id &quot;1&quot;, :office-name &quot;1-è€³é¼»å–‰ç§‘&quot;, :hospital-id &quot;1&quot;, :create-time &quot;2019-04-17T14:47:24&quot;, :deleted 0&#125; &#123;:office-id &quot;2&quot;, :office-name &quot;2-å˜æ€ååº”ç§‘&quot;, :hospital-id &quot;1&quot;, :create-time &quot;2019-04-17T14:47:44&quot;, :deleted 0&#125;) 2ã€dateã€timestampã€string12345678910(import &apos;[java.text SimpleDateFormat]) (import &apos;[java.sql Timestamp]) ;; timelong is the long int time seconds (defn timestamp2date [timelong] (.toString (Timestamp. timelong))) ;; date is date string 04/16/2012 (defn date2timestamp [date] (.getTime (.parse (SimpleDateFormat. &quot;MM/dd/yyyy&quot;) date))) 3ã€conj4ã€seq5ã€when-let6ã€compå°±æ˜¯å¯¹å‚æ•°ä»Žå³åˆ°å·¦ç»„åˆæ‰§è¡Œæ‰€æœ‰å‡½æ•°ï¼Œå¦‚ä¸‹é¢çš„å‡½æ•°ï¼š1((comp f1 f2 .. fn) arg1 arg2 .. argn) å¯ä»¥è½¬å˜ä¸ºï¼š1(f1 (f2 (.. (fn arg1 arg2 .. argn)))) ä¸¾ä¾‹12345678((comp str +) 8 8 8) ;;=&gt; &quot;24&quot;(filter (comp not zero?) [0 1 0 2 0 3 0 4]);;=&gt; (1 2 3 4)(map (comp - (partial + 3) (partial * 2)) [1 2 3 4]);;=&gt; (-5 -7 -9 -11) 7ã€partialå½¢å¦‚ï¼š((partial f arg1 arg2 .. argn) arga argb .. argz)å°±æ˜¯æ‰§è¡Œï¼š(f arg1 arg2 .. argn arga argb .. argz)æ³¨æ„ï¼šåå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒåŽé¢è‡³å°‘æœ‰1ä¸ªå…¶ä»–å‚æ•°partialå‡½æ•°ç§°ä¸ºâ€œåå‡½æ•°â€æˆ–è€…â€œéƒ¨åˆ†å®Œæ•´å‡½æ•°â€ï¼Œå› ä¸ºå®ƒæ˜¯ä¸å®Œæ•´çš„ï¼Œå®šä¹‰ä¹Ÿç”¨defè€Œä¸æ˜¯defnã€‚12345678user=&gt; (def hundred-times (partial * 100))#&apos;user/hundred-timesuser=&gt; (hundred-times 5)500user=&gt; (hundred-times 4 5 6)12000 8ã€reduce9ã€apply å‡½æ•°é—´å¯¹æ¯”ä½¿ç”¨1ã€assoc vs update-in vs assoc-inè¯´æ³•ä¸ä¸€ï¼Œè¯¦æƒ…å‚è€ƒAssoc-vs-Update/assocï¼Œåªå…è®¸æ›´æ–°æ•°æ®ç»“æž„çš„ç¬¬ä¸€å±‚ã€‚å¤„ç†æ•°æ®çš„æ€§èƒ½æœ€é«˜ï¼Œå‡ ä¹Žæ˜¯assoc-inçš„ä¸¤å€ã€‚assoc-in å’Œupdate-in å¯ä»¥ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼æ”¹å˜æ•°æ®ç»“æž„çš„å†…å±‚ã€‚å¦‚æžœæ–°çš„å€¼ä¸ä¾èµ–æ—§å€¼ï¼Œassoc-inå°±å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œä¸éœ€è¦ä½¿ç”¨update-in;åœ¨æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œä½¿ç”¨update-in123456(defrecord Person [fname lname address]ï¼‰(defrecourd Address [street city state zip])(def stu (Person. &quot;Stu&quot; &quot;Halloway&quot; (Address. &quot;200 N Mangum&quot; &quot;Durham&quot; &quot;NC&quot; 27707)))(assoc stu :fname &quot;Stuart&quot;)(upate-in stu [:address :zip] inc) æœ‰ç”¨çš„ä»£ç æ®µ1ã€è®°å½•æŽ¥å£å“åº”æ—¶é—´middleware123456(defn record-response-time [handler] (fn [req] (let [start-date (System/currentTimeMillis)] (handler req) (let [res-time (- (System/currentTimeMillis) start-date)] (println (format &quot;%s took %d ms&quot; (:uri req) res-time)))))) éœ€è¦æ³¨æ„çš„æ˜¯ record-response-time éœ€è¦æ”¾åœ¨ middleware æœ€å¤–å±‚ï¼Œè¿™æ ·å®ƒæ‰èƒ½çºªå½•ä¸€ä¸ªè¯·æ±‚ç»è¿‡æ‰€æœ‰ middleware + handler å¤„ç†çš„æ—¶é—´ã€‚ 2ã€ç§»é™¤mapä¸­å€¼ä¸ºnilçš„keyå‚è€ƒclojure nil? - Remove nil values from a map?æˆ‘ä½¿ç”¨çš„ä¸¤ä¸ª1(into &#123;&#125; (filter #(not (nil? (val %))) &#123;:a true :b false :c nil&#125;)) 1(into &#123;&#125; (remove #(nil? (val %)) &#123;:a true :b false :c nil&#125;))]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringBoot ä¹‹Servletå¯åŠ¨å‰å’Œé…ç½®çƒ­æ›´æ–°]]></title>
    <url>%2F2019%2F06%2F09%2FSpringBoot%20%E4%B9%8BServlet%E5%90%AF%E5%8A%A8%E5%89%8D%E5%92%8C%E9%85%8D%E7%BD%AE%E7%83%AD%E6%9B%B4%E6%96%B0%2F</url>
    <content type="text"><![CDATA[éœ€è¦åœ¨servletå¯åŠ¨åŽå’Œé”€æ¯å‰åšç‚¹å•¥ï¼Ÿéœ€è¦çƒ­æ›´æ–°é…ç½®æ–‡ä»¶ï¼Ÿæœ¬æ–‡è®°å½•è¿™ä¸¤ä¸ªæ“ä½œ ç®€ä¹¦åœ°å€ æœ‰ä¸ªé¡¹ç›®é‡Œç”²æ–¹ç²‘ç²‘æäº†ä¸ªéœ€æ±‚ï¼šç»™æ‰€æœ‰æ‰‹æœºå·é»˜è®¤æ²¡å¤©æœ€å¤šå‘é€50æ¡çŸ­ä¿¡ï¼Œä½†æ˜¯å¯ä»¥æ”¹ï¼Œä¿®æ”¹æˆ51çš„è¯ï¼Œé‚£å°±æ¯å¤©å†å¤šå‘ä¸€æ¡å‘—ã€‚ éœ€æ±‚å¬èµ·æ¥å¾ˆç®€å•ï¼ŒæŠŠ50å­˜åœ¨æ•°æ®åº“çš„system_configè¡¨ä¸­ï¼Œæ¯æ¬¡å‘é€æ—¶ï¼ŒæŸ¥è¯¢ç„¶åŽåˆ¤æ–­ä¸‹ã€‚ é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­çƒ­æ›´æ–°å¯ä»¥ä½¿é…ç½®ç”Ÿæ•ˆï¼Œä½†æ˜¯æ˜¯ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå› ä¸ºä¿®æ”¹åŽçš„å€¼æ²¡æœ‰ä¿å­˜å®¹å™¨é‡å¯åŽå°±å¤±æ•ˆã€‚ ä½†æ˜¯èªæ˜Žå¦‚ä½ ï¼Œè¿™ä¸€å®šä¸æ˜¯æœ€ä¼˜çš„ã€‚ è¿™ä¸ªéœ€æ±‚ä¸æ˜¯æˆ‘å®žçŽ°çš„ï¼Œä½†æ˜¯æˆ‘å‚ä¸Žäº†æ–¹æ¡ˆè®¨è®ºï¼ŒçŽ°åœ¨å·²ç»å®žçŽ°ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ–¹æ¡ˆå’Œæ–¹å¼ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚ æ–¹æ¡ˆä¸€ï¼š 1ã€é»˜è®¤é…ç½®å­˜å‚¨åœ¨DBä¸­ 2ã€å®¹å™¨å¯åŠ¨åŽä»ŽDBä¸­è¯»å–é…ç½®æ•°æ®ï¼Œå¹¶å­˜å…¥Redisï¼ŒåŽé¢ä½¿ç”¨æ—¶ä»¥redisä¸ºå‡†ï¼Œå¦‚æžœredisä¸¢å¤±äº†ï¼Œä»ŽDBé‡æ–°èŽ·å–ã€‚3ã€ä¿®æ”¹é…ç½®æ—¶ä¿®æ”¹redisä¸­çš„é…ç½®æ•°æ®ï¼Œå¹¶åŒæ­¥ä¿®æ”¹DBé‡Œçš„æ•°æ®ã€‚ å¼•å…¥redisçš„å¥½å¤„æ—¶æ¯æ¬¡å‘é€æ—¶æ— éœ€è¿›è¡ŒDBçº§çš„æŸ¥è¯¢ï¼Œæé«˜ç›¸åº”æ•ˆçŽ‡ã€‚æ–¹æ¡ˆäºŒï¼š 1ã€é»˜è®¤é…ç½®å­˜å‚¨åœ¨DBä¸­2ã€å®¹å™¨å¯åŠ¨åŽï¼Œå°†ä»ŽDBä¸­æŸ¥è¯¢åˆ°çš„æ•°æ®ï¼Œåˆ›å»ºå‡ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚3ã€ä¿®æ”¹é…ç½®æ—¶ä¿®æ”¹DBä¸­çš„æ•°æ®ï¼ŒåŒæ—¶ä½¿ç”¨é…ç½®çƒ­æ›´æ–°ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å€¼ã€‚ å¾ˆæ˜Žæ˜¾é‡ç‚¹æ˜¯å®¹å™¨å¯åŠ¨åŽè¯»å–DBä¸­çš„æ•°æ®ï¼Œæœ¬æ–‡ä½¿ç”¨æ–¹æ¡ˆäºŒï¼Œä¸Šæºç ï¼š ç³»ç»Ÿå±žæ€§table123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import javax.persistence.Entity;import javax.persistence.GeneratedValue;import javax.persistence.Id;import javax.persistence.Inheritance;import javax.persistence.InheritanceType;import javax.persistence.Table;import org.hibernate.annotations.GenericGenerator;import lombok.Data;import lombok.ToString;/** * é…ç½®æ–‡ä»¶æ•°æ®è¡¨ * */@ToString@Data@Entity@Table(name = &quot;t_sys_config&quot;)@Inheritance(strategy = InheritanceType.SINGLE_TABLE)public class SysConfig &#123; /** * ä¸»é”® */ @Id @GenericGenerator(name = &quot;snowFlakeId&quot;, strategy = &quot;com.hczt.haier.commoncenter.jpa.SnowflakeIdentifierGenerator&quot;) @GeneratedValue(generator = &quot;snowFlakeId&quot;) private Long id; /** * å±žæ€§ç¼–ç  */ private String code; /** * å±žæ€§å€¼ */ private String value; /** * å±žæ€§åç§° */ private String name; /** * å±žæ€§æè¿° */ private String description;&#125; åŠ è½½SystemConfig12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485import java.util.Map;import java.util.Properties;import java.util.regex.Pattern;import java.util.stream.Collectors;import javax.annotation.PostConstruct;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Configuration;import org.springframework.core.env.ConfigurableEnvironment;import org.springframework.core.env.MutablePropertySources;import org.springframework.core.env.PropertiesPropertySource;import org.springframework.core.env.PropertySource;import com.hczt.haier.smscenter.db.entity.SysConfig;import com.hczt.haier.smscenter.service.SysConfigService;import lombok.extern.slf4j.Slf4j;/** * ç³»ç»Ÿå±žæ€§é…ç½® * */@Slf4j@Configurationpublic class SystemConfig &#123; @Autowired private ConfigurableEnvironment environment; @Autowired private SysConfigService sysConfigService; /** * ä»Žæ•°æ®åº“åŠ è½½é…ç½®æ–‡ä»¶ä¿¡æ¯ */ @PostConstruct public void initDbPropertySourceUsage() &#123; log.info("ä»Žæ•°æ®åº“ä¸­åŠ è½½å±žæ€§é…ç½®æ–‡ä»¶å¼€å§‹"); // èŽ·å–ç³»ç»Ÿå±žæ€§é›†åˆ MutablePropertySources propertySources = environment.getPropertySources(); // ä»Žæ•°æ®åº“ä¸­èŽ·å–è‡ªå®šä¹‰å˜é‡è¡¨ Map&lt;String, String&gt; collect = sysConfigService.findAll().stream().collect(Collectors.toMap(SysConfig::getCode, SysConfig::getValue)); log.info("ä»Žæ•°æ®åº“ä¸­èŽ·å–è‡ªå®šä¹‰å˜é‡è¡¨å®Œæˆï¼ŒèŽ·å–åˆ°çš„æ•°æ®ä¸ºã€&#123;&#125;ã€‘", collect); // å°†è½¬æ¢åŽçš„åˆ—è¡¨åŠ å…¥å±žæ€§ä¸­ Properties properties = new Properties(); properties.putAll(collect); PropertiesPropertySource constants = new PropertiesPropertySource("system-config", properties); // å®šä¹‰å¯»æ‰¾å±žæ€§çš„æ­£åˆ™ï¼Œè¯¥æ­£åˆ™ä¸ºç³»ç»Ÿé»˜è®¤å±žæ€§é›†åˆçš„å‰ç¼€ Pattern pattern = Pattern.compile("^application*"); // æŽ¥æ”¶ç³»ç»Ÿé»˜è®¤å±žæ€§é›†åˆçš„åç§° String name = null; // æŽ¥æ”¶æ˜¯å¦æ‰¾åˆ°ç³»ç»Ÿé»˜è®¤å±žæ€§é›†åˆ boolean flag = false; // éåŽ†å±žæ€§é›†åˆ for (PropertySource&lt;?&gt; source : propertySources) &#123; // æ­£åˆ™åŒ¹é… if (pattern.matcher(source.getName()).matches()) &#123; // æŽ¥æ”¶åç§° name = source.getName(); // å˜æ›´æ ‡è¯† flag = true; break; &#125; &#125; if (flag) &#123; // æ‰¾åˆ°åˆ™å°†è‡ªå®šä¹‰å±žæ€§æ·»åŠ åˆ°è¯¥å±žæ€§å‰ propertySources.addBefore(name, constants); &#125; else &#123; // æœªæ‰¾åˆ°åˆ™é»˜è®¤æ·»åŠ åˆ°ç¬¬ä¸€ä½ propertySources.addFirst(constants); &#125; log.info("ä»Žæ•°æ®åº“ä¸­åŠ è½½å±žæ€§é…ç½®æ–‡ä»¶ç»“æŸ"); &#125;&#125; é‡Œé¢çš„SysConfigServiceåŠä¸æ‰“äº†ï¼Œç›´æŽ¥è°ƒç”¨äº†Jpaçš„Repositoryè€Œå·²ã€‚ @PostConstructæ³¨è§£æ­£æ˜¯ä¸ºè§£å†³å®¹å™¨å¯åŠ¨åŽå¹²å•¥è€Œç”Ÿï¼Œä¸Žå…¶ç›¸é…çš„æ˜¯@PreDestroyå®¹å™¨é”€æ¯å‰å¹²ç‚¹å•¥ã€‚è¢«@PostConstructä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æœåŠ¡å™¨åŠ è½½Servletçš„æ—¶å€™è¿è¡Œï¼Œå¹¶ä¸”åªä¼šè¢«æœåŠ¡å™¨æ‰§è¡Œä¸€æ¬¡ã€‚PostConstructåœ¨æž„é€ å‡½æ•°ä¹‹åŽæ‰§è¡Œï¼Œinitï¼ˆï¼‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚PreDestroyï¼ˆï¼‰æ–¹æ³•åœ¨destroyï¼ˆï¼‰æ–¹æ³•çŸ¥æ€§ä¹‹åŽæ‰§è¡Œå¦å¤–ï¼Œspringä¸­Constructorã€@Autowiredã€@PostConstructçš„é¡ºåºå…¶å®žä»Žä¾èµ–æ³¨å…¥çš„å­—é¢æ„æ€å°±å¯ä»¥çŸ¥é“ï¼Œè¦å°†å¯¹è±¡pæ³¨å…¥åˆ°å¯¹è±¡aï¼Œé‚£ä¹ˆé¦–å…ˆå°±å¿…é¡»å¾—ç”Ÿæˆå¯¹è±¡aå’Œå¯¹è±¡pï¼Œæ‰èƒ½æ‰§è¡Œæ³¨å…¥ã€‚æ‰€ä»¥ï¼Œå¦‚æžœä¸€ä¸ªç±»Aä¸­æœ‰ä¸ªæˆå‘˜å˜é‡pè¢«@Autowriedæ³¨è§£ï¼Œé‚£ä¹ˆ@Autowiredæ³¨å…¥æ˜¯å‘ç”Ÿåœ¨Açš„æž„é€ æ–¹æ³•æ‰§è¡Œå®Œä¹‹åŽçš„ã€‚å¦‚æžœæƒ³åœ¨ç”Ÿæˆå¯¹è±¡æ—¶å®ŒæˆæŸäº›åˆå§‹åŒ–æ“ä½œï¼Œè€Œååè¿™äº›åˆå§‹åŒ–æ“ä½œåˆä¾èµ–äºŽä¾èµ–æ³¨å…¥ï¼Œé‚£ä¹ˆä¹…æ— æ³•åœ¨æž„é€ å‡½æ•°ä¸­å®žçŽ°ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨@PostConstructæ³¨è§£ä¸€ä¸ªæ–¹æ³•æ¥å®Œæˆåˆå§‹åŒ–ï¼Œ@PostConstructæ³¨è§£çš„æ–¹æ³•å°†ä¼šåœ¨ä¾èµ–æ³¨å…¥å®ŒæˆåŽè¢«è‡ªåŠ¨è°ƒç”¨ã€‚ å®šä¹‰å±žæ€§åˆ·æ–°ç›‘å¬å™¨1234567891011121314151617181920212223242526272829import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cloud.context.scope.refresh.RefreshScopeRefreshedEvent;import org.springframework.context.annotation.Configuration;import org.springframework.context.event.EventListener;import lombok.extern.slf4j.Slf4j;/** * è‡ªå®šä¹‰å±žæ€§åˆ·æ–°ç›‘å¬å™¨ * å½“è°ƒç”¨/actuator/refreshæŽ¥å£æ—¶ä¼šè°ƒç”¨onRefreshæ–¹æ³• * */@Slf4j@Configurationpublic class PropertiesRefreshEventListener &#123; @Autowired private SystemConfig systemConfig; /** * å±žæ€§åˆ·æ–°äº‹ä»¶ç›‘å¬æ–¹æ³• * å½“æ­¤æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè¡¨ç¤º/actuator/refreshæ–¹æ³•è¢«è°ƒç”¨ * @param event */ @EventListener(RefreshScopeRefreshedEvent.class) public void onRefresh(RefreshScopeRefreshedEvent event) &#123; log.info("é‡æ–°ä»Žæ•°æ®åº“è£…è½½å±žæ€§"); systemConfig.initDbPropertySourceUsage(); &#125;&#125; å¯åŠ¨é…ç½®çƒ­æ›´æ–°12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * çŸ­ä¿¡å‘é€æŽ¥å£ï¼ˆé‡‡ç”¨redis channel å®žçŽ° pub/sub æ¨¡å¼ï¼‰ * @param ipInfo å®¢æˆ·ç«¯ipä¿¡æ¯ * @param appInfo è¯·æ±‚åº”ç”¨ä¿¡æ¯ * @param msgInfo çŸ­ä¿¡å‘é€ä¿¡æ¯ * @return */@RefreshScope@PostMapping(value=&quot;/send&quot;)public RtnResult&lt;String&gt; sendSmsCodeChannel(IpInfo ipInfo, AppInfo appInfo, @Validated @RequestBody MsgInfo msgInfo, @Value(&quot;$&#123;smsCode.limitCount&#125;&quot;) Long smsLimitCount) &#123; log.info(&quot;åº”ç”¨ã€&#123;&#125;ã€‘IPåœ°å€ã€&#123;&#125;ã€‘é‡‡ç”¨Redis Channelæ–¹å¼è¯·æ±‚çŸ­ä¿¡å‘é€æŽ¥å£ï¼Œè¯·æ±‚å‚æ•°ä¸ºã€&#123;&#125;ã€‘&quot;, appInfo.getAppId(),ipInfo.getIpAddress(), msgInfo); // åˆ¤æ–­çŸ­ä¿¡å‘é€æ¬¡æ•°æ˜¯å¦è¶…é™ï¼ˆæ¯åº”ç”¨æ¯å¤©æ¯æ‰‹æœºå·ï¼‰ if(checkSmsCountOver(appInfo, msgInfo,smsLimitCount)) &#123; return RtnResult.error(SmsCodeMsg.SMS_COUNT_OVER.fillArgs(msgInfo.getMobile())); &#125; long start = System.currentTimeMillis(); // ç»„è£…å‘é€é˜Ÿåˆ—æ¡ä»¶ AsyncSmsInfo asyncSmsInfo = new AsyncSmsInfo(); asyncSmsInfo.setAppId(appInfo.getAppId()); asyncSmsInfo.setAppName(appInfo.getAppName()); asyncSmsInfo.setMobileSign(appInfo.getMobileSign()); asyncSmsInfo.setSmsCodeExpire(appInfo.getSmsCodeExpire()); asyncSmsInfo.setSmsCodeLength(appInfo.getSmsCodeLength()); asyncSmsInfo.setMobile(msgInfo.getMobile()); asyncSmsInfo.setContent(msgInfo.getContent()); asyncSmsInfo.setIpAddress(ipInfo.getIpAddress()); asyncSmsInfo.setInvokeTime(new Date()); try &#123; // å¼‚æ­¥å‘é€çŸ­ä¿¡ï¼Œå°†ä¿¡æ¯æŽ¨é€åˆ°Redisæ¶ˆæ¯æœåŠ¡é˜Ÿåˆ— publisherService.pushSms(asyncSmsInfo); &#125; catch (BizException e) &#123; return RtnResult.error(SmsCodeMsg.SMS_PUBLISH_ERROR); &#125; long end = System.currentTimeMillis(); log.info(&quot;åº”ç”¨ã€&#123;&#125;ã€‘IPåœ°å€ã€&#123;&#125;ã€‘é‡‡ç”¨Redis Channelæ–¹å¼è¯·æ±‚çŸ­ä¿¡å‘é€æŽ¥å£ï¼Œè¯·æ±‚å‚æ•°ä¸ºã€&#123;&#125;ã€‘å®Œæˆï¼Œæ‰§è¡Œæ—¶é—´ä¸ºã€&#123;&#125;ã€‘ms&quot;, appInfo.getAppId(),ipInfo.getIpAddress(), msgInfo, end-start); return RtnResult.success(StringUtils.EMPTY);&#125; æ–‡ä¸­æåˆ°çš„redis channelå‘é€æ¶ˆæ¯æ¨¡å¼ä¸æ˜¯é‡ç‚¹ï¼Œä¸åœ¨è®²è§£ä½¿ç”¨çš„æ˜¯redisTemplateçš„convertAndSendæ–¹æ³•ï¼Œæœ‰éœ€è¦æ—¶è‡ªè¡ŒæŸ¥é˜…ã€‚ å‚è€ƒ@PostConstructSpringCloudé…ç½®çƒ­æ›´æ–°@RefreshScope,ä»¥åŠæ²¡æœ‰å‡ºçŽ°/refreshçš„åŠ¨æ€åˆ·æ–°åœ°å€,è®¿é—®404çš„è§£å†³åŠžæ³•]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkinsä¸Šä½¿ç”¨shellè„šæœ¬nohupéƒ¨ç½²jaræœåŠ¡åˆ°remoteæœåŠ¡å™¨]]></title>
    <url>%2F2019%2F06%2F03%2Fjenkins%E4%B8%8A%E4%BD%BF%E7%94%A8shell%E8%84%9A%E6%9C%ACnohup%E9%83%A8%E7%BD%B2jar%E6%9C%8D%E5%8A%A1%E5%88%B0remote%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[jenkinsä¸Šä½¿ç”¨shellç”¨nohup java -jaréƒ¨ç½²æœåŠ¡åˆ°è¿œç¨‹æœåŠ¡å™¨é‡åˆ°çš„å‘ ç®€ä¹¦åœ°å€ å…ˆè´´ä¸€ä¸‹ï¼Œæˆ‘çš„jenkinsé‡Œæœ€åŽæ ¸å¿ƒé…ç½®12345678#åœæ­¢æœåŠ¡ï¼Œå¤‡ä»½jarssh -p 22 root@0.0.0.0 &apos;bash -s &apos; &lt; /opt/auto-deploy-scripts/remove_jar.sh /opt/jar/ alk-wxapi-test.jar#copy jarscp -P22 /mnt/jenkins/workspace/alk_api_test_auto_deploy/target/uberjar/alk-wxapi-test.jar root@0.0.0.0:/opt/jar/#é‡å¯æœåŠ¡ssh -p 22 root@0.0.0.0 &apos;bash -s&apos; &lt; /opt/auto-deploy-scripts/start_jar.sh /usr/local/jdk1.8.0_212 /opt/jar/ alk-wxapi-test.jar remove_jar.shè„šæœ¬ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142#!/bin/bash#èŽ·å–ç¬¬ä¸€ä¸ªå‚æ•°,jaråŒ…è·¯å¾„,å…ˆå¤‡ä»½,å†å‘å¸ƒjar_path=$1#!ç¼–è¯‘å¥½çš„jaråŒ…åç§°jar_name=$2file=$jar_path$jar_namebak_file=`date +%Y%m%d%H%M%S`.$jar_namebak_path=&quot;bak/&quot;if [ $jar_name == &quot;&quot; ] ;thenecho &quot; jar name is null&quot;exit 5elseecho &quot;================== service stop start=======================&quot;pid=`ps -aux | grep $jar_name | grep -v bash |grep -v grep | awk &apos;&#123;print $2&#125;&apos;`if [ -n &quot;$&#123;pid&#125;&quot; ]then#!kill -9 å¼ºåˆ¶ç»ˆæ­¢ echo &quot;kill -9 çš„pid:&quot; $pid kill -9 $pidfiecho &quot;================== service stop end =======================&quot;echo &quot;service stop successed!&quot;echo &quot;================== jar backup start =======================&quot;#!å°†çŽ°æœ‰çš„jarå¤‡ä»½åŽï¼Œå°†æ–°çš„jaråŒ…æ›¿æ¢cd $jar_pathecho &quot;file origin is: $file&quot;echo &quot;backup jar is: $jar_path$bak_path&quot;if [ -f &quot;$file&quot; ]thenrm -rf $jar_path$bak_path/*mv $jar_name $bak_filecp $bak_file $jar_path$bak_pathrm -rf $bak_filefiecho &quot;================== jar backup end =======================&quot;fi start_jar.shè„šæœ¬å†…å®¹ï¼š12345678910111213141516171819202122232425#!å¯åŠ¨åº”ç”¨#!stop.sh#!/bin/bashecho &quot;================== startup start =======================&quot;#èŽ·å–ç¬¬1ä¸ªå‚æ•°ï¼Œjdkçš„å®‰è£…è·¯å¾„jdk_path=$1#èŽ·å–ç¬¬2ä¸ªå‚æ•°,jaråŒ…è·¯å¾„,å…ˆå¤‡ä»½,å†å‘å¸ƒjar_path=$2#ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¼–è¯‘å¥½çš„jaråŒ…åç§°jar_name=$3file=$jar_path$jar_name#è¿œç¨‹æ‰§è¡Œè¯¥è„šæœ¬æ—¶æ”¹å˜äº†çŽ¯å¢ƒå˜é‡ï¼Œæ‰¾ä¸åˆ°javaçš„çŽ¯å¢ƒå˜é‡ï¼Œæç¤ºï¼šnohup: failed to run command â€˜javaâ€™: No such file or directory#æ‰€ä»¥éœ€è¦åŠ ä¸Šä»¥ä¸‹javaçš„çŽ¯å¢ƒå˜é‡ï¼Œå…¶ä¸­JAVA_HOMEçš„å€¼ï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œå‘½ä»¤echo $JAVA_HOMEå¾—åˆ°ï¼Œæ¯ä¸ªäººçš„javaçŽ¯å¢ƒå˜é‡è®¾ç½®ä¸ä¸€æ ·#è¯¥é—®é¢˜å‚è€ƒè‡ªï¼šhttps://stackoverflow.com/questions/20791846/zookeeper-not-starting-nohup-errorexport JAVA_HOME=$&#123;jdk_path&#125;export PATH=$JAVA_HOME/bin:$PATHecho &quot;æŽˆäºˆå½“å‰ç”¨æˆ·æƒé™&quot;#chmod 777 $fileecho &quot;æ‰§è¡Œ.....&quot;cd $jar_pathnohup java -jar $file &gt; $&#123;jar_path&#125;/log/nohup.log 2&gt;&amp;1 &amp;echo &quot;å¯åŠ¨jarçš„å‘½ä»¤: nohup java -jar $file &gt; $&#123;jar_path&#125;log/nohup.log 2&gt;&amp;1 &amp; &quot;echo &quot;================== startup end =======================&quot; remove_jar.shå’Œstart_jar.shåœ¨jenkinsæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦å°†è¿™ä¸¤ä¸ªshellåœ¨0.0.0.0ï¼ˆä¸èƒ½æš´éœ²ï¼‰çš„è¿œç«¯åŽ»æ‰§è¡Œæ²¡é”™ï¼Œå®¢å®˜æ‚¨ä¸€çœ¼å°±çœ‹å‡ºæ¥äº†ï¼Œè§‰å¾—ç®€å•çš„ä¸å€¼ä¸€æå§ï¼Œå…ˆåˆ«ç€æ€¥ï¼Œå¯¹æœè¿™ä¸ªé—®é¢˜çš„å°èœé¸¡æ¥è¯´è¿™é‡Œé¢ä¹Ÿæ˜¯å¤§æœ‰æ–‡ç« ï¼Œå¬æˆ‘ä¸€ä¸€é“æ¥ã€‚ 1ã€ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šps -ef|grep xxx.jaræŸ¥åˆ°å¤šä½™çš„pidçŽ°è±¡ï¼šåœ¨0.0.0.0ä¸Šè¡Œps -ef | grep alk-wxapi-test.jar | grep -v grep | awk &#39;{print $2}&#39;åªèƒ½æŸ¥åˆ°ä¸€ä¸ªpidï¼Œä½†æ˜¯æŠŠè¿™å¥è¯æ”¾åˆ°shellè„šæœ¬é‡Œï¼Œåœ¨æœ¬åœ°ä½¿ç”¨å‘½ä»¤ä¸Šè¿œç«¯æ‰§è¡Œï¼Œå°±ä¼šæ‰¾åˆ°3ä¸ªpidï¼Œè€Œä¸”kill æ—¶æç¤ºå¤±è´¥çš„é”™è¯¯ã€‚çŽ°åœ¨å·²ç»çŸ¥é“åŽŸå› äº†ï¼Œä½†æ˜¯å½“æ—¶ç¡®å®žæ˜¯ä¸ªé—®é¢˜ã€‚å·²ç»è§£å†³ä¸æ–¹ä¾¿å¤çŽ°äº†ï¼Œå› æ­¤å°±æè¿°ä¸€ä¸‹å°±è¡Œäº†ã€‚åŽŸå› ï¼šshellé‡Œçš„è¿™ä¸ªå‘½ä»¤ä¹Ÿæ˜¯é€šè¿‡bashåœ¨è¿œç¨‹æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ‰¾åˆ°çš„åˆ«çš„æ— å…³ç´§è¦çš„pidå…¶å®žæ˜¯bashï¼Œå› æ­¤åœ¨grepæ˜¯é™¤äº†æŽ’é™¤grepæœ¬èº«(grep -v grep)å¤–è¿˜è¦æŽ’é™¤bashï¼ˆgrep -v bashï¼‰æœ€åŽå‘½ä»¤æ˜¯ï¼š1pid=`ps -aux | grep $jar_name | grep -v bash |grep -v grep | awk &apos;&#123;print $2&#125;&apos;` 2ã€è¿œç¨‹æ‰§è¡Œè„šæœ¬ï¼Œé‡Œé¢æœ‰nohup java -jar,å‘ç”Ÿé”™è¯¯ï¼šnohup: failed to run command â€˜javaâ€™: No such file or directoryè¿™æ˜¯å› ä¸ºnohupæ—¶javaçŽ¯å¢ƒå˜é‡æ²¡æœ‰è¯»åˆ°ï¼Œå¤„ç†æ–¹å¼å°±æ˜¯åœ¨nohupæ‰§è¡Œå‰åŠ å…¥12export JAVA_HOME=/usr/local/java/jdk1.8.0_151export PATH=$JAVA_HOME/bin:$PATH 3ã€å…¶ä»–æ€è·¯ å°†jarçš„æœåŠ¡é…ç½®æˆæœåŠ¡å™¨çš„ä¸€ä¸ªserviceï¼Œä½¿ç”¨systemctlåœæ­¢ã€å¯åŠ¨ç­‰ã€‚ ä½¿ç”¨dockeréƒ¨ç½²æœåŠ¡ã€‚ 2019-12-11 è¡¥å……4ã€ç¬¬äºŒæ¡è¯´jdkçš„è·¯å¾„å› ä¸ºæ¯ä¸ªæœåŠ¡ä¼ä¸šéƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨ä¼ æ”¹ï¼Œè¿™ä¸€ç‚¹å·²ç»åœ¨è„šæœ¬ä¸Šåšäº†ä¿®æ”¹ï¼Œå¯åŠ¨è„šæœ¬ä¸Šæºå¸¦çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯jdkçš„å®‰è£…è·¯å¾„ è¿™ä¸¤ä¸ªä¹Ÿéƒ½æ˜¯æ¯”è¾ƒå¥½çš„æ€è·¯ï¼Œä»¥åŽè‚¯å®šæœ‰æœºä¼šä½“éªŒçš„ï¼Œæœ¬ç¯‡åˆ°æ­¤ã€‚ å‚è€ƒ:ps -ef |grep -v åœ¨shell sh è„šæœ¬ä¸­è²Œä¼¼æ— æ•ˆï¼Ÿlinuxä¸‹æ­å»ºzookeeperé›†ç¾¤é‡åˆ°çš„å‘nohup: cannot run commandå¼‚å¸¸è§£å†³Zookeeper not starting, nohup error]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>java</tag>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clojure java interop,ä¾èµ–å†²çªè§£å†³]]></title>
    <url>%2F2019%2F06%2F02%2F2019-06-02-clojure-java-interop-extend%2F</url>
    <content type="text"><![CDATA[clojureä¸­è°ƒç”¨java,è§£å†³jaråŒ…ä¾èµ–å†²çª ç®€ä¹¦åœ°å€ ä»Šå¤©åœ¨clojureä¸­ä½¿ç”¨ç™¾åº¦OCRçš„java apiï¼Œä½†æ˜¯å‘çŽ°å¼•å…¥javaçš„sdkåŽï¼Œé¡¹ç›®ä¸­é…ç½®çš„logbackçš„é…ç½®ä¸Žsdké‡Œçš„slf4jå†²çªï¼Œå¹¶ä¸”ä¸å·§çš„æ˜¯slf4jå†²æŽ‰äº†åŽŸæœ‰çš„logbackçš„é…ç½®ï¼Œè¿™è¿˜äº†å¾—ï¼Œåªèƒ½ä¿®æ”¹åŽå†ä½¿ç”¨å•¦ã€‚1ã€å…ˆä»¥ä¸€ä¸ªåŒ…çš„logé…ç½®å’ŒçŽ°çŠ¶æ¥çœ‹çœ‹çŽ°çŠ¶ã€‚logbacké…ç½®1&lt;logger name=&quot;jdbc.audit&quot; level=&quot;warn&quot;/&gt; jdbc.auditçš„çº§åˆ«æ˜¯warnï¼ŒåŽŸæ¥å¯åŠ¨é¡¹ç›®æ—¶è‡ªç„¶æ˜¯ä¸ä¼šæ‰“å°jdbc.auditçš„æ—¥å¿—çš„ï¼Œå¼•å…¥ç¬¬ä¸‰æ–¹sdkç„¶åŽå¯åŠ¨replï¼Œlogä¸­æœ‰å¦‚ä¸‹å†…å®¹ï¼š1234SLF4J: Class path contains multiple SLF4J bindings.SLF4J: Found binding in [jar:file:/Users/mahaiqiang/.m2/repository/org/slf4j/slf4j-simple/1.7.25/slf4j-simple-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]SLF4J: Found binding in [jar:file:/Users/mahaiqiang/.m2/repository/ch/qos/logback/logback-classic/1.1.3/logback-classic-1.1.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. æç¤ºå†²çªï¼Œå†starté¡¹ç›®æ‰“å‡ºä¸€å †æ— ç”¨çš„logï¼ŒçŽ°çŠ¶æ¼”ç¤ºå®Œæ¯•ã€‚2ã€ä¿®æ”¹jarå†…å®¹å‚è€ƒçš„JAVAä¸­jaråŒ…åç¼–è¯‘å†é‡æ–°ç”Ÿæˆjaræ–‡ä»¶å®Œæ•´æµç¨‹ï¼Œå…ˆçœ‹çœ‹SDKçš„pomé‡Œå¼•ç”¨çš„logä¾èµ–ï¼Œè¯å®žä¸€ä¸‹ï¼š å¦å­˜ä¸ºpomæ–‡ä»¶ï¼Œåˆ é™¤æŽ‰è¿™ä¸ªdependencyï¼Œç„¶åŽå°†pomå¤åˆ¶åˆ°è¿™ä¸ªjaræ‰€åœ¨çš„ç›®å½• ç„¶åŽæ‰§è¡Œä»¥ä¸‹æ“ä½œ123456//è¯¥å‘½ä»¤åˆ›å»ºpomæ–‡ä»¶ä¸ŽåŽŸjaråŒ…è·¯å¾„ä¸€æ ·çš„æ–‡ä»¶å¤¹(å³classæ–‡ä»¶åœ¨jaråŒ…ä¸­çš„åŒ…å)mkdir -p META-INF/maven/com.baidu.aip/java-sdk//ä»Žå½“å‰ç›®å½•æ‹·è´ä¸€ä»½ä¿®æ”¹åŽçš„pom.xmlæ–‡ä»¶åˆ°java-sdkæ–‡ä»¶å¤¹ä¸‹cp pom.xml META-INF/maven/com.baidu.aip/java-sdk//å°†æ–‡ä»¶pom.xmlæ·»åŠ /æ›´æ–°åˆ°çŽ°æœ‰çš„jaræ–‡ä»¶java-sdk-4.11.0.jarä¸­jar uf java-sdk-4.11.0.jar META-INF/maven/com.baidu.aip/java-sdk/pom.xml å†çœ‹jarçš„å†…å®¹ç„¶åŽå¯åŠ¨é¡¹ç›®ï¼šå‘çŽ°è¿˜æ˜¯æç¤ºå†²çªï¼Œä¸Žä¹‹å‰ä¸€æ ·ï¼ŒäºŽæ˜¯æ‰‹åŠ¨åˆ é™¤slf4jçš„slf4j-simpleçš„jarç„¶åŽå†å¯åŠ¨ï¼Œè¿˜æ˜¯ä¸€æ ·ï¼Œæœäº†ä¸€ä¸‹slf4jæžœæ–­è¯¥æŽ‰ï¼Œå†è¯•ä¸€æŠŠå‘—ï¼Œæžœç„¶å¹²å‡€äº†ã€‚ ä»¥åŽæ€Žä¹ˆå‡ºæ¥ï¼Œæ€Žä¹ˆè§£å†³ã€‚å†ç»­å§ï¼Œå…ˆå¹²æ´»è¦ç´§ã€‚2ã€ä½¿ç”¨SDKä¸€èˆ¬æœç´¢clojure java interopå°±ä¼šæœ‰ç»“æžœï¼Œæˆ‘ä¸»è¦çœ‹äº†https://clojure.org/reference/java_interopå’Œ This was a good chance to get familiar with a few of the interop features:Importing with (import java.io.FileReader)Instantiating an object, where new FileReader(path) becomes (FileReader. path)Accessing a class attribute/method, where CSVFormat.DEFAULT becomes CSVFormat/DEFAULT, andCalling an instance method, where record.get(â€œgreetingâ€) becomes (.get record â€œgreetingâ€).I particularly like that the Clojure notation clearly distinguishes class attributes/methods from instance methods eg. CSVFormat/DEFAULT vs. (.get record â€œgreetingâ€).Iâ€™ll still be reaching for Python when a CSV file comes my way, but I was pleasantly surprised at how neat the Clojure version of this code ended up. è¿™æ®µå¯ç¤ºä½¿ç”¨çš„,åœ¨replé‡Œçš„ä»£ç å¦‚ä¸‹ï¼š123456789101112(import com.baidu.aip.ocr.AipOcr)=&gt; com.baidu.aip.ocr.AipOcr(def ocr-client (AipOcr. &quot;16321634&quot; &quot;ppiRhvR7VQLqhaiMH7svO7G9&quot; &quot;my-secret&quot;))=&gt; #&apos;user/ocr-client(.receipt ocr-client &quot;upload/files/81558580941_.pic_1.jpg&quot; (new java.util.HashMap))=&gt;#object[org.json.JSONObject 0x7a4e1225 &quot;&#123;\&quot;log_id\&quot;:7285098450024979673,\&quot;words_result\&quot;:[&#123;\&quot;words\&quot;:\&quot;å±±ä¸œçœè€³é¼»å–‰åŒ»é™¢é¼»å˜æ€ååº”-å—…è§‰é—¨è¯Š\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:29,\&quot;left\&quot;:232,\&quot;width\&quot;:606,\&quot;height\&quot;:63&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;å˜åº”åŽŸç‚¹åˆºè¯•éªŒæŠ¥å‘Šå•\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:104,\&quot;left\&quot;:318,\&quot;width\&quot;:419,\&quot;height\&quot;:45&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;å§“å:\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:218,\&quot;left\&quot;:63,\&quot;width\&quot;:58,\&quot;height\&quot;:25&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ€§åˆ«:å¹´é¾„:å²ç”µè¯\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:212,\&quot;left\&quot;:205,\&quot;width\&quot;:287,\&quot;height\&quot;:30&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ£€æŸ¥æ—¥æœŸ:\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:207,\&quot;left\&quot;:697,\&quot;width\&quot;:103,\&quot;height\&quot;:25&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;å¹´æœˆæ—¥\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:199,\&quot;left\&quot;:876,\&quot;width\&quot;:120,\&quot;height\&quot;:29&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;åç§°\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:302,\&quot;left\&quot;:106,\&quot;width\&quot;:40,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ ‡æœ¬é£Žå›¢ç›´å¾„ç»“æžœ\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:296,\&quot;left\&quot;:220,\&quot;width\&quot;:268,\&quot;height\&quot;:26&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;åç§°\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:295,\&quot;left\&quot;:572,\&quot;width\&quot;:40,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ ‡æœ¬é£Žå›¢ç›´å¾„ç»“æžœ\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:286,\&quot;left\&quot;:694,\&quot;width\&quot;:276,\&quot;height\&quot;:29&#125;&#125;,&#123;\&quot;words\&quot;:\&quot; (mm)\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:328,\&quot;left\&quot;:330,\&quot;width\&quot;:55,\&quot;height\&quot;:17&#125;&#125;,&#123;\&quot;words\&quot;:\&quot; mm)\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:321,\&quot;left\&quot;:806,\&quot;width\&quot;:43,\&quot;height\&quot;:14&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;9\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:370,\&quot;left\&quot;:586,\&quot;width\&quot;:12,\&quot;height\&quot;:14&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;ç²‰å°˜èž¨\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:408,\&quot;left\&quot;:98,\&quot;width\&quot;:62,\&quot;height\&quot;:22&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;å¤§ç±½è’¿èŠ±ç²‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:401,\&quot;left\&quot;:543,\&quot;width\&quot;:100,\&quot;height\&quot;:23&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;2\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:477,\&quot;left\&quot;:126,\&quot;width\&quot;:12,\&quot;height\&quot;:14&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;10\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:470,\&quot;left\&quot;:582,\&quot;width\&quot;:23,\&quot;height\&quot;:16&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;å±‹å°˜èž¨\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:509,\&quot;left\&quot;:102,\&quot;width\&quot;:60,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ¨æ ‘èŠ±ç²‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:503,\&quot;left\&quot;:553,\&quot;width\&quot;:80,\&quot;height\&quot;:22&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;ç‹—æ¯›\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:607,\&quot;left\&quot;:113,\&quot;width\&quot;:42,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æŸ³æ ‘èŠ±ç²‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:603,\&quot;left\&quot;:554,\&quot;width\&quot;:79,\&quot;height\&quot;:23&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;12\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:670,\&quot;left\&quot;:583,\&quot;width\&quot;:22,\&quot;height\&quot;:17&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;çŒ«æ¯›\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:706,\&quot;left\&quot;:116,\&quot;width\&quot;:40,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ¢§æ¡èŠ±ç²‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:702,\&quot;left\&quot;:554,\&quot;width\&quot;:79,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;5\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:773,\&quot;left\&quot;:131,\&quot;width\&quot;:13,\&quot;height\&quot;:14&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;13\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:768,\&quot;left\&quot;:585,\&quot;width\&quot;:21,\&quot;height\&quot;:16&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;é¸­æ¯›ç»’\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:804,\&quot;left\&quot;:106,\&quot;width\&quot;:62,\&quot;height\&quot;:22&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;äº§é»„é’éœ‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:801,\&quot;left\&quot;:554,\&quot;width\&quot;:81,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;14\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:868,\&quot;left\&quot;:586,\&quot;width\&quot;:22,\&quot;height\&quot;:14&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;è‘Žè‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:903,\&quot;left\&quot;:119,\&quot;width\&quot;:40,\&quot;height\&quot;:19&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;é“¾æ ¼å­¢éœ‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:900,\&quot;left\&quot;:557,\&quot;width\&quot;:80,\&quot;height\&quot;:23&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;15\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:955,\&quot;left\&quot;:587,\&quot;width\&quot;:21,\&quot;height\&quot;:16&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;è—œå±žèŠ±ç²‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:990,\&quot;left\&quot;:98,\&quot;width\&quot;:83,\&quot;height\&quot;:24&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;é˜´æ€§å¯¹ç…§\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:987,\&quot;left\&quot;:558,\&quot;width\&quot;:79,\&quot;height\&quot;:23&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;8\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1058,\&quot;left\&quot;:133,\&quot;width\&quot;:14,\&quot;height\&quot;:14&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;16\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1053,\&quot;left\&quot;:588,\&quot;width\&quot;:22,\&quot;height\&quot;:16&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;è±šè‰\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1088,\&quot;left\&quot;:119,\&quot;width\&quot;:42,\&quot;height\&quot;:23&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;é˜³æ€§å¯¹ç…§\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1085,\&quot;left\&quot;:558,\&quot;width\&quot;:80,\&quot;height\&quot;:21&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;æ³¨:1ã€çš®è¯•å‰åº”åœç”¨å£æœæŠ—ç»„èƒºè¯ç‰©3å¤©\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1178,\&quot;left\&quot;:46,\&quot;width\&quot;:372,\&quot;height\&quot;:41&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;2ã€æœ‰ä¸¥é‡çš®è‚¤ç—…å’Œçš®è‚¤æºƒçƒ‚è€…ä¸å¾—åšçš®è‚¤è¯•éªŒ\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1217,\&quot;left\&quot;:121,\&quot;width\&quot;:405,\&quot;height\&quot;:29&#125;&#125;,&#123;\&quot;words\&quot;:\&quot;3ã€ä»¥ä¸Šç»“æžœä¸åšè¯æ˜Žç”¨\&quot;,\&quot;location\&quot;:&#123;\&quot;top\&quot;:1248,\&quot;left\&quot;:120,\&quot;width\&quot;:214,\&quot;height\&quot;:40&#125;&#125;],\&quot;words_result_num\&quot;:41&#125;&quot;] å†è€…ï¼Œå¯ä»¥ä½¿ç”¨ä½¿ç”¨ lein ä¾†ç®¡ç†ä½ æœ¬åœ°çš„ maven repoæ¥è®²jaråšæˆæœ¬åœ°èµ„æºï¼Œå¯¼å…¥åˆ°mavenä»“åº“ï¼Œä¸å†å¤šå†™äº†ã€‚ 3ã€è¿›é˜¶ä¸Šé¢çš„åŠžæ³•æ˜¾ç„¶æ˜¯æ¯”è¾ƒlowçš„ï¼Œä¸åˆ©äºŽæŒç»­åŒ–ï¼Œæ›´é«˜é˜¶çš„æ–¹å¼æ˜¯åœ¨:dependenciesä¸­ä½¿ç”¨:exclusionså…³é”®å­—ï¼Œå¿½ç•¥æŸäº›ä¾èµ–ï¼Œæ¯”å¦‚ä¸Šé¢çš„sdkåº”è¯¥è¿™ä¹ˆç”¨ï¼š12[com.baidu.aip/java-sdk &quot;4.11.0&quot; :exclusions [org.slf4j/slf4j-simple]] 4ã€å…³äºŽdependenciesçš„å…¶ä»–åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œï¼š1234#æŸ¥çœ‹ä¾èµ–å…³ç³»lein deps :tree#åŠ è½½ä¾èµ–lein deps å…¶ä»–æ›´å¤šè¯·å‚ç…§ï¼šhttps://cljdoc.org/d/leiningen/leiningen/2.9.1/api/leiningen.deps 5ã€clojureé‡Œä½¿ç”¨java123456789101112131415;;md5åŠ å¯†(defn get-str-md5 [s] (apply str (map (partial format &quot;%02x&quot;) (.digest (doto (java.security.MessageDigest/getInstance &quot;MD5&quot;) .reset (.update (.getBytes s)))))));;ä¿®æ”¹æ—¶é—´æ ¼å¼(defn format-date-time [timestamp] (-&gt; &quot;yyyyMMddHHmmss&quot; (java.text.SimpleDateFormat.) (.format timestamp)));;èŽ·å–UUID(defn generate-db-id [] (clojure.string/replace (str (java.util.UUID/randomUUID)) &quot;-&quot; &quot;&quot;)) æ›´å¤šclojureå’Œjavaçš„äº¤äº’ä½¿ç”¨å‚çœ‹ï¼šhttps://clojure.org/reference/java_interop]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ·å°”åˆ›å®¢æ±‡ç¬”è®°----å®‰å“ç«¯ç¼–è¯‘å’Œè¿è¡Œ]]></title>
    <url>%2F2019%2F05%2F24%2F%E6%B5%B7%E5%B0%94%E5%88%9B%E5%AE%A2%E6%B1%87%E7%AC%94%E8%AE%B0----%E5%AE%89%E5%8D%93%E7%AB%AF%E7%BC%96%E8%AF%91%E5%92%8C%E8%BF%90%E8%A1%8C%2F</url>
    <content type="text"><![CDATA[åˆ›å®¢æ±‡appåœ¨android studioé‡Œé…ç½®å’Œç¼–è¯‘è¿è¡Œï¼ŒåŠå®‰å“æŠ•å±å·¥å…·æŽ¨è ç®€ä¹¦åœ°å€ å¼€å‘çŽ¯å¢ƒå‡†å¤‡ ä¸‹è½½å®‰è£…android studio å¯åŠ¨è¿è¡Œ é…ç½®ä»£ç†å¦‚æžœèƒ½ç¿»å¢™æœ€å¥½äº†ï¼Œå› ä¸ºä¸€äº›èµ„æºéƒ½éœ€è¦çˆ¬å¢™ï¼Œå®žåœ¨æ²¡æœ‰å—ï¼Œåªèƒ½é€‰æ‹©ä¸ä»£ç†ã€‚ é€‰æ‹©æ ‡å‡†å®‰è£…ï¼Œä¸‹ä¸€æ­¥ï¼Œç­‰å¾…ä¸‹è½½ importåˆ°Portalçš„androidç›®å½•ï¼Œå¯¼å…¥é¡¹ç›® buildå®Œæˆä»¥åŽåœ¨å‘½ä»¤çª—å£å¯åŠ¨æ‰“åŒ…jsbundleæ‰“åŒ…æˆjsbundleæ–‡ä»¶çš„æ–¹å¼å¯ä»¥å‚ç…§å¦ä¸€ç¯‡-æµ·å°”åˆ›å®¢æ±‡ç¬”è®°â€”-å®‰å“ç”Ÿäº§çŽ¯å¢ƒæ‰“åŒ…é…ç½®ã€‚ä¸»è¦æ˜¯ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ‰“åŒ…IOSï¼š1&quot;bundle-ios&quot;: &quot;react-native bundle --entry-file index.js --platform ios --dev false --bundle-output ./ios/main.jsbundle --assets-dest ./ios&quot;, æ‰“åŒ…å®‰å“ï¼š1&quot;bundle-android&quot;: &quot;react-native bundle --entry-file index.js --bundle-output ./android/app/src/main/assets/index.android.bundle --platform android --assets-dest ./android/app/src/main/res/ --dev false&quot;, è¯¥é¡¹ç›®æœ‰ä¸ªæ²¡æœ‰é…ç½®å¥½çš„åœ°æ–¹ï¼Œä¼šå¯¼è‡´ç”Ÿæˆ.htmlæ–‡ä»¶ï¼Œéœ€è¦åˆ é™¤åŽï¼Œå†è¿›è¡ŒåŽé¢çš„æ“ä½œã€‚ å¯åŠ¨é¡¹ç›® yarn 123456789101112131415161718192021Portal git:(master) yarnyarn install v1.15.2[1/4] ðŸ” Resolving packages...[2/4] ðŸšš Fetching packages...[3/4] ðŸ”— Linking dependencies...warning &quot; &gt; react-native-doc-viewer@2.7.8&quot; has incorrect peer dependency &quot;react@^16.3.0-alpha.1&quot;.warning &quot; &gt; react-native-doc-viewer@2.7.8&quot; has incorrect peer dependency &quot;react-native@0.54.3&quot;.warning &quot; &gt; react-native-fs@2.9.12&quot; has incorrect peer dependency &quot;react@^16.2.0&quot;.warning &quot; &gt; react-native-fs@2.9.12&quot; has incorrect peer dependency &quot;react-native@^0.51.0&quot;.warning &quot; &gt; react-native-fs@2.9.12&quot; has unmet peer dependency &quot;prop-types@15.6.0&quot;.warning &quot; &gt; react-native-fs@2.9.12&quot; has unmet peer dependency &quot;create-react-class@^15.6.2&quot;.warning &quot; &gt; react-native-pdf@5.0.8&quot; has incorrect peer dependency &quot;rn-fetch-blob@^0.10.13&quot;.warning &quot; &gt; react-native-svg@6.5.2&quot; has unmet peer dependency &quot;prop-types@^15.5.7&quot;.warning &quot; &gt; react-native-svg-uri@1.2.3&quot; has incorrect peer dependency &quot;react-native-svg@^5.3.0&quot;.warning &quot; &gt; babel-jest@22.0.4&quot; has unmet peer dependency &quot;babel-core@^6.0.0 || ^7.0.0-0&quot;.[4/4] ðŸ”¨ Building fresh packages...warning Your current version of Yarn is out of date. The latest version is &quot;1.16.0&quot;, while you&apos;re on &quot;1.15.2&quot;.info To upgrade, run the following command:$ curl --compressed -o- -L https://yarnpkg.com/install.sh | bashâœ¨ Done in 169.93s.âžœ Portal git:(master) å¯åŠ¨js è¿è¡Œappå› ä¸ºé¡¹ç›®åŠ å…¥äº†IMçš„ä¸€äº›ä¸œè¥¿å¯¼è‡´ä¸èƒ½ç”¨æ¨¡æ‹Ÿå™¨è¿è¡Œï¼ŒçœŸæœºè¿žæŽ¥åŽé€‰æ‹©USBè°ƒè¯•ï¼Œç„¶åŽè¿è¡Œé¡¹ç›®é€‰æ‹©ä¸ä½¿ç”¨instantæŸ¥çœ‹æ—¥å¿—ï¼š é…ç½®JSè°ƒè¯•æ¨¡å¼ é…ç½®ç«¯å£æ˜ å°„ï¼Œè®©æ‰‹æœºç«¯è¿žæŽ¥åˆ°PCçš„js serverä¸Šé¦–å…ˆï¼Œç”µè„‘è¦æœ‰ADBï¼Œä½œä¸ºä¸€åAndroidç»ˆç«¯å¼€å‘ï¼Œè¿™ä¸ªæ˜¯å¿…å¤‡çš„ã€‚ä½†æ˜¯ä¸å·§æˆ‘æ˜¯å®¢ä¸²çš„ï¼Œæ‰€ä»¥æ‰‹åŠ¨å®‰è£…äº†ä¸€ä¸‹ï¼ŒMACä¸Šé€šè¿‡homebrewå®‰è£…å¾ˆç®€å•ï¼Œä¸€å¥å‘½ä»¤ï¼š1brew cask install android-platform-tools æ‰‹åŠ¨å®‰è£…é…ç½®classpathçš„å¯ä»¥å‚è€ƒåœ¨ MAC OS X å®‰è£… ADB (Androidè°ƒè¯•æ¡¥)ã€‚å®‰è£…æˆåŠŸï¼Œå¹¶ä¸”çœŸæœºè®¾ç½®å¥½äº†å¼€å‘è€…æ¨¡å¼ï¼Œå…è®¸è°ƒè¯•çš„è¯ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤çœ‹åˆ°è®¾å¤‡ï¼š1234âžœ ~ adb devicesList of devices attachedc752c893 deviceâžœ ~ æœ‰äº†adbä»¥åŽï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è®¾ç½®æ˜ å°„å…³ç³»,å°†æœ¬åœ°çš„8081æ˜ å°„åˆ°clientçš„80811âžœ ~ adb reverse tcp:8081 tcp:8081 å¦‚æžœadbæ²¡æœ‰é…ç½®åˆ°classpathé‡Œï¼Œå¯ä»¥è¿™æ ·12âžœ ~ cd ~/Library/Android/sdk/platform-tools/âžœ ~ ./adb reverse tcp:8081 tcp:8081 æ›´å¤šadbå‘½ä»¤å¯ä»¥å‚è€ƒAndroidå¸¸ç”¨çš„adbå‘½ä»¤æ€»ç»“ é…ç½®åˆ°ä»¥ä¸Šæ˜ å°„ï¼Œä¸€èˆ¬çœŸæœºä¸Šä¼šè‡ªåŠ¨å¯åŠ¨åº”ç”¨ï¼Œå¯åŠ¨åŽæ‘‡ä¸€æ‘‡ï¼Œå¼¹å‡ºèœå•ï¼ŒæŸ¥çœ‹æœ€æ–°çš„ä¿®æ”¹ã€‚ å¯ä»¥å…ˆæ¥ä¸ªreloadè¯•è¯•ã€‚å¯ä»¥çœ‹åˆ°æ‰‹æœºä¸Šå¼€å§‹reload å†çœ‹çœ‹æœåŠ¡ç«¯ï¼š å¼€å§‹è°ƒè¯•åœ¨åˆšæ‰æ‰‹æœºæ‘‡ä¸€æ‘‡å‡ºæ¥çš„èœå•ä¸­é€‰æ‹©Debug JS Remotelyï¼Œåº”ç”¨é‡å¯ï¼ŒåŒæ—¶çœ‹åˆ°serverç«¯å¯åŠ¨çš„Dev Toolsé»˜è®¤çš„æµè§ˆå™¨ä¹Ÿæ‰“å¼€äº†ä¸€ä¸ªæ–°çš„tabï¼Œå¦‚ä¸‹ï¼š é»˜è®¤ä¸ä¼šæ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼Œéœ€è¦æ‰‹åŠ¨æ‰“å¼€ã€‚æˆ‘ä»¬æ¸…é™¤ä¸€ä¸‹é»˜è®¤çš„logï¼ŒåŠ è½½ä¸‹é¦–é¡µï¼Œçœ‹åˆ°å¦‚ä¸‹æ•ˆæžœï¼š è°ƒè¯•é…ç½®æˆåŠŸã€‚ æœ‰æ—¶å€™ä¸€è¾¹æ’¸ä»£ç ï¼Œæ”¹ä¸¤è¡Œè¿˜è¦æ‹¿èµ·æ‰‹æœºçœ‹çœ‹æ•ˆæžœï¼Œç¡®å®žä¸ä¾¿ï¼ŒäºŽæ˜¯æœ‰äº†å®‰å“æ‰‹æœºæŠ•å±è¿™ç§ç¥žä¸€æ ·çš„å·¥å…·ã€‚ä¹Ÿè®¸å·¥å…·å¾ˆå¤šï¼Œä¸è¿‡æˆ‘è¿™é‡Œå°±ç”¨è¿‡ä¸€ç§vysorï¼Œæˆ‘ç”¨äº†è°·æ­Œæµè§ˆå™¨çš„vysoræ’ä»¶ã€‚æ‰‹æœºUSBè°ƒè¯•è®¾ç½®å¥½ä»¥åŽä¼šè‡ªå·±æ£€æµ‹åŒæ—¶ç¬¬ä¸€æ¬¡ä¼šæç¤ºæ‰‹æœºå®‰è£…è¯¥è½¯ä»¶ï¼Œå®‰è£…å®ŒæˆåŽæ‰“å¼€ï¼Œæ•ˆæžœå¦‚ä¸‹ï¼Œä¸Žæ‰‹æœºåŒæ­¥ã€‚ æ•ˆæžœè¿˜æ˜¯ä¸é”™çš„ï¼Œå°±æ˜¯æ²¡æœ‰[æ‘‡ä¸€æ‘‡]è¿™ä¸ªåŠŸèƒ½ï¼Œç¾Žä¸­ä¸è¶³äº¦ã€‚ æ¨¡æ‹Ÿå™¨æ“ä½œå¦‚æžœåœ¨æ¨¡æ‹Ÿå™¨ä¸Šè°ƒè¯•react nativeä»£ç ï¼Œä¹Ÿå¯ä»¥æœ‰æ‘‡ä¸€æ‘‡ï¼Œæˆ–è€…é…ç½®hot loadingè¿™äº›ï¼Œå¦‚ä¸‹ï¼š shift + r è¿žç»­2 æ¬¡ æ¨¡æ‹Ÿå™¨reload ç•Œé¢ CommandâŒ˜ + Må¿«æ·é”®æ¥å¿«é€Ÿæ‰“å¼€Developer Menuã€‚ä¹Ÿå¯ä»¥é€šè¿‡æ¨¡æ‹Ÿå™¨ä¸Šçš„èœå•é”®æ¥æ‰“å¼€ã€‚]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>react-native</tag>
        <tag>android</tag>
        <tag>package</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Pro å­¦ä¹ ä¹‹tableä½¿ç”¨]]></title>
    <url>%2F2019%2F04%2F24%2FAnt%20Design%20Pro%20%E5%AD%A6%E4%B9%A0%E4%B9%8Btable%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proä½¿ç”¨è®°å½•ä¹‹åˆ—è¡¨çš„çµæ´»ä½¿ç”¨ã€‚ ç®€ä¹¦åœ°å€ åœ¨tableçš„è¡Œrenderæ—¶å¸¸ç”¨çš„æ“ä½œ1ã€æ—¶é—´æ ¼å¼åŒ–ï¼ŒæŒ‡å®šæ—¶åŒº1234567891011 &#123;â€‹ title: &apos;æ›´æ–°æ—¶é—´&apos;,â€‹ dataIndex: &apos;updateTime&apos;,â€‹ sorter: true,â€‹ render: val =&gt; &lt;span&gt;&#123;moment(val).utc().format(&apos;YYYY-MM-DD HH:mm:ss&apos;)&#125;&lt;/span&gt;,â€‹ &#125;, 2ã€åˆ—è¡¨ä¸Šæ˜¾ç¤ºå›¾ç‰‡12345&#123; title: &apos;è‚ºåŠŸèƒ½æŠ¥å‘Š&apos;, dataIndex: &apos;url&apos;, render: text =&gt; &lt;img alt=&quot;å•†å“å›¾ç‰‡&quot; style=&#123;&#123; width: 100, height: 50 &#125;&#125; src=&#123;text&#125; /&gt;,&#125;, è¿™ä¸ªå›¾ç‰‡ä¸èƒ½åœ¨å½“å‰é¡µæ”¾å¤§ï¼Œæˆ–è€…ç›´æŽ¥åœ¨æµè§ˆå™¨è®¿é—®ã€‚å¦‚æžœéœ€è¦ç‚¹å‡»åŽåœ¨å½“å‰é¡µé¢æ”¾å¤§ï¼Œè¿™æ ·çš„æ•ˆæžœå¯ä»¥è¿™ä¹ˆå¹²ï¼Œå…ˆæ’¸ä¸€ä¸ªimageViewç»„ä»¶æ”¾åœ¨src/pages/Commonä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; Spin, Modal &#125; from &apos;antd&apos;;const defaultStyle = &#123; borderRadius: 5, borderWidth: 1, borderStyle: &apos;solid&apos;, borderColor: &apos;#d9d9d9&apos;, width: 70, height: 70, padding: 5, cursor: &apos;pointer&apos;, display: &apos;inline-flex&apos;, justifyContent: &apos;center&apos;, alignItems: &apos;center&apos;,&#125;;class ImageView extends PureComponent &#123; state = &#123; loading: true, visible: false, imgWidth: 0, imgHeight: 0, &#125;; componentDidMount() &#123; this.init(); &#125; componentWillReceiveProps(nextProps) &#123; const &#123; url &#125; = this.props; if (url !== nextProps.url) &#123; this.init(); &#125; &#125; init = () =&gt; &#123; const &#123; url &#125; = this.props; if (url) &#123; this.setState(&#123; loading: true &#125;); const image = new Image(); image.src = url; if (image.complete) &#123; const size = this.getImageSize(image.width, image.height); this.setState(&#123; loading: false, imgWidth: size.width, imgHeight: size.height &#125;); &#125; else &#123; image.onload = () =&gt; &#123; const size = this.getImageSize(image.width, image.height); this.setState(&#123; loading: false, imgWidth: size.width, imgHeight: size.height &#125;); &#125;; &#125; &#125; &#125;; getImageSize = (originImgWidth, originImgHeight) =&gt; &#123; const &#123; width, height &#125; = this.props; const divWidth = (width || defaultStyle.width) - 2 * defaultStyle.padding; const divHeight = (height || defaultStyle.height) - 2 * defaultStyle.padding; const ratio = this.getRatio(originImgWidth, originImgHeight); const imgWidth = originImgWidth &gt; originImgHeight ? divWidth : divWidth * ratio; const imgHeight = originImgHeight &gt; originImgWidth ? divHeight : divHeight * ratio; return &#123; width: imgWidth, height: imgHeight &#125;; &#125;; getRatio = (width, height) =&gt; (width &lt; height ? width / height : height / width); render() &#123; const &#123; url, style &#125; = this.props; const &#123; loading, visible, imgWidth, imgHeight &#125; = this.state; return ( &lt;span&gt; &#123;url ? ( &lt;span style=&#123;&#123; ...defaultStyle, ...style &#125;&#125;&gt; &#123;loading ? ( &lt;Spin /&gt; ) : ( &lt;img style=&#123;&#123; width: imgWidth, height: imgHeight &#125;&#125; alt=&quot;ç‚¹å‡»é¢„è§ˆå›¾ç‰‡&quot; src=&#123;url&#125; onClick=&#123;() =&gt; &#123; this.setState(&#123; visible: true &#125;); &#125;&#125; /&gt; )&#125; &lt;Modal style=&#123;&#123; top: 20 &#125;&#125; visible=&#123;visible&#125; footer=&#123;null&#125; onCancel=&#123;() =&gt; &#123; this.setState(&#123; visible: false &#125;); &#125;&#125; &gt; &lt;img alt=&quot;&quot; style=&#123;&#123; width: &apos;100%&apos; &#125;&#125; src=&#123;url&#125; /&gt; &lt;/Modal&gt; &lt;/span&gt; ) : ( &apos;æ— &apos; )&#125; &lt;/span&gt; ); &#125;&#125;export default ImageView; ç„¶åŽtableä¸Šè¿™ä¹ˆç”¨123456&#123; title: &apos;å›¾ç‰‡&apos;, dataIndex: &apos;itemImage&apos;, key: &apos;itemImage&apos;, render: (text, record) =&gt; &lt;ImageView alt=&#123;record.title&#125; url=&#123;text&#125; /&gt;,&#125;, 3ã€é•¿æ–‡æœ¬ä½¿ç”¨çœç•¥å· 123456789&#123; title: &apos;æŽ¥æ”¶è¯¦æƒ…&apos;, dataIndex: &apos;receiveDesc&apos;, render: value =&gt; ( &lt;Ellipsis length=&#123;5&#125; tooltip&gt; &#123;value&#125; &lt;/Ellipsis&gt; ),&#125;, ç”¨åˆ°çš„Ellipsisæ˜¯å®˜ç½‘åœ¨componentsæä¾›çš„é€šç”¨ç»„ä»¶ã€‚ 4ã€å¯æŠ˜å table1234567891011121314151617handleTableExpand = record =&gt; &#123; const toTags = items =&gt; items.map((value, index) =&gt; &lt;Tag key=&#123;index&#125;&gt;&#123;value&#125;&lt;/Tag&gt;); return ( &lt;div&gt; &lt;DescriptionList size=&quot;small&quot; col=&#123;1&#125;&gt; &lt;Description term=&quot;èµ„æºIDS&quot;&gt;&#123;toTags(getResources(record.resourceIds))&#125;&lt;/Description&gt; &lt;/DescriptionList&gt; &lt;DescriptionList style=&#123;&#123; marginTop: 15 &#125;&#125; size=&quot;small&quot;&gt; &lt;Description term=&quot;çŸ­ä¿¡éªŒè¯ç é•¿åº¦&quot;&gt;&#123;record.smsCodeLength&#125;&lt;/Description&gt; &lt;Description term=&quot;çŸ­ä¿¡éªŒè¯ç æœ‰æ•ˆæœŸ&quot;&gt; &#123;record.smsCodeLength ? `$&#123;record.smsCodeExpire&#125;åˆ†é’Ÿ` : &apos;&apos;&#125; &lt;/Description&gt; &lt;Description term=&quot;çŸ­ä¿¡éªŒè¯ç ç­¾å&quot;&gt;&#123;record.smsCodeSign&#125;&lt;/Description&gt; &lt;/DescriptionList&gt; &lt;/div&gt; );&#125;; ç„¶åŽåœ¨tableä¸ŠæŒ‡å®šexpandedRowRender={this.handleTableExpand}å³å¯ã€‚ 5ã€tableæ˜¾ç¤ºæ€»æ¡æ•° 123456789101112131415161718192021222324252627 state: &#123; query: &#123; ...defaultQuery &#125;, list: &#123; data: [], pagination: &#123;&#125;, &#125;, exporting: false, &#125;, effects: &#123; *fetch(&#123; payload &#125;, &#123; call, put, select &#125;) &#123; yield put(&#123; type: &apos;query&apos;, payload &#125;); const query = yield select(state =&gt; state.smsLog.query); const &#123; data &#125; = yield call(page, query); yield put(&#123; type: &apos;list&apos;, payload: &#123; data: data.content, pagination: &#123; current: data.number + 1, pageSize: data.size, total: Number(data.totalElements), &#125;, &#125;, &#125;); &#125;,&#125; æ¸²æŸ“æ—¶æŒ‡å®špaginationçš„åŒ…æ‹¬äº†totalå­—æ®µï¼Œæ‰€ä»¥å°±ä¼šæ˜¾ç¤ºå‡ºæ€»æ¡æ•°ã€‚1234567&lt;PageTable columns=&#123;this.columns&#125; loading=&#123;loading&#125; dataSource=&#123;list.data&#125; pagination=&#123;list.pagination&#125; onChange=&#123;this.handleTableChange&#125; /&gt; listå°±æ˜¯ä»ŽæŽ¥å£èŽ·å–çš„æ•°æ®ï¼Œ 6ã€è¡¨å¤´æ”¯æŒç­›é€‰123456789&#123; title: &apos;äººå‘˜çŠ¶æ€&apos;, dataIndex: &apos;jobStatus&apos;, render:(text)=&gt;&#123; const filters = options.jobStatus.filter(s =&gt; s.value === text); return filters.length ? filters[0].text : &apos;&apos;; &#125;, filters: options.jobStatus,&#125; é¡µé¢åŠ è½½æ—¶åŠ è½½ä¸ªæ•°æ®å­—å…¸çš„å€¼12345componentDidMount() &#123; this.props.dispatch(&#123;type: &apos;rwUserOption/init&apos;&#125;).then(() =&gt; &#123; this.props.dispatch(&#123;type: &apos;rwUserList/reload&apos;&#125;); &#125;);&#125; è¯·æ±‚å­—å…¸æ•°æ®ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import dict from &apos;../../services/api-dict&apos;const optionKeys = [ &quot;RWGH-USER-XIAOWEI&quot;, &quot;RWGH-USER-STATUS&quot;, &apos;RWGH-TRAIN-ATTENDANCE&apos;];export default &#123; namespace: &apos;rwUserOption&apos;, state: &#123; sex:[ &#123;text: &apos;ç”·&apos;, value: &apos;0&apos;&#125;, &#123;text: &apos;å¥³&apos;, value: &apos;1&apos;&#125; ], //å°å¾® xiaowei: [], //å·¥ä½œçŠ¶æ€ jobStatus: [], attendances: [] &#125;, effects: &#123; * init(&#123;payload&#125;, &#123;put, call&#125;) &#123; const [xiaowei, jobStatus, attendances] = yield call(dict.many, optionKeys); const mapper = (items) =&gt; &#123; return items.map(item =&gt; &#123; const &#123;dictValueName, dictValueCode&#125; = item; return &#123;text: dictValueName, value: dictValueCode&#125;; &#125;) &#125;; yield put(&#123;type: &apos;changeXiaoWei&apos;, payload: mapper(xiaowei)&#125;); yield put(&#123;type: &apos;changeJobStatus&apos;, payload: mapper(jobStatus)&#125;); yield put(&#123;type: &apos;changeAttendances&apos;, payload: mapper(attendances)&#125;); &#125; &#125;, reducers: &#123; changeXiaoWei(state, &#123;payload: xiaowei&#125;) &#123; return &#123;...state, xiaowei&#125; &#125;, changeJobStatus(state, &#123;payload: jobStatus&#125;) &#123; return &#123;...state, jobStatus&#125; &#125;, changeAttendances(state, &#123;payload: attendances&#125;)&#123; return &#123;...state, attendances&#125; &#125; &#125;&#125; dict.manyæ˜¯è¿™æ ·å®šä¹‰çš„ï¼š12345678910111213141516171819202122import req from &apos;./api-base&apos;;const dict = &#123; one: (indexCode, cache = true) =&gt; &#123; return new Promise(resolve =&gt; &#123; const dict = sessionStorage.getItem(indexCode); if (cache &amp;&amp; dict) &#123; resolve(dict); &#125; else &#123; req.get(&quot;/questionnaire/admin/sys/dict/values&quot;, &#123;indexCode&#125;).then(data =&gt; &#123; sessionStorage.setItem(dict, data.data); resolve(data.data) &#125;) &#125; &#125;); &#125;, many: (indexCodes, cache = true) =&gt; &#123; return Promise.all(indexCodes.map(code =&gt; dict.one(code, cache))); &#125;&#125;export default dict; å…¶ä¸­äººå‘˜çŠ¶æ€çš„æ•°æ®ç»“æž„å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&#123; &quot;code&quot;: 0, &quot;message&quot;: &quot;æ“ä½œæˆåŠŸ&quot;, &quot;data&quot;: [ &#123; &quot;dictValueId&quot;: 162, &quot;dictIndexId&quot;: 148, &quot;dictValueCode&quot;: &quot;0&quot;, &quot;dictValueName&quot;: &quot;åœ¨èŒ&quot;, &quot;deleteFlag&quot;: &quot;0&quot;, &quot;dictValueSort&quot;: 0 &#125;, &#123; &quot;dictValueId&quot;: 163, &quot;dictIndexId&quot;: 148, &quot;dictValueCode&quot;: &quot;1&quot;, &quot;dictValueName&quot;: &quot;äº§å‡&quot;, &quot;deleteFlag&quot;: &quot;0&quot;, &quot;dictValueSort&quot;: 1 &#125;, &#123; &quot;dictValueId&quot;: 164, &quot;dictIndexId&quot;: 148, &quot;dictValueCode&quot;: &quot;2&quot;, &quot;dictValueName&quot;: &quot;ç¦»èŒ&quot;, &quot;deleteFlag&quot;: &quot;0&quot;, &quot;dictValueSort&quot;: 2 &#125;, &#123; &quot;dictValueId&quot;: 165, &quot;dictIndexId&quot;: 148, &quot;dictValueCode&quot;: &quot;3&quot;, &quot;dictValueName&quot;: &quot;é€€ä¼‘&quot;, &quot;deleteFlag&quot;: &quot;0&quot;, &quot;dictValueSort&quot;: 3 &#125;, &#123; &quot;dictValueId&quot;: 167, &quot;dictIndexId&quot;: 148, &quot;dictValueCode&quot;: &quot;4&quot;, &quot;dictValueName&quot;: &quot;è½¬å²—&quot;, &quot;deleteFlag&quot;: &quot;0&quot;, &quot;dictValueSort&quot;: 4 &#125;, &#123; &quot;dictValueId&quot;: 168, &quot;dictIndexId&quot;: 148, &quot;dictValueCode&quot;: &quot;5&quot;, &quot;dictValueName&quot;: &quot;ç—…å‡&quot;, &quot;deleteFlag&quot;: &quot;0&quot;, &quot;dictValueSort&quot;: 5 &#125; ]&#125; è¿™ä¸ªç­›é€‰æ˜¯å¤šé€‰çš„ï¼Œé€‰ä¸­åŽç‚¹å‡»ç¡®å®šä¼šè§¦å‘æŸ¥è¯¢ï¼Œå‚æ•°ä¼šxiaoweis=XSJDXW%2CXHYXWåƒè¿™æ ·æ‹¼æŽ¥åˆ°urlé‡Œã€‚ 7ã€ç»“æžœè½¬enumæ˜¾ç¤ºæ–‡æœ¬ï¼Œå¦‚è®¢å•çŠ¶æ€ç­‰ã€‚1234const sendResultDom = &#123; success: &lt;Badge status=&quot;success&quot; text=&quot;æˆåŠŸ&quot; /&gt;, error: &lt;Badge status=&quot;error&quot; text=&quot;å¤±è´¥&quot; /&gt;,&#125;; 12345&#123; title: &apos;å‘é€ç»“æžœ&apos;, dataIndex: &apos;sendResult&apos;, render: test =&gt; (test === &apos;0&apos; ? sendResultDom.success : sendResultDom.error),&#125;, è¿™ç§é€‚åˆäºŽè¿™ä¸ªå¯¹åº”å€¼æ¯”è¾ƒç¨³å®šå˜åŠ¨è¾ƒå°çš„æƒ…å†µï¼Œå¦‚æžœæ˜¯ç»å¸¸ä¿®æ”¹æˆ–è€…é€‚é…æ–°å¢žï¼Œåˆä¸æ”¹ä»£ç çš„è¯ï¼Œå°±éœ€è¦ä»¥æ•°æ®å­—å…¸çš„å½¢å¼æä¾›ç»™é¡µé¢å­—å…¸æ•°æ®ï¼Œç„¶åŽç”¨ç»„ä»¶åŽ»é€‚é…æ˜¾ç¤ºå†…å®¹ã€‚ æ¯”å¦‚æ•°æ®å­—å…¸çš„sysDict/value/code/list?indexCode=sms_receive_resultæ•°æ®ç»“æž„å¦‚ä¸‹:123456789101112131415161718192021222324252627282930313233343536373839404142&#123; &quot;code&quot;: 0, &quot;message&quot;: &quot;æ“ä½œæˆåŠŸ&quot;, &quot;data&quot;: [ &#123; &quot;id&quot;: &quot;88685502718279680&quot;, &quot;isDelete&quot;: false, &quot;createTime&quot;: 1553756821000, &quot;updateTime&quot;: 1553756821000, &quot;parentId&quot;: &quot;88685399781670912&quot;, &quot;name&quot;: &quot;æˆåŠŸ&quot;, &quot;code&quot;: &quot;0&quot;, &quot;sort&quot;: 0, &quot;type&quot;: 1, &quot;remark&quot;: &quot;&quot; &#125;, &#123; &quot;id&quot;: &quot;88685542446727168&quot;, &quot;isDelete&quot;: false, &quot;createTime&quot;: 1553756830000, &quot;updateTime&quot;: 1553756830000, &quot;parentId&quot;: &quot;88685399781670912&quot;, &quot;name&quot;: &quot;å¤±è´¥&quot;, &quot;code&quot;: &quot;1&quot;, &quot;sort&quot;: 1, &quot;type&quot;: 1, &quot;remark&quot;: &quot;&quot; &#125;, &#123; &quot;id&quot;: &quot;88685595827634176&quot;, &quot;isDelete&quot;: false, &quot;createTime&quot;: 1553756843000, &quot;updateTime&quot;: 1553756843000, &quot;parentId&quot;: &quot;88685399781670912&quot;, &quot;name&quot;: &quot;ç­‰å¾…&quot;, &quot;code&quot;: &quot;-1&quot;, &quot;sort&quot;: 2, &quot;type&quot;: 1, &quot;remark&quot;: &quot;&quot; &#125; ]&#125; ç„¶åŽå†™ä¸€ä¸ªDictValueçš„ç»„ä»¶ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495/* eslint-disable */import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; Spin, Select &#125; from &apos;antd&apos;;import _ from &apos;lodash&apos;;import memoizeOne from &apos;memoize-one&apos;;import &#123; valueListByIndexCode &#125; from &apos;@/services/dict&apos;;const dictCache = &#123;&#125;;const filterValue = (dicts, value) =&gt; _.find(dicts, d =&gt; d.code === value);const memoizeGetValue = memoizeOne(filterValue);async function getIndexValues(index) &#123; const values = dictCache[index]; if (values) return values; const &#123; data &#125; = await valueListByIndexCode(&#123; indexCode: index &#125;); const newValues = data.map(d =&gt; (&#123; name: d.name, code: d.code, remark: d.remark &#125;)); dictCache[index] = newValues; return newValues;&#125;export async function getValue(index, value) &#123; const indexValues = await getIndexValues(index); return memoizeGetValue(indexValues, value);&#125;async function getValueName(index, value) &#123; const indexValue = await getValue(index, value); return indexValue ? indexValue.name : value;&#125;export class DictValue extends PureComponent &#123; state = &#123; loading: false, text: &apos;&apos;, &#125;; componentDidMount() &#123; const &#123; index, value &#125; = this.props; this.loadDate(index, value); &#125; componentWillReceiveProps(nextProps) &#123; const &#123; index, value &#125; = nextProps; const &#123; props &#125; = this; if (props.index !== index || props.value !== value) &#123; this.loadDate(index, value); &#125; &#125; loadDate = (index, value) =&gt; &#123; if (!value) &#123; this.setState(&#123; text: &apos;&apos;, loading: false &#125;); return; &#125; this.setState(&#123; loading: true &#125;); getValueName(index, value).then(text =&gt; &#123; this.setState(&#123; text, loading: false &#125;); &#125;); &#125;; render() &#123; const &#123; loading, text &#125; = this.state; return &lt;span&gt;&#123;loading ? &lt;Spin size=&quot;small&quot; /&gt; : `$&#123;text&#125;`&#125;&lt;/span&gt;; &#125;&#125;const &#123; Option &#125; = Select;export class DictSelect extends PureComponent &#123; state = &#123; data: [], &#125;; componentDidMount() &#123; const &#123; index &#125; = this.props; getIndexValues(index).then(data =&gt; &#123; this.setState(&#123; data &#125;); &#125;); &#125; render() &#123; const &#123; props &#125; = this; const &#123; data &#125; = this.state; return ( &lt;Select placeholder=&quot;è¯·é€‰æ‹©&quot; &#123;...props&#125;&gt; &#123;data.map(item =&gt; ( &lt;Option key=&#123;item.code&#125; value=&#123;item.code&#125;&gt; &#123;item.name&#125; &lt;/Option&gt; ))&#125; &lt;/Select&gt; ); &#125;&#125; å…¶ä¸­valueListByIndexCodeå°±æ˜¯èŽ·å–åˆ°ä¸Šé¢ç»“æž„æ•°æ®çš„apiï¼Œä¸ç”¨ç‰¹æ®Šè¯´æ˜Žäº†ã€‚è¿™ä¸ªç±»åŒ…å«äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯DictValueï¼Œç”¨æ¥ä»ŽkeyèŽ·å–valueï¼Œä¸€ä¸ªæ˜¯DictSelectæä¾›ä¸€ä¸‹è¯¥å­—å…¸å€¼å¾—ä¸‹æ‹‰é€‰é¡¹ã€‚DictValueçš„ç”¨æ³•:12345&#123; title: &apos;æŽ¥æ”¶ç»“æžœ&apos;, dataIndex: &apos;receiveResult&apos;, render: value =&gt; &lt;DictValue index=&quot;sms_receive_result&quot; value=&#123;value&#125; /&gt;,&#125;, DictSelectçš„ç”¨æ³•:12345678&lt;FormItem label=&quot;æŽ¥æ”¶ç»“æžœ&quot;&gt; &lt;DictSelect allowClear index=&quot;sms_receive_result&quot; value=&#123;query.receiveResult&#125; onChange=&#123;receiveResult =&gt; this.handleSearch(&#123; receiveResult &#125;)&#125; /&gt;&lt;/FormItem&gt; 8ã€ç­‰å¾…ã€‚ã€‚ã€‚ å®˜æ–¹API]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Pro ä½¿ç”¨ç‚¹ç‚¹æ»´æ»´]]></title>
    <url>%2F2019%2F04%2F09%2FAnt%20Design%20Pro%20%E4%BD%BF%E7%94%A8%E7%82%B9%E7%82%B9%E6%BB%B4%E6%BB%B4%2F</url>
    <content type="text"><![CDATA[é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proä½¿ç”¨è®°å½•ä¹‹mockã€‚ ç®€ä¹¦åœ°å€ 1ã€æœ‰ç”¨çš„Mockantd proåœ¨æœ¬åœ°å¼€å‘çŽ¯å¢ƒä¸‹startæ—¶å°±æä¾›äº†mockçŽ¯å¢ƒäº†ï¼Œåœ¨æ ¹ç›®å½•çš„mocké‡Œå¯ä»¥å®šä¹‰è‡ªå·±éœ€è¦mockçš„æ–¹æ³•å’Œå‡ºå…¥å‚æ•°ï¼Œéžå¸¸çš„æ–¹ä¾¿ã€‚ 2019-06-03è¡¥å……ï¼šåœ¨æˆ‘çš„å°è¯•ä¹‹å‰æŽ¨èä¸‹json-serverï¼Œæˆ‘ä¸‹é¢æ²¡æœ‰ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨åˆ«çš„åœ°æ–¹ç”¨è¿‡ï¼Œç¡®å®žè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ æŽ¥ä¸‹æ¥ä»‹ç»ä¸‹æˆ‘æ€Žä¹ˆä¹‹å‰æ€Žä¹ˆç”¨çš„ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889import Mock from &apos;mockjs&apos;;const &#123; Random &#125; = Mock;const userListLength = Random.integer(10, 100);const userList = [];// ç”Ÿæˆè¡¨æ ¼mockæ•°æ®for (let i = 0; i &lt; userListLength; i += 1) &#123; userList.push(&#123; id: i, love: Math.random(0, 1) &gt; 0.5, taxNo: Random.integer(4e14, 5e14), taxtype: i % 3 === 0 ? &apos;small&apos; : i % 2 === 0 ? &apos;personal&apos; : &apos;normal&apos;, name: `æ·±åœ³å¸‚ä¸æ‚¦åŒ–å¦†å“æœ‰é™å…¬å¸$&#123;i + 1&#125;`, no: i % 2 === 0 ? `B$&#123;i&#125;` : `T$&#123;i&#125;`, taxZone: Math.random(0, 1) &gt; 0.5 ? &apos;å¹¿ä¸œ&apos; : &apos;æ·±åœ³&apos;, key: Math.random(0, 1) &gt; 0.5, sysVerify: Math.random(0, 1) &gt; 0.5, taxManager: &apos;lane&apos;, accountManager: &apos;lane&apos;, date: Random.datetime(&apos;yyyy-MM-dd HH:mm:ss&apos;), &#125;)&#125;export default &#123; [`POST /api/biz/md/bizMdClient/search`](req, res, u, b) &#123; // åˆ†é¡µæŸ¥è¯¢å¤„ç† const body = (b &amp;&amp; b.body) || req.body; const &#123; skip, limit &#125; = body; const start = skip * limit; // æ•°æ®å¼€å§‹ç´¢å¼• const end = start + (limit * 1); // æ•°æ®ç»“æŸç´¢å¼• const dataSource = userList.slice(start, end); // è¦è¿”å›žçš„æ•°æ® const result = &#123; code: 200, data: dataSource, // åˆ†é¡µä¿¡æ¯ pageinfo: &#123; &quot;total&quot;: userList.length, &quot;pageindex&quot;: skip, &quot;pagesize&quot;: limit, &#125; &#125;; if (res &amp;&amp; res.json) &#123; res.json(result); &#125; else &#123; return result; &#125; &#125;, [`POST /api/biz/md/bizMdClient/love`](req, res) &#123; const &#123; client &#125; = req.body for (let i = 0, length = userList.length; i &lt; length; i += 1) &#123; if (client.id === userList[i].id) &#123; userList[i].love = !userList[i].love; break; &#125; &#125; res.send(&#123; code: 200 &#125;).end() &#125;, [`POST /api/biz/md/bizMdClient/queryFilterOptions`](req, res) &#123; const dataSource = [ &#123; title: &apos;å…¨éƒ¨&apos;, &#125;, &#123; title: &apos;ä¸€èˆ¬&apos;, &#125;, &#123; title: &apos;å°è§„æ¨¡&apos;, &#125;, &#123; title: &apos;ç¨ŽåŠ¡å¾…åˆ†é…&apos;, &#125;, &#123; title: &apos;è´¦åŠ¡å¾…åˆ†é…&apos;, &#125;, &#123; title: &apos;æˆ‘çš„å…³æ³¨&apos;, &#125;, ]; const result = &#123; code: 200, data: dataSource, &#125;; if (res &amp;&amp; res.json) &#123; res.json(result); &#125; else &#123; return result; &#125; &#125;&#125; ä¸Šé¢çš„mockæ˜¯åŸºäºŽæœ¬åœ°npm start æ—¶å¯åŠ¨çš„mockæœåŠ¡è¯´çš„ï¼Œä½†æ˜¯ä»£ç æ’¸å®Œäº†ï¼Œæ€»è¦åœ¨æœåŠ¡å™¨ä¸Šæä¾›æœåŠ¡ï¼Œä¸èƒ½å†æœ¬åœ°è‡ªå·±çŽ©å§ï¼Œä¹Ÿå°±æ˜¯è¯´npm buildåŽï¼Œç”Ÿæˆçš„distçš„ç›®å½•çš„æ–‡ä»¶è¦åœ¨æœåŠ¡å™¨ä¸Šè·‘çš„ï¼Œä¸€èˆ¬æ˜¯ç”¨nginxä½œä¸ºæœåŠ¡å™¨ã€‚æµ‹è¯•mockå°±æ²¡æœ‰äº†ï¼Œè¿™æ—¶å€™æ€Žä¹ˆåŠžï¼Œæœ‰ä¸¤ç§åŠžæ³•è§£å†³ï¼Œå…¶å®žå°±ç®—æ˜¯æœ¬åœ°æˆ‘ä¸ªäººä¹Ÿæ¯”è¾ƒæŽ¨èä¸‹é¢è¿™ç§æ–¹å¼ã€‚å°†ä¸€ä¸ªjsonæ ¼å¼çš„æ–‡æœ¬å¤åˆ¶åˆ°æ¯”å¦‚test.jsonä¸­ï¼Œå†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&#123; &quot;list&quot;: [ &#123; &quot;callNo&quot;: &quot;11101&quot;, &quot;desc&quot;: &quot;20ml&quot;, &quot;name&quot;: &quot;1å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 1, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;11102&quot;, &quot;desc&quot;: &quot;20ml&quot;, &quot;name&quot;: &quot;2å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 2, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;11103&quot;, &quot;desc&quot;: &quot;30ml&quot;, &quot;name&quot;: &quot;3å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 3, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;11104&quot;, &quot;desc&quot;: &quot;30ml&quot;, &quot;name&quot;: &quot;4å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 4, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;11105&quot;, &quot;desc&quot;: &quot;40ml&quot;, &quot;name&quot;: &quot;5å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 5, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;11106&quot;, &quot;desc&quot;: &quot;40ml&quot;, &quot;name&quot;: &quot;6å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 6, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;111017&quot;, &quot;desc&quot;: &quot;60ml&quot;, &quot;name&quot;: &quot;7å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 7, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125;, &#123; &quot;callNo&quot;: &quot;11108&quot;, &quot;desc&quot;: &quot;60ml&quot;, &quot;name&quot;: &quot;8å·è„±æ•é’ˆ&quot;, &quot;updatedAt&quot;: &quot;2019-04-12T14:00:00.000Z&quot;, &quot;pingHao&quot;: 8, &quot;fenZhen&quot;: &quot;æ˜¯&quot; &#125; ], &quot;pagination&quot;: &#123; &quot;total&quot;: 8, &quot;pageSize&quot;: 10, &quot;current&quot;: 1 &#125;&#125; ç„¶åŽæŠŠè¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ä»»ä½•ä¸€ä¸ªæœ‰ç½‘å°±å¯ä»¥ä¸‹è½½çš„æœåŠ¡å™¨ä¸Šï¼Œæ¯”å¦‚ä¸ƒç‰›å•Šï¼Œç™¾åº¦å•Šï¼Œä»€ä¹ˆçš„æä¾›å­˜å‚¨çš„åœ°æ–¹ï¼Œæ¯”å¦‚æˆ‘çš„ modelsé‡Œè¿˜æ˜¯ä¸€æ ·çš„è°ƒç”¨servicesçš„jsæ–‡ä»¶é‡Œæä¾›çš„æŽ¥å£1234567*fetchTuoMinZhen(&#123; payload &#125;, &#123; call, put &#125;) &#123; const response = yield call(queryTuoMinZhen, payload); yield put(&#123; type: &apos;save&apos;, payload: response, &#125;);&#125;, é‡ç‚¹æ¥äº†ï¼Œæœ¬æ¥servicesé‡Œçš„æŽ¥å£æ˜¯è¿™æ ·çš„:123export async function queryTuoMinZhen(params) &#123; return request(`/api/tuominzhen?$&#123;stringify(params)&#125;`);&#125; ä¹Ÿå®‰è£…mock-serverä¸“é—¨æä¾›æœåŠ¡ï¼Œå…·ä½“å¯ä»¥googleè¯•è¯•ã€‚ 2ã€åœ¨tableçš„è¡Œrenderæ—¶å¸¸ç”¨çš„æ“ä½œ1ã€æ—¶é—´æ ¼å¼åŒ–ï¼ŒæŒ‡å®šæ—¶åŒº1234567891011 &#123;â€‹ title: &apos;æ›´æ–°æ—¶é—´&apos;,â€‹ dataIndex: &apos;updateTime&apos;,â€‹ sorter: true,â€‹ render: val =&gt; &lt;span&gt;&#123;moment(val).utc().format(&apos;YYYY-MM-DD HH:mm:ss&apos;)&#125;&lt;/span&gt;,â€‹ &#125;, 2ã€æ˜¾ç¤ºå›¾ç‰‡3ã€é•¿æ–‡æœ¬ä½¿ç”¨çœç•¥å·4ã€å¯æŠ˜å table5ã€æ˜¾ç¤ºæ€»æ¡æ•°6ã€è¡¨å¤´æ”¯æŒç­›é€‰å’ŒæŽ’åº 3ã€ä¿®æ”¹antdé»˜è®¤çš„æ ·å¼åœ¨è‡ªå®šä¹‰çš„classä¸­åŠ å…¥:globalå…³é”®å­—çš„æ ·å¼:12 æ€Žä¹ˆä¿®æ”¹antdé»˜è®¤æ ·å¼åŠé‡åˆ°çš„é—®é¢˜ æŽ¨èç½‘ç«™Ant Design Proæ€»ç»“ç¯‡ç»å…¸ â€“ Ant Design Pro å­¦ä¹ ç¬”è®°package.jsoné…ç½®æ–‡ä»¶]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Proå­¦ä¹ ä¹‹ç»„ä»¶åŒ–]]></title>
    <url>%2F2019%2F03%2F28%2FAnt%20Design%20Pro%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%BB%84%E4%BB%B6%E5%8C%96%2F</url>
    <content type="text"><![CDATA[é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proä½¿ç”¨è®°å½•ä¹‹è§„èŒƒå­¦ä¹ ï¼Œç»„ä»¶åŒ–ã€‚ ç®€ä¹¦åœ°å€åŒäº‹å†™äº†ä¸€ä¸ªæˆ‘ç›®å‰çœ‹ç€æ¯”è¾ƒæ­£è§„åŒ–çš„ç»„ä»¶å¼é¡µé¢ï¼Œåœ¨æ­¤ä½œä¸ºå­¦ä¹ æ ‡å‡†è´´ä¸€ä¸‹ï¼Œå…ˆçœ‹ä¸ªæ•ˆæžœå›¾ï¼š è¿™æ˜¯ä¸€ä¸ªoauthçš„clientç®¡ç†çš„é¡µé¢ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼šapiåˆ—è¡¨æ•°æ®ç»“æž„1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&#123; &quot;code&quot;: 0, &quot;message&quot;: &quot;æ“ä½œæˆåŠŸ&quot;, &quot;data&quot;: &#123; &quot;content&quot;: [ &#123; &quot;clientId&quot;: &quot;usercenter-manage&quot;, &quot;clientName&quot;: &quot;æµ‹è¯•app&quot;, &quot;resourceIds&quot;: &quot;usercenter/manage,smscenter/api&quot;, &quot;clientSecret&quot;: &quot;&quot;, &quot;scope&quot;: &quot;read,write,trust&quot;, &quot;authorizedGrantTypes&quot;: &quot;password,refresh_token&quot;, &quot;webServerRedirectUri&quot;: null, &quot;authorities&quot;: null, &quot;accessTokenValidity&quot;: 7200, &quot;refreshTokenValidity&quot;: null, &quot;additionalInformation&quot;: null, &quot;autoapprove&quot;: null, &quot;smsCodeLength&quot;: 4, &quot;smsCodeExpire&quot;: 10, &quot;smsCodeSign&quot;: &quot;ã€xxxxxxã€‘&quot;, &quot;platformCode&quot;: null, &quot;updateTime&quot;: &quot;2019-03-25T14:27:26.000+0000&quot;, &quot;createTime&quot;: null &#125; ], &quot;pageable&quot;: &#123; &quot;sort&quot;: &#123; &quot;sorted&quot;: true, &quot;unsorted&quot;: false, &quot;empty&quot;: false &#125;, &quot;offset&quot;: 0, &quot;pageSize&quot;: 10, &quot;pageNumber&quot;: 0, &quot;paged&quot;: true, &quot;unpaged&quot;: false &#125;, &quot;totalPages&quot;: 1, &quot;totalElements&quot;: 9, &quot;last&quot;: true, &quot;size&quot;: 10, &quot;number&quot;: 0, &quot;first&quot;: true, &quot;numberOfElements&quot;: 9, &quot;sort&quot;: &#123; &quot;sorted&quot;: true, &quot;unsorted&quot;: false, &quot;empty&quot;: false &#125;, &quot;empty&quot;: false &#125;&#125; ç»„ä»¶åŒ–å˜›ï¼Œæ–‡ä»¶è‡ªç„¶æ¯”è¾ƒå¤šï¼Œæ‰“ä¸ªæ ‡è¯† 1ã€ClientListï¼šé¡µé¢æ¸²æŸ“js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; connect &#125; from &apos;dva&apos;;import &#123; Popconfirm, Card, Table, Button, Divider, Tag, message &#125; from &apos;antd&apos;;import PageHeaderWrapper from &apos;@/components/PageHeaderWrapper&apos;;import DescriptionList from &apos;@/components/DescriptionList&apos;;import ClientForm from &apos;./ClientForm&apos;;import &#123; humanizeTime, getOAuthTypeNames &#125; from &apos;./ClientUtil&apos;;import styles from &apos;../Common/TableList.less&apos;;const &#123; Description &#125; = DescriptionList;@connect((&#123; client, loading &#125;) =&gt; (&#123; client, loading: loading.effects[&apos;client/fetch&apos;], submitting: loading.effects[&apos;client/update&apos;],&#125;))class ClientList extends PureComponent &#123; columns = [ &#123; title: &apos;åº”ç”¨ID&apos;, dataIndex: &apos;clientId&apos;, &#125;, &#123; title: &apos;åº”ç”¨åç§°&apos;, dataIndex: &apos;clientName&apos;, &#125;, &#123; title: ( &lt;span&gt; Token &lt;br /&gt; æœ‰æ•ˆæœŸ &lt;/span&gt; ), dataIndex: &apos;accessTokenValidity&apos;, render: value =&gt; humanizeTime(value), &#125;, &#123; title: ( &lt;span&gt; RefreshToken &lt;br /&gt; æœ‰æ•ˆæœŸ &lt;/span&gt; ), dataIndex: &apos;refreshTokenValidity&apos;, render: value =&gt; humanizeTime(value), &#125;, &#123; title: &apos;æ“ä½œ&apos;, dataIndex: &apos;action&apos;, render: (text, record) =&gt; ( &lt;span&gt; &lt;a onClick=&#123;() =&gt; &#123; this.handleOpenForm(record); &#125;&#125; &gt; ç¼–è¾‘ &lt;/a&gt; &lt;Divider type=&quot;vertical&quot; /&gt; &lt;Popconfirm title=&quot;ç¡®è®¤åˆ é™¤ï¼Ÿ&quot; onConfirm=&#123;() =&gt; &#123; this.handleRemove(record); &#125;&#125; okText=&quot;ç¡®è®¤&quot; cancelText=&quot;å–æ¶ˆ&quot; &gt; &lt;a href=&quot;#&quot;&gt;åˆ é™¤&lt;/a&gt; &lt;/Popconfirm&gt; &lt;/span&gt; ), &#125;, ]; componentDidMount() &#123; const &#123; dispatch &#125; = this.props; dispatch(&#123; type: &apos;client/fetch&apos; &#125;); &#125; handleTableChange = pagination =&gt; &#123; const &#123; current, pageSize &#125; = pagination; const &#123; dispatch &#125; = this.props; dispatch(&#123; type: &apos;client/fetch&apos;, payload: &#123; page: current - 1, size: pageSize &#125; &#125;); &#125;; handleTableExpand = record =&gt; &#123; const toTags = items =&gt; items.map((value, index) =&gt; &lt;Tag key=&#123;index&#125;&gt;&#123;value&#125;&lt;/Tag&gt;); return ( &lt;div&gt; &lt;DescriptionList size=&quot;small&quot;&gt; &lt;Description term=&quot;æŽˆæƒæ¨¡å¼&quot;&gt; &#123;toTags(getOAuthTypeNames(record.authorizedGrantTypes))&#125; &lt;/Description&gt; &lt;Description term=&quot;å¹³å°ç¼–ç &quot;&gt;&#123;record.platformCode&#125;&lt;/Description&gt; &lt;Description term=&quot;èµ„æºIDS&quot;&gt;&#123;record.resourceIds&#125;&lt;/Description&gt; &lt;/DescriptionList&gt; &lt;DescriptionList style=&#123;&#123; marginTop: 15 &#125;&#125; size=&quot;small&quot;&gt; &lt;Description term=&quot;çŸ­ä¿¡éªŒè¯ç é•¿åº¦&quot;&gt;&#123;record.smsCodeLength&#125;&lt;/Description&gt; &lt;Description term=&quot;çŸ­ä¿¡éªŒè¯ç æœ‰æ•ˆæœŸ&quot;&gt; &#123;record.smsCodeLength ? `$&#123;record.smsCodeLength&#125;åˆ†é’Ÿ` : &apos;&apos;&#125; &lt;/Description&gt; &lt;Description term=&quot;çŸ­ä¿¡éªŒè¯ç ç­¾å&quot;&gt;&#123;record.smsCodeSign&#125;&lt;/Description&gt; &lt;/DescriptionList&gt; &lt;/div&gt; ); &#125;; handleOpenForm = formData =&gt; &#123; const &#123; dispatch &#125; = this.props; dispatch(&#123; type: &apos;client/openForm&apos;, payload: formData &#125;); &#125;; handleCloseForm = () =&gt; &#123; const &#123; dispatch &#125; = this.props; dispatch(&#123; type: &apos;client/closeForm&apos; &#125;); &#125;; handleAdd = values =&gt; &#123; const &#123; dispatch &#125; = this.props; dispatch(&#123; type: &apos;client/update&apos;, payload: values &#125;).then(() =&gt; &#123; message.success(&apos;æ“ä½œæˆåŠŸ&apos;); &#125;); &#125;; handleRemove = record =&gt; &#123; const &#123; dispatch &#125; = this.props; dispatch(&#123; type: &apos;client/remove&apos;, payload: record.clientId &#125;).then(() =&gt; &#123; message.success(&apos;åˆ é™¤æˆåŠŸ&apos;); &#125;); &#125;; render() &#123; const &#123; client: &#123; list, form &#125;, loading, submitting, &#125; = this.props; const paginationProps = &#123; showSizeChanger: true, showQuickJumper: true, ...list.pagination, &#125;; return ( &lt;PageHeaderWrapper title=&quot;åº”ç”¨åˆ—è¡¨&quot;&gt; &lt;Card bordered=&#123;false&#125;&gt; &lt;div className=&#123;styles.tableList&#125;&gt; &lt;div className=&#123;styles.tableListForm&#125; /&gt; &lt;div className=&#123;styles.tableListOperator&#125;&gt; &lt;Button icon=&quot;plus&quot; type=&quot;primary&quot; onClick=&#123;this.handleOpenForm&#125;&gt; æ–°å»º &lt;/Button&gt; &lt;/div&gt; &lt;Table rowKey=&quot;clientId&quot; size=&quot;middle&quot; columns=&#123;this.columns&#125; loading=&#123;loading&#125; dataSource=&#123;list.data&#125; pagination=&#123;paginationProps&#125; onChange=&#123;this.handleTableChange&#125; expandedRowRender=&#123;this.handleTableExpand&#125; /&gt; &lt;/div&gt; &lt;/Card&gt; &lt;ClientForm data=&#123;form.data&#125; visible=&#123;form.visible&#125; submitting=&#123;submitting&#125; onClose=&#123;this.handleCloseForm&#125; onSave=&#123;this.handleAdd&#125; /&gt; &lt;/PageHeaderWrapper&gt; ); &#125;&#125;export default ClientList; 2ã€ClientFormï¼šæ·»åŠ ç¼–è¾‘å•æ¡æ•°æ®çš„Form123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; Modal, Form, Input, Tabs, InputNumber &#125; from &apos;antd&apos;;import SecretInput from &apos;./SecretInput&apos;;import PeriodInput from &apos;./PeriodInput&apos;;import GrantTypeInput from &apos;./GrantTypeInput&apos;;import SmsSignInput from &apos;./SmsSignInput&apos;;const &#123; Item: FormItem &#125; = Form;const &#123; TabPane &#125; = Tabs;@Form.create()class ClientForm extends PureComponent &#123; state = &#123; tabKey: &apos;1&apos;, &#125;; reset = () =&gt; &#123; const &#123; form &#125; = this.props; form.resetFields(); this.setState(&#123; tabKey: &apos;1&apos; &#125;); &#125;; render() &#123; const &#123; data, visible, submitting, onSave, onClose, form &#125; = this.props; const &#123; tabKey &#125; = this.state; const formItemLayout = &#123; labelCol: &#123; span: 5 &#125;, wrapperCol: &#123; span: 15 &#125;, &#125;; const title = data.clientId ? &apos;æ›´æ–°åº”ç”¨&apos; : &apos;æ·»åŠ åº”ç”¨&apos;; return ( &lt;Modal style=&#123;&#123; top: 10 &#125;&#125; width=&#123;800&#125; title=&#123;title&#125; visible=&#123;visible&#125; confirmLoading=&#123;submitting&#125; onCancel=&#123;() =&gt; &#123; this.reset(); onClose(); &#125;&#125; onOk=&#123;() =&gt; &#123; form.validateFields((err, values) =&gt; &#123; if (!err) onSave(values); else this.setState(&#123; tabKey: &apos;1&apos; &#125;); &#125;); &#125;&#125; &gt; &lt;Form&gt; &lt;Tabs tabPosition=&quot;left&quot; activeKey=&#123;tabKey&#125; onChange=&#123;activeKey =&gt; this.setState(&#123; tabKey: activeKey &#125;)&#125; &gt; &lt;TabPane tab=&quot;æŽˆæƒè®¾ç½®&quot; key=&quot;1&quot;&gt; &lt;FormItem label=&quot;åº”ç”¨ID&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;clientId&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: true, message: &apos;åº”ç”¨IDä¸èƒ½ä¸ºç©ºï¼&apos;, &#125;, ], initialValue: data.clientId, &#125;)(&lt;Input disabled=&#123;!!data.clientId&#125; /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;åº”ç”¨åç§°&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;clientName&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: true, message: &apos;åº”ç”¨åç§°ä¸èƒ½ä¸ºç©ºï¼&apos;, &#125;, ], initialValue: data.clientName, &#125;)(&lt;Input /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;èµ„æºIDs&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;resourceIds&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: true, message: &apos;èµ„æºIDsä¸èƒ½ä¸ºç©ºï¼&apos;, &#125;, ], initialValue: data.resourceIds, &#125;)(&lt;Input /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;æŽˆæƒç±»åž‹&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;authorizedGrantTypes&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: true, message: &apos;è¯·é€‰æ‹©æŽˆæƒç±»åž‹ï¼&apos;, &#125;, ], initialValue: data.authorizedGrantTypes, &#125;)(&lt;GrantTypeInput /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;Tokenæœ‰æ•ˆæœŸ&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;accessTokenValidity&apos;, &#123; initialValue: _.defaultTo(data.accessTokenValidity, &apos;&apos;), &#125;)(&lt;PeriodInput /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;Refreshæœ‰æ•ˆæœŸ&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;refreshTokenValidity&apos;, &#123; initialValue: _.defaultTo(data.refreshTokenValidity, &apos;&apos;), &#125;)(&lt;PeriodInput /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;ç§˜é’¥&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;clientSecret&apos;, &#123; initialValue: _.defaultTo(data.clientSecret, &apos;&apos;), &#125;)(&lt;SecretInput /&gt;)&#125; &lt;/FormItem&gt; &lt;/TabPane&gt; &lt;TabPane tab=&quot;çŸ­ä¿¡è®¾ç½®&quot; key=&quot;2&quot;&gt; &lt;FormItem label=&quot;éªŒè¯ç é•¿åº¦&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;smsCodeLength&apos;, &#123; initialValue: data.smsCodeLength, &#125;)(&lt;InputNumber min=&#123;1&#125; style=&#123;&#123; width: 300 &#125;&#125; /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;éªŒè¯ç æœ‰æ•ˆæœŸ(åˆ†é’Ÿ)&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;smsCodeExpire&apos;, &#123; initialValue: data.smsCodeExpire, &#125;)(&lt;InputNumber min=&#123;1&#125; style=&#123;&#123; width: 300 &#125;&#125; /&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;éªŒè¯ç ç­¾å&quot; &#123;...formItemLayout&#125;&gt; &#123;form.getFieldDecorator(&apos;smsCodeSign&apos;, &#123; initialValue: data.smsCodeSign, &#125;)(&lt;SmsSignInput /&gt;)&#125; &lt;/FormItem&gt; &lt;/TabPane&gt; &lt;/Tabs&gt; &lt;/Form&gt; &lt;/Modal&gt; ); &#125;&#125;export default ClientForm; 3ã€ClientUtil.js123456789101112131415161718192021222324252627import _ from &apos;lodash&apos;;import moment from &apos;moment&apos;;export const authTypes = [ &#123; name: &apos;æŽˆæƒç æ¨¡å¼&apos;, value: &apos;authorization_code&apos; &#125;, &#123; name: &apos;ç®€åŒ–æ¨¡å¼&apos;, value: &apos;implicit&apos; &#125;, &#123; name: &apos;å¯†ç æ¨¡å¼&apos;, value: &apos;password&apos; &#125;, &#123; name: &apos;å®¢æˆ·ç«¯æ¨¡å¼&apos;, value: &apos;client_credentials&apos; &#125;, &#123; name: &apos;åˆ·æ–°æ¨¡å¼&apos;, value: &apos;refresh_token&apos; &#125;,];export function getOAuthTypeNames(str) &#123; if (!str) return []; const values = str.split(&apos;,&apos;); return values.map(value =&gt; _.find(authTypes, t =&gt; t.value === value).name);&#125;export function getResources(str) &#123; if (!str) return []; return str.split(&apos;,&apos;);&#125;export function humanizeTime(value) &#123; let timeText = &apos;&apos;; if (value) &#123; timeText = moment.duration(value, &apos;seconds&apos;).humanize(); &#125; else &#123; timeText = &apos;æœªè®¾ç½®&apos;; &#125; return timeText;&#125; 4ã€GrantTypeInputç»„ä»¶GrantTypeInput.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; Select &#125; from &apos;antd&apos;;import &#123; authTypes &#125; from &apos;./ClientUtil&apos;;const &#123; Option &#125; = Select;class GrantTypeInput extends PureComponent &#123; state = &#123; value: [], &#125;; componentWillMount() &#123; const &#123; props &#125; = this; if (props.value) &#123; const value = props.value ? props.value.split(&apos;,&apos;) : []; this.setState(&#123; value &#125;); &#125; &#125; componentWillReceiveProps(nextProps) &#123; const &#123; props &#125; = this; if (props.value !== nextProps.value &amp;&amp; !nextProps.value) &#123; this.setState(&#123; value: [] &#125;); &#125; else &#123; const value = nextProps.value ? nextProps.value.split(&apos;,&apos;) : []; this.setState(&#123; value &#125;); &#125; &#125; handleSelectChange = value =&gt; &#123; const &#123; onChange &#125; = this.props; this.setState(&#123; value &#125;); if (onChange) onChange(value.join(&apos;,&apos;)); &#125;; render() &#123; const &#123; value &#125; = this.state; return ( &lt;Select style=&#123;&#123; width: &apos;100%&apos; &#125;&#125; mode=&quot;multiple&quot; value=&#123;value&#125; onChange=&#123;this.handleSelectChange&#125; &gt; &#123;authTypes.map((type, index) =&gt; ( &lt;Option key=&#123;index&#125; value=&#123;type.value&#125;&gt; &#123;type.name&#125; &lt;/Option&gt; ))&#125; &lt;/Select&gt; ); &#125;&#125;export default GrantTypeInput; 5ã€tokenæœ‰æ•ˆæœŸè¾“å…¥ç»„ä»¶PeriodInput.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586import React, &#123; PureComponent &#125; from &apos;react&apos;;import moment from &apos;moment&apos;;import &#123; Input, Select &#125; from &apos;antd&apos;;const &#123; Option &#125; = Select;const getTime = (time, fromUnit, toUnit) =&gt; moment.duration(Number(time), fromUnit).as(toUnit);export const timeUnits = [ &#123; name: &apos;ç§’&apos;, value: &apos;seconds&apos; &#125;, &#123; name: &apos;åˆ†é’Ÿ&apos;, value: &apos;minutes&apos; &#125;, &#123; name: &apos;å°æ—¶&apos;, value: &apos;hours&apos; &#125;, &#123; name: &apos;å¤©&apos;, value: &apos;days&apos; &#125;,];class PeriodInput extends PureComponent &#123; state = &#123; value: &apos;&apos;, unit: &apos;seconds&apos;, &#125;; componentWillMount() &#123; const &#123; props &#125; = this; if (props.value) &#123; this.setState(&#123; unit: &apos;seconds&apos;, value: props.value, &#125;); &#125; &#125; componentWillReceiveProps(nextProps) &#123; const &#123; props &#125; = this; if (props.value !== nextProps.value &amp;&amp; !nextProps.value) &#123; this.setState(&#123; unit: &apos;seconds&apos;, value: &apos;&apos;, &#125;); &#125; else &#123; this.setState(&#123; unit: &apos;seconds&apos;, value: nextProps.value, &#125;); &#125; &#125; handleSelectChange = unitValue =&gt; &#123; const &#123; unit, value &#125; = this.state; const newValue = value ? getTime(value, unit, unitValue) : &apos;&apos;; this.setState(&#123; unit: unitValue, value: newValue, &#125;); &#125;; onChangeValue = e =&gt; &#123; const &#123; value &#125; = e.target; const &#123; unit &#125; = this.state; const &#123; onChange &#125; = this.props; const seconds = getTime(value, unit, &apos;seconds&apos;); this.setState(&#123; value &#125;); if (onChange) onChange(seconds); &#125;; render() &#123; const &#123; unit, value &#125; = this.state; return ( &lt;Input value=&#123;value&#125; onChange=&#123;this.onChangeValue&#125; addonAfter=&#123; &lt;Select style=&#123;&#123; width: 80 &#125;&#125; value=&#123;unit&#125; onChange=&#123;this.handleSelectChange&#125;&gt; &#123;timeUnits.map(t =&gt; ( &lt;Option key=&#123;t.value&#125; value=&#123;t.value&#125;&gt; &#123;t.name&#125; &lt;/Option&gt; ))&#125; &lt;/Select&gt; &#125; /&gt; ); &#125;&#125;export default PeriodInput; 6ã€ç§˜é’¥ç”Ÿæˆç»„ä»¶SecretInput.js12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; Row, Col, Slider, Input &#125; from &apos;antd&apos;;import random from &apos;@/utils/random&apos;;const minValue = 10;const maxValue = 30;const defaultState = &#123; visible: false, value: &apos;&apos;, length: 10,&#125;;class SecretInput extends PureComponent &#123; state = &#123; ...defaultState &#125;; componentWillMount() &#123; const &#123; props &#125; = this; if (props.value) &#123; this.setState(&#123; value: props.value &#125;); &#125; &#125; componentWillReceiveProps(nextProps) &#123; const &#123; props &#125; = this; if (props.value !== nextProps.value &amp;&amp; !nextProps.value) &#123; this.setState(&#123; ...defaultState &#125;); &#125; else &#123; this.setState(&#123; value: nextProps.value &#125;); &#125; &#125; handleCreatePwd = () =&gt; &#123; const &#123; length &#125; = this.state; this.setState(&#123; visible: true &#125;); this.handleChangeLength(length); &#125;; handleChangeLength = length =&gt; &#123; const value = random.generate(length); this.setState(&#123; length &#125;); this.handleChangeValue(value); &#125;; handleChangeValue = value =&gt; &#123; const &#123; onChange &#125; = this.props; this.setState(&#123; value &#125;); if (onChange) onChange(value); &#125;; render() &#123; const &#123; visible, value, length &#125; = this.state; return ( &lt;div&gt; &lt;Row gutter=&#123;8&#125;&gt; &lt;Col span=&#123;20&#125;&gt; &lt;Input value=&#123;value&#125; onChange=&#123;this.handleChangeValue&#125; /&gt; &lt;/Col&gt; &lt;Col span=&#123;4&#125;&gt; &lt;a onClick=&#123;this.handleCreatePwd&#125;&gt;éšæœºç”Ÿæˆ&lt;/a&gt; &lt;/Col&gt; &lt;/Row&gt; &#123;visible ? ( &lt;Row&gt; &lt;Col span=&#123;20&#125;&gt; &lt;Slider min=&#123;minValue&#125; max=&#123;maxValue&#125; value=&#123;length&#125; onChange=&#123;this.handleChangeLength&#125; /&gt; &lt;/Col&gt; &lt;/Row&gt; ) : null&#125; &lt;/div&gt; ); &#125;&#125;export default SecretInput; 7ã€çŸ­ä¿¡ç­¾åï¼šè¾“å…¥å†…å®¹ä¸Žæ•°æ®åº“ä¿å­˜ä¸ä¸€è‡´ï¼Œå‰ç«¯æ­£åˆ™åŠ å‡æ‹¬å·1234567891011121314151617181920212223242526272829303132333435363738394041424344import React, &#123; PureComponent &#125; from &apos;react&apos;;import &#123; Input &#125; from &apos;antd&apos;;const removeBrackets = value =&gt; (value ? value.replace(/[ã€ã€‘]/g, &apos;&apos;) : &apos;&apos;);const addBrackets = value =&gt; (value ? `ã€$&#123;value&#125;ã€‘` : &apos;&apos;);class SmsSignInput extends PureComponent &#123; state = &#123; value: &apos;&apos;, &#125;; componentWillMount() &#123; const &#123; props &#125; = this; if (props.value) this.setStateValue(props.value); &#125; componentWillReceiveProps(nextProps) &#123; const &#123; props &#125; = this; if (props.value !== nextProps.value &amp;&amp; !nextProps.value) &#123; this.setStateValue(&apos;&apos;); &#125; else &#123; this.setStateValue(nextProps.value); &#125; &#125; setStateValue = value =&gt; &#123; this.setState(&#123; value: removeBrackets(value) &#125;); &#125;; handleChangeValue = e =&gt; &#123; const &#123; value &#125; = e.target; const &#123; onChange &#125; = this.props; this.setState(&#123; value &#125;); if (onChange) onChange(addBrackets(value)); &#125;; render() &#123; const &#123; value &#125; = this.state; const &#123; props &#125; = this; return &lt;Input &#123;...props&#125; value=&#123;value&#125; onChange=&#123;this.handleChangeValue&#125; /&gt;; &#125;&#125;export default SmsSignInput;]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Data Jpa ä½¿ç”¨å¤‡å¿˜]]></title>
    <url>%2F2019%2F03%2F24%2FSpring%20Data%20Jpa%20%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98%2F</url>
    <content type="text"><![CDATA[å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´,springboot+SpringDataJpaç”¨äº†å¾ˆä¹…äº†,ç”¨åˆ°äº†åº”è¯¥è®°å½•ä¸€ä¸‹ã€‚ç®€ä¹¦åœ°å€springboot+SpringDataJpaç”¨äº†å¾ˆä¹…äº†ï¼Œæœ‰äº›ä¸œè¥¿ä¸ç”¨æ—¶é—´é•¿äº†ä¹Ÿè¿˜æ˜¯ä¼šå¿˜ã€‚å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œè¿™è¯æ˜¯æœ‰é“ç†çš„ï¼Œæ‰€ä»¥ç”¨åˆ°ä»€ä¹ˆå°±ç®€å•è®°å½•ä¸‹ï¼Œè¿˜æ˜¯æœ‰å¥½å¤„çš„ã€‚ 1ã€Qqueryä¸èƒ½ä½¿ç”¨limitå…³é”®å­—ç¬¬ä¸€ç§æ–¹å¼ï¼šä½¿ç”¨nativeQuery12@Query(&quot;SELECT * FROM t_misaka m WHERE m.id&gt;4 limit 0,2&quot;, nativeQuery=true) Page&lt;Misaka&gt; search(Pageable pageable); ç¬¬äºŒç§æ–¹å¼:ä½¿ç”¨Pageå®žçŽ°1234Pageable pageable = new PageRequest(1, 2, Direction.ASC, &quot;name&quot;); Page&lt;Misaka&gt; misakaPage = misakaDao.search(pageable); List&lt;Misaka&gt; misakaList = misakaPage.getContent(); æŸ¥è¯¢æŽ¥å£12@Query(&quot;SELECT m FROM Misaka m WHERE m.id&gt;4&quot;) Page&lt;Misaka&gt; search(Pageable pageable); æ³¨æ„ï¼šå¦‚æžœä½¿ç”¨springboot2.xï¼Œä¸Šé¢çš„Pageable pageable = new PageRequestéœ€è¦æ”¹æˆPageable pageable = PageRequest.of();ï¼Œé‡Œé¢å‚æ•°ä¸€æ ·ã€‚ 2ã€Jpa Repositoryé‡Œç”¨@Queryçš„æŸ¥è¯¢ç»“æžœé›†è‡ªå®šä¹‰æŽ¥å—å®žä½“ç›´æŽ¥ä¸ŠæŸ¥è¯¢ä»£ç ï¼š123456789101112@Query(&quot;SELECT d.smsDate AS smsDate , SUM(d.smsSendCount) AS smsSendCount , SUM(d.smsSendFailureCount) AS smsSendFailureCount &quot; + &quot; FROM DashboardSms d&quot; + &quot; WHERE d.smsDate between :startDate AND :endDate &quot; + &quot; GROUP BY d.smsDate &quot; + &quot; ORDER BY d.smsDate ASC &quot;)List&lt;SmsCountSum&gt; findAllBySmsDate(Date startDate, Date endDate);interface SmsCountSum &#123; Date getSmsDate(); Integer getSmsSendCount(); Integer getSmsSendFailureCount();&#125; è°ƒç”¨å¤„ï¼š12345678List&lt;SlaveDashboardSmsRepository.SmsCountSum&gt; list = slaveDashboardSmsRepository.findAllBySmsDate(startDate, entDate);List&lt;DashboardXYVo&gt; smsChartData = list.stream().map(this::smsDataToVo).collect(Collectors.toList());private DashboardXYVo smsDataToVo(SlaveDashboardSmsRepository.SmsCountSum sms) &#123; DashboardXYVo vo = new DashboardXYVo(); vo.setX(DateUtil.date2str(sms.getSmsDate(), DateUtil.MONTH_DAY_FORMAT)); vo.setY(String.valueOf(sms.getSmsSendCount())); return vo;&#125; 3ã€ä½¿ç”¨SpecificationæŸ¥è¯¢ä¸€ä¸ªå¸¸å†™çš„ä¾‹å­ï¼š12345678910111213141516171819202122public static Specification&lt;DashboardAppSmsLogin&gt; build(Date startDate, Date endDate) &#123; return (root, criteriaQuery, builder) -&gt; &#123; Predicate predicate = builder.conjunction(); try &#123; if (startDate != null) &#123; Predicate graterStartTime = null; graterStartTime = builder.greaterThanOrEqualTo(root.get(&quot;smsDate&quot;), DateUtil.formateData(startDate, DateUtil.DATE_FORMAT)); predicate = builder.and(predicate, graterStartTime); &#125; if (endDate != null) &#123; Predicate lessEndTime = builder.lessThanOrEqualTo(root.get(&quot;smsDate&quot;), DateUtil.formateData(endDate, DateUtil.DATE_FORMAT)); predicate = builder.and(predicate, lessEndTime); &#125; &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; criteriaQuery.orderBy(builder.desc(root.get(&quot;appName&quot;))); return predicate; &#125;;&#125; ä½¿ç”¨ï¼š123Date yesterday = DateUtil.pastDate(new Date, 1);Specification&lt;DashboardAppSmsLogin&gt; spec = DashboardAppSmsSpecs.build(yesterday, new Date);List&lt;DashboardAppSmsLogin&gt; appSmsLogin = slaveDashboardAppSmsLoginRepository.findAll(spec); å°è£…ä¸€å±‚æ¡ä»¶æŸ¥çš„ä¾‹å­ï¼šåŒ…æ‹¬equalã€likeã€å¤§äºŽç­‰äºŽã€å°äºŽç­‰äºŽã€æ—¶é—´ç­‰æ¡ä»¶ã€‚12345678910111213141516171819202122232425262728293031323334353637383940/** * ç™»å½•æˆåŠŸæž„å»º * @param query * @return */public static Specification&lt;UserLoginLog&gt; loginBuild(UserLoginLogQuery query) &#123; return (root, criteriaQuery, builder) -&gt; buildPredicate(root, builder, query);&#125;/** * ç™»å½•å¤±è´¥æž„å»º * @param query * @return */public static Specification&lt;UserLoginFailureLog&gt; loginFailureBuild(UserLoginLogQuery query) &#123; return (root, criteriaQuery, builder) -&gt; buildPredicate(root, builder, query);&#125;private static Predicate buildPredicate(Root root, CriteriaBuilder builder, UserLoginLogQuery query)&#123; Predicate predicate = builder.conjunction(); if (!StringUtils.isEmpty(query.getAppId())) &#123; Predicate equalMenuValue = builder.equal(root.get(&quot;appId&quot;), query.getAppId()); predicate = builder.and(predicate, equalMenuValue); &#125; if (!StringUtils.isEmpty(query.getMobile())) &#123; String likeMobile = &quot;%&quot; + query.getMobile() + &quot;%&quot;; Predicate equalMenuValue = builder.like(root.get(&quot;mobile&quot;), likeMobile); predicate = builder.and(predicate, equalMenuValue); &#125; if (query.getStartLoginTime() != null) &#123; Predicate graterStartTime = builder.greaterThanOrEqualTo(root.get(&quot;loginTime&quot;), query.getStartLoginTime()); predicate = builder.and(predicate, graterStartTime); &#125; if (query.getEndLoginTime() != null) &#123; Predicate lessEndTime = builder.lessThanOrEqualTo(root.get(&quot;loginTime&quot;), query.getEndLoginTime()); predicate = builder.and(predicate, lessEndTime); &#125; return predicate;&#125; è°ƒç”¨å°±ä¸€æ ·äº†ã€‚ 4ã€ç”¨@Modifyingè¿›è¡Œæ›´æ–°æ“ä½œ123@Modifying@Query(&quot;update YhTask t set t.deleteFlag = &apos;1&apos; where t.taskId = :taskId&quot;)int logicDeleteTask(@Param(&quot;taskId&quot;) String taskId); 5ã€JPAçš„Queryé‡Œè¿›è¡Œæ¡ä»¶ä¸ºç©ºå®¹é”™ï¼Œæ—¶é—´æ ¼å¼åŒ–1234567891011@Query(&quot;select u from YhUser u &quot; + &quot;where u.deleteFlag = &apos;0&apos; and u.leaderFlag = &apos;0&apos; &quot; + &quot;and u.fullName like concat(&apos;%&apos;,:createUserName,&apos;%&apos;) &quot; + &quot;and (:platformId is null or :platformId is not null and u.platformId = :platformId) &quot; + &quot;and (:areaId is null or :areaId is not null and u.areaId = :areaId) &quot; + &quot; and DATE_FORMAT(s.firstLoginTime,&apos;%Y-%m-%d&apos;)&gt;=str_to_date(:startTime,&apos;%Y-%m-%d&apos;) &quot; + &quot; and DATE_FORMAT(s.firstLoginTime,&apos;%Y-%m-%d&apos;)&lt;=str_to_date(:endTime,&apos;%Y-%m-%d&apos;)&quot; + &quot;and u.haierUserId not in (&quot; + &quot;select t.createUserId from YhTask t where t.deleteFlag = &apos;0&apos; &quot; + &quot;and t.createTime between :startTime and :endTime)&quot;) List&lt;YhUser&gt; findUnsubmitedUserByTime(@Param(&quot;createUserName&quot;) String createUserName, @Param(&quot;platformId&quot;) String platformId, @Param(&quot;areaId&quot;) String areaId, @Param(&quot;startTime&quot;) Date startTime, @Param(&quot;endTime&quot;) Date endTime); 6ã€å¤šè¡¨çº§è”çš„æƒ…å†µï¼Œæ¡ä»¶æŸ¥è¯¢ç¤ºä¾‹æ¯”å¦‚ï¼Œéƒ¨é—¨å®žä½“ï¼š12345678910111213141516171819@Data@Entity@Table(name = &quot;t_user&quot;)public class User implements Serializable &#123; private static final long serialVersionUID = 3046056270962780761L; /** * ç”¨æˆ·id */ @Id @GenericGenerator(name = &quot;idGenerator&quot;, strategy = &quot;uuid&quot;) @GeneratedValue(generator = &quot;idGenerator&quot;) private String userId; @ManyToOne @JoinColumn(name = &quot;dept_id&quot;) @NotFound(action = NotFoundAction.IGNORE) private Department department; éƒ¨é—¨å®žä½“ï¼š123456789101112131415161718192021222324252627@Data@Entity@Table(name = &quot;t_department&quot;)public class Department implements Serializable &#123; private static final long serialVersionUID = 5415593855586815943L; @Id @GenericGenerator(name = &quot;idGenerator&quot;, strategy = &quot;uuid&quot;) @GeneratedValue(generator = &quot;idGenerator&quot;) @Column(name = &quot;dept_id&quot;) private String deptId; /** * éƒ¨é—¨ä»¬ç§° */ private String deptName; /** * éƒ¨é—¨ä»£ç  */ private String deptCode; /** * çˆ¶èŠ‚ç‚¹ */ private String parentId; æ ¹æ®å¤šä¸ªéƒ¨é—¨idæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨12List&lt;String&gt; allDeptIds = findDeptIds(deptId);Page&lt;HaierUser&gt; users = haierUserRepository.findByDepartment_DeptIdIn(allDeptIds, pageable); findByDepartment_DeptIdInæ–¹æ³•å‘¢ï¼Ÿ12345678/** * é€šè¿‡éƒ¨é—¨IDæŸ¥è¯¢ç”¨æˆ· * * @param deptIds * @param pageable * @return */ Page&lt;HaierUser&gt; findByDepartment_DeptIdIn(List&lt;String&gt; deptIds, Pageable pageable); ä¸­é—´ä¸€ä¸ªä¸‹åˆ’çº¿é“¾æŽ¥ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ 7ã€åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´è‡ªåŠ¨å¤„ç†12345678910111213141516171819@Entity @Table(name=&quot;t_login_log&quot;) @Datapublic class LoginLog &#123; @Id @GenericGenerator(name=&quot;UUIDGENERATE&quot;,strategy=&quot;uuid2&quot;) @GeneratedValue(generator=&quot;UUIDGENERATE&quot;) @Column(name=&quot;id&quot;,length=36) private String id; @Column(name=&quot;create_time, updatable = false) @Temporal(TemporalType.TIMESTAMP) @org.hibernate.annotations.CreationTimestamp private Date createTime; @Column(name=&quot;update_time&quot;) @Temporal(TemporalType.TIMESTAMP) @org.hibernate.annotations.UpdateTimestamp private Date updateTime; 8ã€å®žä½“ä¸Šå¸¸ç”¨çš„ä¸€äº›æ³¨è§£æ—¶é—´æ ¼å¼åŒ–123@JsonFormat(pattern = DateUtil.TIME_FORMAT, timezone = &quot;GMT+8&quot;)@Column(updatable = false)private Date createTime; åœ¨jsonç»“æž„ä¸­å¿½ç•¥12345/** * åˆ é™¤æ ‡å¿—ï¼Œ1ï¼šåˆ é™¤ï¼Œ0ï¼šæœªåˆ é™¤ */@JsonIgnoreprivate Boolean deleteFlag = false; æ’å…¥/æ›´æ–°æ—¶è‡ªåŠ¨èµ‹å€¼123456789 @PrePersist public void PrePersist() &#123; this.createTime = new Date(); &#125;@PreUpdate public void PreUpdate() &#123; this.updateTime = new Date(); &#125; @Temporal(TemporalType.DATE)åœ¨é¡µé¢ç«¯å–å€¼ï¼š2016â€“09â€“28@Temporal(TemporalType.TIME)åœ¨é¡µé¢ç«¯å–å€¼ï¼š15:50:30@Temporal(TemporalType.TIMESTAMP)åœ¨é¡µé¢ç«¯å–å€¼ï¼š2016-09-28 15:52:32:000 9ã€è‡ªå®šä¹‰Repositoryå®žçŽ°æŸ¥è¯¢12345678910111213141516171819202122232425262728293031323334353637import org.springframework.stereotype.Repository;import javax.persistence.EntityManager;import javax.persistence.PersistenceContext;import javax.persistence.Query;import java.util.List;/** * æŽ¨é€ç±»åž‹ç»Ÿè®¡ */@Repositorypublic class MessageStatisticRepository &#123; @PersistenceContext private EntityManager entityManager; /** * ç»Ÿè®¡æ¯ä¸ªæŽ¨é€ç±»åž‹çš„æŽ¨é€æ¶ˆæ¯æ•°é‡ * @param userId * @param search * @return */ public List&lt;Object[]&gt; findMessageTypeCont(String userId, String search)&#123; String sql = &quot;SELECT t.id,t.title,t.icon,p.num FROM t_message_type AS t INNER JOIN &quot; + &quot;(&quot; + &quot;SELECT type,COUNT(*) AS num FROM t_message_push &quot; + &quot;WHERE (title LIKE :search OR content LIKE :search) AND state &lt;&gt; 3 AND receive_user_id=:userId &quot; + &quot;GROUP BY type&quot; + &quot;) AS p &quot; + &quot; on t.id = p.type WHERE t.delete_flag=0 ORDER BY t.order ASC&quot;; Query query = entityManager.createNativeQuery(sql); query.setParameter(&quot;search&quot;, &apos;%&apos; +search + &apos;%&apos;); query.setParameter(&quot;userId&quot;, userId); return query.getResultList(); &#125;&#125; èŽ·å–åˆ°çš„ç»“æžœæ˜¯Listçš„Objectæ•°ç»„ï¼Œé‡Œé¢çš„å€¼éœ€è¦è§£æžObjectèŽ·å–ã€‚ 1234567891011public static MessageTypeVo toMessageTypeVo(Object[] data)&#123; MessageTypeVo messageType = new MessageTypeVo(); messageType.setId((String) data[0]); messageType.setTitle((String) data[1]); messageType.setIcon((String) data[2]); messageType.setCount((BigInteger) data[3]); return messageType;&#125;List&lt;Object[]&gt; rows = messageStatisticRepository.findMessageTypeCont(userId, keywords);List&lt;MessageTypeVo&gt; messageTypes = rows.stream().map(MessageTypeVo::toMessageTypeVo).collect(Collectors.toList()); ä¸Šé¢çš„æŸ¥è¯¢å¦‚æžœä¸è¿”å›žObjectï¼Œä¹Ÿå¯ä»¥è®¾ç½®è¿”å›žæˆmapï¼Œåªéœ€è¦åœ¨æŸ¥è¯¢å‰è®¾ç½®ResultTransformerå³å¯:12query.unwrap(SQLQuery.class).setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP);List&lt;Map&lt;String, Object&gt;&gt; resultLit = query.getResultList(); 10ã€å¤šè¡¨çº§è”æŸ¥è¯¢è‡ªå®šä¹‰è¿”å›žç»“æžœé¦–å…ˆå®šä¹‰ä¸€ä¸ªç»“æžœé›†çš„æŽ¥å£ç±»ï¼Œ12345678public interface HotelSummary &#123; City getCity(); String getName(); Double getAverageRating(); default Integer getAverageRatingRounded() &#123; return getAverageRating() == null ? null : (int) Math.round(getAverageRating()); &#125;&#125; æŸ¥è¯¢çš„æ–¹æ³•è¿”å›žç±»åž‹è®¾ç½®ä¸ºæ–°åˆ›å»ºçš„æŽ¥å£1234567@Query(&quot;select h.city as city, h.name as name, avg(r.rating) as averageRating &quot; - &quot;from Hotel h left outer join h.reviews r where h.city = ?1 group by h&quot;)Page&lt;HotelSummary&gt; findByCity(City city, Pageable pageable);@Query(&quot;select h.name as name, avg(r.rating) as averageRating &quot; - &quot;from Hotel h left outer join h.reviews r group by h&quot;)Page&lt;HotelSummary&gt; findByCity(Pageable pageable); ä½¿ç”¨1234Page&lt;HotelSummary&gt; hotels = this.hotelRepository.findByCity(new PageRequest(0, 10, Direction.ASC, &quot;name&quot;));for(HotelSummary summay:hotels) &#123; System.out.println(&quot;Name&quot; +summay.getName());&#125; ç¢°åˆ°çš„é”™è¯¯ç‰ˆæœ¬é—®é¢˜1ã€é—®é¢˜å’ŒçŽ°çŠ¶é…ç½®ä¸€ä¸ªHibernateçš„OneToManyçš„æ˜ å°„ï¼Œæƒ³è¦è¾¾åˆ°çº§è”ä¿å­˜å’Œçº§è”æŸ¥è¯¢ï¼ŒæŸ¥ä¸»ä½“æ—¶å°†å¯¹åº”çš„manyçš„åˆ—è¡¨é¡µæŸ¥å‡ºæ¥ï¼Œä½†æ˜¯åœ¨å¦‚ä¸‹çš„é…ç½®åŽï¼Œä¸»è¡¨ï¼š1234567891011121314@Data@Entity@Table(name = &quot;t_patient&quot;)public class Patient &#123; @Id @GenericGenerator(name = &quot;idGenerator&quot;, strategy = &quot;uuid&quot;) @GeneratedValue(generator = &quot;idGenerator&quot;) @Column(name = &quot;patient_id&quot;, length = 40) private String patientId; @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER) @JoinColumn(name = &quot;patient_id&quot;) private List&lt;PatientAllergicHistory&gt; patientAllergicHistory = new LinkedList&lt;&gt;();&#125; å­è¡¨ï¼š1234567891011121314@Data@Entity@Table(name = &quot;t_patient_allergic_history&quot;)public class PatientAllergicHistory &#123; @Id @GenericGenerator(name = &quot;idGenerator&quot;, strategy = &quot;uuid&quot;) @GeneratedValue(generator = &quot;idGenerator&quot;) @Column(name = &quot;id&quot;) private Long id; /** æ‚£è€…id */ @Column(name = &quot;patient_id&quot;) private String patientId;&#125; æŸ¥è¯¢æ—¶æŠ›å‡ºå¼‚å¸¸1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: failed to lazily initialize a collection of role: com.hczt.xhminiapp.db.entity.Patient.patientContacts, could not initialize proxy - no Session; nested exception is com.fasterxml.jackson.databind.JsonMappingException: failed to lazily initialize a collection of role: com.hczt.xhminiapp.db.entity.Patient.patientContacts, could not initialize proxy - no Session (through reference chain: com.hczt.xhminiapp.common.bean.RtnResult[&quot;data&quot;]-&gt;com.hczt.xhminiapp.db.entity.Patient[&quot;patientContacts&quot;]) at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:296) at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:103) at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:290) at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:180) at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:82) at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:119) at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:200) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:834) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.lang.Thread.run(Thread.java:748)Caused by: com.fasterxml.jackson.databind.JsonMappingException: failed to lazily initialize a collection of role: com.hczt.xhminiapp.db.entity.Patient.patientContacts, could not initialize proxy - no Session (through reference chain: com.hczt.xhminiapp.common.bean.RtnResult[&quot;data&quot;]-&gt;com.hczt.xhminiapp.db.entity.Patient[&quot;patientContacts&quot;]) at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:394) at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:353) at com.fasterxml.jackson.databind.ser.std.StdSerializer.wrapAndThrow(StdSerializer.java:316) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:727) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1396) at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:913) at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:287) ... 47 common frames omittedCaused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.hczt.xhminiapp.db.entity.Patient.patientContacts, could not initialize proxy - no Session at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:597) at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:216) at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:160) at org.hibernate.collection.internal.PersistentBag.size(PersistentBag.java:287) at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:97) at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) ... 56 common frames omitted 2ã€åŽŸå› å’Œè§£å†³è¯¥å¼‚å¸¸åœ¨https://stackoverflow.com/questions/4334970/hibernate-cannot-simultaneously-fetch-multiple-bagsä¸Šæ‰¾åˆ°äº†ç­”æ¡ˆï¼ˆstaticOverFlowè¿˜æ˜¯å¾ˆå¼ºå¤§çš„ï¼‰ã€‚ I think a newer version of hibernate (supporting JPA 2.0) should handle this. But otherwise you can work it around by annotating the collection fields with: @LazyCollection(LazyCollectionOption.FALSE),Remember to remove the fetchType attribute from the @*ToMany annotation.1234@OneToMany(cascade = CascadeType.ALL)@LazyCollection(LazyCollectionOption.FALSE)@JoinColumn(name = &quot;patient_id&quot;)private List&lt;PatientAllergicHistory&gt; patientAllergicHistory = new LinkedList&lt;&gt;(); æ­£å¸¸çš„æŽ§åˆ¶å°æ—¥å¿—åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œä¸»æŸ¥è¯¢å®Œäº†ä»¥åŽï¼Œå¼€å¯å­æŸ¥è¯¢1234510:26:29.920 [http-nio-8085-exec-10] INFO p6spy - 10:26:29|1|SELECT 1 FROM DUAL10:26:29.932 [http-nio-8085-exec-10] INFO p6spy - 10:26:29|4|select patient0_.patient_id as patient_1_3_0_, patient0_.create_time as create_t2_3_0_, patient0_.deleted as deleted3_3_0_, patient0_.first_diagnose_date as first_di4_3_0_, patient0_.first_injection_date as first_in5_3_0_, patient0_.gender as gender6_3_0_, patient0_.height as height7_3_0_, patient0_.mobile as mobile8_3_0_, patient0_.name as name9_3_0_, patient0_.nick_name as nick_na10_3_0_, patient0_.openid as openid11_3_0_, patient0_.passive_smoking as passive15_3_0_, patient0_.self_smoking as self_sm12_3_0_, patient0_.unionid as unionid13_3_0_, patient0_.weight as weight14_3_0_, sysdict1_.id as id1_6_1_, sysdict1_.code as code2_6_1_, sysdict1_.create_time as create_t3_6_1_, sysdict1_.deleted as deleted4_6_1_, sysdict1_.group_code as group_co5_6_1_, sysdict1_.name as name6_6_1_, sysdict1_.parent_id as parent_i7_6_1_, sysdict1_.sort as sort8_6_1_, sysdict1_.type as type9_6_1_, sysdict1_.update_time as update_10_6_1_ from t_patient patient0_ left outer join t_sys_dict sysdict1_ on patient0_.passive_smoking=sysdict1_.id where patient0_.patient_id=&apos;111&apos;10:26:29.940 [http-nio-8085-exec-10] INFO p6spy - 10:26:29|2|select patientcon0_.patient_id as patient_6_5_0_, patientcon0_.id as id1_5_0_, patientcon0_.id as id1_5_1_, patientcon0_.address as address2_5_1_, patientcon0_.gender as gender3_5_1_, patientcon0_.mobile as mobile4_5_1_, patientcon0_.name as name5_5_1_, patientcon0_.patient_id as patient_6_5_1_, patientcon0_.relation as relation7_5_1_, sysdict1_.id as id1_6_2_, sysdict1_.code as code2_6_2_, sysdict1_.create_time as create_t3_6_2_, sysdict1_.deleted as deleted4_6_2_, sysdict1_.group_code as group_co5_6_2_, sysdict1_.name as name6_6_2_, sysdict1_.parent_id as parent_i7_6_2_, sysdict1_.sort as sort8_6_2_, sysdict1_.type as type9_6_2_, sysdict1_.update_time as update_10_6_2_ from t_patient_contacts patientcon0_ left outer join t_sys_dict sysdict1_ on patientcon0_.relation=sysdict1_.id where patientcon0_.patient_id=&apos;111&apos;10:26:29.945 [http-nio-8085-exec-10] INFO p6spy - 10:26:29|1|select patientall0_.patient_id as patient_5_4_0_, patientall0_.id as id1_4_0_, patientall0_.id as id1_4_1_, patientall0_.gmxby as gmxby2_4_1_, patientall0_.gmxpy as gmxpy3_4_1_, patientall0_.main as main4_4_1_, patientall0_.patient_id as patient_5_4_1_, patientall0_.swgm as swgm6_4_1_, patientall0_.ybgmz as ybgmz7_4_1_, patientall0_.zqgxc as zqgxc8_4_1_ from t_patient_allergic_history patientall0_ where patientall0_.patient_id=&apos;111&apos;10:26:29.947 [http-nio-8085-exec-10] INFO p6spy - 10:26:29|0| æŽ¨èé˜…è¯»Securityæºç åˆ†æž)]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬--BizChartsä½¿ç”¨é‡‡å‘æ•™ç¨‹]]></title>
    <url>%2F2019%2F03%2F19%2F%E8%BD%AC--BizCharts%E4%BD%BF%E7%94%A8%E9%87%87%E5%9D%91%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘é¡¹ç›®çš„ç®¡ç†åŽå°éƒ½åœ¨ç”¨é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proï¼Œè¯´çœŸè¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ã€‚è¯¥æ¡†æž¶å†…éƒ¨ä¹Ÿå°è£…äº†ä¸€äº›å›¾æ ‡æ’ä»¶ï¼Œä½†æ˜¯åœ¨æœ€è¿‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­å‘çŽ°ï¼Œè¿™äº›å›¾æ ‡å¯å®šåˆ¶æ€§è¿˜æ˜¯å·®äº†ç‚¹ï¼Œä¸èƒ½æ»¡è¶³å®¢æˆ·éœ€æ±‚ã€‚ ç®€ä¹¦åœ°å€ æœ€è¿‘é¡¹ç›®çš„ç®¡ç†åŽå°éƒ½åœ¨ç”¨é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proï¼Œè¯´çœŸè¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ã€‚è¯¥æ¡†æž¶å†…éƒ¨ä¹Ÿå°è£…äº†ä¸€äº›å›¾æ ‡æ’ä»¶ï¼Œä½†æ˜¯åœ¨æœ€è¿‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­å‘çŽ°ï¼Œè¿™äº›å›¾æ ‡å¯å®šåˆ¶æ€§è¿˜æ˜¯å·®äº†ç‚¹ï¼Œä¸èƒ½æ»¡è¶³å®¢æˆ·éœ€æ±‚ã€‚ å¥½åœ¨å®ƒçš„åŽé¢ä¹Ÿä»‹ç»äº†è‡ªå·±äº²ç”Ÿçš„BizChartå¯è§†åŒ–å›¾è¡¨ç»„ä»¶ï¼Œå› ä¸ºå®šåˆ¶æ€§æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯apiä¸­çš„ä»‹ç»åˆä¸æ˜¯æ¯ä¸ªéƒ½æœ‰ä¾‹å­ï¼Œæ›´æ²¡æœ‰ç»„åˆä½¿ç”¨çš„ä¾‹å­ï¼Œç»è¿‡åº¦å¨˜ä»‹ç»ï¼Œå‘çŽ°è¿™ç‰‡æ–‡ç« å¤‡å—æˆ‘é’çï¼Œæˆ‘æ€•ä½œè€…å“ªå¤©ä¸é«˜å…´æ”¾å¼ƒäº†ï¼Œæ‰€ä»¥è½¬å­˜äº†ä¸€ä»½ï¼Œé¡ºä¾¿æŠŠè‡ªå·±å®žè·µåˆ°çš„è¡¥å……åˆ°åŽé¢ã€‚ åŽŸæ–‡ä½œä¸ºä¸€ä¸ªå‰ç«¯æ‰“å­—å‘˜ï¼Œé™¤äº†ç»¿èŒ¶å©Šä¹‹å¤–ï¼Œæœ€è®¨åŽŒçš„å°±æ˜¯å›¾è¡¨ï¼šä¸€ä¸ªè®©æˆ‘ä¼¤å¿ƒï¼Œä¸€ä¸ªè®©æˆ‘éš¾è¿‡ï¼›æ¯”è¿™æ›´è®¨åŽŒçš„å°±æ˜¯æ–‡æ¡£å†™å¾—ä¸æ¸…ä¸æ¥šçš„å›¾è¡¨åº“ï¼ˆå¤§æ¦‚çŽ‡æ˜¯ä¹å¹´ä¹‰åŠ¡æ•™è‚²æœŸé—´æ²¡æœ‰å­¦å¥½è¯­æ–‡ï¼‰ï¼Œè®©æˆ‘åˆçˆ±åˆæ¨ï¼æ‰€ä»¥æœ¬ç¯‡åšæ–‡ä¼šæ¯”è¾ƒæž¯ç‡¥ï¼Œåªç®€å•æè¿°ä¸€ä¸‹ä½¿ç”¨BizChartsçš„è¿‡ç¨‹ï¼Œå½“ç„¶ï¼Œé‡è¦çš„æ˜¯æ€»ç»“é‡åˆ°çš„å‘ï¼ˆéµä»Žä¸€ä¸ªå‘ä¸è¸©ä¸¤æ¬¡ï¼Œä¸€ä¸ªå¥³ç”Ÿä¸æ³¡ä¸¤æ¬¡åŽŸåˆ™ï¼‰ã€‚ By the wayï¼Œæåˆ°BizChartsï¼Œè®©æˆ‘ä»¬æ„Ÿè°¢ä¸€ä¸‹é˜¿é‡Œå·´å·´ï¼šå…¶å¼€æºäº†è¿™ä¸ªå¥½ç”¨çš„ï¼ˆè™½ç„¶å¶å°”ä¸é‚£ä¹ˆå¥½ç”¨ï¼Œè¿˜å¶å¾—æŒºç»å¸¸çš„ï¼‰çš„reactå›¾è¡¨åº“ä¾›å¤§å®¶ä½¿ç”¨ï¼Œå¯¹ä½¿ç”¨reactæŠ€æœ¯æ ˆçš„å‰ç«¯æ‰“å­—å‘˜æ¥è¯´ç®€ç›´å°±æ˜¯ç¦éŸ³ã€‚æœ¬æ–‡ä¸ä¼šæœ‰è¿‡å¤šçš„apiè§£é‡Šï¼Œå…·ä½“çš„æŽ¥å£å¯ä»¥çœ‹å®˜ç½‘æ–‡æ¡£é¬¼é—¨å…³ã€‚ æ­£ç»ç¯‡å¹…åˆšå¼€å§‹ï¼Œè§†è§‰è®¾è®¡å¸ˆå“„æˆ‘è¯´ï¼šâ€œæˆ‘çš„è¦æ±‚å¹¶ä¸é«˜ï¼Œå¾…æˆ‘ä»Žå‰ä¸€æ ·å¥½â€ï¼Œå•Šå‘¸ï¼Œè¯´é”™äº†ï¼Œâ€œæˆ‘çš„è¦æ±‚æ˜¯ï¼šåªè¦èƒ½æŠŠæ•°æ®ç”¨ç›´æ–¹å›¾å±•çŽ°å‡ºæ¥å°±å¥½äº†â€ï¼Œso easy // å¼•å…¥ç›¸å…³çš„ç»„ä»¶ import { Chart, Axis, Tooltip, Geom } from â€˜bizchartsâ€™; // éšä¾¿mockä¸€ä¸‹æ•°æ® const str = [&apos;we&apos;, &apos;are&apos;, &apos;the&apos;, &apos;black&apos;, &apos;gold&apos;, &apos;team&apos;]; const mockData = () =&gt; { let result = []; for (let i = 0, len = 6; i &lt; len; i++) { result.push({ xAxis: ticks[i], yAxis: Math.floor(Math.random() * 100) }); } return result; }; // å›¾è¡¨ç»„ä»¶ &lt;Chart width={ 600 } height={ 400 } data={ mockData() } &gt; {/* xè½´ï¼Œæ¨ªè½´ï¼Œä»¥dataæ•°æ®çš„xAxiså±žæ€§å€¼ä¸ºæŸ±å­çš„å€¼ */} &lt;Axis name=&quot;xAxis&quot; /&gt; {/* yè½´ï¼Œçºµè½´ï¼Œä»¥dataæ•°æ®çš„yAxiså±žæ€§å€¼ä¸ºæŸ±å­çš„å€¼ */} &lt;Axis name=&quot;yAxis&quot; /&gt; {/* é¼ æ ‡hoverç›´æ–¹å›¾æŸ±å­çš„æ—¶å€™ï¼Œtooltipæ˜¾ç¤ºçš„å€¼ */} &lt;Tooltip /&gt; {/* å‡ ä½•æ ‡è®°å¯¹è±¡ï¼Œä¸»è¦ç”¨ä»¥æè¿°ä½ è¦ç”»çš„æ˜¯ä»€ä¹ˆå›¾å½¢ï¼ˆç›´æ–¹å›¾ã€æŠ˜çº¿å›¾ã€é¥¼çŠ¶å›¾ã€åŒºåŸŸå›¾ï¼‰ï¼šintervalæ˜¯ç›´æ–¹å›¾ */} &lt;Geom type=&quot;interval&quot; position=&quot;xAxis*yAxis&quot; /&gt; &lt;/Chart&gt; ä¸€æ³¢æ“ä½œçŒ›å¦‚ç‹—ï¼Œè®©è§†è§‰è®¾è®¡å¸ˆçœ‹çœ‹æ•ˆæžœï¼š noteï¼šæ­¤ç›´æ–¹å›¾æ¯ä¸€æ ¹æŸ±å­éƒ½æ˜¯å•ç‚¹çš„ï¼Œä¹Ÿå°±æ˜¯å…¶åæ˜ äº†æŸä¸ªæ¨ªåæ ‡ç‚¹çš„æ•°æ®æƒ…å†µã€‚åŠ å…¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¿žç»­åŒºé—´æŸ±å­ï¼Œé‚£ä¹ˆä½œä¸ºxAxisçš„æ•°æ®å­—æ®µå€¼åº”è¯¥ä¸ºä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œè¡¨æ˜ŽåŒºé—´çš„èµ·å§‹å€¼ã€‚123456789101112const mockData = () =&gt; &#123; let result = []; for (let i = 0, len = 6; i &lt; len; i++) &#123; result.push(&#123; xAxis: [i + 0.01, i + 1 - 0.01], // å¦‚æžœä¸åŠ å‡0.01ï¼Œé‚£ä¹ˆç¬¬ä¸€æ ¹æŸ±å­çš„ç»ˆç‚¹è·Ÿç¬¬äºŒæ ¹æŸ±å­çš„èµ·ç‚¹æ˜¯åŒä¸€ä¸ªï¼Œä¼šæ„Ÿè§‰ä¸¤ä¸ªæŸ±å­ç²˜åœ¨ä¸€èµ· yAxis: Math.floor(Math.random() * 100) &#125;); &#125; return result; &#125;; è§†è§‰è®¾è®¡å¸ˆï¼šâ€œemmmmmmï¼Œå›¾è¡¨é•¿å®½å®šæ­»äº†ä¼šä¸ä¼šæœ‰ç‚¹åƒµç¡¬å•Šï¼Œé«˜åº¦å¯ä»¥å†™æ­»ï¼Œå®½åº¦æ€»å¾—æ¥ä¸ªè‡ªé€‚åº”å§ï¼Ÿâ€ â€œæ¯›é—·å°â€123456&lt;Chart height=&#123; 400 &#125; data=&#123; mockData() &#125; forceFit // æˆ‘å¦ˆè¯´äº†ï¼ˆguanfang wendang shuodeï¼‰ï¼ŒåŠ ä¸Šè¿™ä¸ªå±žæ€§å°±å¯ä»¥ä½¿å›¾è¡¨å®½åº¦è‡ªé€‚åº”äº†ï¼Œéš”å£echartåŒå­¦è¦å­¦ä¹ ä¸€ä¸‹ &gt;&lt;/Chart&gt; æ•ˆæžœç§€ä¸€æ³¢ è§†è§‰ï¼ˆèœœæ±å¾®ç¬‘ï¼‰ï¼šâ€œçŒ¿å­ï¼Œä½ è¿™çŽ©æ„æœ‰bugå•Šâ€ â€œèƒ¡è¯´ï¼Œä½ è¿™å‚»*ä¸ä¼šç”¨å§â€ ï¼ˆç†ç›´æ°”å£®ï¼‰â€œå“¼å“¼ï¼Œæ”¾å¤§çª—å£å›¾è¡¨å®½åº¦ç¡®å®žä¼šè‡ªé€‚åº”ï¼Œä½†æ˜¯ç¼©å°å°±æŒ‚æŽ‰äº†ï¼ˆå¹¶ä¸è‡ªé€‚åº”ï¼‰ï¼Œahhhhhhâ€ ï¼ˆè°„åªšï¼‰â€œè®¨åŽŒï¼Œå†ç»™æˆ‘ä¸¤åˆ†é’Ÿ~~è®©æˆ‘æŠŠbugç»“æˆå†°ã€‚ã€‚ã€‚â€ note: å®žéªŒè¡¨æ˜Žï¼Œå¦‚æžœChartç»„ä»¶çš„çˆ¶ç»„ä»¶Fatheré‡‡ç”¨flexå¸ƒå±€ï¼Œå³Fatherä½¿ç”¨flexè‡ªé€‚åº”å®½åº¦ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºçŽ°ä¸Šè¿°çš„é—®é¢˜ï¼›æ‰€ä»¥ï¼Œå¦‚æžœæœ‰å¤šä¸ªå›¾è¡¨åŒè¡Œå¹¶åˆ—å¸ƒå±€ï¼Œè¯·ä¸è¦ä½¿ç”¨flexå¸ƒå±€ï¼Œç»™Fatherç»„ä»¶çš„å®½åº¦è®¾ç½®ä¸ºç™¾åˆ†æ¯”å§ï¼Œæ­¤æ—¶çš„forceFitå°±ä¼šèµ·ä½œç”¨äº†ã€‚åŒæ—¶ï¼ŒBizChartså¯¹é‡ç»˜è®¾ç½®äº†é˜²æŠ–ï¼Œåªæœ‰å½“åœæ­¢ç¼©æ”¾çš„æ—¶å€™æ‰ä¼šé‡ç»˜ã€‚ ï¼ˆå±Œåˆ°é£žèµ·ï¼‰â€œoverï¼Œæ‹¿åŽ»ç”¨å§â€ ï¼ˆä¸€è„¸é„™è§†ï¼‰â€œå“‡å–”~å¥½æ£’æ£’å‘€ï¼Œæ•¢ä¸æ•¢è®©æˆ‘è°ƒä¸€ç‚¹ç‚¹å°ç»†èŠ‚ï¼Œæˆ‘ä¿è¯å°±ä¸€ç‚¹ç‚¹ï¼â€ â€œCome on babyï¼â€ â€œ é¼ æ ‡hoveræŸ±å­çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæŸ±å­åŽé¢æœ‰ä¸ªå¾ˆä¸‘çš„æ–¹æ¡†ï¼Œæ¢ä¸ªé¢œè‰²å§ï¼ é¼ æ ‡hoveræŸ±å­çš„æ—¶å€™ï¼Œå‡ºçŽ°çš„tooltipæ ·å¼ä¸‘çˆ†äº†ï¼Œå¾…ä¼šæˆ‘ç»™ä½ è®¾è®¡ä¸€ä¸ªå§ é¼ æ ‡hoveræŸ±å­çš„æ—¶å€™ï¼ŒæŸ±å­çš„é¢œè‰²åº”è¯¥æœ‰æ‰€æ”¹å˜ï¼Œå¯¹ç”¨æˆ·æ¯”è¾ƒå‹å¥½ï¼ï¼ï¼ â€¦å“Žï¼Œä½ åˆ«æ‹¿åˆ€å•Š~~~ â€ æŠŠè§†è§‰æ€äº†ä¹‹åŽï¼Œéœ€æ±‚è¿˜æ˜¯è¦åšçš„ï¼Œå…ˆè§£å†³æ­»è€…çš„ç¬¬ä¸€ä¸ªé—æ„¿ã€‚ Tooltipç»„ä»¶æä¾›äº†ä¸€ä¸ªå±žæ€§crosshairsï¼Œç”¨ä»¥è®¾ç½®tooltipçš„è¾…åŠ©çº¿å’Œè¾…åŠ©æ¡†ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤å±žæ€§ä¼šä¸ºâ€™lineâ€™ã€â€˜areaâ€™ã€â€˜pathâ€™ã€â€˜areaStackâ€™ç±»åž‹çš„Geomç»„ä»¶å¼€å¯åž‚ç›´è¾…åŠ©çº¿ã€ä¸ºâ€˜intervalâ€™ç±»åž‹çš„Geomç»„ä»¶å±•ç¤ºçŸ©å½¢èƒŒæ™¯æ¡†ã€‚æ­»è€…è¯´çš„å¾ˆä¸‘çš„æ–¹æ¡†å°±æ˜¯è¿™ä¸ªï¼ 1&lt;Tooltip crosshairs=&#123; false &#125;/&gt; å¥½çš„ï¼ŒæŠŠæ¡†åŽ»æŽ‰äº†ï¼å’¦ï¼Œæˆ‘ä»¬ä¸æ˜¯è¯´è¦ä¿®æ”¹å®ƒçš„é¢œè‰²å—ï¼Ÿå¥½çš„ï¼Œæ”¹ä¸€ä¸‹ 1234567891011&lt;Tooltip crosshairs=&#123;&#123; type: &quot;rect&quot; // å¯é€‰å€¼ï¼šrectã€xã€yã€crossï¼Œåˆ†åˆ«å¯¹åº”è¾…åŠ©ç‹‚ã€å¹³è¡Œxè½´è¾…åŠ©çº¿ã€å¹³è¡Œyè½´è¾…åŠ©çº¿ï¼Œåå­—è¾…åŠ©çº¿ style: &#123; fill: &apos;red&apos;, // è¾…åŠ©æ¡†é¢œè‰² shadowColor: &apos;red&apos;, // è¾…åŠ©æ¡†å‘¨è¾¹é˜´å½±çš„é¢œè‰² shadowBlur: 1, // è¾…åŠ©æ¡†å‘¨è¾¹é˜´å½±çš„é€æ˜Žåº¦ opacity: 0 // è¾…åŠ©æ¡†çš„é€æ˜Žåº¦ &#125; &#125;&#125; /&gt; noteï¼šå‡å¦‚å¼€å¯çš„æ˜¯è¾…åŠ©çº¿ï¼Œå³typeä¸æ˜¯â€œrectâ€ï¼Œé‚£ä¹ˆä¸Šè¿°çš„æ ·å¼å®šä¹‰å°†ä¸èµ·ä½œç”¨ã€‚ç©¶å…¶åŽŸå› ï¼Œçœ‹äº†æ­¤ç»„ä»¶çš„æºç ä¹‹åŽæ‰å‘çŽ°ï¼Œæè¿°è¾…åŠ©çº¿æ ·å¼çš„å±žæ€§ä¸æ˜¯styleå¯¹è±¡ï¼Œè€Œæ˜¯lineStyleå¯¹è±¡ï¼Œå®˜æ–¹æ–‡æ¡£å¹¶æœªè¯´æ˜Žè¿™ä¸€ç‚¹ã€‚ 1234567891011&lt;Tooltip crosshairs=&#123;&#123; type: &quot;y&quot; lineStyle: &#123; stroke: &apos;red&apos;, // è¾…åŠ©çº¿é¢œè‰² lineWidth: 4, // è¾…åŠ©çº¿å®½åº¦ï¼Œå•ä½ä¸ºpx opacity: 1 // è¾…åŠ©çº¿é€æ˜Žåº¦ &#125; &#125;&#125; /&gt;å¤åˆ¶ä»£ç  çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“å°±å®žçŽ°äº†æ­»è€…çš„ç¬¬ä¸€ä¸ªé—æ„¿ï¼Œå°±è¿™æ ·æ€¼æ­»äº†è§†è§‰ï¼Œæ˜¯ä¸æ˜¯å¤ªæ®‹å¿äº†ç‚¹ï¼Ÿäº‹å·²è‡³æ­¤ï¼Œç»§ç»­å®žçŽ°ä»–çš„é—æ„¿å§ã€‚ ç¬¬äºŒä¸ªé—æ„¿æ˜¯ç»™tooltipæ¢ä¸ªæ ·å¼ã€‚æ—¢ç„¶è¦ä¿®æ”¹tooltipçš„æ ·å¼ï¼Œå°±åº”è¯¥ç»§ç»­å¯¹Tooltipç»„ä»¶ä¸‹æ‰‹ã€‚é€šè¿‡é˜…è¯»æ–‡æ¡£ï¼Œå‘çŽ°å…¶è¿˜æœ‰ä¸€ä¸ªitemTplçš„å±žæ€§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥é€šè¿‡è¿™ä¸ªå±žæ€§å®šä¹‰tooltipçš„æ¨¡æ¿ 12345678910111213141516171819202122232425262728293031// å®šä¹‰ä¸€ä¸ªæ¨¡æ¿ // name-valueæ˜¯ç›¸å…³æŸ±å­çš„key-valueå€¼ const tooltipsDisplayTpl = ` &lt;p class=&quot;chart-tooptip&quot;&gt; &lt;span class=&quot;chart-tooptip-right&quot;&gt;&#123;name&#125;&lt;/span&gt; &lt;span&gt;&#123;value&#125;&lt;/span&gt; &lt;/p&gt; `; /* // é‡å†™tooltipå…ƒç´ çš„æ ·å¼ // å› ä¸ºè§†è§‰å·²æ­»ï¼Œæ ·å¼æ˜¯éšä¾¿æžçš„ï¼Œå°±å¼„ç‚¹é»‘è‰²èƒŒæ™¯å½“é»˜å“€ä¸€ä¸‹å§ .g2-tooltip &#123; background-color: rgba(44, 49, 68, 0.80) !important; &#125; .chart-tooptip &#123; margin: 0; color: white; &#125; .chart-tooptip-right &#123; margin-right: 12px; &#125; */ &lt;Tooltip crosshairs=&#123; false &#125; itemTpl=&#123; tooltipsDisplayTpl &#125; showTitle=&#123; false &#125; // åŽ»å¤´ï¼ˆæ ‡é¢˜ï¼Œå³æ¨ªè½´å¯¹åº”çš„åˆ»åº¦ï¼‰ï¼Œå¾€å¾€å½±å“æˆ‘é¢œå€¼çš„ä¸æ˜¯æˆ‘çš„èº«æï¼Œè€Œæ˜¯æˆ‘çš„è„¸ï¼Œæ‰€ä»¥ä¸è¦è„¸äº† /&gt; noteï¼šå¦‚æžœæƒ³è‡ªå®šä¹‰tooltipå±•ç¤ºçš„å†…å®¹ï¼Œè¿˜éœ€è¦è®¾ç½®Geomç»„ä»¶çš„tooltipå±žæ€§ï¼Œå³å°†æ•°æ®æ˜ å°„åˆ°Tooltipå¯¹è±¡ä¸Šï¼›æ‰€ä»¥æ­¤å±žæ€§å€¼å¦‚æžœä¸ºfalseçš„è¯ï¼Œå°±ä¸ä¼šå‘Tooltipç»„ä»¶ä¼ é€’ä»»ä½•æ•°æ®ï¼ˆæ­¤æ—¶Tooltipåªä¼šæ˜¾ç¤ºtitleï¼‰ï¼›è¿˜å¯è®¾ç½®ä¸ºå­—ç¬¦ä¸²ï¼Œå±•ç¤ºå­—ç¬¦ä¸²å¯¹åº”çš„æ•°æ®å­—æ®µï¼›But, itâ€™s not the pointï¼Œé‡ç‚¹åœ¨äºŽå¯è‡ªå®šä¹‰ 12345678910111213// å®šä¹‰æ•°æ®è¿”å›žçš„æ ¼å¼ï¼Œnameå±žæ€§å¯¹åº”çš„æ˜¯itemTplé‡Œé¢çš„åŒåå˜é‡ const getTooltipData = (xAxis, yAxis) =&gt; &#123; return &#123; name: xAxis, value: yAxis &#125;; &#125; &lt;Geom type=&quot;interval&quot; position=&quot;xAxis*yAxis&quot; tooltip=&#123;[&quot;xAxis*yAxis&quot;, getTooltipData]&#125; /&gt; ç¬¬äºŒä¸ªé—æ„¿ä¹Ÿå®žçŽ°äº†ï¼Œæ„§ç–šæ„Ÿä¹Ÿå¤šäº†ä¸€ç‚¹ï¼æœ€ä¸»è¦æ˜¯å†™ä»£ç çš„æ—¶å€™è€æ˜¯è§‰å¾—åŽé¢æœ‰äººç«™ç€ç›¯ç€æˆ‘çœ‹ã€‚ è¯´ä¸å®šå®žçŽ°æ‰€æœ‰é—æ„¿å°±ä¸ä¼šæœ‰è¿™ç§æ„Ÿè§‰äº†å‘¢ï¼Œé‚£å°±ç»§ç»­ç¬¬ä¸‰ä¸ªé—æ„¿å§ï¼šâ€œæ”¹å˜é¼ æ ‡hoveræŸ±å­æ—¶å€™æŸ±å­çš„é¢œè‰²â€ï¼Œç¿»éäº†æ•´ä¸ªæ–‡æ¡£ï¼Œå‘çŽ°æ²¡æœ‰å…³äºŽhoverçš„æŽ¥å£å•Šï¼çœ‹æ¥è§†è§‰æ˜¯è¦æ­»ä¸çž‘ç›®äº†ï¼Œé˜¿é—¨ã€‚ å°±åœ¨æˆ‘æ„Ÿè§‰åˆ°åŽèƒŒè¶Šå‘çš„å‡‰é£•é£•çš„æ—¶å€™ï¼Œæˆ‘å‘çŽ°Geomç»„ä»¶æœ‰ä¸€ä¸ªå±žæ€§active æ–‡æ¡£å°±çœŸçš„æè¿°äº†é‚£ä¹ˆä¸¤å¥è¯ï¼Œä¹Ÿæ²¡ä¾‹å­ã€‚æ€¥ç—…ä¹±æŠ•åŒ»çš„æˆ‘åªèƒ½å°è¯•ä¸€æ³¢ï¼Œè®¾ç½®ä¸ºtrueï¼Œå¾—äº†ï¼ŒhoveræŸ±å­çš„æ—¶å€™æŸ±å­é¢œè‰²æ”¹å˜äº†ï¼ï¼ï¼ 123456&lt;Geom type=&quot;interval&quot; position=&quot;xAxis*yAxis&quot; tooltip=&#123;[&quot;xAxis*yAxis&quot;, getTooltipData]&#125; active=&#123; true &#125; /&gt; é‚£å¦‚æžœéœ€è¦è‡ªå®šä¹‰é¼ æ ‡hoveræŸ±å­çš„æ ·å¼å‘¢ï¼Ÿå¯¹ç…§ç€Geomæ–‡æ¡£çš„selectå±žæ€§ï¼Œåˆå°è¯•äº†ä¸€é 1234567891011121314151617&lt;Geom type=&quot;interval&quot; position=&quot;xAxis*yAxis&quot; tooltip=&#123;[&quot;xAxis*yAxis&quot;, getTooltipData]&#125; style=&#123;&#123; cursor: &apos;pointer&apos; &#125;&#125; // é¼ æ ‡hoverä¸ŠåŽ»çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå°æ‰‹æ‰‹ï¼Œå…è´¹é€çš„ active=&#123;[ true, &#123; style: &#123; fill: &apos;black&apos;, // æŸ±å­é¢œè‰²ï¼Œç»§ç»­é»˜å“€ shadowColor: &apos;red&apos;, // æ•´ä½“é˜´å½±é¢œè‰²ï¼ŒåŒ…æ‹¬è¾¹ç¼˜ shadowBlur: 1, // é˜´å½±çš„é€æ˜Žåº¦ opacity: 0 // æŸ±å­é¢œè‰²é€æ˜Žåº¦ &#125; &#125; ]&#125; /&gt; ï¼ˆç¥žæ°”çš„ï¼‰â€œç‹—å­ï¼Œåˆ«æ­»äº†ï¼Œè€å­æžå®šå•¦â€ â€œé ï¼Œæˆ‘éƒ½è£…æ­»ä¸¤å¤©äº†ï¼Œä½ æ•¢ä¸æ•¢å†æ…¢ä¸€ç‚¹â€ â€œé‚£å®˜æ–¹æ–‡æ¡£å°±å†™äº†ä¸€è¡Œå­—ï¼šåªå¯æ„ä¼šä¸å¯è¨€ä¼ ï¼æˆ‘å¤©åˆ†æœ‰é™ï¼Œæ„ä¼šäº†æ¯”è¾ƒä¹…â€ â€œå˜šç‘Ÿï¼Œçœ‹ï¼Œåˆå‡ºbugäº†å§ï¼ä½ çš„è¡¨å­ä¸€é—ªä¸€é—ªçš„â€ ï¼ˆæŽç€ä»–è„–å­ä½¿åŠ²æ™ƒï¼‰â€œé‚£TMä¸æ˜¯bugï¼ï¼ï¼â€ ä¸è¿‡è¯è¯´å›žæ¥ï¼Œå½“æ•°æ®æ›´æ–°æ—¶ï¼Œä»Žæ—§æ•°æ®åˆ‡æ¢åˆ°æ–°æ•°æ®ï¼Œä¼šå¾ˆçªå…€ï¼Œæ²¡æœ‰ç¼“å†²è¿‡ç¨‹ï¼Œçœ‹ç€ç‰¹åˆ«ä¸èˆ’æœã€‚æˆ‘å¯»æ€ç€ï¼Œåœ¨æ•°æ®æ›´æ–°çš„æ—¶å€™ï¼ŒåŠ ä¸ªåŠ¨ç”»å‘—ï¼ä½†æ˜¯åˆå§‹åŠ¨ç”»ç”Ÿæ•ˆäº†ï¼Œæ›´æ–°åŠ¨ç”»å°±ä¸ç”Ÿæ•ˆäº†ï¼ˆå¦‚çœ‹å®˜ä»¬çŸ¥é“è§£å†³åŠžæ³•ï¼Œè¯·ä¸åèµæ•™ï¼‰ã€‚ç”±äºŽèµ¶ç€ä¸‹ç­ï¼Œæˆ‘å†³å®šä½¿ç”¨DataSetï¼šä¸€ä¸ªç”¨äºŽç®¡ç†è¡¨æ ¼æ•°æ®çš„ç¥žå™¨ï¼Œæ®è¯´æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå…¶ä¼šç»™æˆ‘å¼„ä¸ªåŠ¨ç”»ï¼ˆé™¤æ­¤ä»¥å¤–æœ‰æ–¹ä¾¿åœ°å¯¼å…¥éž json æ•°æ®ç­‰ç­‰åŠŸèƒ½ï¼Œä¸‹æ–‡æœ‰ä¸€äº›ä¾‹å­ï¼Œå…·ä½“ç»†èŠ‚æˆ‘æ²¡æœ‰è¯¦ç»†åŽ»ç ”ç©¶ï¼Œä»¥åŽå­¦ä¹ äº†å†åˆ†äº«ï¼‰ã€‚å””å¥½ç†ï¼Œæ€»ä¹‹å¥½çŠ€åˆ©ï¼ 123456789101112131415161718// å®‰è£… // npm install @antv/data-set // å¼•å…¥ import DataSet from &apos;@antv/data-set&apos;; // ç”Ÿæˆä¸€ä¸ªViewå®žä¾‹ï¼Œä½œä¸ºç±»çš„å±žæ€§ï¼Œæ•…ä¸è¦åœ¨renderæ–¹æ³•é‡Œé¢ç”Ÿæˆè¿™ä¸ªå®žä¾‹ dv = new DataSet().createView(); render() &#123; this.dv.source(data); &lt;Chart height=&#123; 400 &#125; data=&#123; this.dv &#125; forceFit &gt;&lt;/Chart&gt; &#125; â€œçŒ¿å­ï¼Œ6å•Šï¼åƒå®µå¤œå—ï¼Ÿæˆ‘çš„â€ â€œè™½ç„¶ä¸æ€Žä¹ˆé¥¿ï¼Œä½†æ˜¯ä½ è¯·å°±ä¸ä¸€æ ·äº†ï¼Œgoâ€ åƒäº†ä¸€æ¡¶æ³¡é¢åŽâ€¦â€¦ â€œçŒ¿å­ï¼Œä½ çœ‹ï¼Œå®µå¤œä¹Ÿåƒäº†Â·Â·Â·Â·Â·Â·Â·â€ â€œä½ åˆæƒ³å¹²å˜›Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·â€ ç®€ç›´å°±æ˜¯é¥±é¥­æ€æ·«æ¬²å•Šï¼ï¼ï¼ â€æˆ‘åªæ˜¯è§‰å¾—æŸ±å­çš„é¢œè‰²å¯ä»¥æ¸å˜ä¼šæ˜¾å¾—æˆ‘ä»¬å…¬å¸çš„äº§å“æ›´å±Œä¸€ç‚¹â€œ â€ç‹—å­ï¼Œä½ æ‰›æä¸ï¼Ÿâ€œ ï¼ˆå¯æ€œå…®å…®ï¼‰â€æå®Œä¹‹åŽå¯ä»¥åŠ ä¸ªæ¸å˜å—â€¦â€¦â€œ â€â€¦â€¦â€œ â€æˆ‘å°±çŸ¥é“ä½ å¯¹æˆ‘æœ€å¥½äº†ï¼Œæˆ‘ç»™ä½ æ¶èƒŒæå¤§è…¿å§~â€œ â€æ»šä¸€è¾¹åŽ»â€œ 123456&lt;Geom type=&quot;interval&quot; position=&quot;xAxis*yAxis&quot; tooltip=&#123;[&quot;xAxis*yAxis&quot;, getTooltipData]&#125; color=&#123;[&apos;xAxis&apos;, &apos;#3DA4FF-#FFFFFF&apos;]&#125; /&gt; ï¼ˆæŽç€æˆ‘è„–å­ä½¿åŠ²æ™ƒï¼‰â€è€å­è¦çš„æ˜¯ä»Žä¸Šå¾€ä¸‹æ¸å˜ï¼Œä¸æ˜¯ä»Žå·¦å¾€å³æ¸å˜â€œ â€œåˆ«â€¦..åˆ«â€¦..æŽâ€¦..æˆ‘â€¦.æ”¹â€¦.æ”¹â€¦..â€ 123456&lt;Geom type=&quot;interval&quot; position=&quot;xAxis*yAxis&quot; tooltip=&#123;[&quot;xAxis*yAxis&quot;, getTooltipData]&#125; color=&#123;[&apos;xAxis&apos;, &apos;l(90) 0:#3DA4FF 1:#FFFFFF&apos;]&#125; /&gt; noteï¼šlæ˜¯æŒ‡çº¿æ€§æ¸å˜ï¼Œ90æ˜¯æŒ‡æ—‹è½¬ä¹ååº¦ï¼ˆå³ä»Žä¸Šåˆ°ä¸‹æ¸å˜ï¼Œçœ‹å®˜ä»¬å¯ä»¥å¤šè¯•è¯•å‡ ä¸ªå§¿åŠ¿ï¼Œå•Šå‘¸ï¼Œå¤šè¯•è¯•å‡ ä¸ªè§’åº¦ï¼‰ 0å’Œ1æ ‡å®šçš„è‰²å€¼æ ‡æ˜Žåˆå§‹è‰²å€¼å’Œç»ˆæ­¢è‰²å€¼ï¼Œæ³¨æ„ä¸€ç‚¹ï¼Œè‰²å€¼ä¸å¯ä»¥ä½¿ç”¨é¢œè‰²åå­—ï¼Œå¦‚â€œredâ€ã€â€œblueâ€ç­‰ å¯æ·»åŠ å¤šä¸ªæ¸å˜è‰²å€¼ï¼Œå¦‚ 1color=&quot;l(90) 0:#000000 0.5:#FFFFFF 1:#000000&quot; noteï¼šå¦‚æžœæ˜¯areaç±»åž‹çš„Geomï¼Œé‚£ä¹ˆç¬¬ä¸€ç§æ¸å˜æ–¹å¼æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œåªèƒ½é€‰ç”¨ç¬¬äºŒç§ â€œç‹—å­ï¼Œæˆ‘çœŸè¦ä¸‹ç­äº†â€ â€œé‚£ä¸ªï¼Œä½ çœ‹éƒ½æžç€æ¸å˜äº†ï¼Œè¦ä¸æžä¸€æ³¢é¢œè‰²åˆ†ç±»â€ â€æ²¡å¾—è°ˆï¼Œgoodbyeï¼â€œ â€å®µå¤œæˆ‘çš„â€œ â€é¡¶ä½ ä¸ªè‚ºï¼Œåˆæƒ³ç”¨æ³¡é¢å¿½æ‚ æˆ‘ï¼ï¼ï¼â€œ â€æ’¸ä¸²ï¼Œéª—ä½ æˆ‘æ˜¯ç‹—â€œ â€emmmmmmâ€¦..â€œ æ—¢ç„¶æåˆ°é¢œè‰²åˆ†ç±»ï¼Œæˆ‘ä»¬å°±æŽ¥ç€æä¸€ä¸‹dv.transform å§, dv.transformå†…ç½®äº†ä¸€äº›åŸºç¡€çš„å‡½æ•°ï¼šfilterï¼Œmapï¼Œpickï¼Œrenameï¼Œreverse â€¦â€¦ å…·ä½“å¯è‡ªè¡ŒæŸ¥çœ‹æ–‡æ¡£ åªéœ€è¦æ·»åŠ  groupBy å­—æ®µï¼Œå¹¶ä¸”åœ¨ä¼ å…¥çš„åŽŸå§‹æ•°æ®dataä¸­æ·»åŠ å¯¹åº”çš„å­—æ®µclassifyå³å¯è½»æ¾æžå®šã€‚ 123dv.transform(&#123; groupBy: [&apos;classify&apos;], // ä»¥classifyå­—æ®µè¿›è¡Œåˆ†ç»„ &#125;); â€çŒ¿å­ï¼Œé¢œè‰²è¿˜æ˜¯è¦è‡ªå®šä¹‰çš„å“¦â€œ ï¼ˆç™½çœ¼ï¼‰ 12345678&lt;Geom position=&#123;&apos;xAxis*yAxis&apos;&#125; color=&#123;[&apos;classify&apos;, classify =&gt; &#123; // è¿™é‡Œæ ¹æ®ä¸åŒå­—æ®µè¿”å›žä¸åŒé¢œè‰² return classify === &apos;test&apos; ? &apos;red&apos; : &apos;yellow&apos;; &#125;]&#125; style=&#123;&#123; cursor: &apos;pointer&apos; &#125;&#125; /&gt; ä½œä¸ºä¸€ä¸ªæœ‰è´£ä»»çš„å‰ç«¯æ‰“å­—å‘˜ï¼Œæœ‰ä¸€ç‚¹å³ä½¿è®¾è®¡ä¸è¦æ±‚çš„ï¼Œæˆ‘è¿˜æ˜¯éœ€è¦è¯´æ˜Žçš„ï¼Œæ¨ªè½´çš„åˆ»åº¦å€¼æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ 123456789101112&lt;Axis name=&#123;xAxis&#125; label=&#123;&#123; textStyle: &#123; fill: &apos;red&apos;, // é¢œè‰² textBaseline: &apos;top&apos; // å¯¹é½åŸºçº¿ &#125;, formatter: (val) =&gt; &#123; return `$&#123; val &#125;\næ¢è¡Œäº†` &#125; &#125;&#125; /&gt; â€ç‹—å­ï¼Œæ’¸ä¸²åŽ»ï¼ï¼ï¼â€œ â€è¦ä¸è¿˜æ˜¯åƒä¸ªæ³¡é¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿâ€œ ç‹—å­ï¼Œå’ï¼ ä»¥ä¸‹å†…å®¹æ¥è‡ªè‡ªå·±çš„æ€»ç»“ å¾ˆæ˜¾ç„¶ï¼Œæœ¬äººæ²¡æœ‰åšä¸»è¿™æžšçŒ¿æœ‰æ–‡åŒ–åº•è•´ï¼Œè¾žè—»ä¸Šæ—¢ä¸åŽä¸½ä¸½ï¼Œä¹Ÿæ²¡æœ‰æ•…äº‹æ€§ï¼Œçº¯å±žå°±æ˜¯è®ºäº‹ï¼Œè®°ç¬”è®°çš„å½¢å¼ã€‚ 1. æŸ±çŠ¶å›¾/ç‚¹å›¾ä¸Šæ˜¾ç¤ºæ–‡å­—åŠæ ¼å¼åŒ–å†…å®¹è¯¥éœ€æ±‚éœ€è¦ç”¨åˆ°Labelç»„ä»¶ï¼Œå¥¹æ˜¯Geonçš„å­ç»„ä»¶ï¼Œä¸Šä»£ç 1234567891011121314151617181920212223242526272829303132333435&lt;div&gt; &lt;Chart height=&#123;400&#125; data=&#123;dv&#125; forceFit&gt; &lt;Axis name=&quot;æœˆä»½&quot; /&gt; &lt;Axis name=&quot;æœˆå‡é™é›¨é‡&quot; /&gt; &lt;Legend /&gt; &lt;Tooltip crosshairs=&#123;&#123; type: &quot;y&quot; &#125;&#125; /&gt; &lt;Geom type=&quot;interval&quot; position=&quot;æœˆä»½*æœˆå‡é™é›¨é‡&quot; color=&#123;&quot;name&quot;&#125; adjust=&#123;[ &#123; type: &quot;dodge&quot;, marginRatio: 1 / 32 &#125; ]&#125; &gt; &lt;Label content=&#123;[&apos;æœˆä»½*æœˆå‡é™é›¨é‡&apos;, (æœˆä»½, æœˆå‡é™é›¨é‡) =&gt; (`$&#123;æœˆå‡é™é›¨é‡&#125;`)]&#125; textStyle=&#123;&#123; textAlign: &apos;center&apos;, // æ–‡æœ¬å¯¹é½æ–¹å‘ï¼Œå¯å–å€¼ä¸ºï¼š start middle end fill: &apos;#404040&apos;, // æ–‡æœ¬çš„é¢œè‰² fontSize: &apos;14&apos;, // æ–‡æœ¬å¤§å° fontWeight: &apos;normal&apos;, // æ–‡æœ¬ç²—ç»† rotate: 0, // æ–‡å­—æ—‹è½¬ textBaseline: &apos;top&apos;, // æ–‡æœ¬åŸºå‡†çº¿ï¼Œå¯å– top middle bottomï¼Œé»˜è®¤ä¸ºmiddle &#125;&#125; /&gt; &lt;/Geom&gt; &lt;/Chart&gt;&lt;/div&gt; æ•ˆæžœï¼š åŽŸæ–‡åœ°å€ï¼šæ•°æ®å¯è§†åŒ–ï¼ŒBizChartså›¾è¡¨åº“å…¥å‘åŽ†ç¨‹]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
        <tag>BizCharts</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Proå­¦ä¹ ä¹‹ä½¿ç”¨uploadç»„ä»¶å¹¶ç”¨formè¡¨å•æäº¤]]></title>
    <url>%2F2019%2F03%2F14%2FAnt%20Design%20Pro%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BD%BF%E7%94%A8upload%E7%BB%84%E4%BB%B6%E5%B9%B6%E7%94%A8form%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%2F</url>
    <content type="text"><![CDATA[é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proä½¿ç”¨è®°å½•ä¹‹è¡¨å•æäº¤ã€‚ç®€ä¹¦åœ°å€ æ•ˆæžœ å®žçŽ°æ€è·¯å’Œä»£ç åˆ©ç”¨uploadæä¾›çš„beforeUploadå±žæ€§ï¼Œå…ˆå°†æ–‡ä»¶æ”¾åˆ°stateé‡Œï¼ŒéšåŽå’Œformè¡¨å•ä¸€èµ·æäº¤ã€‚å…ˆä¸Šå¹²è´§ï¼Œå†è§£é‡Šä¸€äº›èµ°è¿‡çš„å¼¯å¼¯ç»• æŽ¥å£ä»£ç æŽ¥å—å®žä½“ç±»1234567891011121314151617181920212223242526272829import lombok.Data;import org.springframework.web.multipart.MultipartFile;import javax.persistence.Transient;import java.util.Date;/** * @author çº¢åˆ›-é©¬æµ·å¼º * @date 2019-02-20 14:06 * @description æˆ˜ç•¥æŠ¥å‘Š */@Datapublic class StrategyReportVo &#123; private String id; private String title; private Date showTime; private String periods; private String fileUrl; private int deleteFlag = 0; private Date createTime; @Transient private int readCount; private MultipartFile[] files; private MultipartFile file; &#125; APIæŽ¥å£123456@PostMapping(&quot;/reports&quot;) public RtnResult update(StrategyReportVo vo) &#123; StrategyReport report = new StrategyReport(); BeanUtils.copyProperties(vo, report); return RtnResult.success(strategyReportAdminService.update(report)); &#125; æ³¨æ„ï¼šæŽ¥å£ä½¿ç”¨formå½¢å¼æäº¤ï¼Œå› æ­¤åœ¨voå‰é¢ä¸èƒ½ä½¿ç”¨@RequestBodyæ³¨è§£ å‰ç«¯ä¸ºäº†æ–¹ä¾¿å…ˆå°†fetchè¯·æ±‚å†™åœ¨formé¡µé¢é‡Œï¼Œè§„èŒƒçš„è¯åº”è¯¥å†™åœ¨modelé‡Œã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204import React, &#123;PureComponent&#125; from &apos;react&apos;;import &#123;Modal, Form, Input, Spin, DatePicker, Button, Icon, Upload&#125; from &apos;antd&apos;;import _ from &apos;lodash&apos;;import FileUpload from &apos;../Common/FileUpload&apos;;import &#123;uploadUrl&#125; from &apos;../../services/api-base&apos;;import moment from &quot;moment&quot;;import &#123;prefix&#125; from &apos;../../services/api&apos;;const &#123;Item: FormItem&#125; = Form;@Form.create()export default class StrategyReportForm extends PureComponent &#123; state = &#123; fileData: [], &#125; /** æ–‡ä»¶ä¸Šä¼ å±žæ€§ **/ uploadProps = &#123; accept: &apos;.pdf&apos;, action: uploadUrl, name: &apos;files&apos;, onUpload: (fileList) =&gt; &#123; this.props.onChangeFile(fileList); &#125;, onSuccess: (response) =&gt; &#123; const &#123;name, url&#125; = response[0]; const file = &#123; uid: -1, name: name, status: &apos;done&apos;, url: url &#125;; this.props.form.setFieldsValue(&#123;fileUrl: url&#125;); this.props.onChangeFile([file]); &#125;, onRemove: () =&gt; &#123; this.props.onChangeFile([]); &#125; &#125;//è¿™ä¸ªæ˜¯ç›‘å¬æ–‡ä»¶å˜åŒ–çš„fileChange=(params)=&gt;&#123; const &#123;file,fileList&#125;=params; if(file.status===&apos;uploading&apos;)&#123; setTimeout(()=&gt;&#123; this.setState(&#123; percent:fileList.percent &#125;) &#125;,1000) &#125;&#125;// æ‹¦æˆªæ–‡ä»¶ä¸Šä¼ beforeUploadHandle=(file)=&gt;&#123; this.setState((&#123;fileData&#125;)=&gt;(&#123; fileData:[...fileData,file], &#125;)) return false;&#125;// æ–‡ä»¶åˆ—è¡¨çš„åˆ é™¤fileRemove=(file)=&gt;&#123; this.setState((&#123;fileData&#125;)=&gt;&#123; const index = fileData.indexOf(file); return &#123; fileData: fileData.filter((_, i) =&gt; i !== index) &#125; &#125;)&#125; render() &#123; const &#123;modalVisible, formLoading, confirmLoading, data, onSave, onCancel, form, fileList&#125; = this.props; const &#123;getFieldDecorator&#125; = this.props.form; const title = data.id ? &apos;ç¼–è¾‘æŠ¥å‘Š&apos; : &apos;æ·»åŠ æŠ¥å‘Š&apos;; const formItemLayout = &#123; labelCol: &#123;span: 5&#125;, wrapperCol: &#123;span: 15&#125;, &#125;; const files = this.state.fileData; return ( &lt;Modal title=&#123;title&#125; visible=&#123;modalVisible&#125; confirmLoading=&#123;confirmLoading&#125; onOk=&#123;() =&gt; &#123; form.validateFields((err, values) =&gt; &#123; if (!err) &#123; let formData = new FormData(); formData.append(&quot;file&quot;, files[0]); for(let i = 0 ;i&lt;files.length;i++)&#123; //dataParament.files.fileList[i].originFileObj è¿™ä¸ªå¯¹è±¡æ˜¯æˆ‘è§‚å¯Ÿ antdçš„Uploadç»„ä»¶å‘çŽ°çš„é‡Œé¢çš„originFileObj å¯¹è±¡å°±æ˜¯fileå¯¹è±¡ formData.append(&apos;files&apos;,files[i]) &#125; //fileä»¥å¤–çš„å¯¹è±¡æ‹¼æŽ¥ for(let item in values.length) &#123; if(item !== &apos;files&apos; &amp;&amp; values[item]) &#123; formData.append(item, values[item]); &#125; &#125; fetch(`$&#123;prefix&#125;/questionnaire/admin/strategy/reports`, &#123; method: &apos;POST&apos;, body: formData, headers: &#123; &apos;Authorization&apos;: `Bearer $&#123;sessionStorage.accessToken&#125;`, &#125;, &#125;).then((response =&gt; &#123; if (response.code === 0) &#123; console.log(&quot;=====================&quot;, &apos;OK&apos;); &#125; else &#123; console.log(&quot;=====================&quot;, &apos;error&apos;); &#125; &#125;)); onSave(data); &#125; &#125;); &#125;&#125; onCancel=&#123;onCancel&#125;&gt; &lt;Form id=&quot;postForm&quot;&gt; &lt;Spin spinning=&#123;formLoading&#125; tip=&quot;åŠ è½½ä¸­...&quot;&gt; &#123; getFieldDecorator(&apos;id&apos;, &#123;initialValue: _.defaultTo(data.id, null)&#125;) &#125; &lt;FormItem label=&quot;æŠ¥å‘Šæ ‡é¢˜&quot; &#123;...formItemLayout&#125;&gt; &#123; getFieldDecorator(&apos;title&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: true, message: &apos;æ ‡é¢˜ä¸èƒ½ä¸ºç©ºï¼&apos;, &#125;, ], initialValue: _.defaultTo(data.title, &apos;&apos;), &#125;)(&lt;Input/&gt;) &#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;æ˜¾ç¤ºæ—¶é—´&quot; &#123;...formItemLayout&#125;&gt; &#123; getFieldDecorator(&apos;showTime&apos;, &#123; rules: [ &#123; required: true, message: &apos;æ˜¾ç¤ºæ—¶é—´ä¸èƒ½ä¸ºç©º&apos;, &#125;, ], initialValue: data.showTime ? moment(moment(data.showTime).format(&apos;YYYY-MM-DD HH:mm&apos;)) : moment(), &#125;)( &lt;DatePicker showTime style=&#123;&#123;width: 280&#125;&#125; format=&quot;YYYY-MM-DD HH:mm&quot;/&gt;) &#125; &lt;/FormItem&gt; &lt;FormItem label=&quot;æŒ‡å®šæœŸæ•°&quot; &#123;...formItemLayout&#125;&gt; &#123; getFieldDecorator(&apos;periods&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: false, message: &apos;æœŸæ•°&apos;, &#125;, ], initialValue: _.defaultTo(data.periods, &apos;&apos;), &#125;)(&lt;Input/&gt;) &#125; &lt;/FormItem&gt; &#123;/* &lt;FormItem label=&quot;ä¸Šä¼ é™„ä»¶&quot; &#123;...formItemLayout&#125;&gt; &#123; getFieldDecorator(&apos;fileUrl&apos;, &#123; rules: [ &#123; type: &apos;string&apos;, required: true, message: &apos;è¯·ä¸Šä¼ PDFæ–‡æ¡£&apos;, &#125;, ], initialValue: _.defaultTo(data.fileUrl, &apos;&apos;) &#125;)(&lt;FileUpload uploadProps=&#123;this.uploadProps&#125; fileList=&#123;fileList&#125; data=&#123;&#123;&apos;objectKey&apos;: &apos;strategy/report&apos;&#125;&#125;/&gt;) &#125; &lt;/FormItem&gt; */&#125; &lt;FormItem labelCol=&#123;&#123;span:5&#125;&#125; wrapperCol=&#123;&#123;span:15&#125;&#125; label=&apos;æ–‡ä»¶ä¸Šä¼ &apos;&gt; &#123;getFieldDecorator(&apos;files&apos;)( &lt;Upload action=&apos;è·¯å¾„&apos; multiple uploadList beforeUpload=&#123;this.beforeUploadHandle&#125; onChange=&#123;this.fileChange&#125; onRemove=&#123;this.fileRemove&#125; fileList=&#123;this.state.fileData&#125;&gt; &lt;Button&gt;&lt;Icon type=&apos;upload&apos; /&gt;ä¸Šä¼ æ–‡ä»¶&lt;/Button&gt; &lt;/Upload&gt; )&#125; &lt;/FormItem&gt; &lt;/Spin&gt; &lt;/Form&gt; &lt;/Modal&gt; ); &#125; componentWillReceiveProps(nextProps) &#123; if (!this.props.modalVisible &amp;&amp; nextProps.modalVisible) &#123; this.props.form.resetFields(); &#125; &#125;&#125; æ³¨æ„ç‚¹ 1ã€Uploadç»„ä»¶é»˜è®¤æ˜¯é€‰æ‹©æ–‡ä»¶åŽç›´æŽ¥è°ƒç”¨actionä¸Šä¼ æ–‡ä»¶ï¼Œè¿”å›žurlã€‚é€šå¸¸æ–‡ä»¶éƒ½ä¼šåœ¨formè¡¨å•é‡Œè·Ÿåˆ«çš„å‚æ•°ä¸€èµ·ï¼Œè¿™æ—¶å€™formé‡Œå…¶å®žæ²¡æœ‰æ–‡ä»¶ï¼Œè€Œæ˜¯æ–‡ä»¶çš„urlåœ°å€ã€‚å°±åƒä¸‹é¢è¿™æ ·ã€‚StrategyReportFormæ˜¯è¿™ä¸ªå¼¹å‡ºå±‚ï¼Œè€Œå®ƒçš„ä¸Šå±‚é¡µé¢æ˜¯StrategyReportListï¼Œåœ¨listä¸­çš„formæ˜¯è¿™æ ·çš„123456789101112131415161718&lt;StrategyReportForm modalVisible=&#123;strategyReportForm.modalVisible&#125; confirmLoading=&#123;strategyReportForm.confirmLoading&#125; options=&#123;strategyReportForm.options&#125; data=&#123;strategyReportForm.data&#125; fileList=&#123;strategyReportForm.fileList&#125; formLoading=&#123;strategyReportForm.formLoading&#125; onChangeFile=&#123;(fileList)=&gt;&#123; dispatch(&#123;type: &apos;strategyReportForm/fileList&apos;, payload: fileList&#125;); &#125;&#125; onSave=&#123;(data)=&gt;&#123; dispatch(&#123;type: &apos;strategyReportForm/update&apos;, payload: &#123;data, callback:(result)=&gt;&#123; dispatch(&#123;type: &apos;strategyReportList/list&apos;, payload:&#123;&#125;&#125;); &#125;&#125;&#125;); &#125;&#125; onCancel=&#123;()=&gt;&#123; dispatch(&#123;type: &apos;strategyReportForm/close&apos;&#125;); &#125;&#125;/&gt; è¿™æ®µä»£ç é‡Œçš„onSaveå›žè°ƒæ–¹æ³•çš„æ„æ€å°±æ˜¯ä¸Šä¼ æ–‡ä»¶ï¼Œå…³é—­å¼¹æ¡†ï¼Œåˆ·æ–°åˆ—è¡¨ã€‚modleé‡Œçš„updateæ–¹æ³•ä¸Žå…¶ä»–çš„æ²¡æœ‰ä¸¤æ ·ã€‚12345678910111213effects: &#123; * update(&#123;payload:&#123;data, callback&#125;&#125;, &#123;call, put, select&#125;)&#123; yield put(&#123;type: &apos;confirmLoading&apos;, payload: true&#125;); const response = yield call(api.update, data); if (response.code === 0) &#123; message.success(&quot;æ“ä½œæˆåŠŸ&quot;); yield put(&#123;type: &apos;close&apos;&#125;); if(callback) callback(response.data) &#125; else &#123; message.error(response.message); &#125; &#125;,&#125; api.uploadè¿™ä¸ªæ–¹æ³•åœ¨antd proé‡Œæ˜¯éš”ç¦»å®šä¹‰å†serviceç›®å½•ä¸‹çš„ï¼Œå†…å®¹å¾ˆç®€å•ï¼š123456789export async function update(params) &#123; fetch(`$&#123;prefix&#125;/questionnaire/admin/strategy/reports`, &#123; method: &apos;POST&apos;, body: params, headers: &#123; &apos;Authorization&apos;: `Bearer $&#123;sessionStorage.accessToken&#125;`, &#125; &#125;)&#125; éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œå¾—ç›´æŽ¥ä½¿ç”¨fetchæ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨æ¡†æž¶å°è£…çš„requestå‘èµ·è¯·æ±‚ï¼Œå› ä¸ºrequesté‡Œå°è£…çš„content-typeç±»åž‹æ˜¯application/json åœ¨and design pro2.xçš„ç‰ˆæœ¬é‡Œï¼Œrequestæ–¹æ³•å·²ç»å…¼å®¹äº†è¿™ä¸ªå¤„ç† åœ¨antd1.xçš„ç‰ˆæœ¬é‡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨reqeusté‡Œå°è£…å¥½çš„postFormWithProgressæ–¹æ³•ã€‚æ¯”å¦‚è¿™ä¸ªç”¨æ³•ï¼š12345678910111213141516171819202122&lt;FormItem label=&quot;å®‰è£…åŒ…åœ°å€&quot; labelCol=&#123;&#123; span: 3 &#125;&#125; wrapperCol=&#123;&#123; span: 9 &#125;&#125;&gt; &#123; getFieldDecorator(&apos;downloadAddr&apos;, &#123; rules: [ &#123; required: true, message: &apos;å®‰è£…åŒ…åœ°å€ä¸èƒ½ä¸ºç©º&apos;, &#125;, ], &#125;)( &lt;Input disabled /&gt; ) &#125; &lt;/FormItem&gt; &lt;FormItem wrapperCol=&#123;&#123; offset:3, span: 9 &#125;&#125;&gt; &lt;Upload beforeUpload=&#123;this.uploadFile&#125;&gt; &lt;Button&gt; &lt;Icon type=&quot;upload&quot; /&gt;ä¸Šä¼ æ–‡ä»¶ &lt;/Button&gt; &lt;/Upload&gt; &lt;Progress size=&quot;small&quot; style=&#123;&#123; display: &apos;inline&apos; &#125;&#125; percent=&#123;~~(this.state.uploadPercent*100)&#125; /&gt; &lt;/FormItem&gt; js123456789101112131415161718192021uploadFile = (file) =&gt; &#123; this.setState(&#123; uploadPercent: 0 &#125;); uploadAppBinary(file, percent =&gt; this.setState(&#123; uploadPercent: percent &#125;)).then( (resp) =&gt; &#123; const &#123; code, message: msg, data, &#125; = resp; if (code === 0) &#123; const &#123; downloadAddr &#125; = data; this.props.form.setFieldsValue(&#123; downloadAddr, &#125;); &#125; else &#123; message.error(`ä¸Šä¼ æ–‡ä»¶å¤±è´¥ï¼--$&#123;msg&#125;`); &#125; &#125;, ).catch(e =&gt; message.error(e.message)); return false;&#125; service12345export async function uploadAppBinary(file, callback) &#123; return postFormWithProgress(`$&#123;prefix&#125;/questionnaire/admin/app/release/uploadPackage`, &#123; file, &#125;, callback);&#125; 2ã€ä½†æ˜¯è¿™æ¬¡ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬æ–‡ä»¶å…ˆä¸ä¸Šä¼ ï¼Œè€Œæ˜¯ä¸Žformè¡¨å•çš„å…¶ä»–å†…å®¹ä¸€èµ·æäº¤åˆ°APIé‡Œã€‚è§£å†³é—®é¢˜æ˜¯å­¦åˆ°çš„ä¸œè¥¿ä¸å°‘ï¼Œç®€å•è®°å½•ä¸‹ã€‚ 2.1ã€formé‡Œåº”ä¸åº”è¯¥è®¾ç½®Content-Typeå±žæ€§ï¼Œåº”è¯¥è®¾ç½®æˆä»€ä¹ˆï¼Ÿrequesté‡Œä¼šæœ‰å“ªäº›ä¸ä¸€æ ·ï¼Ÿç›´æŽ¥å‚è€ƒpostä½¿ç”¨form-dataå’Œx-www-form-urlencodedçš„æœ¬è´¨åŒºåˆ«å³å¯ï¼Œä½†æ˜¯ç»“è®ºæ˜¯ä¸éœ€è¦è‡ªå·±è®¾å®šï¼Œç¨‹åºä¼šè‡ªå·±æ ¹æ®ç±»åž‹è®¾å®šã€‚ 2.2ã€è°ƒç”¨æŽ¥å£æ—¶åªè¦æ²¡æœ‰æ–‡ä»¶å°±æ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ–‡ä»¶äº†å°±ä¼š400ã€‚åŽŸå› ï¼šå¤šä¸ªæ–‡ä»¶çš„appendä¸èƒ½ç›´æŽ¥æŠŠæ•°ç»„appendè¿›åŽ»ï¼Œæ¯”å¦‚ä¸Šé¢å¦‚æžœä¸ç”¨å¾ªçŽ¯èŽ·å–fileDataé‡Œçš„æ•°æ®ï¼Œè€Œæ˜¯ç›´æŽ¥formData.append(this.state.fileData);è¿™æ ·çš„æ•°æ®å‘é€çš„æŽ¥å£ï¼Œå°±ä¼š400ï¼ŒåŽŸå› å°±æ˜¯ç±»åž‹ä¸å¯¹ã€‚å¦‚æžœæ˜¯å•ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨formData.append(files[0]);è¿™æ ·å®žçŽ°ã€‚ 2.3ã€å¤šä¸ªæ–‡ä»¶å’Œå•ä¸ªæ–‡ä»¶çš„å¤„ç†ã€‚ä¸è®ºæ˜¯å•ä¸ªæ–‡ä»¶æˆ–æ˜¯å¤šä¸ªæ–‡ä»¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å¾ªçŽ¯çš„å½¢å¼å°†æ–‡ä»¶appendåˆ°formdataä¸­ã€‚ 3ã€å…¶ä»–å®žçŽ°æ–¹å¼åŸºäºŽ2.xä»¥åŽçš„ç‰ˆæœ¬å®žçŽ°æ›´ç®€å•ä¸€äº›ã€‚æŠŠjsonä¼ åˆ°serviceçš„apiä»¥åŽï¼Œnewå‡ºformDataï¼Œappendä¸Šå‚æ•°å³å¯ã€‚12345678910export async function batchImport(params)&#123; const formData = new FormData(); for (const key in params) &#123; formData.append(key, params[key]); &#125; return request(&apos;/customer/batchImport&apos;, &#123; method: &apos;POST&apos;, body: formData &#125;);&#125; ä¸è¿‡å°±æ˜¯åœ¨formé‡Œè¦åˆ©ç”¨valuePropNameå’ŒgetValueFromEventå±žæ€§æŠŠå±žæ€§å€¼ä»¥jsonçš„ç»“æž„ä¼ é€’åˆ°modlesé‡Œã€‚12345678910111213141516171819202122&lt;Modal destroyOnClose title=&quot;å¯¼å…¥é‡ä½“äºº&quot; visible=&#123;batchImportShow&#125; onOk=&#123;this.handleOk&#125; onCancel=&#123;() =&gt; handleImportVisible(false)&#125;&gt; &lt;FormItem labelCol=&#123;&#123; span: 5 &#125;&#125; wrapperCol=&#123;&#123; span: 15 &#125;&#125; label=&quot;æµ‹é‡è®¡åˆ’&quot;&gt; &#123;form.getFieldDecorator(&apos;planId&apos;,&#123; rules: [&#123; required: true, message: &apos;è¯·é€‰æ‹©æµ‹é‡è®¡åˆ’&apos;, &#125;], &#125;)(&lt;Select style=&#123; &#123; width: 200 &#125;&#125; id=&apos;planSelect&apos;&gt; &lt;Select.Option key=&#123;-99&#125; value=&apos;&apos;&gt;å…¨éƒ¨&lt;/Select.Option&gt; &#123; planList.map((item) =&gt; &lt;Select.Option key=&#123;item.planId&#125; value=&#123;item.planId&#125;&gt;&#123;item.planName&#125;&lt;/Select.Option&gt;) &#125; &lt;/Select&gt;)&#125; &lt;/FormItem&gt; &lt;FormItem labelCol=&#123;&#123; span: 5 &#125;&#125; wrapperCol=&#123;&#123; span: 15 &#125;&#125; label=&quot;æ•°æ®æ–‡ä»¶&quot;&gt; &#123;form.getFieldDecorator(&apos;customerFile&apos;, &#123; rules: [&#123; required: true, message: &apos;è¯·ä¸Šä¼ æ•°æ®æ–‡ä»¶&apos;, &#125;], valuePropName: &apos;files&apos;, getValueFromEvent: e =&gt; e.target.files, &#125;)(&lt;Input type=&apos;file&apos; name=&apos;customerFile&apos; style=&#123;&#123;height:35&#125;&#125;/&gt;)&#125; &lt;/FormItem&gt; &lt;/Modal&gt; å‹æƒ…å‚è€ƒå°†é€‰ä¸­æ–‡ä»¶ä¿å­˜åˆ°é¡µé¢çš„stateä¸­å°†æ–‡ä»¶appendåˆ°æ–°çš„formdataä¸­ä½¿ç”¨postæ–¹å¼æäº¤]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ant Design Pro å­¦ä¹ ä¹‹è·³é¡µä¼ å‚]]></title>
    <url>%2F2019%2F02%2F06%2FAnt%20Design%20Pro%20%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%B3%E9%A1%B5%E4%BC%A0%E5%8F%82%2F</url>
    <content type="text"><![CDATA[é˜¿é‡Œç²‘ç²‘å¼€æºçš„ç®¡ç†æ¡†æž¶Ant Design Proä½¿ç”¨è®°å½•ä¹‹è·³é¡µä¼ å‚ã€‚ ç®€ä¹¦åœ°å€ å·ç›—åˆ«äººè€åŠ¨æˆæžœï¼Œè¦ä¾µæƒäº†ã€‚è¿™æ˜¯åŒäº‹æ€»ç»“çš„è·³é¡µåœºæ™¯ä¼ å‚çš„å½¢å¼ã€‚ umi - router / link ç”¨æ³•1234567891011121314import Link from &apos;umi/link&apos;;/* æ™®é€šä½¿ç”¨ */&lt;Link to=&quot;/list&quot;&gt;Go to list page&lt;/Link&gt;/* å¸¦å‚æ•° */&lt;Link to=&quot;/list?a=b&quot;&gt;Go to list page&lt;/Link&gt;/* åŒ…å«å­ç»„ä»¶ */&lt;Link to=&quot;/list?a=b&quot;&gt;&lt;button&gt;Go to list page&lt;/button&gt;&lt;/Link&gt; umi/routerrouter.push(path)æŽ¨ä¸€ä¸ªæ–°çš„é¡µé¢åˆ° history é‡Œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738import router from &apos;umi/router&apos;;// æ™®é€šè·³è½¬ï¼Œä¸å¸¦å‚æ•°router.push(&apos;/list&apos;);// å¸¦å‚æ•°router.push(&apos;/list?a=b&apos;);// å¸¦å‚æ•°ï¼Œå¹¶ä¸”å‚æ•°ä¼šæ˜¾ç¤ºåœ¨urlä¸­router.push(&#123; pathname: &apos;/list&apos;, query: &#123; a: &apos;b&apos;, &#125;,&#125;);// å¸¦å‚æ•°ï¼Œä½†æ˜¯å‚æ•°ä¸ä¼šæ˜¾ç¤ºåœ¨urlä¸­router.push(&#123; pathname: &apos;/list&apos;, state: &#123; // stateå­—æ®µå¯ä»¥è‡ªå®šä¹‰ï¼Œå¦‚ç”¨paramsç­‰ä¹Ÿå¯ä»¥ a: &apos;b&apos;, &#125;,&#125;); listé¡µé¢å¯¹å‚æ•°çš„æŽ¥æ”¶å–å€¼ï¼š 1234const &#123; location: &#123; query, state &#125; &#125; = this.props;**console.log(query.a, state.a);** router.replace(path)æ›¿æ¢å½“å‰é¡µé¢ï¼Œå‚æ•°å’Œ router.push()) ç›¸åŒã€‚ router.go(n)å¾€å‰æˆ–å¾€åŽè·³æŒ‡å®šé¡µæ•°ã€‚ router.goBack()åŽé€€ä¸€é¡µã€‚]]></content>
      <categories>
        <category>åŽå°ç®¡ç†ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Antd Pro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[â€œSpringBoot2.0ä¸å®¹é”™è¿‡çš„æ–°ç‰¹æ€§ WebFluxå“åº”å¼ç¼–ç¨‹â€å­¦ä¹ ç¬”è®°(ä¸€)]]></title>
    <url>%2F2019%2F01%2F12%2Fspringboot2.0-webflux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%2F</url>
    <content type="text"><![CDATA[WebFluxå“åº”å¼ç¼–ç¨‹å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ç®€ä¹¦åœ°å€ ç¬¬äº”èŠ‚ webfluxæœåŠ¡ç«¯å¼€å‘è®²è§£ 5.1 å¼‚æ­¥servlet1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ å¼‚æ­¥servletï¼Ÿå›žç­”ï¼šåŒæ­¥servletä¸€ç›´å ç”¨æœåŠ¡å™¨tomcatçš„çº¿ç¨‹æ•°ï¼Œæ˜¯tomcatæ— æš‡æŽ¥å—æ›´å¤šçš„è¯·æ±‚ã€‚å› æ­¤æœ‰å¿…è¦ä½¿ç”¨å¼‚æ­¥servletã€‚2ã€åŒæ­¥servleté˜»å¡žäº†ä»€ä¹ˆï¼Ÿä¹Ÿå°±æ˜¯è¯´åŒæ­¥servletå…¶å®žæ˜¯é˜»å¡žäº†tomcatçš„servletçº¿ç¨‹ã€‚3ã€å¼‚æ­¥servletæ˜¯æ€Žä¹ˆå·¥ä½œçš„ï¼Ÿå…ˆçœ‹ä¸€ä¸ªåŒæ­¥servletçš„ä¾‹å­:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import java.io.IOException;import java.util.concurrent.TimeUnit;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;/** * Servlet implementation class SyncServlet */@WebServlet(&quot;/SyncServlet&quot;)public class SyncServlet extends HttpServlet &#123; private static final long serialVersionUID = 1L; /** * @see HttpServlet#HttpServlet() */ public SyncServlet() &#123; super(); // TODO Auto-generated constructor stub &#125; /** * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse * response) */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; long t1 = System.currentTimeMillis(); // æ‰§è¡Œä¸šåŠ¡ä»£ç  doSomeThing(request, response); System.out.println(&quot;sync use:&quot; + (System.currentTimeMillis() - t1)); &#125; private void doSomeThing(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ try &#123; TimeUnit.SECONDS.sleep(5); &#125; catch (InterruptedException e) &#123; &#125; // response.getWriter().append(&quot;done&quot;); &#125; /** * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse * response) */ protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; // TODO Auto-generated method stub doGet(request, response); &#125;&#125; å†æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥servletçš„ä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import java.io.IOException;import java.util.concurrent.CompletableFuture;import java.util.concurrent.TimeUnit;import javax.servlet.AsyncContext;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;/** * Servlet implementation class AsyncServlet */@WebServlet(asyncSupported = true, urlPatterns = &#123; &quot;/AsyncServlet&quot; &#125;)public class AsyncServlet extends HttpServlet &#123; private static final long serialVersionUID = 1L; /** * @see HttpServlet#HttpServlet() */ public AsyncServlet() &#123; super(); // TODO Auto-generated constructor stub &#125; /** * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse * response) */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; long t1 = System.currentTimeMillis(); // å¼€å¯å¼‚æ­¥ AsyncContext asyncContext = request.startAsync(); // æ‰§è¡Œä¸šåŠ¡ä»£ç  CompletableFuture.runAsync(() -&gt; doSomeThing(asyncContext, asyncContext.getRequest(), asyncContext.getResponse())); System.out.println(&quot;async use:&quot; + (System.currentTimeMillis() - t1)); &#125; private void doSomeThing(AsyncContext asyncContext, ServletRequest servletRequest, ServletResponse servletResponse) &#123; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ try &#123; TimeUnit.SECONDS.sleep(5); &#125; catch (InterruptedException e) &#123; &#125; // try &#123; servletResponse.getWriter().append(&quot;done&quot;); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; // ä¸šåŠ¡ä»£ç å¤„ç†å®Œæ¯•, é€šçŸ¥ç»“æŸ asyncContext.complete(); &#125; /** * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse * response) */ protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; // TODO Auto-generated method stub doGet(request, response); &#125;&#125; å‰åŽä¸¤æ¬¡åœ¨æµè§ˆå™¨ä¸Šè®¿é—®http://localhost:8080/SyncServletå’Œhttp://localhost:8080/AsyncServletï¼Œåœ¨å‰å°çœ‹éƒ½æ˜¯å¤§çº¦5sè¿”å›žã€‚ä½†æ˜¯æŸ¥çœ‹æœåŠ¡ç«¯æŽ§åˆ¶å°ï¼š sync use:5002async use:16 å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ­¥æ˜¯5sï¼Œå¼‚æ­¥çš„æ˜¯16msè¿”å›žäº†ï¼Œè¿™æ ·tomcatå°±åˆæœ‰æ—¶é—´å¤„ç†åˆ«çš„ä¸šåŠ¡äº†ï¼Œä¹Ÿå°±æ˜¯æé«˜äº†æœåŠ¡å™¨çš„å¹¶å‘ã€‚ 5.2 Monoå’ŒFluxè¿”å›žæµæŽ¥å£reactor = java8çš„æµ + java9çš„å“åº”å¼æµ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172import java.util.concurrent.TimeUnit;import org.reactivestreams.Subscriber;import org.reactivestreams.Subscription;import reactor.core.publisher.Flux;public class ReactorDemo &#123; public static void main(String[] args) &#123; // reactor = jdk8 stream + jdk9 reactive stream // Mono 0-1ä¸ªå…ƒç´  // Flux 0-Nä¸ªå…ƒç´  String[] strs = &#123; &quot;1&quot;, &quot;2&quot;, &quot;3&quot; &#125;; // 2. å®šä¹‰è®¢é˜…è€… Subscriber&lt;Integer&gt; subscriber = new Subscriber&lt;Integer&gt;() &#123; private Subscription subscription; @Override public void onSubscribe(Subscription subscription) &#123; // ä¿å­˜è®¢é˜…å…³ç³», éœ€è¦ç”¨å®ƒæ¥ç»™å‘å¸ƒè€…å“åº” this.subscription = subscription; // è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); &#125; @Override public void onNext(Integer item) &#123; // æŽ¥å—åˆ°ä¸€ä¸ªæ•°æ®, å¤„ç† System.out.println(&quot;æŽ¥å—åˆ°æ•°æ®: &quot; + item); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; // å¤„ç†å®Œè°ƒç”¨requestå†è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); // æˆ–è€… å·²ç»è¾¾åˆ°äº†ç›®æ ‡, è°ƒç”¨cancelå‘Šè¯‰å‘å¸ƒè€…ä¸å†æŽ¥å—æ•°æ®äº† // this.subscription.cancel(); &#125; @Override public void onError(Throwable throwable) &#123; // å‡ºçŽ°äº†å¼‚å¸¸(ä¾‹å¦‚å¤„ç†æ•°æ®çš„æ—¶å€™äº§ç”Ÿäº†å¼‚å¸¸) throwable.printStackTrace(); // æˆ‘ä»¬å¯ä»¥å‘Šè¯‰å‘å¸ƒè€…, åŽé¢ä¸æŽ¥å—æ•°æ®äº† this.subscription.cancel(); &#125; @Override public void onComplete() &#123; // å…¨éƒ¨æ•°æ®å¤„ç†å®Œäº†(å‘å¸ƒè€…å…³é—­äº†) System.out.println(&quot;å¤„ç†å®Œäº†!&quot;); &#125; &#125;; // è¿™é‡Œå°±æ˜¯jdk8çš„stream Flux.fromArray(strs).map(s -&gt; Integer.parseInt(s)) // æœ€ç»ˆæ“ä½œ // è¿™é‡Œå°±æ˜¯jdk9çš„reactive stream .subscribe(subscriber); &#125;&#125; 5.2 å®Œæ•´çš„fluxwebæ­¥éª¤ï¼š1ã€æ·»åŠ ä¾èµ–åœ¨https://start.spring.io/ä¸Šé€‰æ‹©Reactive MongoDBè¿™ä¸ªdependenciesï¼ŒæŒ‰ä¸‹ã€Genarate Projectã€‘æŒ‰é’®ï¼Œä¸‹è½½demo.zip,æŸ¥çœ‹mongodbçš„ä¾èµ–ï¼ŒåŠ å…¥åˆ°pomæ–‡ä»¶ä¸­ã€‚ 1234567891011&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-mongodb-reactive&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- lombok --&gt;&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt; 2ã€å¯åŠ¨ç±»applicationä¸Šæ·»åŠ mongodbæ”¯æŒæ³¨è§£@EnableReactiveMongoRepositories3ã€å®šä¹‰å¯¹è±¡12345678@Document(collection = &quot;user&quot;)@Datapublic class User &#123; @Id private String id; private String name; private int age;&#125; 4ã€å®šä¹‰ä»“åº“repositoryåˆ›å»ºUserRepositoryæŽ¥å£ï¼Œç»§æ‰¿ReactiveMongoRepositoryï¼Œå¹¶ä½¿ç”¨@Repositoryæ³¨è§£ã€‚5ã€å®šä¹‰controller123456789101112131415161718192021@RestController@RequestMapping(&quot;/user&quot;)public class UserController &#123; private final UserRepository userRepository; //å®˜æ–¹æŽ¨èä½¿ç”¨æž„é€ å‡½æ•°çš„æ–¹å¼æ³¨å…¥ä¾èµ–çš„bean public UserController(UserRepository userRepository) &#123; this.userRepository = userRepository; &#125; @GetMapping(&quot;/&quot;) public Flux&lt;User&gt; findAll() &#123; return userRepository.findAll(); &#125; @GetMapping(value = &quot;/stream/all&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE) public Flux&lt;User&gt; findAllByStream() &#123; return userRepository.findAll(); &#125;&#125; 6ã€æœ¬åœ°å®‰è£…é…ç½®mongodbå…ˆä¸‹è½½mongodbï¼Œå®‰è£…é…ç½®ï¼Œæ ¹æ®å¹³å°è‡ªè¡ŒæŸ¥è¯¢ï¼Œæˆ‘çš„windowså¹³å°ï¼Œå‚è€ƒçš„https://www.cnblogs.com/weschen/p/8213746.html æ‰§è¡Œmongod --dbpath D:\MongoDB\data\db --logpath=D:\MongoDB\log\mongodb.log --logappendå¯åŠ¨mongodb 7ã€mongodbæ•°æ®åº“é…ç½®mongodbï¼Œåœ¨application.propertiesé‡Œæ·»åŠ å¦‚ä¸‹é…ç½®1spring.data.mongodb.uri=mongodb://localhost:27017/webflux 8ã€å¯åŠ¨é¡¹ç›®å¹¶ç”¨å®¢æˆ·ç«¯è®¿é—®éªŒè¯ åŽç»­åŠ å…¥CURDçš„æ™®é€šæŽ¥å£å’ŒstreamæŽ¥å£ã€‚æ·»åŠ validationå‚æ•°checkï¼Œç»Ÿä¸€exceptionæŠ›å‡ºåŠåˆ‡é¢æ‹¦æˆªã€‚å…·ä½“ä»£ç å‚è€ƒå…¨å±€å¼‚å¸¸ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import lombok.Data;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-10 22:54 * @desc $&#123;DESCRIPTION&#125; **/@Datapublic class CheckException extends RuntimeException &#123; private static final long serialVersionUID = 1L; /** * å‡ºé”™å­—æ®µçš„åå­— */ private String fieldName; /** * å‡ºé”™å­—æ®µçš„å€¼ */ private String fieldValue; public CheckException() &#123; super(); &#125; public CheckException(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace) &#123; super(message, cause, enableSuppression, writableStackTrace); &#125; public CheckException(String message, Throwable cause) &#123; super(message, cause); &#125; public CheckException(String message) &#123; super(message); &#125; public CheckException(Throwable cause) &#123; super(cause); &#125; public CheckException(String fieldName, String fieldValue) &#123; super(); this.fieldName = fieldName; this.fieldValue = fieldValue; &#125;&#125; å‚æ•°æ£€æŸ¥å…¬ç”¨æ–¹æ³•ï¼š12345678910111213141516171819202122232425262728import com.marvin.springboot.webflux.demo.exception.CheckException;import java.util.stream.Stream;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-10 22:53 * @desc tool **/public class CheckUtil &#123; private static final String[] INVALID_NAMES = &#123;&quot;admin&quot;, &quot;guanliyuan&quot;&#125;; /** * ç”¨æˆ·åæ ¡éªŒï¼Œä¸æˆåŠŸæ—¶æŠ›å‡ºå¼‚å¸¸ * @param value */ public static void checkUserName(String value) &#123; Stream.of(INVALID_NAMES).filter(name -&gt; name.equalsIgnoreCase(value)) .findAny().ifPresent(name -&gt; &#123; throw new CheckException(name, value); &#125;); &#125;&#125; å¼‚å¸¸æ‹¦æˆªåˆ‡é¢ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import com.marvin.springboot.webflux.demo.exception.CheckException;import org.springframework.http.HttpStatus;import org.springframework.http.ResponseEntity;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.support.WebExchangeBindException;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-10 22:43 * @desc å¼‚å¸¸å¤„ç†åˆ‡é¢ **/@ControllerAdvicepublic class CheckAdvice &#123; @ExceptionHandler(WebExchangeBindException.class) public ResponseEntity handleBindException(WebExchangeBindException e) &#123; return new ResponseEntity&lt;String&gt;(toStr(e), HttpStatus.BAD_REQUEST); &#125; @ExceptionHandler(CheckException.class) public ResponseEntity handleBindException(CheckException e) &#123; return new ResponseEntity&lt;String&gt;(toStr(e), HttpStatus.BAD_REQUEST); &#125; /** * æŠŠæ ¡éªŒå¼‚å¸¸è½¬æ¢æˆå­—ç¬¦ä¸² * @param ex * @return */ private String toStr(WebExchangeBindException ex) &#123; return ex.getFieldErrors().stream().map(e -&gt; e.getField() + &quot;:&quot; + e.getDefaultMessage()).reduce(&quot;&quot;, (s1, s2) -&gt; s1 + &quot;\n&quot; + s2); &#125; /** * æŠŠæ ¡éªŒå¼‚å¸¸è½¬æ¢æˆå­—ç¬¦ä¸² * @param ex * @return */ private String toStr(CheckException ex) &#123; return ex.getFieldName() + &quot;:é”™è¯¯çš„å€¼ &quot; + ex.getFieldValue(); &#125;&#125; controllerå±‚åŠ æ ¡éªŒï¼š1234567891011121314151617/** * ä¿®æ”¹æ•°æ® * å­˜åœ¨çš„æ—¶å€™è¿”å›ž200ï¼Œæ•°æ®ä¸å­˜åœ¨çš„è¯è¿”å›ž404 */ @PutMapping(&quot;/&#123;id&#125;&quot;) public Mono&lt;ResponseEntity&lt;User&gt;&gt; updateUser(@PathVariable(&quot;id&quot;) String id, @Valid @RequestBody User user) &#123; CheckUtil.checkUserName(user.getName()); return this.userRepository.findById(id) //flatMatï¼š æ“ä½œæ•°æ® .flatMap(u -&gt; &#123; u.setAge(user.getAge()); u.setName(user.getName()); return this.userRepository.save(u); &#125;) //mapï¼šè½¬æ¢æ•°æ® .map(u -&gt; new ResponseEntity&lt;&gt;(u, HttpStatus.OK)).defaultIfEmpty(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND)); &#125; æµ‹è¯•ï¼š 5.3 RouterFunctionæ¨¡å¼å®žçŽ°åŸºæœ¬çš„å¢žåˆ æ”¹æŸ¥é™¤äº†ä¸Šä¸€èŠ‚çš„Userå®žä½“ç±»ï¼Œå’ŒUserRepositoryæŽ¥å£ç±»ä¸¤ä¸ªï¼Œæ–°å»ºä¸€ä¸ªUserHandlerç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import com.marvin.springboot.webfluxrouter.router.domain.User;import com.marvin.springboot.webfluxrouter.router.repository.UserRepository;import org.springframework.http.MediaType;import org.springframework.stereotype.Component;import org.springframework.web.reactive.function.server.ServerRequest;import org.springframework.web.reactive.function.server.ServerResponse;import reactor.core.publisher.Mono;import javax.annotation.Resource;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-26 22:32 * @desc UserHandler **/@Componentpublic class UserHandler &#123; @Resource private UserRepository userRepository; /** * å¾—åˆ°æ‰€æœ‰ç”¨æˆ· * @param request * @return */ public Mono&lt;ServerResponse&gt; getAllUser(ServerRequest request) &#123; return ServerResponse.ok().contentType(MediaType.APPLICATION_JSON_UTF8).body(userRepository.findAll(), User.class); &#125; /** * åˆ›å»ºç”¨æˆ· * @param request * @return */ public Mono&lt;ServerResponse&gt; createUser(ServerRequest request) &#123; Mono&lt;User&gt; user = request.bodyToMono(User.class); return ServerResponse.ok().contentType(MediaType.APPLICATION_JSON_UTF8).body(userRepository.saveAll(user), User.class); &#125; /** * æ ¹æ®idåˆ é™¤ç”¨æˆ· * @param request * @return */ public Mono&lt;ServerResponse&gt; deleteUserById(ServerRequest request) &#123; String id = request.pathVariable(&quot;id&quot;); return this.userRepository.findById(id).flatMap(user -&gt; this.userRepository.delete(user).then(ServerResponse.ok().build())).switchIfEmpty(ServerResponse.notFound().build()); &#125;&#125; åœ¨åˆ›å»ºä¸€ä¸ªAllRoutersç±»ï¼Œå¹¶ä¸”ç±»ä¼¼é€šå¸¸å†™çš„RequestMappingï¼Œå¤„ç†URLè·¯ç”±ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536import com.marvin.springboot.webfluxrouter.router.handler.UserHandler;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.MediaType;import org.springframework.web.reactive.function.server.RequestPredicates;import org.springframework.web.reactive.function.server.RouterFunction;import org.springframework.web.reactive.function.server.RouterFunctions;import org.springframework.web.reactive.function.server.ServerResponse;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-26 22:45 * @desc è·¯ç”± **/@Configurationpublic class AllRouters &#123; @Bean RouterFunction&lt;ServerResponse&gt; userRouter(UserHandler handler) &#123; return RouterFunctions.nest( //ç›¸å½“äºŽç±»ä¸Šé¢çš„@RequestMapping(&quot;/user&quot;) RequestPredicates.path(&quot;/user&quot;), //ç›¸å½“äºŽæ–¹æ³•ä¸Šé¢çš„@RequestMappingï¼ŒèŽ·å–æ‰€æœ‰ç”¨æˆ· RouterFunctions.route(RequestPredicates.GET(&quot;&quot;), handler::getAllUser) //æ·»åŠ ç”¨æˆ· .andRoute(RequestPredicates.POST(&quot;&quot;).and(RequestPredicates.accept(MediaType.APPLICATION_JSON_UTF8)), handler::createUser) //åˆ é™¤ç”¨æˆ· .andRoute(RequestPredicates.DELETE(&quot;/&#123;id&#125;&quot;), handler::deleteUserById) ); &#125;&#125; è¿è¡Œç¨‹åºï¼Œå¹¶ä¸”æ·»åŠ ï¼Œåˆ—è¡¨ï¼Œåˆ é™¤æŽ¥å£ï¼Œå®Œç¾Ž~~~ å®žçŽ°æ•°æ®æ ¡éªŒåŠŸèƒ½ä»ç„¶ä½¿ç”¨ä¸Šä¸€èŠ‚ä¸­çš„CheckExceptionå’ŒCheckUtilä¸¤ä¸ªç±»ã€‚ä¿®æ”¹UserHanderï¼š12]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
        <tag>webflux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux ä¸Šæˆ‘å¸¸ç”¨çš„å‡ ç§nginxé…ç½®]]></title>
    <url>%2F2019%2F01%2F08%2FLinux%20%E4%B8%8A%E6%88%91%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E7%A7%8Dnginx%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å·¥ä½œä¸­å¸¸ç”¨çš„nginxé…ç½®å¤‡å¿˜å½•ç®€ä¹¦åœ°å€ nginxä½œä¸ºç”¨çƒ‚äº†çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œè¿™ä¸¤å¹´ç»æ‰‹çš„é¡¹ç›®ä¹Ÿæ˜¯å„ç§é…ç½®ï¼Œå„ç§å­¦ä¹ ï¼Œå†æ¬¡è®°å½•ä¸‹è¿˜èƒ½æƒ³çš„èµ·æ¥æˆ–è€…æœ‰æ®å¯æŸ¥çš„nginxé…ç½®ï¼Œä»¥é˜²å“ªå¤©æŽ‰å‘é‡Œæ—¶è¿˜æœ‰ä¸€æ ¹æ•‘å‘½ç¨»è‰ã€‚ å‰ç½®ä¸ªäººçˆ±å¥½çš„åŽŸå› ï¼Œæˆ‘çš„nginxä¸€èˆ¬å®‰è£…åœ¨/usr/local/nginxè¿™ä¸ªç›®å½•ï¼Œä¸»é…ç½®æ–‡ä»¶/usr/local/nginx/conf/nginx.confï¼Œå…¶ä»–é…ç½®æ–‡ä»¶åˆ™æ˜¯åœ¨/usr/local/nginx/conf/conf.d/*.confè¿™äº›å•ç‹¬çš„æ–‡ä»¶ä¸Šã€‚è¿™äº›conf.dç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶è¦åœ¨nginx.confä¸­è¢«å¼•å…¥ï¼Œå› æ­¤nginx.confæ–‡ä»¶æœ€åŽä¸€è¡Œæœ‰è¿™ä¹ˆä¸€å¥1include conf.d/*.conf; 1ã€ä¸€ä¸ªåŸŸåï¼Œå¤šä¸ªç«¯å£ï¼Œå¤šä¸ªé¡¹ç›®è¿™ç§æƒ…å†µæ˜¯æœ€ç†æƒ³ï¼Œæœ€å¥½é…ç½®çš„ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ€æ²¡æœ‰å•¥å¯è¯´çš„ä¸€ç§ï¼Œä¸è¿‡æˆ‘è¿˜çš„æ˜¯copyä¸€ä¸ªè®°å½•ä¸€ä¸‹å§ã€‚æ¯”å¦‚conf.dä¸‹æœ‰å‡ ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¤§æ¦‚è¿™æ ·ï¼š12345678910[haieradmin@1169CKT2 conf.d]$ lltotal 20-rw-r--r-- 1 haieradmin haieradmin 828 Mar 7 2018 hrsj.15386.conf-rw-r--r-- 1 haieradmin haieradmin 827 Mar 7 2018 hryh.10386.conf-rw-r--r-- 1 haieradmin haieradmin 1166 Nov 22 13:49 html.8880.conf-rw-r--r-- 1 haieradmin haieradmin 1022 Jul 16 13:50 portal.8886.conf-rw-r--r-- 1 haieradmin haieradmin 846 Jul 13 2018 questionnaire.8081.conf[haieradmin@1169CKT2 conf.d]$ pwd/usr/local/nginx/conf/conf.d[haieradmin@1169CKT2 conf.d]$ æŸ¥çœ‹å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536[haieradmin@1169CKT2 conf.d]$ cat hrsj.15386.conf server &#123; listen 15386; #server_name tech.haier.net; #ssl on; #ssl_certificate /usr/local/nginx/key/server.crt; #ssl_certificate_key /usr/local/nginx/key/server.key; index index.html; root /opt/chuangke/website/hrsj; location / &#123; client_max_body_size 100M; try_files $uri $uri/ /index.html; &#125; location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ &#123; expires 30d; &#125; location ~ .*\.(js|css)?$ &#123; expires 12h; &#125; location ~ /\. &#123; deny all; &#125; error_page 404 /404.html; access_log /usr/local/nginx/logs/hrsj.host.access.log; &#125;[haieradmin@1169CKT2 conf.d]$ å…¶ä»–å‡ ä¸ªé…ç½®æ–‡ä»¶çŸ¥è¯†é‡Œé¢listençš„ç«¯å£å’Œrootç›®å½•ä¸ä¸€æ ·ã€‚ 2ã€ä¸€ä¸ªåŸŸåï¼Œä¸€ä¸ªç«¯å£ï¼Œå¤šä¸ªé¡¹ç›®ï¼Œè®¿é—®æ—¶ç”¨äºŒçº§ç›®å½•åç§°åŒºåˆ†12345[haieradmin@1169CKT conf.d]$ lltotal 8-rw-r--r-- 1 root root 1594 Jun 26 2018 nginx_8086_to_5601.conf-rw-r--r-- 1 root root 1592 Jun 28 2018 nginx_8888_gitstats.conf[haieradmin@1169CKT conf.d]$ æŸ¥çœ‹é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162[haieradmin@1169CKT conf.d]$ cat nginx_8888_gitstats.conf server &#123; listen 8888; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; #location / &#123; # root html; # index index.html index.htm; #&#125; index index.html index.htm; client_max_body_size 100m; location /questionnaire &#123; alias /opt/chuangke/gitstats/result/questionnaire; &#125; location /portal &#123; alias /opt/chuangke/gitstats/result/Portal; &#125; location /portalmanage &#123; alias /opt/chuangke/gitstats/result/portalmanage; &#125; error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&apos;s document root # concurs with nginx&apos;s one # #location ~ /\.ht &#123; # deny all; #&#125; &#125;[haieradmin@1169CKT conf.d]$ è®¿é—®çš„æ—¶å€™å¦‚ï¼šhttp://localhost:8888/portalmanageå’Œhttp://localhost:8888/portalç­‰ã€‚ 3ã€å¤šä¸ªåŸŸåï¼Œä¸€ä¸ªç«¯å£ï¼Œå¤šä¸ªé¡¹ç›®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142[root@im-test-cpr-1 nginx]# cat nginx.conf# * Official Russian Documentation: http://nginx.org/ru/docs/user root;worker_processes auto;error_log /var/log/nginx/error.log;pid /run/nginx.pid;# Load dynamic modules. See /usr/share/nginx/README.dynamic.include /usr/share/nginx/modules/*.conf;events &#123; worker_connections 1024;&#125;http &#123; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /var/log/nginx/access.log main; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; # Load modular configuration files from the /etc/nginx/conf.d directory. # See http://nginx.org/en/docs/ngx_core_module.html#include # for more information. include /etc/nginx/conf.d/*.conf; upstream server1 &#123; server 127.0.0.1:8890; &#125; upstream server2 &#123; server 127.0.0.1:5151; &#125; server &#123; listen 5050 default_server ssl; listen [::]:5050 default_server; server_name _; root /usr/share/nginx/html; ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;; ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;; ssl_session_cache shared:SSL:1m; ssl_session_timeout 10m; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / &#123; proxy_set_header Host $host:$server_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_connect_timeout 90; add_header Access-Control-Allow-Origin $http_origin; add_header Access-Control-Allow-Methods &apos;GET, POST, PUT, DELETE, OPTIONS&apos;; add_header Access-Control-Allow-Credentials &apos;true&apos;; add_header Access-Control-Allow-Headers &apos;Accept, Authorization,DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type&apos;; if ($request_method = &apos;OPTIONS&apos;) &#123; add_header &apos;Access-Control-Max-Age&apos; 1728000; add_header &apos;Content-Type&apos; &apos;text/plain charset=UTF-8&apos;; add_header &apos;Content-Length&apos; 0; add_header Access-Control-Allow-Origin $http_origin; add_header Access-Control-Allow-Methods &apos;GET, POST, PUT, DELETE, OPTIONS&apos;; add_header Access-Control-Allow-Credentials &apos;true&apos;; add_header Access-Control-Allow-Headers &apos;Accept, Authorization,DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type&apos;; return 204; &#125; proxy_pass http://server2; &#125; error_page 404 /404.html; location = /40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; &#125; &#125; server &#123; listen 8443 ssl; server_name sysadmint.rrs.com; root /usr/share/nginx/html/sysadmin/; ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;; ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;; ssl_session_cache shared:SSL:1m; ssl_session_timeout 10m; location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|js|css)$ &#123; add_header Cache-Control no-store; &#125; location / &#123; try_files $uri /index.html; &#125; &#125; server &#123; listen 8443 ssl; server_name opadmint.rrs.com; location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|js|css)$ &#123; add_header Cache-Control no-store; &#125; root /usr/share/nginx/html/opadmin/; location / &#123; try_files $uri /index.html; &#125; ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;; ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;; ssl_session_cache shared:SSL:1m; ssl_session_timeout 10m; &#125; server &#123; listen 8443 ssl; server_name shopadmint.rrs.com; root /usr/share/nginx/html/shopadmin/; location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|js|css)$ &#123; add_header Cache-Control no-store; &#125; location / &#123; try_files $uri /index.html; &#125; ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;; ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;; ssl_session_cache shared:SSL:1m; ssl_session_timeout 10m; &#125;&#125;[root@im-test-cpr-1 nginx]# è®¿é—®ï¼šhost name+8443ç«¯å£å· 4ã€å°†æ”¶åˆ°çš„æœåŠ¡è½¬å‘ç»™åˆ«çš„æœåŠ¡æ¯”å¦‚æŽ¥å—ç«¯å£æŽ¥å—çš„ç«¯å£æ˜¯8086ï¼Œä½†æ˜¯æ˜ å°„åŽè®¿é—®5601çš„èµ„æºã€‚1234567891011121314151617181920212223[haieradmin@1169CKT conf.d]$ cat nginx_8086_to_5601.conf server &#123; listen 8086; server_name office.haier.net; access_log logs/5601.host.access.log main; location / &#123; proxy_pass http://127.0.0.1:5601/; &#125; location ~.*\.(gif|jpg|jpeg|png|bmp|swf)$ &#123; proxy_pass http://127.0.0.1:5601; &#125; location ~.*\.(js|css)?$ &#123; proxy_pass http://127.0.0.1:5601; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125;&#125;[haieradmin@1169CKT conf.d]$]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo+nextä½¿ç”¨Valineè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2F2018%2F11%2F24%2Fhexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8Valine%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%2F</url>
    <content type="text"><![CDATA[åšå®¢è¯„è®ºç³»ç»Ÿä»ŽéŸ©å›½äº§æ¥å¿…åŠ›æ¢æˆå›½äº§Valineç®€ä¹¦åœ°å€ åŽŸæ–‡åœ°å€ï¼šhexo+nextä½¿ç”¨Valineè¯„è®ºç³» æ¥å¿…åŠ›åšä¸»åŽŸæ¥çš„åšå®¢ä½¿ç”¨çš„æ¥å¿…åŠ›ç³»ç»Ÿï¼Œç¡®å®žå¡é¡¿å¤ªåŽ‰å®³ã€‚ä½œä¸ºä¸€æžšç¨‹åºçŒ¿å²‚èƒ½å…è®¸è¿™ä¹ˆç£¨ç£¨å”§å”§çš„ä¸œè¥¿ä¸€ç›´å­˜åœ¨ï¼Œç”²æ–¹è¯´ä¼˜åŒ–ï¼Œä¼˜åŒ–æŽ‰ã€‚å› ä¸ºæˆ‘æœ€ä¸å–œæ¬¢åœ¨è¯„è®ºç³»ç»Ÿé‡Œçœ‹åˆ°è¿˜éœ€è¦ç™»å½•è¿™æ ·çš„æ­¥éª¤ã€‚ å…ˆå±•ç¤ºä¸‹çŽ°åœ¨çš„ä¸œä¸œ ç»ˆäºŽå‡ºæ¥äº†ï¼Œè¯„è®ºè¯•è¯• å’¦ï¼Œè¿˜å¾—ç™»é™†ä¸€ä¸‹ï¼Œè¾“ä¸ªé‚®ç®±è¯•è¯• ä»€ä¹ˆé¬¼ï¼Œé‚£å°±ç™»å½•å§ï¼ï¼ï¼ çœ‹åˆ°äº†å§ï¼Œä½ å¯ä»¥ç™»é™†äº†ã€‚å™—å™—å™—~ è¿˜æ²¡æœ‰æ”¾å¼ƒçš„çœŸæ˜¯æˆ‘å´‡æ‹œçš„å¤§å“¥å•Šã€‚å½“ç„¶ï¼Œåæ§½å½’åæ§½ï¼Œä¹Ÿä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œå½“æ—¶é€‰æ‹©ä¸€æ˜¯æ²¡æœ‰å…¶ä»–å¯é€‰çš„ï¼Œè€Œæ˜¯çœ‹äº†çœ‹æœ‰äº›æˆªå›¾ï¼Œè¿˜ä¸é”™ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ ·çš„ï¼ˆæˆ‘ç”¨githubç¬¬ä¸‰æ–¹ç™»å½•çš„ï¼‰ï¼š è¾“å…¥æ¡†å³ä¸Šè§’è¿˜æœ‰ä¸ªå°é“ƒé“›ï¼Œç‚¹ç‚¹è¯•è¯• æ˜¯å§ï¼Œè¿˜ä¸é”™å§ã€‚å“ˆå“ˆå“ˆã€‚ å†æ¥çœ‹çœ‹æ¥å¿…åŠ›çš„åŽå°å§ï¼ˆæˆ‘å¯ä»¥è·³è¿‡å¢™ï¼Œæ‰€ä»¥é€Ÿåº¦è¿˜å¯ä»¥ï¼‰ æ¯•ç«Ÿæ˜¯å›½é™…åŒ–çš„ï¼Œèƒ½é€‰ä¸­æ–‡ã€‚ åˆ°æ­¤ä¸ºæ­¢å§ã€‚ ç»™hexoæ·»åŠ Valineè¯„è®ºåŠŸèƒ½åŽé¢äº†è§£åˆ°ä¸€æ¬¾å›½äººå¼€å‘çš„è¯„è®ºç³»ç»Ÿå«Valineç”¨çš„æ˜¯LeanCloudä½œä¸ºæ•°æ®åº“ï¼Œæ´é¢å¾ˆç®€æ´ï¼Œä¸åƒæ¥å¿…åŠ›é‚£æ ·èŠ±å“¨åªæ˜¯å•çº¯çš„è¯„è®ºï¼Œç®€æ´åˆ°æ²¡æœ‰åŽå°ï¼ï¼ï¼åˆ é™¤å’Œç®¡ç†è¯„è®ºåªèƒ½ç›´æŽ¥æ“ä½œæ•°æ®åº“ã€‚è¿™é‡Œå†™ä¸‹ä¸ºHexo-Nextæ¨¡æ¿æ·»åŠ Valineçš„è¿‡ç¨‹å’Œå‘ç‚¹ã€‚1.Nextæ¨¡æ¿è¦5.14ï¼ˆå…åŽ»è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹çš„éº»çƒ¦ï¼‰ã€‚ä¸æ˜¯è¿™ä¸ªç‰ˆæœ¬çš„å¯ä»¥è€ƒè™‘å‡çº§æˆ–è€…è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹ï¼Œä¿®æ”¹æ•™ç¨‹åœ¨ https://github.com/iissnan/hexo-theme-next/pull/19832.æ³¨å†ŒLeanCloudå¹¶åˆ›å»ºä¸€ä¸ªå¼€å‘ç‰ˆåº”ç”¨ï¼ˆå…è´¹ï¼‰ 3.åœ¨LeanCloud -&gt; å­˜å‚¨ -&gt; åˆ›å»ºClass -&gt; æ— é™åˆ¶çš„Classï¼ˆå‘ç‚¹1ï¼‰classåç§°ä¸ºï¼šComment 4.åœ¨LeanCloud-è®¾ç½®-æŠŠé™¤æ•°æ®å­˜å‚¨å…¶ä»–é€‰é¡¹éƒ½å…³é—­ã€‚å®‰å…¨åŸŸåä¸­æ·»åŠ åŸŸåï¼Œä¸€å®šè¦æ³¨æ„æ ¼å¼ï¼ˆå‘ç‚¹2ï¼‰ ä¾‹å¦‚ï¼šhttps://www.nobige.cn:443 5.åœ¨Nextæ¨¡æ¿ä¸‹çš„_config.ymlæœç´¢Valineè¿›è¡Œå¡«å†™appidå’Œappkey åŠŸèƒ½å±•ç¤º ä¸‹é¢è¯´ä¸‹å„ä¸ªé€‰é¡¹çš„å«ä¹‰12345678910111213# Valine.# You can get your appid and appkey from https://leancloud.cn# more info please open https://valine.js.orgvaline: enable: true appid: # your leancloud application appid appkey: # your leancloud application appkey notify: true # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: ãƒ¾ï¾‰â‰§âˆ€â‰¦)o æ¥å‘€ï¼åæ§½ä¸€ç•ªå§ï¼ # comment box placeholder avatar: mm # gravatar style guest_info: nick,mail,link # custom comment header pageSize: 10 # pagination size ä¸€èˆ¬æ”¹åŠ¨çš„ä¸ºappidå’Œappkeyå…¶ä»–é»˜è®¤å³å¯ï¼Œå¦‚æžœè¦å¼€å¯emailé€šçŸ¥é™¤äº†ä¿®æ”¹_config.ymlæ–‡ä»¶ä¹‹å¤–è¿˜è¦å°†LeanCloud -&gt; è®¾ç½®é‚®ä»¶æ¨¡æ¿ -&gt; ç”¨äºŽé‡ç½®å¯†ç çš„é‚®ä»¶ä¸»é¢˜è¿›è¡Œä¿®æ”¹ 1234567ä½ åœ¨&#123;&#123;appname&#125;&#125; çš„è¯„è®ºæ”¶åˆ°äº†æ–°çš„å›žå¤&lt;p&gt;Hi, &#123;&#123;username&#125;&#125;&lt;/p&gt;&lt;p&gt;ä½ åœ¨ &#123;&#123;appname&#125;&#125; çš„è¯„è®ºæ”¶åˆ°äº†æ–°çš„å›žå¤ï¼Œè¯·ç‚¹å‡»æŸ¥çœ‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;ä½ çš„ç½‘å€é¦–é¡µé“¾æŽ¥&quot; style=&quot;display: inline-block; padding: 10px 20px; border-radius: 4px; background-color: #3090e4; color: #fff; text-decoration: none;&quot;&gt;é©¬ä¸ŠæŸ¥çœ‹&lt;/a&gt;&lt;/p&gt; CDNä¿®æ”¹å»ºè®®å°†è‡ªå¸¦çš„CDNæ”¹æˆç¬¬ä¸‰æ–¹CDNï¼Œä¸ºå•¥ï¼Ÿï¼Ÿï¼Ÿ10+sçš„åŠ è½½é‚£é…¸çˆ½æ˜¯åœ¨æ˜¯è¿‡ç˜¾ã€‚æ–‡ä»¶ç›®å½•ï¼šnext/layout/_third-party/comments/valine.swig //cdn.jsdelivr.net/npm/valine/dist/Valine.min.js å®˜æ–¹çš„CDNæ˜¯ //unpkg.com/valine/dist/Valine.min.js æ›´å¤šé«˜çº§ç”¨æ³•è¯·åˆ°å®˜ç½‘æŸ¥çœ‹ https://valine.js.org/]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>hexo,Valine</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows ä¸Šæ­å»ºclojureå¼€å‘çŽ¯å¢ƒ]]></title>
    <url>%2F2018%2F11%2F05%2FWindow%E4%B8%8A%E6%90%AD%E5%BB%BAClojure%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[Windowsä¸ŠClojureçŽ¯å¢ƒæ­å»ºç®€ä¹¦åœ°å€ 1ã€å®‰è£…JDKæˆ‘æœ¬åœ°å·²ç»è£…å¥½äº†jdk9ï¼Œæ²¡è£…å¥½çš„è‡ªå·±ç™¾åº¦ä¸‹ï¼Œæ–‡ç« å¤šåˆ°çƒ‚äº†ã€‚ä½¿ç”¨java -versionæŸ¥çœ‹æ˜¯å¦å®‰è£…å¦¥å½“ã€‚123456C:\Users\marvin&gt;java -versionjava version &quot;9.0.4&quot;Java(TM) SE Runtime Environment (build 9.0.4+11)Java HotSpot(TM) 64-Bit Server VM (build 9.0.4+11, mixed mode)C:\Users\marvin&gt; 2ã€å®‰è£…leiningen-win-installerç‚¹æˆ‘è¿›å…¥ä¸‹è½½é¡µï¼Œæˆ–è€…ç›´æŽ¥ç‚¹æˆ‘ä¸‹è½½ä¸‹è½½ä¸€ä¸ª.exeçš„windowså¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®‰è£…æ—¶ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œä¸ç„¶å¯èƒ½ç¼ºå°‘self-installsæ–‡ä»¶å¤¹ã€‚ 3ã€è¿è¡Œå®‰è£…å¥½çš„clojure REPLï¼Œä¸å‡ºæ„å¤–çš„è¯ä¼šé—ªé€€ï¼Œé—ªé€€çš„è¯åŽ»cmdè¿è¡Œ lein -version ä¼šæç¤ºä½ è¦å…ˆå®‰è£…ï¼Œå®‰è£…å‘½ä»¤çœ‹æç¤ºï¼Œä½†è¯¥å‘½ä»¤å› ä¸ºæœ‰å¢™åŸºæœ¬ä¸Šéƒ½æ‰§è¡Œä¸äº†ï¼ŒæŒ‰ç…§ä¸‹ä¸€æ­¥å®‰è£…ã€‚4ã€æ‰‹åŠ¨é…ç½®leiningenåŽ»https://github.com/technomancy/leiningen/releasesä¸‹è½½[leiningen-2.8.1-standalone.zip]ï¼Œæ‰¾åˆ°ä¸Šä¸€æ­¥å®‰è£…leinå®‰è£…ç›®å½•ï¼Œæ”¾åœ¨self-installæ–‡ä»¶å¤¹ä¸‹ï¼ˆC:\Users\marvin.lein\self-installsï¼‰ï¼ŒæŠŠæ–‡ä»¶åŽç¼€åæ”¹æˆ.jarã€‚ 5ã€åœ¨cmdä¸­æ‰§è¡Œlein replå³å¯è¿›å…¥clojureå‘½ä»¤è¡Œï¼Œæ‰§è¡Œlein repl æˆ–è€…å¯ä»¥ç›´æŽ¥åœ¨windowså¼€å§‹æ æœç´¢å®‰è£…çš„ç¨‹åºï¼Œç‚¹å‡»æ‰“å¼€ã€‚ æ›´è¿›ä¸€æ­¥ï¼Œè¾“å‡ºä¸ªHello Worldå§ 6ã€ä½¿ç”¨Intellij Ideaä½œä¸ºå¼€å‘IEDéœ€è¦å®‰è£…Cursiveæ’ä»¶ æ³¨æ„ï¼šå¦‚æžœåœ¨çº¿å®‰è£…å®‰è£…ä¸ä¸Šçš„è¯ï¼Œå¯ä»¥ä¸‹è½½ä½ çš„IDEå¯¹åº”ç‰ˆæœ¬æ’ä»¶çš„zipåŒ…ï¼Œè¿›è¡Œæœ¬åœ°å¯¼å…¥å®‰è£…ã€‚ å¦‚å›¾æ˜¯æœ¬åœ°æ–°å»ºçš„ä¸€ä¸ªdemoå·¥ç¨‹ï¼Œå¯ä»¥åœ¨.cljæ–‡ä»¶ä¸Šç›´æŽ¥å³å‡»è¿è¡Œã€‚ ä»£ç ï¼š12345678(ns firstclojure.core)(defn foo &quot;I don&apos;t do a whole lot.&quot; [x] (println x &quot;Hello, World!&quot;))(println (foo &quot;Hello Clojure \n&quot;)) é€šè¿‡lein runçš„æ–¹å¼ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰§è¡Œä»£ç ï¼Œä½†æ˜¯å¦‚æžœè¦å°†æˆ‘ä»¬çš„ä»£ç shareå‡ºåŽ»ï¼Œå°±éœ€è¦ç”Ÿæˆä¸€ä¸ªjaræ–‡ä»¶äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨lein uberjaræ¥ç”Ÿæˆjarï¼Œç”Ÿæˆçš„jaræ–‡ä»¶ä¸ºtarget/uberjar/clojure-noob-0.1.0-SNAPSHOT-standalone.jarï¼Œæˆ‘ä»¬å¯ä»¥åœ¨javaé‡Œé¢ç›´æŽ¥è¿è¡Œäº†ã€‚ java -jar target/uberjar/clojure-noob-0.1.0-SNAPSHOT-standalone.jarHello, Clojure! å‚è€ƒæ–‡ç« Mac ä¸‹ Clojure çŽ¯å¢ƒæ­å»º]]></content>
      <categories>
        <category>clojure</category>
      </categories>
      <tags>
        <tag>clojure</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ·å°”åˆ›å®¢æ±‡ç¬”è®°----å®‰å“æµ‹è¯•çŽ¯å¢ƒæ£€æµ‹ä¸åˆ°çƒ­æ›´]]></title>
    <url>%2F2018%2F11%2F01%2F%E6%B5%B7%E5%B0%94%E5%88%9B%E5%AE%A2%E6%B1%87%E7%AC%94%E8%AE%B0----%E5%AE%89%E5%8D%93%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B%E4%B8%8D%E5%88%B0%E7%83%AD%E6%9B%B4%2F</url>
    <content type="text"><![CDATA[å®‰å“æµ‹è¯•çŽ¯å¢ƒæ£€æµ‹ä¸åˆ°çƒ­æ›´ï¼Œé—®é¢˜å‘çŽ°ã€æŽ’æŸ¥æ€è·¯åŠè§£å†³ç®€ä¹¦åœ°å€ æ€•å•¥æ¥å•¥æ˜¨å¤©æ™šä¸Šçº¦å®šçš„æ™šä¸Š11ç‚¹å‘å¸ƒæµ‹è¯•çŽ¯å¢ƒçš„çƒ­æ›´ï¼Œå°æ¨åŒå­¦è¯´äº†ï¼šâ€œæ€•å•¥æ¥å•¥â€ï¼Œæžœç„¶ï¼Œå®‰å“æµ‹è¯•çš„appå‘¨ä¸€å°±æ‰”å‡ºåŽ»äº†ï¼Œçº¦å®šå¥½çš„ä»Šå¤©æ™šä¸Šçƒ­æ›´ï¼Œç»“æžœå‘äº†çƒ­æ›´ç§»åŠ¨ç«¯å´æ£€æµ‹ä¸åˆ°ã€‚ æ™šä¸Šè·Ÿioså‰ç«¯åŒäº‹æŠ˜è…¾äº†ä¸¤æ¬¡ï¼Œä½†æ˜¯æ— æžœè€Œç»ˆï¼Œç”²æ–¹ç²‘ç²‘ä¸ä¹æ„äº†ã€‚ ä»Šå¤©å¼€å§‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ è§£å†³æ–¹æ¡ˆè¿‡ç¨‹è®¨è®º èƒŒæ™¯ï¼š 1ã€å‘å‡ºåŽ»ä¹‹å‰ç¡®å®žåšè¿‡çƒ­æ›´æµ‹è¯•ï¼Œä¸è¿‡çŽ°åœ¨çœ‹æ¥ï¼Œå½“æ—¶æµ‹æ˜¯æµ‹äº†ï¼Œä½†æ˜¯æµ‹è¯•çš„çŽ¯å¢ƒä¸€ç›´åœç•™åœ¨debugçŽ¯å¢ƒã€‚2ã€å¦‚æžœæœ¬åœ°ä»£ç å’ŒæœåŠ¡å™¨ä¸Šæœ€æ–°çš„çƒ­æ›´åŒ…æ˜¯ä¸€æ ·çš„è¯ï¼ŒæŽ¨é€çƒ­æ›´æ˜¯ä¸ä¼šæˆåŠŸçš„ã€‚ ç¬¬ä¸€æ­¥ï¼Œçƒ­æ›´æ˜¯å¦æŽ¨é€æˆåŠŸï¼Ÿ1ã€å°æ¨åŒå­¦åœ¨ä»–çš„çŽ¯å¢ƒä¸‹å‘äº†iosçš„æŽ¨é€ï¼Œæµ‹è¯•å®Œç¾Žä»¥åŽï¼Œåˆå‘äº†androidçš„çƒ­æ›´ã€‚é—æ†¾çš„æ˜¯æ‰‹æœºä¸Šå¯åŠ¨æ£€æµ‹ä¸åˆ°æ›´æ–°ã€‚åŽæ¥å†æ›´æ–°ä»£ç ï¼Œå‘äº†å‡ æ¬¡ï¼Œæ— æžœã€‚ ç¬¬äºŒæ­¥ï¼Œappæ£€æŸ¥é€»è¾‘æ˜¯å¦æ­£å¸¸ï¼Ÿappå¯åŠ¨æ—¶åšäº†æ£€æŸ¥æ—¥å¿—å¤„ç†ï¼š1234567891011121314// çƒ­æ›´-æ£€æŸ¥æ›´æ–° codePushCheckForUpdate = () =&gt; &#123; CodePush.checkForUpdate().then((update) =&gt; &#123; if (!update) &#123; console.log(&apos;å·²æ˜¯æœ€æ–°ç‰ˆæœ¬...&apos;); &#125; else &#123; console.log(&apos;æœ‰æ–°ç‰ˆæœ¬-------&apos;, update); const packageSize = parseFloat(update.packageSize / 1024 / 1024).toFixed(2); console.log(&apos;packageSize&apos;, packageSize); this.setState(&#123; totalSize: packageSize &#125;); this.showUpdateInfoAlert(update); &#125; &#125;); &#125; å®‰å“æ‰‹æœºå¯åŠ¨æŸ¥çœ‹logï¼Œç»“æžœç¡®å®žæ˜¯åŒ¹é…çš„ ç¬¬ä¸‰æ­¥ï¼Œå‘é€æŽ¨é€çš„çŽ¯å¢ƒå’Œå·²æœ‰appçš„åŽŸç”Ÿä»£ç æœ‰åŒºåˆ«å¯¼è‡´çš„ï¼ŸæŠŠæœ¬åœ°æ‰€æœ‰ä»£ç æš‚å­˜ï¼Œç›´æŽ¥å‘å¸ƒçƒ­æ›´ã€‚ ç»“æžœæ˜¯ä¸€æ ·çš„ã€‚ ç¬¬å››æ­¥ï¼ŒæŠŠä»£ç åˆ‡æ¢åˆ°æ‰“åŒ…æ—¶çš„commitï¼Œç„¶åŽå‘çƒ­æ›´ã€‚æ€€ç–‘æ˜¯å¦‚ä¸‹çš„è¿™ç§ä»£ç æœ‰åŒºåˆ«å¯¼è‡´çš„ã€‚ åˆ‡æ¢åˆ°å½“æ—¶æ‰“åŒ…çš„é‚£æ¬¡commitï¼Œé‡æ–°å‘çƒ­æ›´ã€‚ å¾ˆé—æ†¾ï¼Œç»“è®ºæ˜¯ä¸€æ ·çš„ã€‚ å‘Šè¯‰ç”²æ–¹ç²‘ç²‘ï¼Œç„¶åŽç”¨æœ€æ–°çš„ä»£ç æ‰“ä¸ªåŒ…ï¼Œè¿™å°±ç¡è§‰äº†ã€‚ çƒ­æ›´è®°å½•ç¡¬åˆ é™¤æµ‹è¯•åœ¨çƒ­æ›´æ•°æ®åº“å¼ºåˆ¶åˆ é™¤çƒ­æ›´è®°å½•1234567891011121314151617181920212223DELETE FROM codepush.deployments_historyWHERE id=192;DELETE FROM codepush.deployments_historyWHERE id=193;DELETE FROM codepush.deployments_historyWHERE id=194;DELETE FROM codepush.deployments_history WHERE id=195;DELETE FROM codepush.packages WHERE id=192;DELETE FROM codepush.packages WHERE id=193;DELETE FROM codepush.packages WHERE id=194;DELETE FROM codepush.packages WHERE id=195;DELETE FROM codepush.packages_metrics WHERE id=192;DELETE FROM codepush.packages_metrics WHERE id=193;DELETE FROM codepush.packages_metrics WHERE id=194;DELETE FROM codepush.packages_metrics WHERE id=195;DELETE FROM codepush.packages_diff WHERE id=450;DELETE FROM codepush.packages_diff WHERE id=451;DELETE FROM codepush.packages_diff WHERE id=452;DELETE FROM codepush.packages_diff WHERE id=453;DELETE FROM codepush.packages_diff WHERE id=454;DELETE FROM codepush.packages_diff WHERE id=455;DELETE FROM codepush.deployments_versions WHERE id=43; åˆ é™¤4æ¬¡1.5.1çš„code-pushåŽ é‡æ–°å‘èµ·çƒ­æ›´ å¾ˆé—æ†¾ä»ç„¶æ²¡æœ‰ç”Ÿæ•ˆã€‚æ­¤æ—¶æœ¬åœ°çš„debugçŽ¯å¢ƒä¸€ä¸ªappå¯åŠ¨åŽï¼Œå‘çŽ°å±…ç„¶æç¤ºæ›´æ–°ã€‚ é—®é¢˜æ¥äº†ï¼Œå¯èƒ½æ˜¯çƒ­æ›´å’Œæ£€æŸ¥çƒ­æ›´ä¸åœ¨ä¸€ä¸ªé¢‘é“ä¸Š æ£€æŸ¥å®‰å“çƒ­æ›´é…ç½®ï¼Œæžœç„¶éªŒè¯äº†è¿™ä¸€çŒœæµ‹ã€‚ 123456789101112buildTypes &#123; debug &#123; ext.alwaysUpdateBuildId = false // é¿å… crashLytics çš„alwaysUpdateBuildIdæ¯æ¬¡ç¼–è¯‘éƒ½é‡æ–°ç”Ÿæˆ åŠ å¿«ç¼–è¯‘é€Ÿåº¦ buildConfigField &quot;String&quot;, &quot;CODEPUSH_KEY&quot;, &apos;&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;&apos; // Staging &#125; release &#123; signingConfig signingConfigs.release minifyEnabled enableProguardInReleaseBuilds proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot; buildConfigField &quot;String&quot;, &quot;CODEPUSH_KEY&quot;, &apos;&quot;pppppppppppppppppppppppppppppp&quot;&apos; //Production &#125;&#125; ä¸€ä¸ªè§£é‡Šï¼šé…ç½®é‡Œåªæœ‰debugï¼ˆStagingï¼‰å’Œreleaseï¼ˆProductionï¼‰çš„é…ç½®,é…ç½®äº†ä¸åŒçš„deployment keyï¼Œä½†å› ä¸ºæ‰“æµ‹è¯•çŽ¯å¢ƒçš„appæ—¶ï¼Œé€‰æ‹©çš„æ˜¯releaseï¼Œæ‰€ä»¥ï¼ŒæŒ‰ç…§è¿™ä¸ªé…ç½®ï¼Œåªæœ‰å‘åœ¨Productionçš„ä¸Šçš„çƒ­æ›´ï¼Œappå¯åŠ¨æ—¶æ‰èƒ½æ£€æŸ¥åˆ°ï¼Œè€ŒçŽ°åœ¨ä¸€ç›´åœ¨ç”¨Stagingå‘ã€‚ ä¿®æ”¹é…ç½®1234567891011121314151617buildTypes &#123; debug &#123; ext.alwaysUpdateBuildId = false // é¿å… crashLytics çš„alwaysUpdateBuildIdæ¯æ¬¡ç¼–è¯‘éƒ½é‡æ–°ç”Ÿæˆ åŠ å¿«ç¼–è¯‘é€Ÿåº¦ buildConfigField &quot;String&quot;, &quot;CODEPUSH_KEY&quot;, &apos;&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;&apos; // Staging &#125; beta &#123; signingConfig signingConfigs.release minifyEnabled enableProguardInReleaseBuilds buildConfigField &quot;String&quot;, &quot;CODEPUSH_KEY&quot;, &apos;&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;&apos; //Staging &#125; release &#123; signingConfig signingConfigs.release minifyEnabled enableProguardInReleaseBuilds proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot; buildConfigField &quot;String&quot;, &quot;CODEPUSH_KEY&quot;, &apos;&quot;pppppppppppppppppppppppppppppp&quot;&apos; //Production &#125;&#125; syncæ—¶æŠ¥é”™ï¼Œæ‰€æœ‰çš„åº“éƒ½æ‰¾ä¸åˆ°ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š å‚è€ƒæœ¬æ–‡æç¤ºï¼Œå‘çŽ°é…ç½®å°‘äº†ä¸€é¡¹matchingFallbacks = [&#39;release&#39;, &#39;debug&#39;]ï¼Œæ·»åŠ åˆ°betaé…ç½®åŽï¼ŒbuildæˆåŠŸã€‚123456beta &#123; signingConfig signingConfigs.release minifyEnabled enableProguardInReleaseBuilds buildConfigField &quot;String&quot;, &quot;CODEPUSH_KEY&quot;, &apos;&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;&apos; //Staging matchingFallbacks = [&apos;release&apos;, &apos;debug&apos;]&#125; buildåŽï¼Œé‡æ–°æ‰“åŒ…ï¼Œé€‰æ‹©betaåŒ…ï¼Œ é¦–é¡µèœå•æ”¹æˆã€ä¸“å±žåº”ç”¨ã€‘ï¼Œå‘çƒ­æ›´ï¼Œè€Œä¸”å¼ºæ›´ã€‚ appå¯åŠ¨æµ‹è¯•ï¼š æ£€æŸ¥åº”ç”¨æ›´æ–°æ•°ï¼Œæžœç„¶æœ‰æ›´æ–°ï¼ˆæ­¤å¤„æˆ‘æˆªå›¾æ—¶å·²ç»æˆåŠŸäº†ä¸¤æ¬¡ï¼‰ successï¼ï¼ï¼ å‰ç«¯è·¯æ¼«æ¼«ï¼Œä¸”é‡‡å‘ä¸”è®°å½•~~~~ ç›¸å…³æ–‡æ¡£ Unable to resolve dependency Android Studio 3.0 å‡çº§AndroidStudio3.0 Unable to resolve dependency for â€˜:app@betaUnitTest/compileClasspathâ€™: Could not resolve project code-pushçƒ­æ›´æ–°é…ç½®ï¼ˆå‘½ä»¤æ•´ç†ï¼‰]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>react-native</tag>
        <tag>android</tag>
        <tag>code-push</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows10 ä¸Šæµ…å°vue jså¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ä¹‹ä¸‰]]></title>
    <url>%2F2018%2F10%2F31%2Fwindows-vuejs-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03%2F</url>
    <content type="text"><![CDATA[vuejså­¦ä¹ ç¬”è®°â€”-çˆ¶å­ç»„ä»¶ä¼ å€¼ã€åŠ¨æ€ç»„ä»¶ã€è‡ªå®šä¹‰ç»„ä»¶ã€vue-routerã€vue-linkã€stateç®€ä¹¦åœ°å€ æœ¬èŠ‚å¼€å§‹å®žæˆ˜é¡¹ç›®ã€‚å¸ƒå±€layout.vueé¦–é¡µindex.vueå¼•å…¥vue-resourceå¼•å…¥json-serverconfig/index.js ä¸­proxyTableä½¿ç”¨ é¦–é¡µå¹»ç¯ç‰‡åˆ¶ä½œ,æœ¬æ¬¡è‡ªå·±å®žçŽ°0ã€çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶ï¼Œä¼ å€¼1ã€å­ç»„ä»¶æŽ¥æ”¶å‚æ•°ï¼Œç»´æŠ¤å½“å‰indexï¼Œåˆ†é¡µåˆ‡æ¢å®žçŽ°2ã€å‰ä¸€é¡µï¼ŒåŽä¸€é¡µæŒ‰é’®å®žçŽ°3ã€è‡ªåŠ¨æ’­æ”¾å®žçŽ°4ã€åˆ‡å…¥åŠ¨ç”»æ•ˆæžœå®žçŽ°â€”transition5ã€å­ç»„ä»¶é€šè¿‡äº‹ä»¶è§¦å‘çˆ¶ç»„ä»¶å†æ¬¡å­¦ä¹ æŸ¥æ‰¾vue jsçš„ç»„ä»¶åº“çš„æŽ¨è https://github.com/vuejs/awesome-vue å¼¹çª—ç»„ä»¶åŠå…³é—­ ç™»å½•æ³¨å†Œè¡¨å•éªŒè¯å’Œæäº¤ å¤Ÿä¹°è¯¦æƒ…é¡µè·¯ç”± å…¶ä»– è§†é¢‘å…±äº«ï¼šé“¾æŽ¥: https://pan.baidu.com/s/18TFC0-VSCIWFo977p4YcTQæå–ç : rjcp æºä»£ç å…±äº«ï¼šhttps://gitee.com/marvinma/vue2-pc]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ·å°”åˆ›å®¢æ±‡ç¬”è®°----å®‰å“ç”Ÿäº§çŽ¯å¢ƒæ‰“åŒ…é…ç½®]]></title>
    <url>%2F2018%2F10%2F25%2F%E6%B5%B7%E5%B0%94%E5%88%9B%E5%AE%A2%E6%B1%87%E7%AC%94%E8%AE%B0----%E5%AE%89%E5%8D%93%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[åˆ›å®¢æ±‡é¡¹ç›®æ‰“åŒ…ç”Ÿäº§çŽ¯å¢ƒçš„appéœ€è¦ä¿®æ”¹çš„é…ç½®ç®€ä¹¦åœ°å€ æ‰“åŒ…ä¿®æ”¹é…ç½®1ã€headerå±…ä¸­ çœ‹è¿™ä¸ªhttps://blog.csdn.net/hunannanhu/article/details/79285736 æ³¨é‡ŠæŽ‰å…³äºŽå®‰å“çš„ç‰¹æ®Šå¤„ç†ï¼š 2ã€ä¿®æ”¹ç½‘ç»œè¯·æ±‚apiåœ°å€ï¼Œå…¨éƒ¨æ¢æˆæ­£å¼ \Portal\js\network\constants.js 3ã€ä¿®æ”¹IMçŽ¯å¢ƒåˆ‡æ¢æˆæ­£å¼çš„ \Portal\js\network\constants.js 4ã€è¦†ç›–documentpicker è¿™ä¸ªæ–‡ä»¶ï¼Œ è·¯å¾„Portal\node_modules\react-native-document-picker\android\src\main\java\com\reactnativedocumentpicker\DocumentPicker.java æ–°æ–‡ä»¶å†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382package com.reactnativedocumentpicker;import android.app.Activity;import android.content.ContentResolver;import android.content.ContentUris;import android.content.Context;import android.content.Intent;import android.database.Cursor;import android.net.Uri;import android.os.Build;import android.os.Bundle;import android.os.Environment;import android.provider.DocumentsContract;import android.provider.MediaStore;import android.provider.OpenableColumns;import android.util.Log;import android.webkit.MimeTypeMap;import com.facebook.react.bridge.ActivityEventListener;import com.facebook.react.bridge.Arguments;import com.facebook.react.bridge.Callback;import com.facebook.react.bridge.ReactApplicationContext;import com.facebook.react.bridge.ReactContextBaseJavaModule;import com.facebook.react.bridge.ReactMethod;import com.facebook.react.bridge.ReadableArray;import com.facebook.react.bridge.ReadableMap;import com.facebook.react.bridge.WritableMap;import java.io.File;import java.io.FileOutputStream;import java.io.IOException;import java.net.URL;import java.nio.channels.Channels;import java.nio.channels.ReadableByteChannel;/** * @see &lt;a href=&quot;https://developer.android.com/guide/topics/providers/document-provider.html&quot;&gt;android documentation&lt;/a&gt; * marvin.ma use for production */public class DocumentPicker extends ReactContextBaseJavaModule implements ActivityEventListener &#123; private static final String NAME = &quot;RNDocumentPicker&quot;; private static final int READ_REQUEST_CODE = 41; private Context mContex; private static class Fields &#123; private static final String FILE_SIZE = &quot;fileSize&quot;; private static final String FILE_NAME = &quot;fileName&quot;; private static final String TYPE = &quot;type&quot;; &#125; private Callback callback; public DocumentPicker(ReactApplicationContext reactContext) &#123; super(reactContext); this.mContex = reactContext; reactContext.addActivityEventListener(this); &#125; @Override public String getName() &#123; return NAME; &#125; @ReactMethod public void show(ReadableMap args, Callback callback) &#123; Intent intent; if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.KITKAT) &#123; intent = new Intent(Intent.ACTION_OPEN_DOCUMENT); &#125; else &#123; intent = new Intent(Intent.ACTION_PICK); &#125; intent.addCategory(Intent.CATEGORY_OPENABLE); if (!args.isNull(&quot;filetype&quot;)) &#123; ReadableArray filetypes = args.getArray(&quot;filetype&quot;); if (filetypes.size() &gt; 0) &#123; intent.setType(filetypes.getString(0)); &#125; &#125; this.callback = callback; getReactApplicationContext().startActivityForResult(intent, READ_REQUEST_CODE, Bundle.EMPTY); &#125; // removed @Override temporarily just to get it working on RN0.33 and RN0.32 - will remove public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) &#123; onActivityResult(requestCode, resultCode, data); &#125; // removed @Override temporarily just to get it working on RN0.33 and RN0.32 public void onActivityResult(int requestCode, int resultCode, Intent data) &#123; if (requestCode != READ_REQUEST_CODE) return; if (resultCode != Activity.RESULT_OK) &#123; callback.invoke(&quot;Bad result code: &quot; + resultCode, null); return; &#125; if (data == null) &#123; callback.invoke(&quot;No data&quot;, null); return; &#125; try &#123; Uri uri = data.getData(); callback.invoke(null, toMapWithMetadata(uri)); &#125; catch (Exception e) &#123; Log.e(NAME, &quot;Failed to read&quot;, e); callback.invoke(e.getMessage(), null); &#125; &#125; private WritableMap toMapWithMetadata(Uri uri) &#123; WritableMap map; if(uri.toString().startsWith(&quot;/&quot;)) &#123; map = metaDataFromFile(new File(uri.toString())); &#125; else if (uri.toString().startsWith(&quot;http&quot;)) &#123; map = metaDataFromUri(uri); &#125; else &#123; map = metaDataFromContentResolver(uri); &#125; map.putString(&quot;uri&quot;, uri.toString()); if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT)&#123; map.putString(&quot;filePath&quot;, getPath(mContex, uri)); &#125;else &#123; map.putString(&quot;filePath&quot;, uri2Path(mContex, uri)); &#125; return map; &#125; private WritableMap metaDataFromUri(Uri uri) &#123; WritableMap map = Arguments.createMap(); File outputDir = getReactApplicationContext().getCacheDir(); try &#123; File downloaded = download(uri, outputDir); map.putInt(Fields.FILE_SIZE, (int) downloaded.length()); map.putString(Fields.FILE_NAME, downloaded.getName()); map.putString(Fields.TYPE, mimeTypeFromName(uri.toString())); &#125; catch (IOException e) &#123; Log.e(&quot;DocumentPicker&quot;, &quot;Failed to download file&quot;, e); &#125; return map; &#125; private WritableMap metaDataFromFile(File file) &#123; WritableMap map = Arguments.createMap(); if(!file.exists()) return map; map.putInt(Fields.FILE_SIZE, (int) file.length()); map.putString(Fields.FILE_NAME, file.getName()); map.putString(Fields.TYPE, mimeTypeFromName(file.getAbsolutePath())); return map; &#125; private WritableMap metaDataFromContentResolver(Uri uri) &#123; WritableMap map = Arguments.createMap(); ContentResolver contentResolver = getReactApplicationContext().getContentResolver(); map.putString(Fields.TYPE, contentResolver.getType(uri)); Cursor cursor = contentResolver.query(uri, null, null, null, null, null); try &#123; if (cursor != null &amp;&amp; cursor.moveToFirst()) &#123; map.putString(Fields.FILE_NAME, cursor.getString(cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME))); int sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE); if (!cursor.isNull(sizeIndex)) &#123; String size = cursor.getString(sizeIndex); if (size != null) map.putInt(Fields.FILE_SIZE, Integer.valueOf(size)); &#125; &#125; &#125; finally &#123; if (cursor != null) &#123; cursor.close(); &#125; &#125; return map; &#125; private static File download(Uri uri, File outputDir) throws IOException &#123; File file = File.createTempFile(&quot;prefix&quot;, &quot;extension&quot;, outputDir); URL url = new URL(uri.toString()); ReadableByteChannel channel = Channels.newChannel(url.openStream()); try&#123; FileOutputStream stream = new FileOutputStream(file); try &#123; stream.getChannel().transferFrom(channel, 0, Long.MAX_VALUE); return file; &#125; finally &#123; stream.close(); &#125; &#125; finally &#123; channel.close(); &#125; &#125; private static String mimeTypeFromName(String absolutePath) &#123; String extension = MimeTypeMap.getFileExtensionFromUrl(absolutePath); if (extension != null) &#123; return MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension); &#125; else &#123; return null; &#125; &#125; // Required for RN 0.30+ modules than implement ActivityEventListener public void onNewIntent(Intent intent) &#123; &#125; /** * ä¸“ä¸ºAndroid4.4ä»¥ä¸Šè®¾è®¡çš„ä»ŽUrièŽ·å–æ–‡ä»¶è·¯å¾„ */ public static String getPath(final Context context, final Uri uri) &#123; final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT; // DocumentProvider if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) &#123; // ExternalStorageProvider if (isExternalStorageDocument(uri)) &#123;// LogUtils.logInfoStar(&quot;isExternalStorageDocument&quot;); final String docId = DocumentsContract.getDocumentId(uri); final String[] split = docId.split(&quot;:&quot;); final String type = split[0]; if (&quot;primary&quot;.equalsIgnoreCase(type)) &#123; return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1]; &#125; // TODO handle non-primary volumes &#125; // DownloadsProvider else if (isDownloadsDocument(uri)) &#123;// LogUtils.logInfoStar(&quot;isDownloadsDocument&quot;); final String id = DocumentsContract.getDocumentId(uri); final Uri contentUri = ContentUris.withAppendedId( Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id)); return getDataColumn(context, contentUri, null, null); &#125; // MediaProvider else if (isMediaDocument(uri)) &#123;// LogUtils.logInfoStar(&quot;isMediaDocument&quot;); final String docId = DocumentsContract.getDocumentId(uri); final String[] split = docId.split(&quot;:&quot;); final String type = split[0]; Uri contentUri = null; if (&quot;image&quot;.equals(type)) &#123; contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI; &#125; else if (&quot;video&quot;.equals(type)) &#123; contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI; &#125; else if (&quot;audio&quot;.equals(type)) &#123; contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI; &#125; final String selection = &quot;_id=?&quot;; final String[] selectionArgs = new String[]&#123;split[1]&#125;; return getDataColumn(context, contentUri, selection, selectionArgs); &#125; &#125; // MediaStore (and general) else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) &#123; return getDataColumn(context, uri, null, null); &#125; // File else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) &#123; return uri.getPath(); &#125; return null; &#125; /** * Get the value of the data column for this Uri. This is useful for * MediaStore Uris, and other file-based ContentProviders. * * @param context The context. * @param uri The Uri to query. * @param selection (Optional) Filter used in the query. * @param selectionArgs (Optional) Selection arguments used in the query. * @return The value of the _data column, which is typically a file path. */ public static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) &#123; Cursor cursor = null; final String column = &quot;_data&quot;; final String[] projection = &#123;column&#125;; try &#123; cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, null); if (cursor != null &amp;&amp; cursor.moveToFirst()) &#123; final int column_index = cursor.getColumnIndexOrThrow(column); return cursor.getString(column_index); &#125; &#125; finally &#123; if (cursor != null) cursor.close(); &#125; return null; &#125; /** * @param uri The Uri to check. * @return Whether the Uri authority is ExternalStorageProvider. */ public static boolean isExternalStorageDocument(Uri uri) &#123; return &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthority()); &#125; /** * @param uri The Uri to check. * @return Whether the Uri authority is DownloadsProvider. */ public static boolean isDownloadsDocument(Uri uri) &#123; return &quot;com.android.providers.downloads.documents&quot;.equals(uri.getAuthority()); &#125; /** * @param uri The Uri to check. * @return Whether the Uri authority is MediaProvider. */ public static boolean isMediaDocument(Uri uri) &#123; return &quot;com.android.providers.media.documents&quot;.equals(uri.getAuthority()); &#125; /** * Try to return the absolute file path from the given Uri * * @param context * @param uri * @return the file path or null */ public static String uri2Path(final Context context, final Uri uri) &#123; if (null == uri) return null; final String scheme = uri.getScheme(); String data = null; if (scheme == null) data = uri.getPath(); else if (ContentResolver.SCHEME_FILE.equals(scheme)) &#123; data = uri.getPath(); &#125; else if (ContentResolver.SCHEME_CONTENT.equals(scheme)) &#123; Cursor cursor = context.getContentResolver().query(uri, new String[]&#123;MediaStore.Images.ImageColumns.DATA&#125;, null, null, null); if (null != cursor) &#123; if (cursor.moveToFirst()) &#123; int index = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); if (index == -1) &#123; index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA); &#125; if (index &gt; -1) &#123; data = cursor.getString(index); &#125; &#125; cursor.close(); &#125; &#125; return data; &#125;&#125; 5ã€ä½¿ç”¨å‘½ä»¤unzip -l wuliuxj20181010.zipæ£€æŸ¥ç‰©æµç­‰js bundleæ–‡ä»¶å†…å®¹æ˜¯å¦æ­£ç¡®ï¼Œéœ€è¦æœ‰å­æ–‡ä»¶å¤¹ã€‚ 6ã€æ›¿æ¢å›¾æ ‡ï¼š \Portal\android\app\src\main\AndroidManifest.xml 7ã€æ”¾å¼€çƒ­æ›´ Portal\index.jsï¼Œç¡®ä¿è¿™è¡Œä»£ç æ²¡è¢«æ³¨é‡ŠæŽ‰ 8ã€ä¿®æ”¹BTCé€šçŸ¥ã€è¯·ç¤ºæŠ¥å‘Šå•ç­‰HTMLçš„ä½ç½®ä¸ºæ­£å¼çš„ã€‚ 9ã€æ‰“åŒ… keystore åœ¨è¿™ä¸ªè·¯å¾„ä¸‹ **è¿™æ˜¯å¯†ç  æ–°ç‰ˆå‘å‡ºå‰å†…æµ‹æ£€æŸ¥äº‹é¡¹1ã€æ‰€æœ‰åœ°å€æ˜¯ä¸æ˜¯ç”Ÿäº§çš„ 1.1ã€ ç™»å½• 1.2ã€æ°´ç«™ 1.3ã€IMç³»ç»Ÿ 1.4ã€ä¼šè®®å®¤é¢„è®¢ 1.5ã€BTB/BTC 2ã€å¸¸ç”¨åŠŸèƒ½æ­£å¸¸ 2.1ã€å¯åŠ¨ 2.2ã€ç™»å½• 2.3ã€æ—¥ç¨‹ï¼Œåˆ—è¡¨ï¼Œåˆ›å»ºä¼šè®®/ä»»åŠ¡ï¼Œèƒ½æ·»åŠ é™„ä»¶ 2.4ã€ç›´æ’­ 2.5ã€BTC/BTB/å·¡æ£€èƒ½æ‰“å¼€ï¼Œé¦–æ¬¡åŠ è½½æœ‰è¿›åº¦æ¡ï¼Œèƒ½ä¸‹è½½ 2.6ã€æˆ‘çš„å›¢é˜Ÿï¼Œåˆ—è¡¨æ­£å¸¸ï¼Œèƒ½åˆ›å»ºå›¢é˜Ÿ 2.7ã€IMç™»å½•æ­£å¸¸ï¼Œèƒ½èŠå¤©ï¼Œè§†é¢‘ï¼Œç™½ç‰ˆååŒ 2.8ã€å¯ä»¥æ£€æŸ¥æ›´æ–°]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>react-native</tag>
        <tag>android</tag>
        <tag>package</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux å®‰è£…mavenç§æœ]]></title>
    <url>%2F2018%2F09%2F02%2FLinux%20%E5%AE%89%E8%A3%85maven%E7%A7%81%E6%9C%8D%2F</url>
    <content type="text"><![CDATA[å¼€å‘çŽ¯å¢ƒæ­å»ºâ€”å®‰è£…mavenç§æœç®€ä¹¦åœ°å€ 1ã€ä¸‹è½½é€šè¿‡æ­¤åœ°å€ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬ å®‰è£…ä¸‹è½½å¥½nexus3.9æœ€æ–°ç‰ˆåŽè§£åŽ‹ï¼Œcopyåˆ°/usr/local/nexus/ç›®å½•ä¸‹ç„¶åŽä¿®æ”¹ç«¯å£ç­‰é…ç½®ã€‚ 2ã€ä¿®æ”¹é…ç½®2.1ã€å¯åŠ¨ã€‚ä»¥3.6.0ä¸ºä¾‹12[root@MiWiFi-R3-srv ~]# cd /usr/local/nexus-3.6.0-02/bin/[root@MiWiFi-R3-srv ~]# ./nexus run &amp; ç¨ç­‰ä¸€ä¼š(é¦–æ¬¡å¯åŠ¨ä¼šæ¯”è¾ƒæ…¢),å½“å‡ºçŽ°ä»¥ä¸‹æ—¥å¿—çš„æ—¶å€™è¡¨ç¤ºå¯åŠ¨æˆåŠŸ! Started Sonatype Nexus OSS 3.6.0-02 2.2ã€å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£12[root@MiWiFi-R3-srv bin]# firewall-cmd --zone=public --add-port=8081/tcp --permanent[root@MiWiFi-R3-srv bin]# firewall-cmd --reload nexus3é»˜è®¤ç«¯å£æ˜¯:8081nexus3é»˜è®¤è´¦å·æ˜¯:adminnexus3é»˜è®¤å¯†ç æ˜¯:admin123 2.3ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨(systemctlæ–¹å¼)åˆ›å»ºä¸€ä¸ªæœåŠ¡1[root@MiWiFi-R3-srv ~]# vim /usr/lib/systemd/system/nexus.service å¡«å…¥ç›¸å…³å†…å®¹12345678910111213[Unit]Description=nexus service[Service]Type=forkingLimitNOFILE=65536 #è­¦å‘Šå¤„ç†ExecStart=/usr/local/nexus/nexus-3.7.1-02/bin/nexus startExecReload=/usr/local/nexus/nexus-3.7.1-02/bin/nexus restartExecStop=/usr/local/nexus/nexus-3.7.1-02/bin/nexus stopRestart=on-failure[Install]WantedBy=multi-user.target å°†æœåŠ¡åŠ å…¥å¼€æœºå¯åŠ¨1[root@MiWiFi-R3-srv ~]# systemctl enable nexus.service é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶1[root@MiWiFi-R3-srv ~]# systemctl daemon-reload 2.4ã€ä¿®æ”¹nexus3çš„è¿è¡Œç”¨æˆ·ä¸ºroot123[root@MiWiFi-R3-srv bin]# vim nexus.rcrun_as_user=&quot;root&quot; 2.5ã€ä¿®æ”¹nexus3å¯åŠ¨æ—¶è¦ä½¿ç”¨çš„jdkç‰ˆæœ¬1[root@MiWiFi-R3-srv bin]# vim nexus ç¬¬14è¡Œ:1INSTALL4J_JAVA_HOME_OVERRIDE=/usr/local/java/jdk1.8.0_144 2.6ã€ä¿®æ”¹nexus3é»˜è®¤ç«¯å£(å¯é€‰) 12[root@MiWiFi-R3-srv etc]# cd /usr/local/nexus-3.6.0-02/etc/[root@MiWiFi-R3-srv etc]# vim nexus-default.properties é»˜è®¤ç«¯å£:80811application-port=8081 2.7ã€ä¿®æ”¹nexus3æ•°æ®ä»¥åŠç›¸å…³æ—¥å¿—çš„å­˜å‚¨ä½ç½®(å¯é€‰)ï¼š123456[root@MiWiFi-R3-srv bin]# cd /usr/local/nexus-3.6.0-02/bin/[root@MiWiFi-R3-srv bin]# vim nexus.vmoptions -XX:LogFile=./sonatype-work/nexus3/log/jvm.log-Dkaraf.data=./sonatype-work/nexus3-Djava.io.tmpdir=./sonatype-work/nexus3/tmp 3ã€ä¸Šä¼ å¤–éƒ¨jaræ–‡ä»¶3.1ã€åˆ›å»ºä»“åº“ 3.2ã€ä¸Šä¼ jar 3.3ã€æœ€æœ€æœ€é‡è¦çš„ä¸€æ­¥ï¼šå°†æ–°åˆ›å»ºçš„3rdPartyåŠ å…¥åˆ°publicå¯¹å¤–å…¬å¸ƒçš„groupä¸‹ 4ã€é…ç½®æœ¬åœ°mavençš„pomæ–‡ä»¶4.1ã€å…¨å±€ä¿®æ”¹mavené…ç½®æ–‡ä»¶çš„setting.xmlé…ç½®æ–‡ä»¶12345678910111213141516171819202122232425262728293031&lt;profiles&gt;&lt;profile&gt;&lt;id&gt;dev&lt;/id&gt;&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;central&lt;/id&gt; &lt;url&gt;http://jenkins.haier.haiqiang.xin:8887/repository/maven-public/&lt;/url&gt; &lt;name&gt;Yuandian Maven Repo&lt;/name&gt; &lt;/repository&gt; &lt;repository&gt; &lt;id&gt;mvn-repo&lt;/id&gt; &lt;url&gt;http://jenkins.haier.haiqiang.xin:8887/repository/maven-public/&lt;/url&gt; &lt;/repository&gt;&lt;/repositories&gt;&lt;pluginRepositories&gt; &lt;pluginRepository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;nexus&lt;/name&gt; &lt;url&gt;http://jenkins.haier.haiqiang.xin:8887/repository/maven-public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt;&lt;/profile&gt; &lt;/profiles&gt; 4.2ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç§æœï¼Œä¿®æ”¹mavençš„pomæ–‡ä»¶ï¼ŒåŠ å…¥repositoryçš„é…ç½®123456789101112131415161718192021&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Team Nexus Repository&lt;/name&gt; &lt;url&gt;http://27.223.70.82:8887/repository/maven-public/&lt;/url&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt;&lt;/repositories&gt;&lt;pluginRepositories&gt; &lt;pluginRepository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Team Nexus Repository&lt;/name&gt; &lt;url&gt;http://27.223.70.82:8887/repository/maven-public/&lt;/url&gt; &lt;/pluginRepository&gt;&lt;/pluginRepositories&gt; ç»“æŸã€‚ å‚è€ƒhttps://blog.csdn.net/yougoule/article/details/56843562]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows10 ä¸Šæµ…å°vue jså¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ä¹‹ä¸€]]></title>
    <url>%2F2018%2F09%2F02%2Fwindows-vuejs-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01%2F</url>
    <content type="text"><![CDATA[vuejså­¦ä¹ ç¬”è®°â€”-vueå®‰è£…ã€æ•°æ®åˆå§‹åŒ–ã€æ•°æ®mockç®€ä¹¦åœ°å€ è¯´å®žè¯ï¼Œåœ¨windowsé…ç½®å‰ç«¯ä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯ç¡®å®žæ¯”ç”¨macéº»çƒ¦å¤šäº†ï¼ˆè¯´çš„å¥½åƒæˆ‘æ˜¯macè€æ‰‹ä¼¼çš„ï¼Œå…¶å®žåªæ˜¯æœ‰å‡ ä¸ªæœˆçš„ä½¿ç”¨ç»éªŒè€Œå·²ï¼‰ï¼Œæ›¾è®°å¾—ï¼Œå½“å¹´æžreact-nativeçŽ¯å¢ƒå°±æ˜¯è¿™æ ·ï¼ŒæžpythonçŽ¯å¢ƒä¹Ÿæ˜¯ä¸€æ ·ï¼Œå†åˆ°å¦‚ä»Šæƒ³æžvueï¼Œè¿˜æ˜¯è¿™æ ·ã€‚ ä¸è¿‡ä¹Ÿä¸æ˜¯ä¸å¯èƒ½ï¼Œåªè¦ä½ æ„¿æ„æŠ˜è…¾ï¼Œä¸æ”¾å¼ƒï¼ˆå…¶å®žæ˜¯ä¹°ä¸èµ·macï¼‰ã€‚ å®‰è£…çŽ¯å¢ƒ1ã€å®‰è£…nodeï¼Œåˆ°ä»Šå¤©ï¼ˆ2018-09-10æ•™å¸ˆèŠ‚ï¼‰ï¼Œnodeæœ€æ–°ç‰ˆæ˜¯10.8äº†ï¼Œä½†æ˜¯å› ä¸ºå‡ ä¸ªæœˆå‰æžè¿‡vueï¼Œå®‰è£…çš„nodeæ˜¯8.6.0ï¼Œä»Šå¤©å‡çº§ä»¥åŽåè€Œè¿žvue initéƒ½ä¸èƒ½ç”¨äº†ï¼Œæ‰€ä»¥ä¸å¾—å·²å›žé€€åˆ°8.6.0ï¼Œæ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨ç¨³å®šç‰ˆæ¯”è¾ƒç¨³å¦¥ã€‚ç›´æŽ¥åˆ°å®˜ç½‘ä¸‹è½½siæ–‡ä»¶ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å‚»ç“œå¼å®‰è£…å³å¯ã€‚ 2ã€å®‰è£…webpack1$ npm install -g webpack 3ã€å®‰è£…vue-cli1$ npm install -g vue-cli 4ã€åˆå§‹åŒ–é¡¹ç›®1$ vue init webpack demo 5ã€è¿è¡Œé¡¹ç›®12$ npm install$ npm run dev é»˜è®¤è®¿é—®ç«¯å£æ˜¯8080ï¼Œè®¿é—®å³å¯ ä½¿ç”¨json-serveræ¨¡æ‹ŸREST APIå› ä¸ºæ˜¯å­¦ä¹ ï¼Œè€è€å®žå®žå†™åŽç«¯æŽ¥å£ï¼Œå†ç»™å‰ç«¯è°ƒç”¨ï¼Œç¡®å®žæœ‰äº›å¤´é‡è„šè½»ï¼Œæˆ‘é€‰æ‹©äº†json-serverç”¨æ¥mockæ•°æ®ã€‚ å®‰è£…æœåŠ¡ 1$ npm install json-server -g åˆ›å»ºæ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º/mockæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨mockç›®å½•ä¸‹æ–°å»ºdb.jsonæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788&#123; &quot;list&quot;: [ &#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;å¼ ä¸‰&quot;, &quot;tel&quot;: &quot;15223810923&quot; &#125;, &#123; &quot;id&quot;: 2, &quot;name&quot;: &quot;æŽå››&quot;, &quot;tel&quot;: &quot;15223810923&quot; &#125;, &#123; &quot;id&quot;: 3, &quot;name&quot;: &quot;çŽ‹äºŒ&quot;, &quot;tel&quot;: &quot;15223810923&quot; &#125;, &#123; &quot;id&quot;: 4, &quot;name&quot;: &quot;é™ˆäº”&quot;, &quot;tel&quot;: &quot;15223810923&quot; &#125;, &#123; &quot;name&quot;: &quot;èµµå…­&quot;, &quot;tel&quot;: &quot;123454323&quot;, &quot;id&quot;: 5 &#125;, &#123; &quot;name&quot;: &quot;èµµå…­&quot;, &quot;tel&quot;: &quot;123454323&quot;, &quot;id&quot;: 6 &#125;, &#123; &quot;name&quot;: &quot;èµµå…­&quot;, &quot;tel&quot;: &quot;123454323&quot;, &quot;id&quot;: 7 &#125; ], &quot;users&quot;: [ &#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;é™ˆäº”&quot;, &quot;sex&quot;:&quot;male&quot;, &quot;tel&quot;: &quot;12345678&quot;, &quot;auther&quot;:&#123; &quot;name&quot;:&quot;é™ˆäº”&quot;, &quot;age&quot;:&quot;25&quot; &#125; &#125;, &#123; &quot;id&quot;: 2, &quot;name&quot;: &quot;çŽ‹äºŒ&quot;, &quot;sex&quot;:&quot;male&quot;, &quot;tel&quot;: &quot;15223810923&quot;, &quot;auther&quot;:&#123; &quot;name&quot;:&quot;çŽ‹äºŒ&quot;, &quot;age&quot;:&quot;22&quot; &#125; &#125; ], &quot;user&quot;: &#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;é™ˆäº”&quot;, &quot;tel&quot;: &quot;15223810923&quot; &#125; , &quot;posts&quot;: [ &#123; &quot;id&quot;: 1, &quot;title&quot;: &quot;json-server&quot;, &quot;author&quot;: &quot;typicode&quot; &#125; ], &quot;comments&quot;: [ &#123; &quot;id&quot;: 1, &quot;body&quot;: &quot;some comment&quot;, &quot;postId&quot;: 1 &#125; ], &quot;profile&quot;: &#123; &quot;name&quot;: &quot;typicode&quot; &#125;, &quot;goods&quot;: &#123; &quot;data&quot; :[ &#123; &quot;price&quot;: &quot;69.9&quot;, &quot;title&quot;: &quot;å¾·èŠ™&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t3688/270/776223567/128582/fa074fb3/58170f6dN6b9a12bf.jpg!q50.jpg.webp&quot; &#125;, &#123; &quot;price&quot;: &quot;63&quot;, &quot;title&quot;: &quot;è´¹åˆ—ç½—&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t613/100/1264998035/221234/1a29d51f/54c34525Nb4f6581c.jpg!q50.jpg.webp&quot;&#125;, &#123; &quot;price&quot;: &quot;29.9&quot;, &quot;title&quot;: &quot;å¤§ç±³&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t1258/40/17387560/108696/aced445f/54e011deN3ae867ae.jpg!q50.jpg.webp&quot;&#125;, &#123; &quot;price&quot;: &quot;54.9&quot;, &quot;title&quot;: &quot;å®‰æ…•å¸Œ&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t2734/15/680373407/215934/3abaa748/572057daNc09b5da7.jpg!q50.jpg.webp&quot;&#125;, &#123; &quot;price&quot;: &quot;58&quot;, &quot;title&quot;: &quot;é‡‘å…¸&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t2482/145/1424008556/91991/d62f5454/569f47a2N3f763060.jpg!q50.jpg.webp&quot;&#125;, &#123; &quot;price&quot;: &quot;60&quot;, &quot;title&quot;: &quot;å‘³å¯æ»‹&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t2368/3/874563950/70786/7b5e8edd/563074c8N4d535db4.jpg!q50.jpg.webp&quot; &#125;, &#123; &quot;price&quot;: &quot;248.00&quot;, &quot;title&quot;: &quot;æ³¸å·žè€çª–&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t283/166/1424018055/189580/7c0792b7/543b4958N05fa2feb.jpg!q50.jpg.webp&quot;&#125;, &#123; &quot;price&quot;: &quot;328.8&quot;, &quot;title&quot;: &quot;å‰‘å—æ˜¥&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s350x350_g15/M05/1A/0A/rBEhWlNeLAwIAAAAAAHyok3PZY0AAMl8gO8My0AAfK6307.jpg!q50.jpg.webp&quot;&#125;, &#123; &quot;price&quot;: &quot;49.00&quot;, &quot;title&quot;: &quot;è“èŽ“&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/babel/s211x211_jfs/t2332/148/2952098628/94387/e64654e2/56f8d76aNb088c2ab.jpg!q50.jpg.webp&quot; &#125;, &#123; &quot;price&quot;: &quot;68&quot;, &quot;title&quot;: &quot;èŠ’æžœ&quot;, &quot;img&quot;: &quot;http://m.360buyimg.com/n0/jfs/t3709/334/1378702984/206759/5c100ab5/58253588Naaa05c5c.jpg!q70.jpg&quot;&#125; ] &#125; &#125; è¿è¡Œjson-server 1json-server db.json -p 8080 æŒ‡å®šrest apiåœ¨8080ç«¯å£ä¸Šè¿è¡Œï¼Œä½¿ç”¨http://127.0.0.1:8080/goods/æŸ¥çœ‹ã€‚ å¿«æ·å¯åŠ¨ä¸ºäº†æ–¹ä¾¿ï¼Œå†åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå†™å…¥12345&#123; &quot;scripts&quot;: &#123; &quot;mock&quot;: &quot;json-server db.json --port 3003&quot; &#125;&#125; ç„¶åŽä½¿ç”¨åˆ° /mock ç›®å½•ä¸‹æ‰§è¡Œ npm run mock å‘½ä»¤ï¼Œå¦‚æžœæˆåŠŸä¼šå‡ºçŽ°12345678910111213141516171819202122$ npm run mock&gt; @ mock D:\Git\demo\vue\demo\mock&gt; json-server db.json --port 8080 \&#123;^_^&#125;/ hi! Loading db.json Done Resources http://localhost:8080/list http://localhost:8080/users http://localhost:8080/user http://localhost:8080/posts http://localhost:8080/comments http://localhost:8080/profile http://localhost:8080/goods Home http://localhost:8080 å¦‚æžœä¸æˆåŠŸè¯·æ£€æŸ¥ db.json æ–‡ä»¶çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚ ä½¿ç”¨æœ¬åœ°apiä»£ç ï¼š123456789created () &#123; /* è¿™ä¸ªæ˜¯vueçš„é’©å­å‡½æ•°ï¼Œå½“new Vue()å®žä¾‹åˆ›å»ºå®Œæ¯•åŽæ‰§è¡Œçš„å‡½æ•° */ const Http = new Vue; this.$http.get(&apos;http://127.0.0.1:8080/goods&apos;).then((data) =&gt; &#123; /* è°ƒç”¨vueçš„ajaxæ¥è¯·æ±‚æ•°æ®ï¼Œpromiseè¯­æ³•ï¼Œå¹¶ç”¨es6çš„ç®­å¤´å‡½æ•° */ console.log(&apos;===================================&apos;) console.log(data); console.log(&apos;===================================&apos;) this.items = data.body.data; &#125;)&#125; ä½†æ˜¯è¿™æ ·æ“ä½œä¼šæŠ¥é”™,é”™è¯¯å¦‚ä¸‹ï¼šè¿™æ˜¯å› ä¸ºæ²¡æœ‰å¼•å…¥vue-resourceå¯¼è‡´çš„ï¼Œå¯ä»¥å‚è€ƒCannot read property â€˜getâ€™ of undefinedâ€ in vuejså’Œvueå¼•å…¥vue-resourceæ— æ³•ä½¿ç”¨$http.getã€‚ æœ€ç»ˆå®žçŽ°çš„æ•ˆæžœå¦‚å›¾ï¼š æ ¸å¿ƒå‚è€ƒæ–‡æ¡£ï¼šhttps://www.jianshu.com/p/7c5ccfac3fa8 å‚è€ƒhttps://www.cnblogs.com/itfantasy/p/6043111.htmlhttps://blog.csdn.net/sinat_17775997/article/details/77824878 è§†é¢‘å’Œæºç è§†é¢‘å…±äº«ï¼šé“¾æŽ¥: https://pan.baidu.com/s/18TFC0-VSCIWFo977p4YcTQæå–ç : rjcp æºä»£ç å…±äº«ï¼šhttps://gitee.com/marvinma/vue2-pc]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows10 ä¸Šæµ…å°vue jså¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ä¹‹äºŒ]]></title>
    <url>%2F2018%2F09%2F02%2Fwindows-vuejs-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%2F</url>
    <content type="text"><![CDATA[vuejså­¦ä¹ ç¬”è®°â€”-çˆ¶å­ç»„ä»¶ä¼ å€¼ã€åŠ¨æ€ç»„ä»¶ã€è‡ªå®šä¹‰ç»„ä»¶ã€vue-routerã€vue-linkã€stateç®€ä¹¦åœ°å€ æœ¬ç‰‡æ˜¯çœ‹è§†é¢‘è®°å½•é›¶ç¢ŽçŸ¥è¯†ç‚¹1ã€ä½¿ç”¨mustacheè¾“å‡ºå†…å®¹æ—¶å°†è¾“å…¥æ¡†è¾“å…¥çš„å†…å®¹åšå¤„ç†ï¼Œä½¿ç”¨è®¡ç®—å±žæ€§ï¼Œä¸éœ€è¦ä½¿ç”¨ç›‘å¬ç­‰åŠŸèƒ½å®žçŽ°ã€‚123456789101112export default &#123; data () &#123; return &#123; myValue : &apos;&apos; &#125; &#125;, computed: &#123; checkData () &#123; this.myValue.replace(/\d/g, &apos;&apos;); &#125; &#125;&#125; ä½¿ç”¨çš„åœ°æ–¹12&lt;input type=&quot;text&quot; v-model=&quot;myValue&quot;&gt;&#123;&#123; checkData &#125;&#125; æƒ³å®žçŽ°çš„å°±æ˜¯åœ¨inputè¾“å…¥æ¡†è¾“å…¥å†…å®¹æ—¶ï¼ŒåŽé¢åªæ˜¾ç¤ºå­—æ¯ï¼Œé‡æ•°å­—ç›¸å½“äºŽéšè—ã€‚ å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ç§å®žçŽ°æ–¹å¼ï¼Œå°±æ˜¯åœ¨methodsé‡Œå†™ä¸ªæ–¹æ³•ï¼ŒåŒæ—¶åœ¨inputåŽé¢ä½¿ç”¨æ•°æ®æ£€æŸ¥æ–¹æ³•æ¥å®žçŽ°ã€‚ é‚£ä¹ˆï¼Œè¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå“ªç§æ›´æŽ¨èå‘¢ï¼Ÿ æŽ¨èç¬¬ä¸€ç§ã€‚ 2ã€ çˆ¶å­ç»„ä»¶é—´ä¼ å€¼ï¼Œåœ¨vue2.0ä»¥ä¸Šç‰ˆæœ¬ï¼Œçˆ¶å­ç»„ä»¶ä¼ å€¼æ–¹å¼å¦‚ä¸‹ ä¸¾ä¾‹ï¼Œçˆ¶ç»„ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;template&gt; &lt;div&gt; &lt;!-- å‚æ•°ä¸åŒºåˆ†å¤§å°å†™ï¼Œä¹Ÿå°±æ˜¯æœ€å¥½ä¸è¦ä½¿ç”¨é©¼å³°å‘½åï¼Œç”¨ä¸­çº¿é“¾æŽ¥å³å¯ --&gt; &lt;!-- ä¼ å›ºå®šå€¼ --&gt; &lt;!-- &lt;com-a number-to-do=78&gt;&lt;/com-a&gt; --&gt; &lt;!-- åŠ¨æ€ä¼ å€¼ --&gt; &lt;input type=&quot;text&quot; v-model=&quot;myVal&quot;&gt; &lt;com-a :my-value = &quot;myVal&quot; @my-event=&quot;getMyEvent&quot;&gt; &lt;p slot=&quot;header&quot;&gt;xxxxx header&lt;/p&gt; &lt;p&gt;1ã€sloat ä½¿ç”¨æ’æ§½çš„æ–¹å¼ç”¨æ¥å°†å­ç»„ä»¶é‡Œçš„å†…å®¹æ’å…¥åˆ°çˆ¶ç»„ä»¶ä¸­ã€‚è¿˜å¯ä»¥è®¾å®šé»˜è®¤å€¼&lt;/p&gt; &lt;p&gt;2ã€æ’æ§½å†…å®¹æ¯”è¾ƒå¤šçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½åçš„æ–¹å¼æŒ‡å®šä¸ªå­—è¦å¤„ç†çš„æ’æ§½æ•°æ®&lt;/p&gt; &lt;p slot=&quot;footer&quot;&gt;xxxxx footer&lt;/p&gt; &lt;/com-a&gt; &lt;p :is=&quot;currentView&quot;&gt;&lt;/p&gt; &lt;/div&gt; &lt;/template&gt;&lt;script&gt;import Vue from &apos;vue&apos;import ComA from &apos;../components/comA&apos;export default &#123; components: &#123; ComA &#125;, data () &#123; return &#123; currentView: &apos;com-a&apos;, myVal : &quot;&quot;, myList: [ &#123; name:&apos;appale&apos;, price: 2.50 &#125;, &#123; name:&apos;banaber&apos;, price:8.50 &#125; ] &#125; &#125;, methods: &#123; getMyEvent(hello) &#123; console.log(&apos;I got my event and &apos; + hello) &#125; &#125;&#125;&lt;/script&gt; å­ç»„ä»¶æŽ¥æ”¶å‚æ•°ä¾‹å­123456789101112131415161718192021222324252627282930313233343536373839404142&lt;template&gt; &lt;div class=&quot;comA&quot;&gt; &#123;&#123; hello &#125;&#125; &#123;&#123; numberToDo&#125;&#125; &lt;button @click=&quot;emitMyEvent&quot;&gt;emit&lt;/button&gt; &lt;!-- slotä¸­é—´çš„å†…å®¹æ˜¯slotçš„é»˜è®¤å€¼ --&gt; &lt;slot name = &quot;header&quot;&gt;no slot&lt;/slot&gt; &lt;slot&gt;no slot&lt;/slot&gt; &lt;slot name = &quot;footer&quot;&gt;no slot&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; // propsæŽ¥æ”¶ä¸¤ç§ç±»åž‹çš„å‚æ•° // ä¸€ç§æ˜¯æ•°ç»„ï¼Œä¸€ç§æ˜¯å¯¹è±¡ã€‚å¯¹è±¡ç”¨çš„æ¯”è¾ƒå¤šï¼ŒæŽ¥æ”¶æ—¶å¯ä»¥é™å®šç±»åž‹ // props: [&apos;number-to-do&apos;], props: &#123; // &apos;number-to-do&apos;: [Number, String, Object] &apos;my-value&apos;: [Number, String, Object] &#125;, data () &#123; return &#123; hello : &quot;I am component A&quot; &#125; &#125;, methods : &#123; emitMyEvent () &#123; this.$emit(&apos;my-event&apos;, this.hello); &#125; &#125;&#125;&lt;/script&gt;&lt;style&gt;.comA &#123; background-color: antiquewhite;&#125;&lt;/style&gt; 3ã€åŠ¨æ€ç»„ä»¶åŠåœ¨templateä¸­åŠ¨æ€åŠ è½½éœ€è¦çš„ç»„ä»¶çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š123456789101112131415161718192021&lt;template&gt; &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;myVal&quot;&gt; &lt;keep-alive&gt; &lt;p :is=&quot;currentView&quot;&gt;&lt;/p&gt; &lt;/keep-alive&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Vue from &apos;vue&apos;import ComA from &apos;../components/comA&apos;export default &#123; components: &#123; ComA &#125;, data () &#123; return &#123; currentView: &apos;com-a&apos;, &#125; &#125; :is å®žçŽ°åŠ¨æ€ç»„ä»¶åˆ‡æ¢ï¼Œæ¯”å¦‚ :is=â€currentViewâ€ è€Œåœ¨dataé‡Œç»™currentViewèµ‹å€¼comAã€‚æ­¤æ—¶å¯ä»¥ç”¨keep-aliveå°†ç»„ä»¶ç¼“å­˜ï¼Œæ¯”å¦‚comAå’ŒcomBäº’ç›¸åˆ‡æ¢æ—¶ä¼šå°†ä¸æ˜¾ç¤ºçš„å†…å®¹è¿›è¡Œç¼“å­˜ï¼Œæé«˜åˆ‡æ¢æ—¶æ˜¾ç¤ºé€Ÿåº¦ã€‚ 4ã€cssé˜¶æ®µç±»å123456789101112131415161718192021222324252627282930313233343536 &lt;button v-on:click=&quot;show = !show&quot;&gt; Toggle &lt;/button&gt; &lt;!-- &lt;p v-color=&quot;&apos;red&apos;&quot;&gt;Hello World&lt;/p&gt; --&gt; &lt;div class=&quot;ab&quot;&gt; &lt;transition name=&quot;fade&quot;&gt; &lt;p v-show=&quot;show&quot;&gt;é€æ˜Žåˆ‡æ¢æ•ˆæžœ&lt;/p&gt; &lt;/transition&gt; &lt;transition name=&quot;my-trans&quot;&gt; &lt;p v-show=&quot;show&quot;&gt;ä¸Šå…¥ä¸‹å‡ºåŠ¨ç”»&lt;/p&gt; &lt;/transition&gt; &lt;/div&gt;&lt;style&gt;.fade-enter-active, .fade-leave-active &#123; /* opacityæ˜¯é€æ˜Žåº¦çš„æ„æ€ï¼Œå¦‚æžœæ˜¯æ‰€æœ‰å±žæ€§éƒ½è¦transitionï¼Œè¦å°†opacityæ”¹æˆall */ transition: opacity .5s;&#125;.fade-enter, .fade-leave &#123; opacity: 0;&#125;.my-trans-enter-active, .my-trans-leave-active &#123; transition: all 0.5s ease-out;&#125;.my-trans-enter &#123; transform: translateY(-500px); opacity: 0;&#125;.my-trans-leave-active &#123; transform: translateY(500px); opacity: 0;&#125;&lt;/style&gt; enter-activeå‰é¢çš„åå­—å°±æ˜¯nameå‰é¢çš„åå­—ã€‚è¯¥å¤„çš„æ¼”ç¤ºå…ƒç´ ç”¨çš„æ˜¯pæ ‡ç­¾ï¼Œå…¶å®žå¯ä»¥æ˜¯ä¸€ä¸ªdivï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªcomponentï¼Œå®žçŽ°åŠ¨æ€ç»„ä»¶è¿‡æ¸¡ã€‚transition é»˜è®¤çš„modeæ˜¯in-outï¼Œä¹Ÿå¯ä»¥æ”¹æˆout-inï¼Œä¹Ÿå°±æ˜¯æ–°çš„å‡ºæ¥çš„å®žçŽ°å’Œæ—§çš„æ¶ˆå¤±çš„æ—¶æœºé—®é¢˜ã€‚ 5ã€å…ƒç´ /ç»„ä»¶è¿›å…¥/ç¦»å¼€ &amp; åˆ—è¡¨è¿‡æ¸¡å®˜ç½‘123456789101112&lt;button v-on:click=&quot;show = !show&quot;&gt; è¿›å…¥/ç¦»å¼€è¿‡æ¸¡åŠ¨ç”» &lt;/button&gt;&lt;div class=&quot;ab&quot;&gt; &lt;transition @before-enter=&quot;beforeEnter&quot; @enter=&quot;enter&quot; @leave=&quot;leave&quot; :css=&quot;false&quot;&gt; &lt;p class=&quot;animate-p&quot; v-show=&quot;show&quot;&gt;I am show&lt;/p&gt; &lt;/transition&gt;&lt;/div&gt; 1234567891011121314151617181920212223242526272829methods: &#123; getMyEvent(hello) &#123; console.log(&apos;I got my event and &apos; + hello) &#125;, beforeEnter: (el) =&gt; &#123; $(el).css(&#123; left:&apos;-500px&apos;, opacity:0 &#125;); &#125;, enter: function(el, done) &#123; $(el).animate(&#123; left:0, opacity:1 &#125;, &#123; duration: 1500, complete: done &#125;); &#125;, leave: function(el, done) &#123; $(el).animate(&#123; left: &apos;500px&apos;, opacity:0 &#125;, &#123; duration:1500, complete:done &#125;) &#125; &#125; 6ã€è‡ªå®šä¹‰æŒ‡ä»¤è‡ªå®šä¹‰æŒ‡ä»¤functionä½¿ç”¨direactivesæ¥å®šä¹‰ï¼Œä¸Ždataï¼Œmethodç­‰å¹³è¡Œã€‚ä½¿ç”¨æ—¶æ˜¯â€™v-xxxâ€™çš„å½¢å¼ï¼ŒåŽé¢çš„xxxä¸Ždirectivesé‡Œçš„functionåè¦ä¸€è‡´ã€‚1&lt;p v-color=&quot;&apos;red&apos;&quot;&gt;v-xxx çš„è‡ªå®šä¹‰æŒ‡ä»¤&lt;/p&gt; 12345directives: &#123; color: function(el, binding) &#123; el.style.color = binding.value &#125;&#125; è¿™æ˜¯åœ¨ç»„ä»¶å†…éƒ¨ï¼Œä¹Ÿå°±æ˜¯è¯´v-coloræŒ‡ä»¤åªèƒ½åœ¨è¿™ä¸ªç»„ä»¶å†…ä½¿ç”¨ã€‚é‚£ä¹ˆï¼Œæ€Žä¹ˆå®šä¸€ä¸ªå…¨å±€çš„æŒ‡ä»¤ï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç»„ä»¶å†…ä½¿ç”¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å°†æ­¤å®šä¹‰æ”¾åœ¨Vueå®žä¾‹åŒ–çš„åœ°æ–¹ï¼Œæ¯”å¦‚main.jsé‡Œé¢ã€‚ 7ã€vue-cli è„šæ‰‹æž¶çš„å®‰è£…å’Œä½¿ç”¨ 8ã€cnpmçš„ä½¿ç”¨ 9ã€vue-routeræ·»åŠ å­ç»„ä»¶æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æžœè·¯ç”±æœ‰å­è·¯ç”±ï¼Œæ¯”å¦‚http://localhost:3000/apple/ å’Œhttp://localhost:3000/apple/redï¼Œå…¶ä¸­ç¬¬äºŒæ˜¯å°±æ˜¯ç¬¬ä¸€ä¸ªçš„å­è·¯ç”±ï¼Œè·¯ç”±ä»£ç æ˜¯è¿™æ ·çš„12345678910&#123; path: &apos;/apple&apos;, component: Apple, children: [ &#123; path: &apos;red&apos;, component: RedApple &#125; ] &#125;, è¿™æ—¶å€™å¦‚æžœè¦è®©redè¿™ä¸ªå­è·¯ç”±ç”Ÿæ•ˆï¼Œå¿…é¡»åœ¨appleè¿™ä¸ªçˆ¶ç»„ä»¶ä¸­ä¹Ÿä½¿ç”¨&lt;router-view&gt;&lt;/router-view&gt;,æ‰èƒ½æ‰“åŒ…ç›®çš„ï¼Œapple/redæ‰èƒ½æ¸²æŸ“å‡ºredappleä¸­çš„å†…å®¹ apple.vueæ–‡ä»¶çš„å†…å®¹ï¼š12345678&lt;template&gt; &lt;div class=&quot;content&quot;&gt; &lt;img class=&quot;img&quot; src=&quot;../assets/apple.jpg&quot; alt=&quot;appale&quot;&gt; &lt;button @click=&quot;getParam&quot;&gt;get route param&lt;/button&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt; &lt;/template&gt; 10ã€vue-linkè¿™ä¸ªç»„ä»¶ä¹Ÿæ˜¯è®¾ç½®è·¯ç”±ç”¨çš„ï¼Œå¯ä»¥ç»‘å®šéœ€è¦è·³è½¬çš„åœ°å€ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š12345&lt;router-link :to=&quot;&#123;name: &apos;applePage&apos;&#125;&quot;&gt;&lt;/router-link&gt;&lt;router-link :to=&quot;&apos;goods&apos;&quot;&gt; to goodsList &lt;/router-link&gt;&lt;router-link :to=&quot;&#123;path : &apos;banana&apos;, param:&#123;color:&apos;yellow&apos;&#125;&#125;&quot;&gt; to banana &lt;/router-link&gt;&lt;router-link :to=&quot;&#123;path : &apos;apple/red&apos;&#125;&quot;&gt; to red apple &lt;/router-link&gt;&lt;router-link :to=&quot;goodsDetail&quot;&gt; to goods detail &lt;/router-link&gt; ä¸Šé¢çš„applePageå’Œgoodsæ˜¯è¦åœ¨dataé‡Œå®šä¹‰çš„ï¼Œä¸ç„¶æ˜¯ä¼šæŠ¥é”™çš„ã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ˜¯åœ¨å…¥å£çš„App.vueé‡Œï¼Œå› ä¸ºè·³è½¬åœ°å€éƒ½æ˜¯æ ¹è·¯å¾„ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æžœè¿™æ®µä»£ç åœ¨apple.vueè¿™ä¸ªç±»ä¸­ï¼Œé¡µé¢å¦‚ä¸‹ï¼š é‚£è¿™äº›æŒ‰é’®ç‚¹ä¸‹åŽ»ä»¥åŽurlä¼šå˜æˆä»€ä¹ˆå‘¢?æ¯”å¦‚ç¬¬ä¸€ä¸ªgoodsListï¼Œå°±ä¼šæ˜¯è¿™æ ·ï¼š å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è·¯ç”±çš„å‰é¢éƒ½æœ‰ä¸€ä¸ªappleè¿™ä¸ªè·¯å¾„ã€‚ å…¶ä»–çœ‹vue-routeå®˜ç½‘å§ å‘½åè·¯ç”±å‘½åè·¯ç”±æ˜¯æŒ‡åœ¨route-viewæ ‡ç­¾ä¸ŠæŒ‡å®šç»„ä»¶åç§°ï¼Œæ¯”å¦‚12&lt;router-view name=&quot;viewA&quot;&gt;&lt;/router-view&gt;&lt;router-view name=&quot;viewB&quot;&gt;&lt;/router-view&gt; å“åº”çš„åœ¨routeré‡ŒæŒ‡å®šç»„ä»¶å°±å¯ä»¥ï¼š12345678910111213&#123; path: &apos;/apple&apos;, component: &#123; viewA: Apple, viewB: RedApple &#125;, children: [ &#123; path: &apos;red&apos;, component: RedApple &#125; ] &#125;, è¿™æ ·åŒ¹é…æ¥ç”¨ã€‚ é‡å®šå‘ç›®æ ‡ï¼šè®¿é—®æ ¹ç›®å½•æ˜¯è‡ªåŠ¨è®¿é—®appleè¿™ä¸ªè·¯å¾„ã€‚1234&#123; path: &apos;/&apos;, redirect: &apos;apple&apos;&#125; 11ã€ vuex â€“ å®˜ç½‘vuexæ˜¯çŠ¶æ€ç®¡ç†æ’ä»¶ã€‚å°†ç»„ä»¶ä¹‹é—´å…±äº«çš„çŠ¶æ€ï¼Œå…¬ç”¨åž‹å†…å®¹çš„æ”¹åŠ¨ç­‰ä½¿ç”¨ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†æ’ä»¶èµ·æ¥ã€‚ æ•°æ®çŠ¶æ€ç®¡ç†æ¨¡å¼å›¾ï¼š flux:çŠ¶æ€ç®¡ç†å®žçŽ°æµç¨‹ï¼š actionå’Œmutatonsçš„åŒºåˆ«ï¼Œmunationæœ¬èº«å¯ä»¥ä¿®æ”¹stateçš„å€¼ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜è¦é€šè¿‡actionæ¥å¤„ç†å‘¢ï¼Ÿå› ä¸ºactionè¿™ä¸€æ­¥å¯ä»¥åŠ æ¯”å¦‚å¼‚æ­¥ã€ç½‘ç»œè¯·æ±‚ç­‰è¿™æ ·çš„å®žçŽ°é€»è¾‘ï¼Œè€Œmutationåªèƒ½æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿä¸èƒ½åœ¨å…¶ä¸­å‘å‡ºhttpè¯·æ±‚ã€‚ vuexå¸¸ç”¨çš„æœ‰stateï¼Œmuntionsï¼Œgettersï¼Œactionsï¼Œmodulesè¿™å‡ ä¸ªæ ¸å¿ƒçš„conceptsï¼Œæ›´è¯¦ç»†çš„è¯·å‚è€ƒå®˜ç½‘. ç¤ºä¾‹ä»£ç ï¼švuex.vueå…¥å£æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334&lt;template&gt; &lt;div&gt; &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt; &lt;p&gt; state æ€»ä»·: &#123;&#123; totalPrice &#125;&#125;&lt;/p&gt; &lt;dog&gt;&lt;/dog&gt; &lt;cat&gt;&lt;/cat&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Dog from &apos;../components/dog&apos;import Cat from &apos;../components/cat&apos;export default &#123; data () &#123; return &#123; msg : &apos;vuex demo&apos; &#125; &#125;, components: &#123; Dog, Cat &#125;, computed: &#123; totalPrice() &#123; return this.$store.getters.getTotal //vuexå¯¦ç¾äº†getteræ–¹æ³•ï¼Œå› æ­¤ä¸æŽ¨èç›´æŽ¥ä»Žstateä¸­æ‹¿å±žæ€§çš„å€¼ // return this.$store.state.totalPrice &#125; &#125;&#125;&lt;/script&gt; åŒ…æ‹¬çš„ä¸¤ä¸ªå­ç»„ä»¶dog.vue1234567891011121314151617181920212223242526&lt;template&gt; &lt;div&gt; &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt; &lt;button @click=&quot;addOne&quot;&gt;add one&lt;/button&gt; &lt;button @click=&quot;minusOne&quot;&gt;minus one&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data () &#123; return &#123; msg : &apos;I am a dog, each of me is 5$. &apos;, price: 5 &#125; &#125;, methods: &#123; addOne() &#123; this.$store.commit(&apos;increment&apos;, this.price) &#125;, minusOne() &#123; this.$store.commit(&apos;decrement&apos;, this.price) &#125; &#125;&#125;&lt;/script&gt; å’Œcat.vue1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;div&gt; &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt; &lt;button @click=&quot;addOne&quot;&gt;add one&lt;/button&gt; &lt;button @click=&quot;minusOne&quot;&gt;minus one&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data () &#123; return &#123; msg : &apos;I am a dog, each of me is 15$. &apos;, price: 15 &#125; &#125;, methods: &#123; addOne() &#123; //æŽ¨èä½¿ç”¨actionè°ƒç”¨mutationçš„æ–¹å¼ this.$store.dispatch(&apos;increase&apos;, this.price) //ä¸æŽ¨èä½¿ç”¨ä¸‹é¢çš„ç›´æŽ¥è°ƒç”¨mutationsæ–¹æ³•çš„æ–¹å¼ // this.$store.commit(&apos;increment&apos;, this.price) &#125;, minusOne() &#123; this.$store.commit(&apos;decrement&apos;, this.price) &#125; &#125;&#125;&lt;/script&gt; å®žçŽ°çš„æ•ˆæžœï¼š è§†é¢‘å’Œæºç è§†é¢‘å…±äº«ï¼šé“¾æŽ¥: https://pan.baidu.com/s/18TFC0-VSCIWFo977p4YcTQæå–ç : rjcp æºä»£ç å…±äº«ï¼šhttps://gitee.com/marvinma/vue2-pc]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windowsä¸Šå®‰è£…nvm-nodeç‰ˆæœ¬ç®¡ç†å·¥å…·å„ç§åŽ]]></title>
    <url>%2F2018%2F09%2F02%2Fwindows%E4%B8%8A%E5%AE%89%E8%A3%85nvm-node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%90%84%E7%A7%8D%E5%9D%8E%2F</url>
    <content type="text"><![CDATA[nodejsç‰ˆæœ¬ç®¡ç†å·¥å…·åœ¨windowsçŽ¯å¢ƒä¸Šå®‰è£…å’Œä½¿ç”¨ç®€ä¹¦åœ°å€ å‰è¨€åœ¨githubä¸Šforkäº†ä¸€ä¸ªvueç®¡ç†åŽå°çš„é¡¹ç›®ï¼Œnpm installçš„æ—¶å€™æç¤ºnode è¦ç”¨8.10åŠä»¥ä¸Šç‰ˆæœ¬ã€‚ä½†æ˜¯æˆ‘æ­£åœ¨ç®¡ç†çš„é¡¹ç›®ç”¨çš„åˆæ˜¯8.9ï¼Œè·Ÿåˆ«çš„å‰ç«¯åŒäº‹èŠå¤©æ— æ„ä¸­æ‰çŸ¥é“nodeè¿˜æœ‰ä¸“é—¨çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œè¯´æ˜¯npm install n å°±è¡Œï¼ŒäºŽæ˜¯ä¸Šç­åŽ»è¯•äº†ä¸€æŠŠã€‚ æ­£é¢˜ä¸è¯•ä¸è¦ç´§ï¼Œä¸€è¯•å°±å¼€å¿ƒäº†ï¼Œä¸€å¼€å§‹ç”¨çš„npm install -g n åŽŸæ¥ï¼Œwindowsä¸Šæ²¡æœ‰ï¼Œwindowsä¸Šå«åšnvmï¼Œä¸‹è½½åœ°å€ï¼šhttps://github.com/coreybutler/nvm-windows/releases å®‰è£…å‚è€ƒï¼šhttps://blog.csdn.net/sinat_38334334/article/details/80013648 ç¢°åˆ°çš„å‘ï¼š1ã€ å®‰è£…ä¸Šåªå¥½æ‰§è¡Œnvm use 8.10.0 æç¤ºé”™è¯¯ï¼Œä¸èƒ½ä½¿ç”¨ã€‚ æœ€åŽæ‰æŸ¥åˆ°nvmå®‰è£…åœ¨C:\Program Files\nvmä¸‹ï¼Œè·¯å¾„ä¸‹æœ‰ç©ºæ ¼å¯¼è‡´çš„ã€‚è¿™ä¸€ç‚¹åœ¨æ–‡ç« æœ€åŽæœ‰è¯´æ˜Žã€‚ 2ã€è§£å†³äº†ä»¥åŽåˆå˜æˆï¼š è¿™æ˜¯gitè¿™ä¸ªå‘½ä»¤è¡Œçš„é—®é¢˜ï¼ŒåŽŸå› ä¸ç»†ç©¶äº†ï¼Œç”¨ç³»ç»Ÿè‡ªå¸¦çš„å‘½ä»¤è¡Œç®¡ç†å·¥å…·å¯ä»¥æ‰§è¡Œã€‚ 3ã€ç„¶åŽå°±å¯ä»¥ä½¿ç”¨äº† å¯ä»¥å®‰è£…åˆ«çš„ç‰ˆæœ¬äº†ï¼Œç¾Žæ»‹æ»‹ æ–‡ç« æœ€åŽå†æŠ„ç‚¹ä½¿ç”¨å‘½ä»¤æ—¶æ³¨æ„ç‚¹ è¯·ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤ç®¡ç†å™¨ï¼Œå¦åˆ™å¯èƒ½å‡ºé”™ã€‚ å…ˆè®¾ç½®nodeå’Œnpmçš„æ·˜å®é•œåƒï¼Œè¿™æ ·æˆåŠŸçŽ‡å’Œä¸‹è½½é€Ÿåº¦ä¼šæ›´é«˜ç‚¹ã€‚ç”¨é€”1ï¼šä¸»è¦ç”¨é€”ï¼Œåˆ‡æ¢nodejsç‰ˆæœ¬ã€‚å¦‚æžœæƒ³ä½¿ç”¨æœ€æ–°çš„æµè¡Œç‰ˆæœ¬æµ‹è¯•æ‚¨æ­£åœ¨å¼€å‘çš„æ¨¡å—ï¼Œè€Œä¸ç”¨å¸è½½ç¨³å®šç‰ˆæœ¬çš„nodeï¼Œåˆ™å¯ä»¥ä½¿ç”¨nvmæ¥åˆ‡æ¢nodejsç‰ˆæœ¬ã€‚ æ³¨æ„ç‚¹ 1ã€nvmå®‰è£…ç›®å½•ï¼Œæœ€å¥½ä¸è¦å­˜åœ¨ç©ºæ ¼ã€‚å¦åˆ™ï¼Œnvmå¯ä»¥å®‰è£…æˆåŠŸï¼Œä½†ä½¿ç”¨nvm use x.y.zï¼ˆnodejsçš„åˆ‡æ¢ï¼‰ä¼šæœ‰é—®é¢˜ã€‚ 2ã€æœ‰äº›å…¨å±€çš„npmæ¨¡å—ï¼Œå¯èƒ½åœ¨å„ç‰ˆæœ¬çš„node.jsä¹‹é—´ä¸å…±äº«ã€‚ 3ã€ä½ æ­£åœ¨ä½¿ç”¨çš„node.jsç‰ˆæœ¬ä¸­å¯èƒ½ä¸æ”¯æŒæŸäº›npmæ¨¡å—ã€‚å› æ­¤åœ¨å·¥ä½œçš„æ—¶å€™è¯·æ³¨æ„å·¥ä½œçŽ¯å¢ƒã€‚ å‚è€ƒwindowsä¸ŠNVMå®‰è£…ä¸Žä½¿ç”¨]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>tools</tag>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux å®‰è£…mavenï¼ŒjenkinsæŒç»­é›†æˆ]]></title>
    <url>%2F2018%2F08%2F14%2FLinux%20%E5%AE%89%E8%A3%85maven%EF%BC%8Cjenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%2F</url>
    <content type="text"><![CDATA[å¼€å‘çŽ¯å¢ƒæ­å»ºâ€”å®‰è£…mavenå’ŒjenkinsæŒç»­é›†æˆç®€ä¹¦åœ°å€ 1ã€å®‰è£…maven1.1ã€ åˆ›å»ºä¸€ä¸ªmavenæ–‡ä»¶å¤¹ï¼Œè§£åŽ‹mavenæ–‡ä»¶12345[root@1169CKT ~]# cd /home/haieradmin/softs/[root@1169CKT softs]# lsapache-maven-3.5.2-bin.tar.gz apache-tomcat-8.5.24.tar.gz jdk-8u151-linux-x64.tar.gz mysql57-community-release-el7-8.noarch.rpm nginx-1.12.2.tar.gz redis-4.0.6.tar.gz[root@1169CKT softs]# mkdir /usr/local/maven[root@1169CKT softs]# tar -zxvf apache-maven-3.5.2-bin.tar.gz -C /usr/local/maven/ 1.2ã€è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œåœ¨/etc/profileçš„æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹é…ç½®:12export M2_HOME=/usr/local/maven/apache-maven-3.5.2export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$M2_HOME/bin:$PATH æ‰§è¡Œsourceå‘½ä»¤è®©æ–°é…ç½®ç«‹å³ç”Ÿæ•ˆ:12[root@1169CKT softs]# source /etc/profile[root@1169CKT softs]# 1.3ã€éªŒè¯12345678[root@1169CKT softs]# mvn -vApache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T15:58:13+08:00)Maven home: /usr/local/maven/apache-maven-3.5.2Java version: 1.8.0_151, vendor: Oracle CorporationJava home: /usr/local/java/jdk1.8.0_151/jreDefault locale: en_US, platform encoding: UTF-8OS name: &quot;linux&quot;, version: &quot;3.10.0-693.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;[root@1169CKT softs]# 2ã€å®‰è£…jenkinså®‰è£…jenkinsç®€å•æ¥è¯´éœ€è¦ä¸‹é¢å››æ­¥ï¼š1234wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add -sudo sh -c &apos;echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list&apos;sudo apt-get updatesudo apt-get install jenkins 2.1ã€ å®‰è£…ç®€ä»‹: 1ã€é€šè¿‡ä¸Šé¢çš„å®‰è£…ï¼ŒJenkinså°†ä½œä¸ºä¸€ä¸ªLinuxå®ˆæŠ¤è¿›ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹æ–‡ä»¶/etc/init.d/jenkins2ã€åˆ›å»ºä¸€ä¸ªåä¸ºJenkinsçš„Linuxç”¨æˆ·3ã€ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ /var/log/jenkins/jenkins.log4ã€Jenkins é»˜è®¤ç«¯å£æ˜¯8080ï¼Œåœ¨é…ç½®æ–‡ä»¶/etc/default/jenkins ä¸­å®šä¹‰ã€‚ install plugins started è®¾ç½®ç”¨æˆ·åå¯†ç :admin/admin123 å¯åŠ¨åŽè®¿é—®ï¼š 2.2ã€ é…ç½®æƒé™ gitä»£ç åº“æŽˆæƒé…ç½®é—®é¢˜ï¼Œéœ€è¦é…ç½®sshå…å¯†ç ç™»å½•ï¼Œæ³¨æ„ï¼Œå¿…é¡»æ˜¯jenkinsç”¨æˆ·çš„æŽˆæƒï¼Œä¸æ˜¯rootç”¨æˆ·å¦‚æžœsshæˆ–è€…scpæ—¶é‡åˆ°é”™è¯¯ç±»ä¼¼å¦‚ä¸‹ï¼šssh_exchange_identification: read: Connection reset by peeré‚£å°±æ˜¯éœ€è¦è®¾ç½®è®¿é—®IPçš„ç™½åå•ï¼Œå…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼šé»‘åå•cat /etc/hosts.denyç™½åå•cat /etc/hosts.allowåŠ ä¸Šéœ€è¦è®¿é—®æœ¬æœºçš„æœåŠ¡å™¨ipåœ°å€ï¼Œä¿å­˜å³å¯ã€‚å¦‚æžœsshåˆ°å…¶ä»–æœåŠ¡å™¨å‡ºçŽ°centos ssh: connect to host 10.138.227.188 port 22: No route to hostçš„é”™è¯¯ï¼Œæµ‹éœ€è¦åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šé…ç½®22ç«¯å£çš„é˜²ç«å¢™ç™½åå•ï¼Œå¦‚æžœæ˜¯firewallï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤12firewall-cmd --permanent --add-port=22/tcpfirewall-cmd --reload æŽˆæƒé…ç½®æ­£ç¡®ä»¥åŽçš„æ ·å­å¤§æ¦‚æ˜¯è¿™æ ·çš„ 123ssh-keygen -t rsa #ç”Ÿæˆkey cd /var/lib/jenkins/.ssh #å¦‚æžœæ²¡æœ‰åˆ›å»ºjenkins homeçš„è¯ï¼Œå¯ä»¥ä¸Šjenkinsçš„å…¨å±€è®¾ç½®é‡ŒæŸ¥çœ‹jenkinsä¸»ç›®å½•ï¼Œç„¶åŽæŸ¥çœ‹sshè·¯å¾„scp -r /root/.ssh/id_rsa.pub 192.168.31.147:/root/.ssh/authorized_keys å¦‚æžœjenkinså¯åŠ¨æ—¶æœ€åŽæç¤ºæ‰¾ä¸åˆ°JAVA_HOMEï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ è¿™ä¸ªæƒ…å†µéœ€è¦å†tomcatçš„binç›®å½•ä¸‹æ‰¾åˆ°setclasspath.shæ–‡ä»¶ï¼Œæ·»åŠ ä¸ŠJAVA_HOMEç›®å½•ã€‚ æ·»åŠ 123JAVA_HOME=/usr/local/java/jdk1.8.0_151JRE_HOME=/usr/local/java/jdk1.8.0_151/jre 2.3ã€jenkinsæž„å»ºé‡Œçš„ä¸€äº›å‘½ä»¤ï¼š 12345#åˆ é™¤é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸­éƒ¨ç½²çš„åŒ…ssh -p 22 root@x.x.x.x &apos;bash -x -s&apos; &lt; /opt/auto-deploy-scripts/remove-aliyun-questionnaire-test.sh#ä½¿ç”¨scpå‘½ä»¤æŠŠjenkinsæœ€æ–°Buildçš„åŒ…ä¼ é€åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨1ä¸­scp -P 22 /var/lib/jenkins/workspace/chuangke_testserver_auto_deploy/target/questionnaire.war root@x.x.x.x:/opt/tomcat8_test/webappsssh -p 22 root@x.x.x.x &apos;bash -x -s&apos; &lt; /opt/auto-deploy-scripts/start_tomcat8_test.sh ä¸¤ä¸ªè„šæœ¬ï¼šremove-aliyun-questionnaire-test.sh12345678910#!/bin/bashtomcat_pid=`ps -ef | grep tomcat | grep test| grep -v grep | awk &apos;&#123;print $2&#125;&apos;`[ -n &quot;$tomcat_pid&quot; ] &amp;&amp; kill -9 $tomcat_pidrm -rf /opt/tomcat8_test/webapps/questionnaire*rm -rf /opt/tomcat8_test/logs/localhost*rm -rf /opt/tomcat8_test/logs/host-manager*rm -rf /opt/tomcat8_test/logs/manager*rm -rf /opt/tomcat8_test/logs/catalina.outrm -rf /opt/tomcat8_test/work/Catalina/* start_tomcat8_test.sh12#!/bin/bash/opt/tomcat8_test/bin/startup.sh å¦‚æžœæ˜¯ç›´æŽ¥åœ¨jenkins çš„Execute Shellé‡Œæ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬åœ¨å½“å‰æœåŠ¡å™¨ï¼Œç»™å½“å‰æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤ï¼Œåˆ™å¦‚ä¸‹å†™æ³•ã€‚ 12345sleep 200echo &quot;--------begin deploy webservice --------&quot;date/opt/c2m_scripts/backup_last_month_logs.shrm -rf /mnt/jenkins/jenkins_home/workspace/aliyun-testServer1-c2mwebservice-deploy-for-dev-test/c2mwebservice/target/c2mwebservice.war 2.5ã€é…ç½®é‚®ä»¶é€šçŸ¥ ä»¥ä¸Šæ˜¯æœ€ç®€å•çš„é‚®ä»¶é…ç½®ï¼Œå½“æž„å»ºå‡ºé”™æ˜¯ä¼šå‘é‚®ä»¶ã€‚å¦‚æžœè¦ä¿®æ”¹å‘å‡ºçš„é‚®ä»¶çš„é€šçŸ¥å†…å®¹ï¼Œæˆ–æœ‰æ›´åŠ å¤æ‚çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨Email Extension Pluginæ’ä»¶è¿›è¡Œé…ç½®ã€‚ å¦‚æžœç”¨è…¾è®¯ä¼ä¸šé‚®ç®±çš„è¯ï¼Œé…ç½®å¦‚ä¸‹ï¼š å¤‡æ³¨ï¼šå¦‚æžœä½ ç”¨jenkinsç»™æœ¬æœºéƒ¨ç½²åº”ç”¨ï¼Œæ¯”å¦‚è¿è¡Œä¸€ä¸ªjaråŒ…ï¼Œä¹Ÿè®¸ä¼šå‘ç”Ÿçš„ä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯jenkinséƒ¨ç½²æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯java -jaråŽçš„åº”ç”¨è¿˜æ²¡å¯åŠ¨è‡ªå·±å°±æ­»äº†ã€‚è¿™æ˜¯å› ä¸ºé»˜è®¤ä¸å…è®¸è¿è¡Œjenkinsçš„è¡ç”Ÿè¿›ç¨‹å¯¼è‡´çš„ï¼Œå¦‚æžœæ˜¯è¿œç«¯æœåŠ¡å™¨å°±æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æžœæ˜¯æœ¬åœ°è¿è¡Œï¼Œéœ€è¦æŒ‰ç…§å¦‚ä¸‹åœ°å€çš„è¯´æ˜Žé…ç½®ä¸€ä¸‹ã€‚ jenkinsä¸­é€šè¿‡execute shellå¯åŠ¨çš„è¿›ç¨‹ä¼šè¢«æ€æ­»çš„é—®é¢˜ å‚è€ƒCentos7ä¸­å®‰è£…æœ€æ–°ç‰ˆmaven3.5.0How To Install Jenkins on Ubuntu 16.04centos7ä¸‹å®‰è£…jenkins]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux ä¿®æ”¹ä¸»æœºåã€æ·»åŠ ç”¨æˆ·ã€å®‰è£…jdkã€å®‰è£…mysqlã€å®‰è£…redis]]></title>
    <url>%2F2018%2F08%2F12%2FLinux%20%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D%E3%80%81%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E3%80%81%E5%AE%89%E8%A3%85jdk%E3%80%81%E5%AE%89%E8%A3%85mysql%E3%80%81%E5%AE%89%E8%A3%85redis%2F</url>
    <content type="text"><![CDATA[å¼€å‘çŽ¯å¢ƒæ­å»ºâ€”ä¿®æ”¹ä¸»æœºåã€æ·»åŠ ç”¨æˆ·ã€å®‰è£…jdkã€å®‰è£…mysqlã€å®‰è£…redisç®€ä¹¦åœ°å€ 1ã€ä¿®æ”¹ä¸»æœºåã€vi /etc/hostnameã€‘ç¼–è¾‘ä¸Šä½ è¦èµ·çš„åå­—å³å¯ã€‚12345678910[root@localhost ~]# hostnamectl --static set-hostname Linuxidc# é‡å¯CentOS 7 ä¹‹åŽï¼ˆreboot -f ï¼‰ï¼Œ[root@Linuxidc ~]# hostnamectl --staticLinuxidc[root@Hunk_zhu ~]# hostnamectl --transientLinuxidc[root@Hunk_zhu ~]# hostnamectl --prettyLinuxidc[root@Hunk_zhu ~]# hostnamehostnamectl --static set-hostname testServer 2ã€æ·»åŠ ç”¨æˆ·useradd dev passwd dev è¾“å…¥å¯†ç Ecs201703ï¼Œåˆ›å»ºæˆåŠŸã€‚ èµ‹äºˆrootæƒé™ï¼š ç„¶åŽç»™devåŠ ä¸ŠåŒrootä¸€æ ·çš„å¦‚ä¸‹ä¸€è¡Œï¼Œä¿å­˜ã€‚ ubuntuä¸­ç®¡ç†ç”¨æˆ·å’Œç”¨æˆ·ç»„ æ·»åŠ ä¸€ä¸ªç”¨æˆ·ç»„å¹¶æŒ‡å®šidä¸º1002 sudo groupadd ï¼g 1002 www æ·»åŠ ä¸€ä¸ªç”¨æˆ·åˆ°wwwç»„å¹¶æŒ‡å®šidä¸º1003 sudo useradd wyx -g 1002 -u 1003 -m ä¿®æ”¹ç”¨æˆ·çš„å¯†ç  sudo passwd wyx åˆ é™¤ä¸€ä¸ªç”¨æˆ· sudo userdel wyx ä¸ºè¯¥ç”¨æˆ·æ·»åŠ sudoæƒé™ 123sudo usermod -a -G adm wyxsudo usermod -a -G sudo wyx æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼š 123cat /etc/passwdcat /etc/group 3ã€å®‰è£…JDK1.8 åœ¨çº¿å®‰è£…openjdk 1sudo apt-get install openjdk-8-jdk&lt;/pre&gt;&lt;/wiz_code_mirror&gt; å¦‚æžœå®‰è£…æ—¶æŠ¥é”™ï¼Œæ‰§è¡Œã€ sudo apt-get update ã€‘å‘½ä»¤åŽå†æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ã€‚ åœ¨é…ç½®classpathå³å¯ã€‚ æ‰‹åŠ¨å®‰è£…æ•™ç¨‹ 1ã€æºç åŒ…å‡†å¤‡ï¼š é¦–å…ˆåˆ°å®˜ç½‘ä¸‹è½½jdk-8u66-linux-x64.tar.gzï¼Œ http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html æˆ–è€…ä½¿ç”¨å‘½ä»¤ä¸‹è½½1wget https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-linux-x64.tar.gz 2ã€è§£åŽ‹æºç åŒ… é€šè¿‡ç»ˆç«¯åœ¨/usr/localç›®å½•ä¸‹æ–°å»ºjavaæ–‡ä»¶å¤¹ï¼Œå‘½ä»¤è¡Œï¼š 1sudo mkdir /usr/local/java ç„¶åŽå°†ä¸‹è½½åˆ°åŽ‹ç¼©åŒ…æ‹·è´åˆ°javaæ–‡ä»¶å¤¹ä¸­ï¼Œå‘½ä»¤è¡Œï¼š è¿›å…¥jdkæºç åŒ…æ‰€åœ¨ç›®å½• 1cp jdk-8u66-linux-x64.tar.gz /usr/local/java ç„¶åŽè¿›å…¥javaç›®å½•ï¼Œå‘½ä»¤è¡Œï¼š 1cd /usr/local/java è§£åŽ‹åŽ‹ç¼©åŒ…ï¼Œå‘½ä»¤è¡Œï¼š 1sudo tar zxvf jdk-8u66-linux-x64.tar.gz ç„¶åŽå¯ä»¥æŠŠåŽ‹ç¼©åŒ…åˆ é™¤ï¼Œå‘½ä»¤è¡Œï¼š 1sudo rm jdk-8u66-linux-x64.tar.gz 3ã€è®¾ç½®jdkçŽ¯å¢ƒå˜é‡è¿™é‡Œé‡‡ç”¨å…¨å±€è®¾ç½®æ–¹æ³•ï¼Œå°±æ˜¯ä¿®æ”¹etc/profileï¼Œå®ƒæ˜¯æ˜¯æ‰€æœ‰ç”¨æˆ·çš„å…±ç”¨çš„çŽ¯å¢ƒå˜é‡1vi /etc/profile æ‰“å¼€ä¹‹åŽåœ¨æœ«å°¾æ·»åŠ 123456789JAVA_HOME=/usr/local/java/jdk1.8.0_66JRE_HOME=/usr/local/java/jdk1.8.0_66/jreCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/libPATH=$JAVA_HOME/bin:$PATHexport PATH JAVA_HOME CLASSPATH ä½¿çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆ1source /etc/profile çœ‹çœ‹è‡ªå·±çš„é…ç½®æ˜¯å¦éƒ½æ­£ç¡® 1echo $JAVA_HOME echo $CLASSPATH echo $PATH 4ã€ä¿®æ”¹é»˜è®¤JDK å¦‚æžœç³»ç»Ÿå·²ç»å®‰è£…äº†å…¶ä»–ç‰ˆæœ¬çš„Java 123456789JAVA_HOME=/usr/local/java/jdk1.8.0_66JRE_HOME=/usr/local/java/jdk1.8.0_66/jreCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/libPATH=$JAVA_HOME/bin:$PATHexport PATH JAVA_HOME CLASSPATH 5ã€æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ åœ¨ç»ˆç«¯1java -version çœ‹çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼ŒæˆåŠŸåˆ™æ˜¾ç¤ºå¦‚ä¸‹123java version &quot;1.8.0_66&quot;Java(TM) SE Runtime Environment (build 1.8.0_66-b17)Java HotSpot(TM) 64-Bit Server VM (build 25.65-b01, mixed mode) 4ã€Ubuntu 16.04 å®‰è£…mysqlå¹¶è®¾ç½®è¿œç¨‹è®¿é—®1sudo apt-get install mysql-server Linuxæ–°æ‰‹å…¥é—¨ï¼šUnable to locate packageé”™è¯¯è§£å†³åŠžæ³• æœ€è¿‘åˆšå¼€å§‹æŽ¥è§¦Linuxï¼Œåœ¨è™šæ‹Ÿæœºä¸­è£…äº†ä¸ªUbuntuï¼Œå½“å‰çš„ç‰ˆæœ¬æ˜¯Ubuntu 11.10ï¼Œè£…å¥½åŽè‡ªç„¶å°‘ä¸äº†å®‰è£…ä¸€äº›è½¯ä»¶ï¼Œåœ¨è®¾ç½®äº†è½¯ä»¶çš„æºåŽï¼Œå°±å¼€å§‹äº† sudo apt-get installï¼Œç»“æžœå‡ºçŽ°äº†ä¸‹é¢çš„Unable to locate packageé”™è¯¯ï¼š letuknowit@ubuntu:~$ sudo apt-get install mysql-server mysql-client [sudo] password for letuknowit: Reading package listsâ€¦ Done Building dependency tree Reading state informationâ€¦ Done E: Unable to locate package mysql-server E: Unable to locate package mysql-client letuknowit@ubuntu:~$ è¿™å«ä¸€ä¸ªéƒé—·å•Šï¼Œå‡ºå¸ˆä¸åˆ©ï¼Œä¸å¸¦è¿™ä¹ˆå“å”¬åˆšçŽ©Ubuntuçš„å°æœ‹å‹å§~äºŽæ˜¯èµ¶ç´§æ‰¾èµ„æ–™ï¼Œåˆå›žé¡¾ä¸‹å‰é¢çš„æ“ä½œï¼Œæœ€åŽå‘çŽ°é—®é¢˜å‡ºåœ¨æ‰§è¡Œsudo apt-get installä¹‹å‰æ›´æ¢äº†è½¯ä»¶æºï¼Œä½†æ˜¯å´å¿˜äº†updateä¸‹äº†ï¼ŒäºŽæ˜¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š sudo apt-get update ç­‰ä¸Šé¢å‘½ä»¤æ‰§è¡Œå®ŒåŽï¼Œå†æ‰§è¡Œsudo apt-get installå°±å¯ä»¥äº†ï¼å…¶å®žé”™è¯¯ä¿¡æ¯å·²ç»å¾ˆæ˜Žç¡®äº†ï¼ŒUnable to locate packetå°±æ˜¯æ— æ³•æ‰¾åˆ°åŒ…å˜›ï¼Œé‚£è¿˜ä¸èµ¶ç´§sudo apt-get updateä¸‹ï¼ è¯´æ˜Žï¼š ä¸€ä¸ªæœ‹å‹åœ¨ä½¿ç”¨ubuntu-server 16.04å®‰è£…mysqlï¼Œè®¾ç½®è¿œç¨‹è®¿é—®çš„æ—¶å€™å‡ºçŽ°äº†é—®é¢˜ï¼Œè¯·æˆ‘å¸®å¿™ã€‚ä½†æ˜¯ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ä½¿ç”¨è¿‡ubuntuå®‰è£…mysqlï¼ŒäºŽæ˜¯ä¹Žæœç´¢äº†å¾ˆå¤šæŠ€æœ¯æ–‡ä»¶ï¼Œæ¯”ç€è‘«èŠ¦ç”»ç“¢ã€‚ä½†æ˜¯ï¼Œç”±äºŽmysqlç‰ˆæœ¬çš„å·®å¼‚ï¼Œå¯¼è‡´åœ¨å®‰è£…è®¾ç½®çš„è¿‡ç¨‹ä¸­å‡ºçŽ°äº†ä¸€äº›é—®é¢˜ï¼šå°±æ˜¯ä¸èƒ½è¿œç¨‹è®¿é—®ã€‚ ä¸€ã€å®‰è£…mysql 1. å®‰è£…éœ€è¦ä½¿ç”¨rootè´¦å·ï¼Œå¦‚æžœä¸ä¼šè®¾ç½®rootè´¦å·çš„è¯·è‡ªè¡Œgoogleã€‚å®‰è£…mysqlè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®¾ç½®mysqlçš„rootè´¦å·çš„å¯†ç ï¼Œä¸è¦å¿½ç•¥äº†ã€‚1sudo apt-get install mysql åœ¨centOSä¸Šæ‰§è¡Œå‘½ä»¤å¯èƒ½ç¢°åˆ°æ‰¾ä¸åˆ°mysql-serverçš„æƒ…å†µï¼Œæƒ³ä¸‹é¢è¿™æ ·ï¼š12345678910[azq@localhost ~]$ sudo yum install mysql-serverå·²åŠ è½½æ’ä»¶ï¼šfastestmirror, langpacksLoading mirror speeds from cached hostfile* base: mirrors.163.com* extras: mirrors.163.com* updates: centos.ustc.edu.cnæ²¡æœ‰å¯ç”¨è½¯ä»¶åŒ… mysql-serverã€‚ æ­¤æ—¶å‚è€ƒè§£å†³CentOS7ä¸‹yum install mysql-serveræ²¡æœ‰å¯ç”¨åŒ…çš„é—®å¯è§£å†³ã€‚ 2. ä»¥ä¸Š3ä¸ªè½¯ä»¶åŒ…å®‰è£…å®ŒæˆåŽï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥è¯¢æ˜¯å¦å®‰è£…æˆåŠŸï¼š 1sudo netstat -tap | grep mysql æŸ¥è¯¢ç»“æžœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ 123root@xyz:~# netstat -tap | grep mysqltcp6 0 0 [::]:mysql [::]:* LISTEN 7510/mysqld root@xyz:~# äºŒã€è®¾ç½®mysqlè¿œç¨‹è®¿é—® 1. ç¼–è¾‘mysqlé…ç½®æ–‡ä»¶ï¼ŒæŠŠå…¶ä¸­bind-address = 127.0.0.1æ³¨é‡Šäº† 1vi /etc/mysql/mysql.conf.d/mysqld.cnf 2. ä½¿ç”¨rootè¿›å…¥mysqlå‘½ä»¤è¡Œ[mysql -uroot -p]ï¼Œæ‰§è¡Œå¦‚ä¸‹2ä¸ªå‘½ä»¤ï¼Œç¤ºä¾‹ä¸­mysqlçš„rootè´¦å·å¯†ç ï¼šroot 12grant all on *.* to root@&apos;%&apos; identified by &apos;root&apos; with grant option;flush privileges; é‡å¯mysql 1/etc/init.d/mysql restart é‡å¯æˆåŠŸåŽï¼Œåœ¨å…¶ä»–è®¡ç®—æœºä¸Šï¼Œä¾¿å¯ä»¥ç™»å½•ã€‚ å¤‡æ³¨ï¼šå¦‚æžœä¿®æ”¹å¯†ç æ—¶æç¤ºæ²¡æœ‰passwordå­—æ®µçš„é”™è¯¯ï¼Œåº”è¯¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š 1update mysql.user set authentication_string=password(&apos;root&apos;) where user=&apos;root&apos; ; è¿œç¨‹ç™»å½•ï¼Œæœ‰å¦‚ä¸‹é”™è¯¯æç¤º è§£å†³åŠžæ³•ï¼š åœ¨æœåŠ¡å™¨ä¸Šç”¨ã€mysql -uroot -pã€‘å‘½ä»¤è¾“å…¥å¯†ç ç™»å½•ï¼Œ ç„¶åŽæ‰§è¡Œä¸‹é¢çš„ä¸¤æ¡å‘½ä»¤12GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;QDyy201703&apos; WITH GRANT OPTION; FLUSH PRIVILEGES; å¦‚ä¸‹ï¼š å®Œç¾Žè§£å†³mysqlæœåŠ¡é—®é¢˜ã€‚ æœ¬åœ°å‘½ä»¤è¡Œè¿žæŽ¥è¿œç¨‹mysql server è¿›å…¥å‘½ä»¤è¡Œï¼Œè¿žæŽ¥ï¼š mysql -u ç”¨æˆ·å -på¯†ç  -h æœåŠ¡å™¨IPåœ°å€ -P æœåŠ¡å™¨ç«¯MySQLç«¯å£å· -D æ•°æ®åº“å æ³¨æ„ï¼š (1)æœåŠ¡å™¨ç«¯å£æ ‡å¿—-Pä¸€å®šè¦å¤§äº›ä»¥åŒºåˆ«äºŽç”¨æˆ·-p,å¦‚æžœç›´æŽ¥è¿žæŽ¥æ•°æ®åº“æ ‡å¿—-Dä¹Ÿè¦å¤§å†™ï¼› (2)å¦‚æžœè¦ç›´æŽ¥è¾“å…¥å¯†ç -påŽé¢ä¸èƒ½ç•™æœ‰ç©ºæ ¼å¦‚-pmypassword; (3)å‘½ä»¤ç»“æŸæ®µæ²¡æœ‰&apos;;&apos;åˆ†å·ã€‚ ä¾‹å­ï¼š mysql -u lzpddd -pmypassword -h 192.168.1.88 -P 3306 -D mydb 5ã€å®‰è£…redis1ã€ ä»Žhttp://redis.io/ ä¸‹è½½redis-3.2.4.tar.gz 2ã€ ä¸Šä¼ åˆ°linuxåŽç§»åŠ¨åˆ°/opt/redisç›®å½•ä¸‹ 3ã€ è§£åŽ‹ sudo tar -zxvf redis-3.2.4.tar.gz 4ã€ è¿›å…¥è§£åŽ‹åŽçš„æ–‡ä»¶å¤¹è¿›è¡Œç¼–è¯‘ make 5ã€ å®‰è£… make install 6ã€ æµ‹è¯•ä¸€ä¸‹ make test æŠ¥é”™ç¼ºå°‘tcl ï¼ˆtcl æ˜¯ä¸€ç§è§£è¯‘è¯­è¨€ï¼Œä¹Ÿæ˜¯ä¸€å¥— C çš„å‡½å¼åº“ï¼‰ å®‰è£…tcl apt-get install tcl æŠ¥é”™Executing test client: NOREPLICAS Not enoughgood slaves to write.. ä¿®æ”¹æ–‡ä»¶tests/integration/replication-2.tclï¼Œå°†after 1000æ”¹ä¸ºafter 10000ä»¥å»¶é•¿ç­‰å¾…æ—¶é—´ã€‚ æŠ¥é”™[err]: Server is able to generate a stack trace on selected systems in tests/integration/logging. åªæ˜¯æŸä¸ªæµ‹è¯•æ²¡æœ‰é€šè¿‡ï¼Œå¯ä»¥å¿½ç•¥ã€‚ 7ã€åˆ›å»ºRedisé…ç½®ç›®å½• /etc/redis mkdir /etc/redis8ã€æ‹·è´é…ç½®æ–‡ä»¶ï¼š cp /opt/redis/redis-3.2.4/redis.conf/ /etc/redis9ã€ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆæš‚æœªç¼–è¾‘ï¼‰ ä¿®æ”¹ç«¯å£ã€é…ç½®æ•°æ®åº“ä¿å­˜ç›®å½•ã€å…¶å®ƒ10ã€ï¼ˆ1ï¼‰é€šè¿‡æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨ï¼› redis-server /etc/redis/redis.conf ï¼ˆ2ï¼‰é€šè¿‡å‘½ä»¤redis-server å¯åŠ¨ï¼Œå¯åœ¨å‘½ä»¤åŽåŠ ä¸Š&amp;å·ä½¿redisä»¥åŽå°ç¨‹åºæ–¹å¼è¿è¡Œï¼› redis-server &amp;11ã€å®¢æˆ·ç«¯ç™»é™† redis-cli12ã€å…³é—­RedisæœåŠ¡ redis-cli shutdown è®¾ç½®rediså¼€æœºå¯åŠ¨ ä¿®æ”¹redis.confï¼ˆ/etc/redisä¸‹ï¼‰ #æ‰“å¼€åŽå°è¿è¡Œé€‰é¡¹ daemonize yes #è®¾ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„ logfile &quot;/var/log/redis/redis.log&quot; ç¼–å†™è„šæœ¬ vim /etc/init.d/redis 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#!/bin/sh# chkconfig: 2345 10 90# description: Start and Stop redis PATH=/usr/local/binREDISPORT=6379EXEC=/usr/local/bin/redis-serverREDIS_CLI=/usr/local/bin/redis-cliPIDFILE=/var/run/redis.pidCONF=&quot;/etc/redis/redis.conf&quot; case &quot;$1&quot; in start) if [ -f $PIDFILE ] then echo &quot;$PIDFILE exists, process is already running or crashed.&quot; else echo &quot;Starting Redis server...&quot; $EXEC $CONF fi if [ &quot;$?&quot;=&quot;0&quot; ] then echo &quot;Redis is running...&quot; fi ;; stop) if [ ! -f $PIDFILE ] then echo &quot;$PIDFILE exists, process is not running.&quot; else PID=$(cat $PIDFILE) echo &quot;Stopping...&quot; $REDIS_CLI -p $REDISPORT SHUTDOWN while [ -x $PIDFILE ] do echo &quot;Waiting for Redis to shutdown...&quot; sleep 1 done echo &quot;Redis stopped&quot; fi ;; restart|force-reload) $&#123;0&#125; stop $&#123;0&#125; start ;; *) echo &quot;Usage: /etc/init.d/redis &#123;start|stop|restart|fore-reload&#125;&quot; exit 1esac æ·»åŠ è„šæœ¬çš„æ‰§è¡Œæƒé™ sudo chmod +x /etc/init.d/redisè®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ sudo update-rc.d redis defaults æŠ¥é”™ï¼š ä¸Šé¢ä¸ºä¸¤ä¸ªé”™è¯¯ ç¬¬ä¸€ä¸ªå‚è€ƒhttps://my.oschina.net/u/943306/blog/345923 è§£å†³æ–¹æ³•ï¼šå®‰è£…ä¸€ä¸ªä¸­æ–‡è¯­è¨€ï¼Œç³»ç»Ÿå°±çŸ¥é“zh_CN.UTF-8äº†ï¼Œè¿™ä¸ªæ—¶å€™ç”¨perlå°±ä¸ä¼šæŠ¥é”™äº† apt-get install language-pack-zh-hans ç¬¬äºŒä¸ªå‚è€ƒï¼šhttp://bashell.nodemedia.cn/archives/directspace-debian-6-vps-vzquota-missing.html è§£å†³æ–¹æ³•ï¼šç¼–è¾‘/etc/init.d/redis åœ¨æ–‡ä»¶å¤´éƒ¨#!/bin/shä¸‹é¢æ·»åŠ  ### BEGIN INIT INFO # Provides: OSSEC HIDS # Required-Start: $network $remote_fs $syslog $time # Required-Stop: # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: OSSEC HIDS ### END INIT INFO ä½¿ç”¨è„šæœ¬å¯åŠ¨æœåŠ¡ å¼€å¯redisï¼š service redis start åœæ­¢redisï¼š service redis stop é‡å¯redisï¼š service redis restart æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼šservice redis statusæœ€åŽå°†æœºå™¨å…³æœºï¼Œé‡æ–°å¯åŠ¨ æ­¤æ—¶redisæœåŠ¡ä¹Ÿå¯åŠ¨äº†ã€‚ å‚è€ƒubuntuæ°¸ä¹…ä¿®æ”¹ä¸»æœºåUbuntu 16.04 å®‰è£…mysqlå¹¶è®¾ç½®è¿œç¨‹è®¿é—®ubuntuä¸­ç®¡ç†ç”¨æˆ·å’Œç”¨æˆ·ç»„CentOS7 64ä½ä¸‹MySQL5.7å®‰è£…ä¸Žé…ç½®Centos 7.4 å®‰è£… Redis å…¨è¿‡ç¨‹]]></content>
      <categories>
        <category>å¼€å‘çŽ¯å¢ƒæ­å»º</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springboot ä¹‹ è‡ªå®šä¹‰æ–¹æ³•å‚æ•°è§£æžå™¨]]></title>
    <url>%2F2018%2F08%2F02%2FSpringboot%20%E4%B9%8B%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90%E5%99%A8%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨springçš„è‡ªå®šä¹‰æ–¹æ³•å‚æ•°è§£æžå™¨èŽ·å–å½“å‰ç”¨æˆ·çš„demoã€‚ç®€ä¹¦åœ°å€ æ˜¨å¤©ï¼ˆ2018-08-01ï¼‰æˆ‘åŒäº‹Damonåœ¨åˆ†äº«Spring AOPæ³¨è§£å¤±æ•ˆçš„ä¸»é¢˜ä¸Šï¼Œé¡ºå¸¦ç€ä»‹ç»äº†ä¸‹ã€Šè‡ªå®šä¹‰æ–¹æ³•å‚æ•°è§£æžå™¨ã€‹çš„ä½¿ç”¨ï¼Œä¸ªäººè§‰å¾—è¿˜æŒºæœ‰ç”¨çš„ï¼Œå†æ¬¡è®°å½•ä¸€ä¸‹ï¼Œä»¥åŽç”¨çš„æ—¶å€™å¥½æŸ¥ã€‚ åœºæ™¯ä¸€ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œæœ€è¿‘å¾®ä¿¡å°ç¨‹åºå¦‚æ—¥ä¸­å¤©ï¼Œå¤§æœ‰ä¸€å‘ä¸å¯æ”¶æ‹¾ä¹‹å±€åŠ¿ï¼Œæˆ‘å¸æ–°æŽ¥çš„ä¸€äº›ä¸šåŠ¡ä¹Ÿæ˜¯è¶çƒ­æ‰“é“ä»¥å¾®ä¿¡å°ç¨‹åºçš„å½¢å¼å…¬è¯¸äºŽä¸–ï¼Œå› æ­¤ä¹Ÿæœ‰äº†è¿™ä¸ªåœºæ™¯ã€‚ ä¸Žä¹‹å‰çŽ©APPä¸ä¸€æ ·äº†ï¼Œä¹‹å‰çš„appç”¨æˆ·æ³¨å†Œï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ‰‹æœºå·+éªŒè¯ç çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·ä¸Šæ¥éƒ½æœ‰æ‰‹æœºå·ç™»å½•çš„è¿‡ç¨‹ï¼Œç™»é™†ä»¥åŽæ”¾å›žtokenï¼Œè®¿é—®æ›¿ä»–é¡µé¢ä¼šå¸¦ç€è¿™ä¸ªtokenï¼ŒåŽå°ä¹Ÿå°±é€šè¿‡tokenè¯†åˆ«å‡ºè¿™ä¸ªç”¨æˆ·æ˜¯è°äº†ã€‚ çŽ°åœ¨å°ç¨‹åºï¼Œè‡ªç„¶æ˜¯å¾®ä¿¡ç™»å½•æœ€æ–¹ä¾¿ï¼Œè€Œä¸”ä¸ç”¨éº»çƒ¦ç”¨æˆ·å†ç»‘å®šæ‰‹æœºå·ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ä¸€ä¸ªç”¨æˆ·å”¯ä¸€æ ‡è¯†çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯å¾®ä¿¡æä¾›çš„openIdï¼Œæˆ‘ä»¬çŽ°åœ¨çš„åšæ³•å°±æ˜¯åœ¨æ‰€æœ‰è¦è¯·æ±‚çš„æŽ¥å£ä¸Šåœ¨headé‡Œéƒ½å¸¦ç€è¿™ä¸ªopenIdï¼ŒåŽå°é€šè¿‡è¿™ä¸ªopenIdæ£€æŸ¥æ˜¯æ–°ç”¨æˆ·è¿˜æ˜¯è€ç”¨æˆ·ï¼Œç”¨æˆ·çš„ä¿¡æ¯ä¹Ÿå°±ç›¸åº”çš„æ‹¿åˆ°äº†ã€‚ ä¸šåŠ¡å¤„ç†ä¸¾ä¸ªä¾‹å­ï¼Œå‰ç«¯è¯·æ±‚æ˜¯è¿™æ ·çš„ï¼š 1ã€å„è‡ªæŽ¥å£åˆ†åˆ«å¤„ç†åœ¨éœ€è¦åˆ¤è¯»å½“å‰ç”¨æˆ·æ˜¯è°çš„æŽ¥å£é€»è¾‘é‡Œåˆ†åˆ«åŠ ä¸Šï¼Œæœ¬æ¬¡å®žéªŒï¼Œæ”¾åœ¨controllerå±‚ï¼Œå®žé™…å†™ä»£ç æ—¶ä¸‹é¢çš„é€»è¾‘åº”è¯¥åœ¨serviceä»£ç é‡Œå®žçŽ°ã€‚1234567891011121314@GetMapping(&quot;/public/api/demo1&quot;) public Object getUser1(HttpServletRequest request) &#123; String mobile = request.getHeader(&quot;openId&quot;); CurrentUser currentUser = (CurrentUser) redisService.find(mobile); if(currentUser == null)&#123; List&lt;HaierUser&gt; userList = userRepository.findByMobileAndUserState(mobile, &quot;1&quot;); if(userList.size() &gt; 0 )&#123; currentUser = new CurrentUser(); BeanUtils.copyProperties(userList.get(0), currentUser); redisService.add(mobile, currentUser); &#125; &#125; return new RtnResult&lt;&gt;(currentUser); &#125; ç»“æžœï¼š 2ã€è‡ªå®šä¹‰æ–¹æ³•å‚æ•°è§£æžå™¨å®žçŽ°å…ˆå®šä¹‰ä¸€ä¸ªæ–¹æ³•å‚æ•°è§£æžå™¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import com.hczt.haier.db.user.entity.HaierUser;import com.hczt.haier.db.user.repository.HaierUserRepository;import com.hczt.haier.mobileoffice.usercenter.service.api.RedisService;import org.springframework.beans.BeanUtils;import org.springframework.core.MethodParameter;import org.springframework.stereotype.Component;import org.springframework.web.bind.support.WebDataBinderFactory;import org.springframework.web.context.request.NativeWebRequest;import org.springframework.web.method.support.HandlerMethodArgumentResolver;import org.springframework.web.method.support.ModelAndViewContainer;import javax.annotation.Resource;import javax.servlet.http.HttpServletRequest;import java.util.List;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-08-03 14:38 * @desc æ–¹æ³•å‚æ•°è§£æžå™¨ * ä½¿ç”¨ **/@Componentpublic class CurrentUserArgumentResolver implements HandlerMethodArgumentResolver &#123; @Resource private RedisService redisService; @Resource private HaierUserRepository userRepository; @Override public boolean supportsParameter(MethodParameter methodParameter) &#123; return methodParameter.getParameterType().equals(CurrentUser.class); &#125; @Override public Object resolveArgument(MethodParameter methodParameter, ModelAndViewContainer modelAndViewContainer, NativeWebRequest nativeWebRequest, WebDataBinderFactory webDataBinderFactory) throws Exception &#123; HttpServletRequest request = nativeWebRequest.getNativeRequest(HttpServletRequest.class); String openId = request.getHeader(&quot;openId&quot;); CurrentUser currentUser = (CurrentUser) redisService.find(openId); if(currentUser == null)&#123; List&lt;HaierUser&gt; userList = userRepository.findByMobileAndUserState(openId, &quot;1&quot;); if(userList.size() &gt; 0 )&#123; currentUser = new CurrentUser(); BeanUtils.copyProperties(userList.get(0), currentUser); redisService.add(openId, currentUser); &#125; &#125; return currentUser; &#125;&#125; åˆ«å¿˜äº†è¦å°†è‡ªå®šä¹‰çš„å‚æ•°è§£æžå™¨é…ç½®åˆ°springå®¹å™¨ä¸­ï¼Œæ–°å»ºä¸€ä¸ªconfigç±»ï¼Œç»§æ‰¿WebMvcConfigurationSupport,ï¼Œå†…å®¹å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243import org.springframework.context.annotation.Configuration;import org.springframework.data.web.PageableHandlerMethodArgumentResolver;import org.springframework.web.method.support.HandlerMethodArgumentResolver;import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;import javax.annotation.Resource;import java.util.List;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-08-03 16:23 * @desc $&#123;DESCRIPTION&#125; **/@Configurationpublic class WebConfig extends WebMvcConfigurationSupport &#123; @Resource private CurrentUserArgumentResolver currentUserArgumentResolver; @Override protected void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; argumentResolvers.add(currentUserArgumentResolver); // æ³¨å†ŒSpring data jpa pageableçš„å‚æ•°åˆ†è§£å™¨ argumentResolvers.add(new PageableHandlerMethodArgumentResolver()); &#125; // swagger2 è®¿é—® @Override public void addResourceHandlers(ResourceHandlerRegistry registry) &#123; registry.addResourceHandler(&quot;swagger-ui.html&quot;) .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;); registry.addResourceHandler(&quot;/**&quot;).addResourceLocations(&quot;classpath:/static/&quot;); registry.addResourceHandler(&quot;/webjars/**&quot;) .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;); super.addResourceHandlers(registry); &#125;&#125; ç„¶åŽè®¿é—®çš„controlleré‡ŒæŽ¥æ”¶currentè¿™ä¸ªå‚æ•°ï¼Œå°†å˜å¾—å¦‚æ­¤ç®€å•ï¼š12345@GetMapping(&quot;/public/api/demo2&quot;)public Object getUser2(CurrentUser currentUser) &#123; System.out.println(currentUser); return new RtnResult&lt;&gt;(currentUser);&#125; æ£€æµ‹ç»“æžœ è´´ä¸ŠCurrentç±»ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445import lombok.Data;import lombok.ToString;import java.io.Serializable;/** * * @Auther: marvin.mma * @Date: 2018/8/3 14:38 * @return */@Data@ToStringpublic class CurrentUser implements Serializable&#123; private static final long serialVersionUID = 1L; private String userId; /** * æ‰‹æœºå· */ private String mobile; /** * é‚®ç®± */ private String mail; /** * ç”¨æˆ·å·¥ç‰Œå· */ private String cardNo; /** * ç”¨æˆ·å§“å */ private String fullName; /** * ç”¨æˆ·å§“åæ‹¼éŸ³ */ private String fullNamePinyin;&#125; æ³¨æ„äº‹é¡¹1ã€ä¸ºä»€ä¹ˆä¸ç”¨æ‹¦æˆªå™¨æˆ–è€…è¿‡æ»¤å™¨ï¼Ÿæ‹¦æˆªå™¨æˆ–è€…è¿‡æ»¤å™¨éƒ½èƒ½å®žçŽ°èŽ·å–requestçš„headerçš„openIdï¼Œä¹Ÿèƒ½æ ¡éªŒrediså’Œæ•°æ®åº“ä¸­æœ‰æ²¡æœ‰è¯¥æ•°æ®ï¼Œæ²¡æœ‰çš„è¯æ–°å»ºåˆ°æ•°æ®åº“æˆ–è€…redisä¸­ï¼Œä½†æ˜¯å°±æ˜¯è¿”å›žä¸€ä¸ªå¯¹è±¡å®žçŽ°èµ·æ¥éº»çƒ¦ä¸€äº›ã€‚ä¸Šé‡ç‚¹äº†ï¼Œæœ€ä¸»è¦æ˜¯ä¸æ˜¯æ¯ä¸ªæŽ¥å£éƒ½éœ€è¦æ ¹æ®openIdèŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™æ ·çš„è¯æ‹¦æˆªå™¨å°±æœ‰ç‚¹å¤šä½™äº†ï¼Œé…ç½®å“ªäº›éœ€è¦å“ªäº›ä¸éœ€è¦åˆå¤ªéº»çƒ¦ã€‚æ‰€ä»¥ä½¿ç”¨æ–¹æ³•å‚æ•°è§£æžå™¨æœ€åˆé€‚äº†ã€‚ 2ã€è‡ªå®šçš„æ–¹æ³•å‚æ•°è§£æžå™¨è¦åˆ›å»ºä¸€ä¸ªç»§æ‰¿WebMvcConfigurationSupportçš„é…ç½®ç±»ï¼Œç„¶åŽæ·»åŠ åˆ°è§£æžå™¨ä¸­ï¼Œå¦åˆ™æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ 3ã€åœ¨ä½¿ç”¨spring-data-jpaçš„æ¡†æž¶é‡Œï¼Œå› ä¸ºä½¿ç”¨äº†è‡ªå®šä¹‰è§£æžå™¨ï¼Œå¯¼è‡´äº†è‡ªå¸¦åˆ†åˆ†é¡µä¸å¥½ä½¿çš„é—®é¢˜ï¼Œå…¶åŽŸå› æ˜¯è‡ªå®šä¹‰è§£æžå™¨ä»¥åŽï¼Œå¾€ HandlerMethodArgumentResolveré‡Œé¢æ·»åŠ äº†ä»€ä¹ˆè§£æžå™¨ï¼Œå®¹å™¨å°±æœ‰äº†ä»€ä¹ˆè§£æžå™¨ï¼Œæ²¡æ·»åŠ çš„ä¸ä¼šé»˜è®¤æ·»åŠ äº†ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æ·»åŠ ,å°±æ˜¯ä¸‹é¢è¿™æ ·çš„æ„æ€1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162import java.io.IOException;import java.util.List;import org.springframework.context.annotation.Configuration;import org.springframework.data.web.PageableHandlerMethodArgumentResolver;import org.springframework.http.converter.HttpMessageConverter;import org.springframework.http.converter.StringHttpMessageConverter;import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;import org.springframework.web.method.support.HandlerMethodArgumentResolver;import org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;import com.fasterxml.jackson.core.JsonGenerator;import com.fasterxml.jackson.core.JsonProcessingException;import com.fasterxml.jackson.databind.JsonSerializer;import com.fasterxml.jackson.databind.ObjectMapper;import com.fasterxml.jackson.databind.SerializerProvider;import com.fasterxml.jackson.databind.module.SimpleModule;import com.fasterxml.jackson.databind.ser.std.ToStringSerializer;/** * * @Auther: marvin.mma * @Date: 2018/8/3 16:38 * @return */@Configurationpublic class WebConfig extends WebMvcConfigurationSupport &#123; @Override protected void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) &#123; // æ³¨å†ŒSpring data jpa pageableçš„å‚æ•°åˆ†è§£å™¨ argumentResolvers.add(new PageableHandlerMethodArgumentResolver()); &#125; @Override protected void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123; MappingJackson2HttpMessageConverter jackson2HttpMessageConverter = new MappingJackson2HttpMessageConverter(); ObjectMapper objectMapper = new ObjectMapper(); /** * åºåˆ—æ¢æˆjsonæ—¶,å°†æ‰€æœ‰çš„longå˜æˆstring * å› ä¸ºjsä¸­å¾—æ•°å­—ç±»åž‹ä¸èƒ½åŒ…å«æ‰€æœ‰çš„java longå€¼ */ SimpleModule simpleModule = new SimpleModule(); simpleModule.addSerializer(Long.class, ToStringSerializer.instance); simpleModule.addSerializer(Long.TYPE, ToStringSerializer.instance); objectMapper.registerModule(simpleModule); // å°†è¿”å›žå€¼nullå¤„ç†æˆç©ºå€¼ SerializerProvider serializerProvider = objectMapper.getSerializerProvider(); serializerProvider.setNullValueSerializer(new JsonSerializer&lt;Object&gt;() &#123; @Override public void serialize(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException, JsonProcessingException &#123; jsonGenerator.writeString(&quot;&quot;); &#125; &#125;); jackson2HttpMessageConverter.setObjectMapper(objectMapper); converters.add(jackson2HttpMessageConverter); converters.add(new StringHttpMessageConverter());// super.configureMessageConverters(converters); &#125;&#125; è¯¥é…ç½®æ–‡ä»¶å¢žåŠ äº†ä¸¤ä¸ªjsonè½¬æ¢å¤„ç†ï¼Œé¡ºä¾¿è´´å‡ºæ¥ï¼ŒçŸ¥é“åœ¨å“ªåŠ æ€Žä¹ˆåŠ å°±è¡Œï¼Œè·Ÿæœ¬æ–‡æ— å…³ã€‚ 4ã€æ­¤å¤„æ˜¯ä»¥æ‰‹æœºå·ä¸¾ä¾‹çš„ï¼Œå®žé™…ç”Ÿäº§ä¸­ï¼Œè§†æƒ…å†µè€Œå®šã€‚ 5ã€å…³äºŽæ³¨è§£ä¸ç”Ÿæ•ˆçš„é—®é¢˜ï¼ŒDamonä¸»è¦ä»¥Asycå’ŒTransactionalä¸ºä¾‹è¯´æ˜Žçš„ï¼Œä½†æ˜¯å°±å…¶ä¸ç”Ÿæ•ˆçš„åŽŸå› ï¼ŒçŽ©è½¬Spring â€”â€” æ¶ˆå¤±çš„äº‹åŠ¡åŸºæœ¬ä¸Šè®²æ˜Žç™½äº†ã€‚ å®Œç¾Ž~~~]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerå­¦ä¹ æ¡ˆä¾‹ï¼šç”¨dockeréƒ¨ç½²mysqlæœåŠ¡]]></title>
    <url>%2F2018%2F07%2F25%2Fdocker%E5%AD%A6%E4%B9%A0%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%94%A8docker%E9%83%A8%E7%BD%B2mysql%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[dockerå®žé™…æ¡ˆä¾‹ä¹‹åœ¨centOS7.4ä¸Šç”¨dockeréƒ¨ç½²mysqlæœåŠ¡ç®€ä¹¦åœ°å€ ä¸€ã€ä½¿ç”¨docker runå‘½ä»¤ç›´æŽ¥å¯åŠ¨ä¸€ä¸ªmysqlå®¹å™¨1.1 ä¸‹è½½å®˜æ–¹tomcaté•œåƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051[root@dev ~]# docker search mysqlINDEX NAME DESCRIPTION STARS OFFICIAL AUTOMATEDdocker.io docker.io/mysql MySQL is a widely used, open-source relati... 6589 [OK] docker.io docker.io/mariadb MariaDB is a community-developed fork of M... 2086 [OK] docker.io docker.io/mysql/mysql-server Optimized MySQL Server Docker images. Crea... 484 [OK]docker.io docker.io/zabbix/zabbix-server-mysql Zabbix Server with MySQL database support 107 [OK]docker.io docker.io/hypriot/rpi-mysql RPi-compatible Docker Image with Mysql 90 docker.io docker.io/zabbix/zabbix-web-nginx-mysql Zabbix frontend based on Nginx web-server ... 61 [OK]docker.io docker.io/centurylink/mysql Image containing mysql. Optimized to be li... 60 [OK]docker.io docker.io/1and1internet/ubuntu-16-nginx-php-phpmyadmin-mysql-5 ubuntu-16-nginx-php-phpmyadmin-mysql-5 38 [OK]docker.io docker.io/tutum/mysql Base docker image to run a MySQL database ... 32 docker.io docker.io/centos/mysql-57-centos7 MySQL 5.7 SQL database server 31 docker.io docker.io/mysql/mysql-cluster Experimental MySQL Cluster Docker images. ... 31 docker.io docker.io/schickling/mysql-backup-s3 Backup MySQL to S3 (supports periodic back... 20 [OK]docker.io docker.io/bitnami/mysql Bitnami MySQL Docker Image 15 [OK]docker.io docker.io/zabbix/zabbix-proxy-mysql Zabbix proxy with MySQL database support 15 [OK]docker.io docker.io/linuxserver/mysql A Mysql container, brought to you by Linux... 14 docker.io docker.io/centos/mysql-56-centos7 MySQL 5.6 SQL database server 8 docker.io docker.io/circleci/mysql MySQL is a widely used, open-source relati... 6 docker.io docker.io/openshift/mysql-55-centos7 DEPRECATED: A Centos7 based MySQL v5.5 ima... 6 docker.io docker.io/dsteinkopf/backup-all-mysql backup all DBs in a mysql server 4 [OK]docker.io docker.io/frodenas/mysql A Docker Image for MySQL 2 [OK]docker.io docker.io/mysql/mysql-router MySQL Router provides transparent routing ... 2 docker.io docker.io/openzipkin/zipkin-mysql Mirror of https://quay.io/repository/openz... 1 docker.io docker.io/ansibleplaybookbundle/mysql-apb An APB which deploys RHSCL MySQL 0 [OK]docker.io docker.io/cloudfoundry/cf-mysql-ci Image used in CI of cf-mysql-release 0 docker.io docker.io/cloudposse/mysql Improved `mysql` service with support for ... 0 [OK][root@dev mysql]# docker pull mysql:5.7.19Trying to pull repository docker.io/library/mysql ... 5.7.19: Pulling from docker.io/library/mysql85b1f47fba49: Pull complete 27dc53f13a11: Pull complete 095c8ae4182d: Pull complete 0972f6b9a7de: Pull complete 1b199048e1da: Pull complete 159de3cf101e: Pull complete 963d934c2fcd: Pull complete f4b66a97a0d0: Pull complete f34057997f40: Pull complete ca1db9a06aa4: Pull complete 0f913cb2cc0c: Pull complete Digest: sha256:bfb22e93ee87c6aab6c1c9a4e7cdc68e9cb9b64920f28fa289f9ffae9fe8e173Status: Downloaded newer image for docker.io/mysql:5.7.19[root@dev mysql]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmarvin/tomcat latest 098f61ab6f8b 22 hours ago 489 MBnginx_image1 latest c4d5f5accc06 24 hours ago 109 MBdocker.io/tomcat latest 2d43521f2b1a 6 days ago 463 MBdocker.io/nginx latest 8b89e48b5f15 7 days ago 109 MBdocker.io/mysql 5.7.19 3e3878acd190 9 months ago 412 MB[root@dev mysql]# 1.2 åˆ›å»ºç”¨äºŽæŒ‚è½½çš„ç›®å½•1234567891011[root@dev local]# pwd/usr/local[root@dev local]# mkdir mysql[root@dev local]# mkdir mysql/data[root@dev local]# mkdir mysql/conf.d[root@dev local]# cd mysql/[root@dev mysql]# lltotal 8drwxr-xr-x 2 root root 4096 Jul 24 14:18 conf.ddrwxr-xr-x 2 root root 4096 Jul 24 14:18 data[root@dev mysql]# å‘½ä»¤è§£æžï¼šmkdir /usr/local/mysql/data #ç”¨äºŽæŒ‚è½½mysqlæ•°æ®æ–‡ä»¶mkdir /usr/local/mysql/conf.d #ç”¨äºŽæŒ‚è½½mysqlé…ç½®æ–‡ä»¶ 1.3 å¯åŠ¨å®¹å™¨1234567[root@dev mysql]# docker run --name mysql5.7 -p 3306:3306 -v /usr/local/mysql/data:/var/lib/mysql -v /usr/local/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=112233 -d mysql:5.7.1910151eef645f8621441585354ad11d1f98514cdb253c5d1b77db6c0c50327420[root@dev mysql]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES10151eef645f mysql:5.7.19 &quot;docker-entrypoint...&quot; 3 seconds ago Up 2 seconds 0.0.0.0:3306-&gt;3306/tcp mysql5.76f189daf5880 marvin/tomcat &quot;catalina.sh run&quot; 22 hours ago Up 22 hours 0.0.0.0:8080-&gt;8080/tcp tomcat8[root@dev mysql]# å…¶ä»–å‚æ•°ï¼š â€“restart alwaysï¼šå¼€æœºå¯åŠ¨â€“privileged=trueï¼šæå‡å®¹å™¨å†…æƒé™-e MYSQL_USER=â€marvinâ€ï¼šæ·»åŠ ç”¨æˆ·marvin-e MYSQL_PASSWORD=â€pwd123â€ï¼šè®¾ç½®marvinçš„å¯†ç ä¼Ÿpwd123-e MYSQL_ROOT_PASSWORD=â€rootpwd123â€ï¼šè®¾ç½®rootçš„å¯†ç ä¼Ÿrootpwd123â€“character-set-server=utf8ï¼šè®¾ç½®å­—ç¬¦é›†ä¸ºutf8â€“collation-server=utf8_general_ciï¼šè®¾ç½®å­—ç¬¦æ¯”è¾ƒè§„åˆ™ä¸ºutf8_general_ci æ³¨æ„ï¼šå¦‚æžœè¿è¡Œæ—¶æ·»åŠ äº†marvinç”¨æˆ·ï¼Œç”¨rootç™»å½•åŽæ‰§è¡Œç”¨æˆ·æŽˆæƒALTER USER &#39;marvin&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;password123&#39;;ï¼Œæ‰èƒ½ç”¨è¿œç¨‹å®¢æˆ·ç«¯è®¿é—®æ•°æ®åº“ã€‚ 1.4 æ£€æŸ¥ç»“æžœ1234567891011121314151617181920212223242526[root@dev mysql]# docker exec -it mysql5.7 mysql -uroot -p112233mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 9Server version: 8.0.11 MySQL Community Server - GPLCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || mysql || performance_schema || sys |+--------------------+4 rows in set (0.01 sec)mysql&gt; æˆåŠŸå®‰è£…mysql 1.5 è®¾ç½®è¿œç¨‹å®¢æˆ·ç«¯ç™»å½•1234mysql&gt; grant all privileges on *.* to root@&quot;%&quot; identified by &quot;root.123&quot; with grant option;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; é€šè¿‡å®¢æˆ·ç«¯åˆ›å»ºæ•°æ®ä¸€ä¸ªæ•°æ®åº“ï¼Œåˆ›å»ºä¸€å¼ è¡¨ åœ¨serverç«¯ç”¨å‘½ä»¤è¡ŒæŸ¥çœ‹:1234567891011121314151617181920212223242526272829mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || demo || mysql || performance_schema || sys |+--------------------+5 rows in set (0.00 sec)mysql&gt; use demo;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------+| Tables_in_demo |+----------------+| test |+----------------+1 row in set (0.00 sec)mysql&gt; select * from test;Empty set (0.00 sec)mysql&gt; å†çœ‹å®¿ä¸»æœºæ–‡ä»¶ç›®å½•ï¼š1234567891011121314151617181920212223[root@dev data]# pwd/usr/local/mysql/data[root@dev data]# lltotal 188480-rw-r----- 1 polkitd ssh_keys 56 Jul 24 16:46 auto.cnf-rw------- 1 polkitd ssh_keys 1675 Jul 24 16:46 ca-key.pem-rw-r--r-- 1 polkitd ssh_keys 1074 Jul 24 16:46 ca.pem-rw-r--r-- 1 polkitd ssh_keys 1078 Jul 24 16:46 client-cert.pem-rw------- 1 polkitd ssh_keys 1675 Jul 24 16:46 client-key.pemdrwxr-x--- 2 polkitd ssh_keys 4096 Jul 24 16:52 demo-rw-r----- 1 polkitd ssh_keys 1321 Jul 24 16:46 ib_buffer_pool-rw-r----- 1 polkitd ssh_keys 79691776 Jul 24 16:52 ibdata1-rw-r----- 1 polkitd ssh_keys 50331648 Jul 24 16:52 ib_logfile0-rw-r----- 1 polkitd ssh_keys 50331648 Jul 24 16:46 ib_logfile1-rw-r----- 1 polkitd ssh_keys 12582912 Jul 24 16:52 ibtmp1drwxr-x--- 2 polkitd ssh_keys 4096 Jul 24 16:46 mysqldrwxr-x--- 2 polkitd ssh_keys 4096 Jul 24 16:46 performance_schema-rw------- 1 polkitd ssh_keys 1675 Jul 24 16:46 private_key.pem-rw-r--r-- 1 polkitd ssh_keys 451 Jul 24 16:46 public_key.pem-rw-r--r-- 1 polkitd ssh_keys 1078 Jul 24 16:46 server-cert.pem-rw------- 1 polkitd ssh_keys 1675 Jul 24 16:46 server-key.pemdrwxr-x--- 2 polkitd ssh_keys 12288 Jul 24 16:46 sys[root@dev data]# å®Œç¾Žï¼ äºŒã€ ä½¿ç”¨dockerfileå¯åŠ¨mysqlå®¹å™¨2.1ã€ç¼–å†™docker fileåœ¨å½“å‰ç›®å½•ï¼ˆ/usr/local/mysql/ï¼‰åˆ›å»ºdockerfileæ–‡ä»¶ï¼Œç¼–è¾‘å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920FROM docker.io/mysql:5.7.19 #è®¾ç½®å…å¯†ç™»å½•ENV MYSQL_ALLOW_EMPTY_PASSWORD yes #å°†æ‰€éœ€æ–‡ä»¶æ”¾åˆ°å®¹å™¨ä¸­COPY setup.sh /mysql/setup.shCOPY schema.sql /mysql/schema.sqlCOPY privileges.sql /mysql/privileges.sqlCOPY conf.d /etc/mysql/conf.dRUN chmod 755 /mysql/*.sh# è®¾ç½®å¯ä»¥å…è®¸æŒ‚è½½çš„å·ï¼Œå¯ä»¥ç”¨æ¥å¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶# VOLUME /usr/local/mysql/data# è®¾ç½®å¯ä»¥æ˜ å°„çš„ç«¯å£EXPOSE 3306 #è®¾ç½®å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤CMD [&quot;sh&quot;, &quot;/mysql/setup.sh&quot;] 2.2ã€å†™å®¹å™¨å¯åŠ¨è„šæœ¬setup.shå’Œé…ç½®æ–‡ä»¶ã€‚setup.shå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930#!/bin/bashset -e #æŸ¥çœ‹mysqlæœåŠ¡çš„çŠ¶æ€ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œè¿™æ¡è¯­å¥å¯ä»¥åˆ é™¤echo `service mysql status` echo &apos;1.å¯åŠ¨mysql....&apos;#å¯åŠ¨mysqlservice mysql startsleep 3echo `service mysql status` echo &apos;2.å¼€å§‹å¯¼å…¥æ•°æ®....&apos;#å¯¼å…¥æ•°æ®mysql &lt; /mysql/schema.sqlecho &apos;3.å¯¼å…¥æ•°æ®å®Œæ¯•....&apos; sleep 3echo `service mysql status` #é‡æ–°è®¾ç½®mysqlå¯†ç echo &apos;4.å¼€å§‹ä¿®æ”¹å¯†ç ....&apos;mysql &lt; /mysql/privileges.sqlecho &apos;5.ä¿®æ”¹å¯†ç å®Œæ¯•....&apos; #sleep 3echo `service mysql status`echo `mysqlå®¹å™¨å¯åŠ¨å®Œæ¯•,ä¸”æ•°æ®å¯¼å…¥æˆåŠŸ` tail -f /dev/null è®¾ç½®å¯æ‰§è¡Œæƒé™ï¼š chmod u+x setup.sh è¿™é‡Œæ˜¯å…ˆå¯¼å…¥æ•°æ®ï¼Œç„¶åŽæ‰æ˜¯è®¾ç½®ç”¨æˆ·å’Œæƒé™ï¼Œæ˜¯å› ä¸ºmysqlå®¹å™¨ä¸€å¼€å§‹ä¸ºå…å¯†ç™»å½•ï¼ŒDockerfileä¸­æœ‰å¦‚ä¸‹è®¾ç½®ï¼šENV MYSQL_ALLOW_EMPTY_PASSWORD yes,æ­¤æ—¶æ‰§è¡Œå¯¼å…¥æ•°æ®å‘½ä»¤ä¸éœ€è¦ç™»å½•éªŒè¯æ“ä½œï¼Œå¦‚æžœæ˜¯å…ˆæ‰§è¡Œæƒé™æ“ä½œï¼Œé‚£ä¹ˆå¯¼å…¥æ•°æ®åˆ™éœ€è¦ç™»å½•éªŒè¯ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±éº»çƒ¦äº†è®¸å¤šã€‚ conf.dç›®å½•ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶my.cnf,å†…å®¹å¦‚ä¸‹ï¼š123456789101112[client]default-character-set=utf8mb4[mysqld]character-set-client-handshake = FALSEcharacter-set-server = utf8mb4collation-server = utf8mb4_unicode_ciinit_connect=â€™SET NAMES utf8mb4&apos;max_allowed_packet=100M[mysql]default-character-set=utf8mb4 2.3ã€éœ€è¦å¯¼å…¥æ•°æ®çš„mysqlè„šæœ¬å‘½ä»¤schema.sqlï¼š1234567891011121314151617181920212223-- åˆ›å»ºæ•°æ®åº“create database `docker_mysql` default character set utf8 collate utf8_general_ci; use docker_mysql; -- å»ºè¡¨DROP TABLE IF EXISTS `user`; CREATE TABLE `user` ( `id` bigint(20) NOT NULL, `created_at` bigint(40) DEFAULT NULL, `last_modified` bigint(40) DEFAULT NULL, `email` varchar(255) DEFAULT NULL, `first_name` varchar(255) DEFAULT NULL, `last_name` varchar(255) DEFAULT NULL, `username` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1; -- æ’å…¥æ•°æ®INSERT INTO `user` (`id`, `created_at`, `last_modified`, `email`, `first_name`, `last_name`, `username`)VALUES (0,1490257904,1490257904,&apos;john.doe@example.com&apos;,&apos;John&apos;,&apos;Doe&apos;,&apos;user&apos;); å› ä¸ºæ˜¯æµ‹è¯•ï¼Œæ‰€ä»¥éšä¾¿å†™äº†ä¸€ä¸ªå»ºè¡¨è¯­å¥ï¼Œå¦‚æžœæ˜¯çœŸå®žé¡¹ç›®è‚¯å®šä¸æ­¢è¿™ä¸€å¼ è¡¨ï¼Œç›´æŽ¥å°†å»ºè¡¨è¯­å¥è¦†ç›–è¿‡æ¥å°±å¥½ã€‚ 2.4ã€mysqlæƒé™è®¾ç½®å‘½ä»¤privileges.sqlï¼š1234567891011121314use mysql;select host, user from user;-- å› ä¸ºmysqlç‰ˆæœ¬æ˜¯5.7ï¼Œå› æ­¤æ–°å»ºç”¨æˆ·ä¸ºå¦‚ä¸‹å‘½ä»¤ï¼šcreate user docker identified by &apos;123456&apos;;-- å°†docker_mysqlæ•°æ®åº“çš„æƒé™æŽˆæƒç»™åˆ›å»ºçš„dockerç”¨æˆ·ï¼Œå¯†ç ä¸º123456ï¼šgrant all on docker_mysql.* to docker@&apos;%&apos; identified by &apos;123456&apos; with grant option;-- åˆ›å»ºrootç”¨æˆ·ï¼Œè®¾ç½®å¯†ç create user root identified by &apos;root.123&apos;;-- æŽˆæƒrootç”¨æˆ·æ‰€æœ‰æ•°æ®åº“å¯†ç grant all privileges on *.* to root@&quot;%&quot; identified by &quot;root.123&quot; with grant option;-- è¿™ä¸€æ¡å‘½ä»¤ä¸€å®šè¦æœ‰ï¼šflush privileges; 2.5ã€åˆ›å»ºé•œåƒdocker build -t marvin/docker-mysql:5.7.19 .1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162[root@dev mysql]# lltotal 28drwxr-xr-x 2 root root 4096 Jul 24 19:16 conf.ddrwxr-xr-x 6 polkitd ssh_keys 4096 Jul 26 09:52 datadrwxr-xr-x 2 root root 4096 Jul 26 12:02 datadir-rw-r--r-- 1 root root 504 Jul 26 12:41 dockerfile-rw-r--r-- 1 root root 578 Jul 24 18:38 privileges.sql-rw-r--r-- 1 root root 713 Jul 24 17:59 schema.sql-rwxr--r-- 1 root root 592 Jul 24 18:02 setup.sh[root@dev mysql]# rm -rf datadir/[root@dev mysql]# lltotal 24drwxr-xr-x 2 root root 4096 Jul 24 19:16 conf.ddrwxr-xr-x 6 polkitd ssh_keys 4096 Jul 26 09:52 data-rw-r--r-- 1 root root 504 Jul 26 12:41 dockerfile-rw-r--r-- 1 root root 578 Jul 24 18:38 privileges.sql-rw-r--r-- 1 root root 713 Jul 24 17:59 schema.sql-rwxr--r-- 1 root root 592 Jul 24 18:02 setup.sh[root@dev mysql]# docker build -t marvin/docker-mysql:5.7.19 .Sending build context to Docker daemon 219.8 MBStep 1/9 : FROM docker.io/mysql:5.7.19 ---&gt; 3e3878acd190Step 2/9 : ENV MYSQL_ALLOW_EMPTY_PASSWORD yes ---&gt; Running in 12565f8c0c75 ---&gt; c3603b8b0ce0Removing intermediate container 12565f8c0c75Step 3/9 : COPY setup.sh /mysql/setup.sh ---&gt; 25f810745d6eRemoving intermediate container c87437761955Step 4/9 : COPY schema.sql /mysql/schema.sql ---&gt; 6336d1ec2e5cRemoving intermediate container d18c0faf05e2Step 5/9 : COPY privileges.sql /mysql/privileges.sql ---&gt; 909fd9a0147eRemoving intermediate container 597ba357c5ddStep 6/9 : COPY conf.d /etc/mysql/conf.d ---&gt; 0df0b1a8419aRemoving intermediate container 5495b6697f5aStep 7/9 : RUN chmod 755 /mysql/*.sh ---&gt; Running in 648c99da183d ---&gt; 9637b6b5e125Removing intermediate container 648c99da183dStep 8/9 : EXPOSE 3306 ---&gt; Running in 0b4514d7ffcc ---&gt; 0acd4a3a39a6Removing intermediate container 0b4514d7ffccStep 9/9 : CMD sh /mysql/setup.sh ---&gt; Running in 9cc069e6e6aa ---&gt; effcf5bab4c1Removing intermediate container 9cc069e6e6aaSuccessfully built effcf5bab4c1[root@dev mysql]# [root@dev mysql]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmarvin/docker-mysql 5.7.19 effcf5bab4c1 27 seconds ago 412 MBmarvin/tomcat latest 098f61ab6f8b 2 days ago 489 MBnginx_image1 latest c4d5f5accc06 2 days ago 109 MBdocker.io/tomcat latest 2d43521f2b1a 8 days ago 463 MBdocker.io/nginx latest 8b89e48b5f15 9 days ago 109 MBdocker.io/mysql 5.7.19 3e3878acd190 9 months ago 412 MB[root@dev mysql]# 2.6ã€å¯åŠ¨å®¹å™¨docker run -d -p 13306:3306 -v /usr/local/mysql/datadir:/var/lib/mysql marvin/docker-mysql:5.7.1912345678[root@dev mysql]# docker run -d -p 13306:3306 -v /usr/local/mysql/datadir:/var/lib/mysql marvin/docker-mysql:5.7.19e55a41a9ace4fb09db5af3e77fab257764f938ffe2f7221ec312bf624f41543e[root@dev mysql]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESe55a41a9ace4 marvin/docker-mysql:5.7.19 &quot;docker-entrypoint...&quot; 4 seconds ago Up 3 seconds 0.0.0.0:13306-&gt;3306/tcp inspiring_bassi831da6f83e21 mysql:5.7.19 &quot;docker-entrypoint...&quot; 2 hours ago Up 2 hours 0.0.0.0:3306-&gt;3306/tcp mysql5.76f189daf5880 marvin/tomcat &quot;catalina.sh run&quot; 2 days ago Up 2 days 0.0.0.0:8080-&gt;8080/tcp tomcat8[root@dev mysql]# 2.7ã€æ£€æŸ¥ç»“æžœdocker exec -it e55a41a9ace4 mysql -udocker -p12345612345678910111213141516171819202122232425262728293031323334353637[root@dev mysql]# docker exec -it e55a41a9ace4 mysql -udocker -p123456 mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 5Server version: 5.7.19 MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || docker_mysql |+--------------------+2 rows in set (0.01 sec)mysql&gt; use docker_mysqlReading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------------+| Tables_in_docker_mysql |+------------------------+| user |+------------------------+1 row in set (0.01 sec)mysql&gt; 2.8ã€è¿œç¨‹ç™»å½• ç”¨å®¢æˆ·ç«¯é“¾æŽ¥åŽåˆ›å»ºäº†æ•°æ®åº“ï¼Œç„¶åŽé‡æ–°å¯åŠ¨dockerï¼Œæ•°æ®ä»ç„¶åœ¨ã€‚å®Œç¾Ž~~~ ç¾Žä¸­ä¸è¶³1ã€æ‰¾ä¸åˆ°mysql.sockåœ¨å®žè·µè¿‡ç¨‹ä¸­ä¹Ÿç¢°åˆ°äº†æ¯”è¾ƒæ¶å¿ƒçš„é—®é¢˜ï¼Œå°±æ˜¯å¯åŠ¨æ—¶è€æ˜¯æ‰¾ä¸åˆ°mysql.sockï¼Œæœ€å¼€å§‹åœ¨my.cnfé‡Œæ²¡æœ‰é…ç½®socketçš„è·¯å¾„ï¼Œè¿™æ ·æ²¡é—®é¢˜ã€‚ ä½†æ˜¯ä¸çŸ¥é“é»˜è®¤çš„mysql.sockçš„å®¹å™¨é‡Œæ˜¯åœ¨ä»€ä¹ˆè·¯å¾„ä¸Šï¼› äºŽæ˜¯åœ¨my.cnfé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šè¿™ä¸ªé…ç½®socket=/var/lib/mysql/mysql.sock; å¯åŠ¨çš„æ—¶å€™å°±æ€Žä¹ˆéƒ½ä¼šæŠ¥é”™äº†é”™è¯¯ä¿¡æ¯å¤§æ¦‚æ˜¯è¿™æ ·ï¼š1ERROR 2002 (HY000): Can&apos;t connect to local MySQL server through socket &apos;/var/lib/mysql/mysql.sock&apos; (2) ç„¶åŽå°†é…ç½®æ”¹ä¸ºsocket=/tmp/mysql.sockå¯åŠ¨çš„æ—¶å€™åˆå˜æˆè¿™æ ·äº†ï¼š12345678[root@dev mysql]# docker run -p 13306:3306 -v /usr/local/mysql/datadir:/var/lib/mysql marvin/docker-mysqlMySQL Community Server 5.7.19 is not running.1.å¯åŠ¨mysql......MySQL Community Server 5.7.19 is started.MySQL Community Server 5.7.19 is running.2.å¼€å§‹å¯¼å…¥æ•°æ®....ERROR 2002 (HY000): Can&apos;t connect to local MySQL server through socket &apos;/tmp/mysql.sock&apos; (2) docker stop docker rm docker rmi docker build åˆé‡æ–°docker runåå¤äº†ä¸€ä¸Šåˆã€‚æœ€åŽè¿˜æ˜¯æ²¡åŠžæ³•ï¼ŒæŠŠé…ç½®æ–‡ä»¶ä¸­çš„sockçš„é…ç½®ç»™åˆ é™¤äº†ã€‚ æ­£å¸¸å¯åŠ¨åŽæŸ¥çŸ¥sockçš„è·¯å¾„é»˜è®¤çš„åŽŸæ¥æ˜¯/var/run/mysqld12345root@63d3f0b5ea07:/var/run/mysqld# pwd/var/run/mysqldroot@63d3f0b5ea07:/var/run/mysqld# lsmysqld.pid mysqld.sock mysqld.sock.lockroot@63d3f0b5ea07:/var/run/mysqld# åº”è¯¥èƒ½ä¿®æ”¹ï¼Œä¸è¿‡ä¸æƒ³æŠ˜è…¾äº†ã€‚ 2ã€å¦‚æžœæŒ‚è½½äº†æ•°æ®æŒä¹…åŒ–çš„æ•°æ®å·ï¼Œå†æ¬¡buildå®¹å™¨ï¼Œå¯åŠ¨æ—¶ä¼šæŠ¥åˆ›å»ºç”¨æˆ·å¤±è´¥ç­‰ï¼Œå› ä¸ºå·²æœ‰ç”¨æˆ·äº†ã€‚å› æ­¤å¦‚æžœæ˜¯äºŒæ¬¡è¿è¡Œï¼Œè¦ä¹ˆåˆ é™¤æŽ‰æŒä¹…åŒ–çš„æ•°æ®ï¼Œè¦ä¹ˆä¿®æ”¹setup.shè„šæœ¬ï¼Œä¸è¦å†æ‰§è¡Œprivileges.sqlå’Œschema.sqlã€‚ æ‰©å±•ç”Ÿäº§çŽ¯å¢ƒä¸­å¯èƒ½æ•°æ®åº“è¦åšä¸»ä»Žã€è¯»å†™åˆ†ç¦»ç­‰ç­‰ï¼Œä½†æ˜¯å› ä¸ºæ•°æ®æ˜¯è¦å…±äº«çš„ï¼Œæ‰€ä»¥æœ‰å¯èƒ½ç”¨åˆ°ä¸‹çŸ¥è¯†. æ•°æ®å…±äº«å¦‚æžœè¦æŽˆæƒä¸€ä¸ªå®¹å™¨è®¿é—®å¦ä¸€ä¸ªå®¹å™¨çš„Volumeï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨-volumes-fromå‚æ•°æ¥æ‰§è¡Œdocker runã€‚1234$ docker run -it -h NEWCONTAINER --volumes-from container-test debian /bin/bashroot@NEWCONTAINER:/# ls /datatest-fileroot@NEWCONTAINER:/# å€¼å¾—æ³¨æ„çš„æ˜¯ä¸ç®¡container-testæ˜¯å¦è¿è¡Œï¼Œå®ƒéƒ½ä¼šèµ·ä½œç”¨ã€‚åªè¦æœ‰å®¹å™¨è¿žæŽ¥Volumeï¼Œå®ƒå°±ä¸ä¼šè¢«åˆ é™¤ã€‚ æ•°æ®å®¹å™¨å¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯ä½¿ç”¨çº¯æ•°æ®å®¹å™¨æ¥æŒä¹…åŒ–æ•°æ®åº“ã€é…ç½®æ–‡ä»¶æˆ–è€…æ•°æ®æ–‡ä»¶ç­‰ã€‚å®˜æ–¹çš„æ–‡æ¡£ä¸Šæœ‰è¯¦ç»†çš„è§£é‡Šã€‚ä¾‹å¦‚ï¼š 1docker run -it -v /dbdata:/dbdata --name dbdata centos è¯¥å‘½ä»¤å°†ä¼šåˆ›å»ºä¸€ä¸ªå·²ç»åŒ…å«åœ¨Dockerfileé‡Œå®šä¹‰è¿‡Volumeçš„postgresé•œåƒï¼Œè¿è¡Œechoå‘½ä»¤ç„¶åŽé€€å‡ºã€‚å½“æˆ‘ä»¬è¿è¡Œdocker pså‘½ä»¤æ—¶ï¼Œechoå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«æŸé•œåƒçš„ç”¨é€”ã€‚æˆ‘ä»¬å¯ä»¥ç”¨-volumes-fromå‘½ä»¤æ¥è¯†åˆ«å…¶å®ƒå®¹å™¨çš„Volumeï¼š åˆ›å»ºdb1å’Œdb2ä¸¤ä¸ªå®¹å™¨ï¼Œå¹¶ä½¿ç”¨â€“volumes-fromæŒ‚è½½dbdataå®¹å™¨ä¸­çš„æ•°æ®å·12[root@wls12c /]$ docker run -it --volumes-from dbdata --name db1 centos[root@wls12c /]$ docker run -it --volumes-from dbdata --name db2 centos è¿™æ ·ä¸‰ä¸ªå®¹å™¨ä»»ä½•ä¸€ä¸ªå®¹å™¨åœ¨è¯¥ç›®å½•ä¸‹å†™å…¥ï¼Œå…¶å®ƒå®¹å™¨éƒ½èƒ½çœ‹è§ã€‚ ä½¿ç”¨æ•°æ®å®¹å™¨çš„ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š ä¸è¦è¿è¡Œæ•°æ®å®¹å™¨ï¼Œè¿™çº¯ç²¹æ˜¯åœ¨æµªè´¹èµ„æºã€‚ ä¸è¦ä¸ºäº†æ•°æ®å®¹å™¨è€Œä½¿ç”¨â€œæœ€å°çš„é•œåƒâ€ï¼Œå¦‚busyboxæˆ–scratchï¼Œåªä½¿ç”¨æ•°æ®åº“é•œåƒæœ¬èº«å°±å¯ä»¥äº†ã€‚ä½ å·²ç»æ‹¥æœ‰è¯¥é•œåƒï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å ç”¨é¢å¤–çš„ç©ºé—´ã€‚ å¤‡ä»½å¤‡ä»½dbdataæ•°æ®å·å®¹å™¨ä¸­çš„æ•°æ®åˆ°ä¸»æœºçš„å½“å‰ç›®å½•ã€‚ 1234567891011[root@wls12c /]$ docker run --volumes-from dbdata -v $(pwd):/backup --name worker centos tar zcf /backup/backup.tar.gz /dbdatatar: Removing leading `/&apos; from member names[root@wls12c /]$ lsb2b boot dev lib media net root srv tmpbackup.tar.gz cgroup etc lib64 misc opt sbin sys usrbin dbdata home lost+found mnt proc selinux test var[root@wls12c /]$ tar -tvf backup.tar.gz drwxr-xr-x root/root 0 2016-08-26 10:51 dbdata/-rw-r--r-- root/root 0 2016-08-26 10:40 dbdata/demo-rw-r--r-- root/root 6 2016-08-26 10:48 dbdata/test.txt-rw-r--r-- root/root 0 2016-08-26 10:51 dbdata/hello æ¢å¤åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ•°æ®å·çš„å®¹å™¨1[root@wls12c /]$ docker run -v /dbdata/dbdata --name db centos /bin/bash æ¢å¤1[root@wls12c /]$ docker run --volumes-from db -v $(pwd):/backup centos tar xf /backup/backup.tar.gz æƒé™ä¸Žè®¸å¯é€šå¸¸ä½ éœ€è¦è®¾ç½®Volumeçš„æƒé™æˆ–è€…ä¸ºVolumeåˆå§‹åŒ–ä¸€äº›é»˜è®¤æ•°æ®æˆ–è€…é…ç½®æ–‡ä»¶ã€‚è¦æ³¨æ„çš„å…³é”®ç‚¹æ˜¯ï¼Œåœ¨Dockerfileçš„VOLUMEæŒ‡ä»¤åŽçš„ä»»ä½•ä¸œè¥¿éƒ½ä¸èƒ½æ”¹å˜è¯¥Volumeï¼Œæ¯”å¦‚ï¼š12345FROM debian:wheezyRUN useradd fooVOLUME /dataRUN touch /data/xRUN chown -R foo:foo /data è¯¥Docker fileä¸èƒ½æŒ‰é¢„æœŸé‚£æ ·è¿è¡Œï¼Œæˆ‘ä»¬æœ¬æ¥å¸Œæœ›touchå‘½ä»¤åœ¨é•œåƒçš„æ–‡ä»¶ç³»ç»Ÿä¸Šè¿è¡Œï¼Œä½†æ˜¯å®žé™…ä¸Šå®ƒæ˜¯åœ¨ä¸€ä¸ªä¸´æ—¶å®¹å™¨çš„Volumeä¸Šè¿è¡Œã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š 12345FROM debian:wheezyRUN useradd fooRUN mkdir /data &amp;&amp; touch /data/xRUN chown -R foo:foo /dataVOLUME /data Dockerå¯ä»¥å°†é•œåƒä¸­Volumeä¸‹çš„æ–‡ä»¶æŒ‚è½½åˆ°Volumeä¸‹ï¼Œå¹¶è®¾ç½®æ­£ç¡®çš„æƒé™ã€‚å¦‚æžœä½ æŒ‡å®šVolumeçš„ä¸»æœºç›®å½•å°†ä¸ä¼šå‡ºçŽ°è¿™ç§æƒ…å†µã€‚ å¦‚æžœä½ æ²¡æœ‰é€šè¿‡RUNæŒ‡ä»¤è®¾ç½®æƒé™ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦åœ¨å®¹å™¨å¯åŠ¨æ—¶ä½¿ç”¨CMDæˆ–ENTRYPOINTæŒ‡ä»¤æ¥æ‰§è¡Œï¼ˆè¯‘è€…æ³¨ï¼šCMDæŒ‡ä»¤ç”¨äºŽæŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼Œä¸ŽRUNç±»ä¼¼ï¼Œåªæ˜¯RUNæ˜¯é•œåƒåœ¨æž„å»ºæ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼‰ã€‚ åˆ é™¤Volumesè¿™ä¸ªåŠŸèƒ½å¯èƒ½ä¼šæ›´åŠ é‡è¦ï¼Œå¦‚æžœä½ å·²ç»ä½¿ç”¨docker rmæ¥åˆ é™¤ä½ çš„å®¹å™¨ï¼Œé‚£å¯èƒ½æœ‰å¾ˆå¤šçš„å­¤ç«‹çš„Volumeä»åœ¨å ç”¨ç€ç©ºé—´ã€‚ Volumeåªæœ‰åœ¨ä¸‹åˆ—æƒ…å†µä¸‹æ‰èƒ½è¢«åˆ é™¤ï¼š è¯¥å®¹å™¨æ˜¯ç”¨docker rm ï¼vå‘½ä»¤æ¥åˆ é™¤çš„ï¼ˆ-væ˜¯å¿…ä¸å¯å°‘çš„ï¼‰ã€‚ docker runä¸­ä½¿ç”¨äº†--rmå‚æ•° å³ä½¿ç”¨ä»¥ä¸Šä¸¤ç§å‘½ä»¤ï¼Œä¹Ÿåªèƒ½åˆ é™¤æ²¡æœ‰å®¹å™¨è¿žæŽ¥çš„Volumeã€‚è¿žæŽ¥åˆ°ç”¨æˆ·æŒ‡å®šä¸»æœºç›®å½•çš„Volumeæ°¸è¿œä¸ä¼šè¢«dockeråˆ é™¤ã€‚ é™¤éžä½ å·²ç»å¾ˆå°å¿ƒçš„ï¼Œæ€»æ˜¯åƒè¿™æ ·æ¥è¿è¡Œå®¹å™¨ï¼Œå¦åˆ™ä½ å°†ä¼šåœ¨/var/lib/docker/vfs/dirç›®å½•ä¸‹å¾—åˆ°ä¸€äº›åƒµå°¸æ–‡ä»¶å’Œç›®å½•ï¼Œå¹¶ä¸”è¿˜ä¸å®¹æ˜“è¯´å‡ºå®ƒä»¬åˆ°åº•ä»£è¡¨ä»€ä¹ˆã€‚ å‚è€ƒè¯¦è§£åˆ©ç”¨Dockerfileæž„å»ºmysqlé•œåƒå¹¶å®žçŽ°æ•°æ®çš„åˆå§‹åŒ–åŠæƒé™è®¾ç½®åŸºäºŽDockerfileæž„å»ºmysqldæœåŠ¡é•œåƒdockerfile å®žä¾‹æ‰¾ä¸åˆ°mysql.sockçš„é”™è¯¯è¯¦è§£]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerå­¦ä¹ æ¡ˆä¾‹ï¼šç”¨dockeréƒ¨ç½²tomcatæœåŠ¡]]></title>
    <url>%2F2018%2F07%2F23%2Fdocker%E5%AD%A6%E4%B9%A0%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%94%A8docker%E9%83%A8%E7%BD%B2tomcat%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[dockerå®žé™…æ¡ˆä¾‹ä¹‹åœ¨centOS7.4ä¸Šç”¨dockeréƒ¨ç½²tomcatæœåŠ¡ç®€ä¹¦åœ°å€ ä¸€ã€ä½¿ç”¨docker runå‘½ä»¤ç›´æŽ¥å¯åŠ¨ä¸€ä¸ªtomcatå®¹å™¨1.1 ä¸‹è½½å®˜æ–¹tomcaté•œåƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051[root@dev nginx]# docker search tomcatINDEX NAME DESCRIPTION STARS OFFICIAL AUTOMATEDdocker.io docker.io/tomcat Apache Tomcat is an open source implementa... 1942 [OK] docker.io docker.io/tomee Apache TomEE is an all-Apache Java EE cert... 51 [OK] docker.io docker.io/dordoka/tomcat Ubuntu 14.04, Oracle JDK 8 and Tomcat 8 ba... 49 [OK]docker.io docker.io/davidcaste/alpine-tomcat Apache Tomcat 7/8 using Oracle Java 7/8 wi... 27 [OK]docker.io docker.io/bitnami/tomcat Bitnami Tomcat Docker Image 19 [OK]docker.io docker.io/consol/tomcat-7.0 Tomcat 7.0.57, 8080, &quot;admin/admin&quot; 16 [OK]docker.io docker.io/cloudesire/tomcat Tomcat server, 6/7/8 15 [OK]docker.io docker.io/tutum/tomcat Base docker image to run a Tomcat applicat... 10 docker.io docker.io/meirwa/spring-boot-tomcat-mysql-app a sample spring-boot app using tomcat and ... 9 [OK]docker.io docker.io/jeanblanchard/tomcat Minimal Docker image with Apache Tomcat 8 docker.io docker.io/aallam/tomcat-mysql Debian, Oracle JDK, Tomcat &amp; MySQL 7 [OK]docker.io docker.io/rightctrl/tomcat CentOS , Oracle Java, tomcat application s... 3 [OK]docker.io docker.io/amd64/tomcat Apache Tomcat is an open source implementa... 2 docker.io docker.io/arm64v8/tomcat Apache Tomcat is an open source implementa... 2 docker.io docker.io/fabric8/tomcat-8 Fabric8 Tomcat 8 Image 2 [OK]docker.io docker.io/maluuba/tomcat7-java8 Tomcat7 with java8. 2 docker.io docker.io/99taxis/tomcat7 Tomcat7 1 [OK]docker.io docker.io/camptocamp/tomcat-logback Docker image for tomcat with logback integ... 1 [OK]docker.io docker.io/primetoninc/tomcat Apache tomcat 8.5, 8.0, 7.0 1 [OK]docker.io docker.io/jelastic/tomcat 0 docker.io docker.io/oobsri/tomcat8 Testing CI Jobs with different names. 0 docker.io docker.io/picoded/tomcat7 tomcat7 with jre8 and MANAGER_USER / MANAG... 0 [OK]docker.io docker.io/s390x/tomcat Apache Tomcat is an open source implementa... 0 docker.io docker.io/swisstopo/service-print-tomcat backend tomcat for service-print &quot;the true... 0 docker.io docker.io/trollin/tomcat 0 [root@dev nginx]# docker pull docker.io/tomcatUsing default tag: latestTrying to pull repository docker.io/library/tomcat ... latest: Pulling from docker.io/library/tomcat55cbf04beb70: Pull complete 1607093a898c: Pull complete 9a8ea045c926: Pull complete 1290813abd9d: Pull complete 8a6b982ad6d7: Pull complete abb029e68402: Pull complete 8cd067dc06dc: Pull complete 1b9ce2097b98: Pull complete d6db5874b692: Pull complete 25b4aa3d52c5: Pull complete 53ec227dabf0: Pull complete 242938ace8b4: Pull complete Digest: sha256:87ad70ceaafd5c71301b081b37ca2795bd6c7c1a5599a8c92c9447bbd225ae47Status: Downloaded newer image for docker.io/tomcat:latest[root@dev nginx]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEnginx_image1 latest c4d5f5accc06 57 minutes ago 109 MBdocker.io/tomcat latest 2d43521f2b1a 5 days ago 463 MBdocker.io/nginx latest 8b89e48b5f15 6 days ago 109 MB[root@dev nginx]# 1.2 å¯åŠ¨å®¹å™¨123456789101112131415161718192021222324252627282930313233343536373839404142434445[root@dev nginx]# docker run -p 8080:8080 docker.io/tomcat23-Jul-2018 09:31:43.954 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version: Apache Tomcat/8.5.3223-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built: Jun 20 2018 19:50:35 UTC23-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number: 8.5.32.023-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name: Linux23-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version: 3.10.0-693.2.2.el7.x86_6423-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture: amd6423-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home: /usr/lib/jvm/java-8-openjdk-amd64/jre23-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version: 1.8.0_171-8u171-b11-1~deb9u1-b1123-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor: Oracle Corporation23-Jul-2018 09:31:43.966 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE: /usr/local/tomcat23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME: /usr/local/tomcat23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=204823-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dorg.apache.catalina.security.SecurityListener.UMASK=002723-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dignore.endorsed.dirs=23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=/usr/local/tomcat23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=/usr/local/tomcat23-Jul-2018 09:31:43.967 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=/usr/local/tomcat/temp23-Jul-2018 09:31:43.968 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent Loaded APR based Apache Tomcat Native library [1.2.17] using APR version [1.5.2].23-Jul-2018 09:31:43.968 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].23-Jul-2018 09:31:43.968 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]23-Jul-2018 09:31:43.981 INFO [main] org.apache.catalina.core.AprLifecycleListener.initializeSSL OpenSSL successfully initialized [OpenSSL 1.1.0f 25 May 2017]23-Jul-2018 09:31:44.152 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;http-nio-8080&quot;]23-Jul-2018 09:31:44.168 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for servlet write/read23-Jul-2018 09:31:44.190 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;ajp-nio-8009&quot;]23-Jul-2018 09:31:44.193 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for servlet write/read23-Jul-2018 09:31:44.197 INFO [main] org.apache.catalina.startup.Catalina.load Initialization processed in 987 ms23-Jul-2018 09:31:44.247 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]23-Jul-2018 09:31:44.248 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet Engine: Apache Tomcat/8.5.3223-Jul-2018 09:31:44.281 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory [/usr/local/tomcat/webapps/docs]23-Jul-2018 09:31:44.886 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/usr/local/tomcat/webapps/docs] has finished in [606] ms23-Jul-2018 09:31:44.893 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory [/usr/local/tomcat/webapps/examples]23-Jul-2018 09:31:45.359 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/usr/local/tomcat/webapps/examples] has finished in [465] ms23-Jul-2018 09:31:45.359 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory [/usr/local/tomcat/webapps/ROOT]23-Jul-2018 09:31:45.396 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/usr/local/tomcat/webapps/ROOT] has finished in [37] ms23-Jul-2018 09:31:45.397 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory [/usr/local/tomcat/webapps/manager]23-Jul-2018 09:31:45.454 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/usr/local/tomcat/webapps/manager] has finished in [56] ms23-Jul-2018 09:31:45.454 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory [/usr/local/tomcat/webapps/host-manager]23-Jul-2018 09:31:45.499 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/usr/local/tomcat/webapps/host-manager] has finished in [45] ms23-Jul-2018 09:31:45.504 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]23-Jul-2018 09:31:45.533 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;ajp-nio-8009&quot;]23-Jul-2018 09:31:45.538 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 1340 ms 1.3 æµè§ˆå™¨æŸ¥çœ‹ 1.4 éƒ¨ç½²è‡ªå·±çš„webåº”ç”¨å°†æœ¬åœ°waråŒ…ä¸Šä¼ åˆ°å®¿ä¸»æœº/opt/tomcat8/ç›®å½•ä¸‹ã€‚å…ˆåœæ­¢åŽŸæ¥çš„tomcatå®¹å™¨ï¼Œç„¶åŽé‡æ–°æŒ‚åœ¨æ–°çš„waråŒ…å¹¶å¯åŠ¨ã€‚ 1234567891011121314151617[root@dev nginx]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES00a88a12a6f4 nginx_image1 &quot;/bin/sh -c &apos;nginx...&quot; About an hour ago Up About an hour 0.0.0.0:80-&gt;80/tcp nginx[root@dev nginx]# docker stop 00a88a12a6f400a88a12a6f4[root@dev nginx]# docker rm 00a88a12a6f400a88a12a6f4[root@dev nginx]# cd /opt/tomcat8/[root@dev tomcat8]# lltotal 25852-rw-r--r-- 1 root root 26470421 Jul 23 17:40 weixin.war[root@dev tomcat8]# docker run -d -v /opt/tomcat8/weixin.war:/usr/local/tomcat/webapps/weixin.war -p 8080:8080 docker.io/tomcat 2c2e386b7d1a2635f7be28c404a7a71a0ec8fda074b22035be6d62d28b8f8a50[root@dev tomcat8]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES2c2e386b7d1a docker.io/tomcat &quot;catalina.sh run&quot; 15 seconds ago Up 14 seconds 0.0.0.0:8080-&gt;8080/tcp mystifying_wilson[root@dev tomcat8]# è°ƒç”¨æŽ¥å£æŸ¥çœ‹å¯åŠ¨æƒ…å†µå®¹å™¨æ­£å¸¸å¯åŠ¨ã€‚ äºŒã€ä½¿ç”¨docker fileå¯åŠ¨tomcatå®¹å™¨2.1ã€ç¼–å†™docker fileåœ¨å½“å‰/opt/tomcat8/ç›®å½•ä¸‹åˆ›å»ºdockerfileæ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š12345from docker.io/tomcat:8.5.29 MAINTAINER marvin(qdhaiqiang@163.com) COPY webapps /usr/local/tomcat/webappsCOPY logs /usr/local/tomcat/logsCOPY conf/server.xml /usr/local/tomcat/conf/server.xml 2. 2ã€ç”¨dockerfile æž„å»ºå‡ºé•œtomcaté•œåƒ12345678910111213141516171819[root@dev tomcat8]# docker build -t marvin/tomcat . Sending build context to Docker daemon 26.48 MBStep 1/5 : FROM docker.io/tomcat:latest ---&gt; 2d43521f2b1aStep 2/5 : MAINTAINER marvin(qdhaiqiang@163.com) ---&gt; Running in de53a8b32cf8 ---&gt; fd9c7980f09eRemoving intermediate container de53a8b32cf8Step 3/5 : COPY webapps /usr/local/tomcat/webapps ---&gt; 010bf40a7e8dRemoving intermediate container 27feb6b70ca8Step 4/5 : COPY logs /usr/local/tomcat/logs ---&gt; 010946977b25Removing intermediate container aff55ea55e30Step 5/5 : COPY conf/server.xml /usr/local/tomcat/conf/server.xml ---&gt; 098f61ab6f8bRemoving intermediate container 18d241c36d15Successfully built 098f61ab6f8b[root@dev tomcat8]# æŸ¥çœ‹æ–°æž„å»ºçš„é•œåƒ1234567[root@dev tomcat8]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmarvin/tomcat latest 098f61ab6f8b 11 seconds ago 489 MBnginx_image1 latest c4d5f5accc06 About an hour ago 109 MBdocker.io/tomcat latest 2d43521f2b1a 5 days ago 463 MBdocker.io/nginx latest 8b89e48b5f15 6 days ago 109 MB[root@dev tomcat8]# 2.3ã€ è¿è¡Œæ–°æž„å»ºçš„é•œåƒ123456[root@dev tomcat8]# docker run --name tomcat8 -d -p 8080:8080 marvin/tomcat6f189daf58807a5683a8b9d6c01b1b30ae8770045aa551535d27b641681c256a[root@dev tomcat8]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES6f189daf5880 marvin/tomcat &quot;catalina.sh run&quot; 3 seconds ago Up 2 seconds 0.0.0.0:8080-&gt;8080/tcp tomcat8[root@dev tomcat8]# 2.4ã€ æŸ¥çœ‹é•œåƒè¿è¡Œæ•ˆæžœ 2.5ã€å¦‚æžœè¦é…ç½®httpsè¯ä¹¦çš„è¯ï¼Œå¯å°†jksçš„è¯ä¹¦æ”¾äºŽconfç›®å½•ä¸‹ï¼Œåœ¨serverä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨è¯ä¹¦ï¼Œé…ç½®å¦‚ä¸‹:123&lt;Connector port=&quot;8888&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; URIEncoding=&quot;UTF-8&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystoreFile=&quot;conf/SHA256withRSA__.haier.net.jks&quot; keystorePass=&quot;20170905&quot;/&gt; æˆ–è€…å¦‚æžœæ˜¯pemæ–‡ä»¶çš„è¯12345678910 &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11AprProtocol&quot; maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; &gt; &lt;UpgradeProtocol className=&quot;org.apache.coyote.http2.Http2Protocol&quot; /&gt; &lt;SSLHostConfig&gt; &lt;Certificate certificateKeyFile=&quot;conf/localhost-rsa-key.pem&quot; certificateFile=&quot;conf/localhost-rsa-cert.pem&quot; certificateChainFile=&quot;conf/localhost-rsa-chain.pem&quot; type=&quot;RSA&quot; /&gt; &lt;/SSLHostConfig&gt;&lt;/Connector&gt; 2.6ã€åœ¨åˆ†å¸ƒå¼å¾®æœåŠ¡ä¸­çš„åº”ç”¨ tomcatä½œä¸ºwebå®¹å™¨è¢«å¹¿æ³›åº”ç”¨ï¼Œä½†æˆ‘ä»¬ç›®å‰restfulæŽ¥å£ç‰¹åˆ«å¤šï¼Œæ¯ä¸ªæŽ¥å£éƒ½éœ€è¦ä¸€ä¸ªtomcatæ¥å¯åŠ¨ï¼Œä¸ºäº†é…ç½®éš”ç¦»ï¼Œä¸€èˆ¬éƒ½ä¼šæŠŠtomcatå®‰è£…æ–‡ä»¶å¤åˆ¶å¤šéï¼Œåˆ†åˆ«æŠŠwaråŒ…éƒ¨ç½²åœ¨å¯¹åº”çš„webappç›®å½•ä¸‹ï¼Œä½†è¿™æ ·é€ æˆçš„é—®é¢˜å°±æ˜¯tomcatå®‰è£…æ–‡ä»¶å ç”¨äº†å¤§é‡çš„ç£ç›˜ç©ºé—´ï¼Œä¸”ä¸ä¾¿äºŽç»Ÿä¸€ç®¡ç†ã€‚æ¯”å¦‚è¦ä¿®æ”¹tomcatçš„æŸä¸ªé…ç½®ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ‰€æœ‰çš„tomcatç›®å½•éƒ½è¦ä¿®æ”¹ä¸€éã€‚ åŸºäºŽä¸Šè¿°æƒ…å†µï¼Œä½œè€…è®¾è®¡äº†ä¸€ç§åŸºäºŽdockerçš„tomcatæœåŠ¡åŒ–æ–¹æ¡ˆã€‚ 2.7ã€æŸ¥çœ‹tomcatæ—¥å¿—å› ä¸ºtomcatæ—¥å¿—æ˜¯éšç€ç¨‹åºè¿è¡Œç”Ÿæˆçš„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨addæˆ–è€…copyå®¿ä¸»æœºç›®å½•çš„å½¢å¼æ·»åŠ åˆ°å®¹å™¨ï¼Œç›®å‰çš„æ€è·¯æ˜¯å°†å®¹å™¨ä¸­çš„logsæ•´ä¸ªç›®å½•copyåˆ°å®¿ä¸»æœºï¼Œå®žé™…åº”ç”¨ä¸­å¯ç”¨å®šæ—¶ä»»åŠ¡æ‰§è¡Œè„šæœ¬çš„å½¢å¼è§£å†³ã€‚1234567891011121314151617[root@dev logs]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES6f189daf5880 marvin/tomcat &quot;catalina.sh run&quot; 4 hours ago Up 4 hours 0.0.0.0:8080-&gt;8080/tcp tomcat8[root@dev logs]# [root@dev logs]# pwd/opt/tomcat8/logs[root@dev logs]# lltotal 0[root@dev logs]# docker cp 6f189daf5880:/usr/local/tomcat/logs /opt/tomcat8/[root@dev logs]# lltotal 16-rw-r----- 1 root root 7863 Jul 23 18:08 catalina.2018-07-23.log-rw-r----- 1 root root 0 Jul 23 18:07 host-manager.2018-07-23.log-rw-r----- 1 root root 930 Jul 23 18:08 localhost.2018-07-23.log-rw-r----- 1 root root 1424 Jul 23 22:49 localhost_access_log.2018-07-23.txt-rw-r----- 1 root root 0 Jul 23 18:07 manager.2018-07-23.log[root@dev logs]# 2.8 å¦ä¸€ä¸ªtomcat+jdkçš„ä¾‹å­1234567891011121314151617181920212223242526272829303132#tomcat8 openjdk8FROM centos:7MAINTAINER fengzp &lt;fengzp@gzyitop.com&gt;ENV LANG en_US.UTF-8ENV TOMCAT_VERSION 8.5.13ENV CATALINA_HOME /opt/apache-tomcat-$TOMCAT_VERSIONENV PATH $CATALINA_HOME/bin:$PATHENV JDK_VERSION 1.8.0WORKDIR $CATALINA_HOMERUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtimeRUN yum -y install java-$JDK_VERSION-openjdk-devel &amp;&amp; rm -rf /var/cache/yum/*ENV JAVA_HOME /usr/lib/jvm/java-openjdkRUN yum -y install wgetRUN cd /opt/ &amp;&amp; wget &quot;http://apache.fayea.com/tomcat/tomcat-8/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz&quot;RUN cd /opt/ &amp;&amp; tar -zxf apache-tomcat-$TOMCAT_VERSION.tar.gzRUN cd /opt/ &amp;&amp; rm -rf apache-tomcat-$TOMCAT_VERSION.tar.gzRUN chmod +x $CATALINA_HOME/bin/*.shVOLUME $CATALINA_HOME/webapps VOLUME $CATALINA_HOME/logsVOLUME $CATALINA_HOME/confEXPOSE 8080CMD $CATALINA_HOME/bin/startup.sh &amp;&amp; tail -F $CATALINA_HOME/logs/catalina.out ä¸‰ã€ä¸é€‚ç”¨å®¹å™¨è‡ªå¸¦jdk3.1 å…ˆå°†ä¸‹è½½å¥½çš„jdkå’Œtomcatä¸Šä¼ åˆ°å®¿ä¸»æœåŠ¡å™¨12[root@dev tomcat8]# lsapache-tomcat-7.0.70.tar.gz jdk-7u80-linux-x64.tar.gz 3.2 dockerfileæ–‡ä»¶å¦‚ä¸‹1234567891011#pull down centos imageFROM centosMAINTAINER test@test.com#copy jdk and tomcat into imageADD ./apache-tomcat-7.0.70.tar.gz /rootADD ./jdk-7u80-linux-x64.tar.gz /root#set environment variableENV JAVA_HOME /root/jdk1.7.0_80ENV PATH $JAVA_HOME/bin:$PATH#define entry point which will be run first when the container starts upENTRYPOINT /root/apache-tomcat-7.0.70/bin/startup.sh &amp;&amp; tail -F /root/apache-tomcat-7.0.70/logs/catalina.out å››ã€å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/qq_32351227/article/details/78673591https://www.cnblogs.com/zydev/p/5804289.html]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerå­¦ä¹ æ¡ˆä¾‹ï¼šç”¨dockeréƒ¨ç½²nginxæœåŠ¡]]></title>
    <url>%2F2018%2F07%2F22%2Fdocker%E5%AD%A6%E4%B9%A0%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%94%A8docker%E9%83%A8%E7%BD%B2nginx%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[dockerå®žé™…æ¡ˆä¾‹ä¹‹åœ¨centOS7.4ä¸Šç”¨dockeréƒ¨ç½²nginxæœåŠ¡ç®€ä¹¦åœ°å€] ä¸€ã€ä½¿ç”¨docker runå‘½ä»¤ç›´æŽ¥å¯åŠ¨ä¸€ä¸ªnginxå®¹å™¨ç›´æŽ¥ä¸Šç»“æžœè¿è¡Œè„šæœ¬ï¼š1ã€ä¸‹è½½æœ€æ–°ç‰ˆnginxçš„dockeré•œåƒ1$ docker pull nginx 2ã€å¯åŠ¨å®¹å™¨12345678docker run \--name centos_nginx \-d -p 80:80 \-v /usr/local/nginx/html:/usr/share/nginx/html \-v /usr/local/nginx/logs:/var/log/nginx \-v /usr/local/nginx/conf/nginx.conf:/etc/nginx/nginx.conf:ro \-v /usr/local/nginx/conf/conf.d:/etc/nginx/conf.d \nginx è¿™é‡Œæœ‰å‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼šï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªâ€œ-vâ€ï¼Œæ˜¯é¡¹ç›®ä½ç½®ï¼ŒæŠŠé¡¹ç›®æ”¾åˆ°æŒ‚è½½åˆ°çš„ç›®å½•ä¸‹å³å¯ï¼›ï¼ˆ2ï¼‰ç¬¬äºŒä¸ªâ€œ-vâ€ï¼Œæ˜¯æŒ‚è½½çš„ä¸»é…ç½®æ–‡ä»¶â€nginx.confâ€ï¼Œæ³¨æ„â€nginx.confâ€æ–‡ä»¶å†…æœ‰ä¸€è¡Œâ€include /etc/nginx/conf.d/*.conf;â€ï¼Œè¿™ä¸ªincludeæŒ‡å‘äº†å­é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œæ­¤å¤„æ³¨æ„includeåŽæ‰€è·Ÿçš„è·¯å¾„ä¸€å®šä¸è¦å‡ºé”™ã€‚ï¼ˆ3ï¼‰ç¬¬ä¸‰ä¸ªâ€œ-vâ€ï¼ŒæŠŠdockerå†…å­é…ç½®æ–‡ä»¶çš„è·¯å¾„ä¹ŸæŒ‚è½½äº†å‡ºæ¥ï¼Œæ³¨æ„è¦ä¸Žï¼ˆ2ï¼‰ä¸­includeæŒ‡å‘è·¯å¾„ä¸€è‡´ï¼ˆ4ï¼‰é‡ç‚¹å¼ºè°ƒä¸€ä¸‹ï¼Œnginx.confæ˜¯æŒ‚è½½äº†ä¸€ä¸ªæ–‡ä»¶ï¼ˆdockeræ˜¯ä¸æŽ¨èè¿™æ ·ç”¨çš„ï¼‰ï¼Œconf.dæŒ‚è½½çš„æ˜¯ä¸€ä¸ªç›®å½• å†çœ‹å®¿ä¸»æœºé…ç½®ï¼š123456[root@dev nginx]# lltotal 12drwxr-xr-x 3 root root 4096 Jul 19 11:15 confdrwxr-xr-x 3 root root 4096 Jul 19 10:34 htmldrwxr-xr-x 2 root root 4096 Jul 19 10:41 logs[root@dev nginx]# /usr/local/nginx/conf/nginx.conf1234567891011121314151617181920212223242526272829303132user root;worker_processes 1;error_log /var/log/nginx/error.log warn;pid /var/run/nginx.pid; events &#123; worker_connections 1024;&#125;http &#123; include /etc/nginx/mime.types; default_type application/octet-stream; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /var/log/nginx/access.log main; sendfile on; #tcp_nopush on; keepalive_timeout 65; autoindex on; #gzip on; client_max_body_size 100M; client_header_buffer_size 128k; large_client_header_buffers 4 128k; include /etc/nginx/conf.d/*.conf; &#125; /usr/local/nginx/conf/conf.d/default.conf12345678910111213141516171819202122232425262728293031323334353637383940414243444546server &#123; listen 80; server_name localhost; #charset koi8-r; #access_log /var/log/nginx/log/host.access.log main; location / &#123; root /usr/share/nginx/html/default; index index.html index.htm; autoindex on; #try_files $uri /index/index/page.html; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&apos;s document root # concurs with nginx&apos;s one # #location ~ /\.ht &#123; # deny all; #&#125; &#125; /usr/local/nginx/html/default/index.html123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx! This is a demo!&lt;/title&gt;&lt;style&gt; body &#123; width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;****************************&lt;/h1&gt;&lt;h1 align=&quot;center&quot; style=&quot;color:red;&quot; &gt;Welcome to nginx! &lt;/h1&gt;&lt;h1&gt;****************************&lt;/h1&gt;&lt;p&gt;If you see this page, the nginx web server is successfully installed andworking. Further configuration is required.&lt;/p&gt; &lt;p&gt;For online documentation and support please refer to&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;Commercial support is available at&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; /usr/local/nginx/logs/access.log1234567194.105.136.181 - - [19/Jul/2018:04:29:59 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36&quot; &quot;-&quot;94.102.52.77 - - [19/Jul/2018:04:41:30 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;libwww-perl/6.34&quot; &quot;-&quot;187.74.100.192 - - [19/Jul/2018:04:59:21 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36&quot; &quot;-&quot;106.11.225.139 - - [19/Jul/2018:05:17:41 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1&quot; &quot;-&quot;103.3.76.194 - - [19/Jul/2018:05:33:48 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36&quot; &quot;-&quot;106.11.226.243 - - [19/Jul/2018:05:42:05 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1&quot; &quot;-&quot;177.137.62.62 - - [19/Jul/2018:06:18:32 +0000] &quot;GET / HTTP/1.1&quot; 200 742 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36&quot; &quot;-&quot; å¯åŠ¨æ•ˆæžœï¼š äºŒã€ ä½¿ç”¨docker fileå¯åŠ¨nginxå®¹å™¨doekerå¸¸ç”¨å‘½ä»¤ï¼š 1ã€ç¼–å†™docker fileåœ¨ä»»æ„ç›®å½•åˆ›å»ºä¸€ä¸ªnginx.Dockerfile æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š123456789101112131415# Base images åŸºç¡€é•œåƒFROM nginx MAINTAINER marvinENV RUN_USER nginx ENV RUN_GROUP nginx ENV DATA_DIR /usr/share/nginx/htmlENV LOG_DIR /var/log/nginxRUN mkdir /var/log/nginx -p RUN chown nginx.nginx -R /var/log/nginxADD html /usr/share/nginx/htmlADD logs /var/log/nginxADD conf/nginx.conf /etc/nginx/nginx.confADD conf/conf.d /etc/nginx/conf.dEXPOSE 80ENTRYPOINT nginx -g &quot;daemon off;&quot; åšäº†è¿™ä¹ˆå‡ ä»¶äº‹ï¼š 1ã€æ‹‰å–ä¸€ä¸ªnginxé•œåƒã€‚2ã€è®¾ç½®äº†å‡ ä¸ªå˜é‡ã€‚3ã€åˆ›å»ºäº†å‡ ä¸ªéœ€è¦çš„ç›®å½•ã€‚4ã€æŠŠå½“å‰ç›®å½•ä¸‹çš„webç¨‹åºå¤åˆ¶åˆ°é•œåƒçš„/data/webç›®å½•ã€‚5ã€æŠŠnginx.confé…ç½®æ–‡ä»¶å’Œdefault.confé…ç½®æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­ã€‚6ã€è®¾ç½®ä¸€ä¸ªé»˜è®¤ç«¯å£ã€‚7ã€æœ€åŽè®¾ç½®äº†å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæˆ‘ç”¨æ¥å¯åŠ¨nginxç¨‹åºï¼Œæ³¨æ„è¿™ä¸ªå‘½ä»¤ä¸èƒ½é”™ï¼Œä¸ç„¶å®¹å™¨å¯åŠ¨ä¸äº†ã€‚è¿™æ ·è®¾ç½®åŽï¼Œå½“ä½ docker runè¿è¡Œæ­¤é•œåƒæ—¶ä¸éœ€è¦åœ¨åŽé¢å†æ¬¡æ‰§è¡Œéœ€è¦æ‰§è¡Œçš„å‘½ä»¤äº†ã€‚8ã€ADDåŽé¢srcçš„è·¯å¾„ä¸è¦æ˜¯ç»å¯¹è·¯å¾„ï¼Œæœ€å¥½æ˜¯dockerfileå’Œè¿™äº›æ·»åŠ çš„ç›®å½•æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œå¦åˆ™buildæ—¶ä¼šæç¤ºlstat usr/local/nginx/html: no such file or directoryçš„é”™è¯¯ï¼Œåˆ«é—®ä¸ºä»€ä¹ˆï¼Œç»éªŒä¹‹è°ˆï¼ 2ã€ç”¨dockerfile æž„å»ºå‡ºé•œnginxé•œåƒ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849[root@dev nginx]# lsconf dockerfile html logs[root@dev nginx]# docker build -t nginx_image1 . Sending build context to Docker daemon 27.65 kBStep 1/14 : FROM nginx ---&gt; 8b89e48b5f15Step 2/14 : MAINTAINER marvin ---&gt; Using cache ---&gt; fc935dc63140Step 3/14 : ENV RUN_USER nginx ---&gt; Using cache ---&gt; 7ca3b90ddc2aStep 4/14 : ENV RUN_GROUP nginx ---&gt; Using cache ---&gt; a2e2674d4c9fStep 5/14 : ENV DATA_DIR /usr/share/nginx/html ---&gt; Using cache ---&gt; f031dd5f8ce0Step 6/14 : ENV LOG_DIR /var/log/nginx ---&gt; Using cache ---&gt; e57a42b5bea0Step 7/14 : RUN mkdir /var/log/nginx -p ---&gt; Using cache ---&gt; 0cbaaac3d55bStep 8/14 : RUN chown nginx.nginx -R /var/log/nginx ---&gt; Using cache ---&gt; 714919c0618bStep 9/14 : ADD html /usr/share/nginx/html ---&gt; 1c75fe9cdd3fRemoving intermediate container 702f4e3ace2eStep 10/14 : ADD logs /var/log/nginx ---&gt; 545ba7cc270bRemoving intermediate container 123bb6c3703cStep 11/14 : ADD conf/nginx.conf /etc/nginx/nginx.conf ---&gt; d96a6dfa8ba9Removing intermediate container db2394df7691Step 12/14 : ADD conf/conf.d /etc/nginx/conf.d ---&gt; d02f5acc99deRemoving intermediate container fdc7c2542990Step 13/14 : EXPOSE 80 ---&gt; Running in 679ecad9d883 ---&gt; 9ee05d0ab66fRemoving intermediate container 679ecad9d883Step 14/14 : ENTRYPOINT nginx -g &quot;daemon off;&quot; ---&gt; Running in 774ac2a000ac ---&gt; c4d5f5accc06Removing intermediate container 774ac2a000acSuccessfully built c4d5f5accc06[root@dev nginx]# æ³¨æ„æœ€åŽé¢çš„ç‚¹ (â€œ.â€)ï¼Œè¡¨ç¤ºdockerfileæ‰€åœ¨å½“å‰ç›®å½•ã€‚ ä»Žæ‰§è¡Œè¿‡ç¨‹å¯ä»¥çœ‹å‡ºä¸€å…±åä¸‰ä¸ªæ­¥éª¤ï¼Œéƒ½å®Œæˆäº†ã€‚å†æŸ¥çœ‹ç›®å‰çš„é•œåƒï¼š12345[root@dev nginx]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEnginx_image1 latest c4d5f5accc06 47 seconds ago 109 MBdocker.io/nginx latest 8b89e48b5f15 6 days ago 109 MB[root@dev nginx]# å¯ä»¥çœ‹åˆ°ä»Žå®˜æ–¹æ‹‰å–äº†ä¸€ä¸ªnginxé•œåƒï¼Œç„¶åŽåœ¨æ­¤é•œåƒçš„åŸºç¡€ä¸Šæž„å»ºäº†nginx_image1é•œåƒã€‚æ³¨æ„ï¼Œç”±äºŽnginx_image1æ˜¯åœ¨nginxé•œåƒçš„åŸºç¡€ä¸Šæž„å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥å¦‚æžœä½ è¦åˆ é™¤nginxé•œåƒæ˜¯ä¸å…è®¸çš„ï¼Œåªæœ‰å…ˆåˆ é™¤nginx_image1é•œåƒåŽæ‰å¯ä»¥åˆ é™¤nginxé•œåƒã€‚ 3ã€ è¿è¡Œæ–°æž„å»ºçš„é•œåƒ12345678910[root@dev nginx]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEnginx_image1 latest c4d5f5accc06 47 seconds ago 109 MBdocker.io/nginx latest 8b89e48b5f15 6 days ago 109 MB[root@dev nginx]# docker run --name nginx -d -p 80:80 nginx_image100a88a12a6f4037c406a64f12e8c664cd1f1cbe1eb8c1c29371aa091a01ca161[root@dev nginx]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES00a88a12a6f4 nginx_image1 &quot;/bin/sh -c &apos;nginx...&quot; 15 seconds ago Up 14 seconds 0.0.0.0:80-&gt;80/tcp nginx[root@dev nginx]# å…¶ä»–é…ç½®ä¸Žä¸Šé¢æƒ…å†µä¸€ä¸‹çš„é…ç½®ï¼Œæµè§ˆå™¨æŸ¥çœ‹æ•ˆæžœ ä¸‰ã€ å¤‡æ³¨3.1 docker run æ‰§è¡Œå®Œæ²¡æœ‰å‡ºé”™ï¼Œä½†æ˜¯docker psæ—¶æ²¡æœ‰è¿è¡Œçš„å®¹å™¨ã€‚æ–¹æ¡ˆï¼šç”¨docker ps -a èƒ½çœ‹åˆ°æ²¡æœ‰å¯åŠ¨å®¹å™¨ã€‚ç”¨docker logs æŸ¥çœ‹å®¹å™¨å¯åŠ¨æ—¶çš„log 3.2 åˆ é™¤docker é•œåƒä¸­REPOSITORY å’Œ TAG ä¸º Noneçš„é•œåƒ docker images|grep none|awk â€˜{print $3}â€™|xargs docker rmi ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç»™æŸä¸ªé•œåƒæŒ‡å®šREPOSITORY å’ŒTAG:docker tag [image id] [name]:[ç‰ˆæœ¬] ä¾‹å¦‚: docker tag b03b74b01d97 docker-redis:0.0.1 å‚è€ƒæ–‡ç« https://my.oschina.net/u/3375733/blog/1591091http://www.ywnds.com/?p=7611]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬--ä»ŽEclipseè½¬ç§»åˆ°IntelliJ IDEAä¸€ç‚¹å¿ƒå¾—]]></title>
    <url>%2F2018%2F07%2F11%2F%E8%BD%AC--%E4%BB%8EEclipse%E8%BD%AC%E7%A7%BB%E5%88%B0IntelliJ%20IDEA%E4%B8%80%E7%82%B9%E5%BF%83%E5%BE%97%2F</url>
    <content type="text"><![CDATA[ä»Žeclipseåˆ°Intellijçš„å„ç§ä¸é€‚åº”åœ¨æ­¤è§£å†³ç®€ä¹¦åœ°å€ ä½¿ç”¨IntelliJ IDEAå…¶å®žå¹¶ä¸å¤ªä¹…ï¼Œç”¨äº†è¿™æ®µæ—¶é—´ä»¥åŽï¼Œè§‰å¾—çš„ç¡®å¾ˆæ˜¯å¥½ç”¨ã€‚åˆšåˆšä»ŽEclipseè½¬è¿‡æ¥çš„å¾ˆå¤šäººå¼€å§‹å¯èƒ½ä¸é€‚åº”ï¼Œæˆ‘å°±æŠŠä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›ç»éªŒå’Œå¸¸ç”¨åŠŸèƒ½åˆ†äº«ä¸‹ï¼Œå½“ç„¶åœ¨çœ‹è¿™ç¯‡ä¹‹å‰æŽ¨èä½ å…ˆçœ‹å®ŒIntelliJ IDEA çš„ 20 ä¸ªä»£ç è‡ªåŠ¨å®Œæˆçš„ç‰¹æ€§ï¼Œè¿™ç¯‡æ–‡ç« å¯¹è‡ªåŠ¨å®Œæˆçš„ç‰¹æ€§ä»‹ç»çš„éžå¸¸å¥½ï¼Œåªæ˜¯å¿«æ·é”®è¯´æ˜Žéƒ¨åˆ†è¿˜å¯ä»¥æ›´å®Œå–„ä¸€äº›ï¼Œå¯ä»¥ç…§é¡¾ä¸‹é»˜è®¤ç»‘å®šé”®ä½ä¸ä¸€è‡´çš„ç«¥éž‹ã€‚æœ¬æ–‡åœ¨è¯´æ˜Žå¿«æ·é”®çš„æ—¶å€™æ˜¯æ ¹æ®Mac OSX 10.5+çš„é»˜è®¤keymapï¼Œå½“ç„¶ä¹Ÿä¼šæä¾›ç›¸å…³çš„æ–‡å­—è¯´æ˜Žï¼Œå¦‚æžœå’Œæˆ‘çš„ç»‘å®šä¸ä¸€è‡´çš„å¯ä»¥ç›´æŽ¥åŽ»keymapä¸­æœç´¢å³å¯ã€‚ åŸºæœ¬è®¾ç½®æ˜¾ç¤ºè¡Œå·è¿™ä¸ªä»¥å‰åœ¨Eclipseä¸­æ˜¯ä¸ªå¾ˆç®€å•çš„é—®é¢˜ï¼Œè½¬ç§»åˆ°IntelliJä¸Šä»¥åŽçš„ä¸€äº›äººä¹Ÿé—®è¿‡è¿™ä¸ªé—®é¢˜ã€‚ä½¿ç”¨åŒæ ·çš„æ–¹å¼è®¾ç½®äº†ä»¥åŽå‘çŽ°åªæ˜¯å¯¹å½“å‰æ–‡ä»¶èµ·ä½œç”¨äº†ï¼Œæ‰“å¼€å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¾ç„¶æ²¡æœ‰è¡Œå·ã€‚å°±å¥½æ¯”ä½ åªæ˜¯åœ¨vimä¸­æ‰§è¡Œå‘½ä»¤set numberï¼Œè€Œä¸æ˜¯åœ¨.vimrcä¸­è®¾ç½®ä¸€æ ·çš„æ•ˆæžœã€‚è¿™ä¸ªæ˜¯éœ€è¦åœ¨IDE Settingsä¸­è®¾ç½®ä¸‹çš„ï¼Œå¦‚å›¾æ‰€ç¤ºå‹¾é€‰å³å¯: å…¶ä»–è®¾ç½®å¯å‚ç…§è¯¥è®¾ç½®é¡¹å‹¾é€‰å³å¯ï¼Œä¾‹å¦‚æ˜¾ç¤ºç©ºæ ¼ç­‰ç­‰. æ–‡ä»¶å’Œå¯¼èˆªå…³è”æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ç»å¸¸éœ€è¦æ‰“å¼€æŸä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæƒ³åœ¨å·¦è¾¹çš„æ–‡ä»¶æ ‘ä¸Šè‡ªåŠ¨æ‰“å¼€å…³è”åˆ°ä½ç½®ï¼Œè¿™æ ·å¾ˆæ–¹ä¾¿çš„æ‰¾å¯»æœ¬ç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶æˆ–è€…å…¶ä»–çš„ç›¸å…³æ–‡ä»¶ï¼Œå…¶å®žè¿™ä¸ªIntelliJæä¾›äº†å¥½å‡ ç§è§£å†³æ–¹æ¡ˆï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å’ŒEclipseä¸€æ ·çš„æ–¹å¼ï¼Œå¦‚ä¸‹: ä»¥å‰åœ¨Eclipseä¸­è®¾ç½®ä¹Ÿå¾ˆç®€å•ï¼Œä½†æ˜¯IntelliJé‡Œé¢ç¨å¾®æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå¦‚æžœæƒ³ä¸´æ—¶ä¸€æ¬¡çš„è¯ï¼Œæ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ç‚¹å‡»ä¸‹å›¾çš„å°åœ°çƒï¼ˆç¬¬ä¸€çœ¼çœ‹çš„æ—¶å€™å¾ˆåƒä¸ªå°åœ°çƒä»ªï¼‰å›¾æ ‡å³å¯ å¦‚æžœä½ æƒ³å’ŒEclipseçš„é‚£ä¸ªä¸€æ ·ï¼Œè®©è¿™ä¸€åˆ‡è‡ªåŠ¨çš„è¯ï¼Œé‚£ä¹ˆåœ¨ä¸Šå›¾çš„æµ®å±‚ä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªé€‰é¡¹AutoScroll to Sourceå’ŒAutoScroll from sourceï¼ŒIntelliJå¾ˆäººæ€§åŒ–çš„åˆ†äº†ä¸¤ä¸ªè®¾ç½®åœ¨é‡Œé¢ï¼Œä½ ä¸¤ä¸ªéƒ½å‹¾é€‰å°±æ˜¯åŸºæœ¬å’ŒEclipseçš„åŠŸèƒ½ä¿æŒäº†å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯å‹¾é€‰ä¸€ä¸ªè‡ªç„¶ä¹Ÿå¯ä»¥. è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯åˆ©ç”¨IntelliJæä¾›çš„Navigation Barï¼ŒIntelliJå¾ˆå¤šåŠŸèƒ½æ“ä½œéƒ½å¯ä»¥é”®ç›˜åŒ–ï¼Œè¿™ä¸ªå°±æ˜¯å–œæ¬¢é”®ç›˜åŒ–æ“ä½œçš„äººçš„å¿…å¤‡åŠŸèƒ½ï¼Œæ“ä½œæ–¹å¼å°±æ˜¯æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨å¿«æ·é”®âŒ˜+UP (Jump to Navigation Bar)ï¼Œç„¶åŽå°±ä¼šå‡ºçŽ°ä¸€ä¸ªä¸‹æ‹‰ï¼ŒåŸºæœ¬å°±æ˜¯è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶åˆ—è¡¨ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸Šä¸‹å·¦å³çš„é”®ä½æ¥é€‰æ‹©å…¶ä»–ç›®å½•ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ å¤‡æ³¨:æ­¤å¤„å»ºè®®æŠŠView &gt; Navigation Barçš„é€‰é¡¹ç‚¹æŽ‰ï¼Œè¿™æ ·å°±ä½¿ç”¨å¿«æ·é”®ä¹‹åŽå°±ä¼šåœ¨ä½ é¼ æ ‡çš„ä½ç½®å‡ºçŽ°ï¼Œæ„Ÿè§‰ä¼šæ›´è¾“å…¥ä¸€äº›ï¼Œå½“ç„¶è¿™æ ·ä½ å°±åŸºæœ¬å¤±åŽ»äº†ä½¿ç”¨é¼ æ ‡çš„æƒåˆ©ï¼Œè¿™ä¸ªéœ€è¦ä½ æ ¹æ®ä¸ªäººç™–å¥½ä½¿ç”¨å³å¯ã€‚ å¿«æ·é”®ä½¿ç”¨å¦‚æžœä½ æ˜¯è‹¹æžœç”µè„‘ç”¨æˆ·çš„è¯ï¼Œå»ºè®®ä½ æ”¹æˆMac OSX 10.5+çš„é”®ä½ç»‘å®šï¼Œå› ä¸ºMac OSX 10.5è¿™ä¸ªå…¼å®¹Windowsçš„ç‰ˆæœ¬çš„é”®ä½å®žåœ¨æ˜¯å¤ªè¹©è„šäº†ï¼Œç”¨ç€æ˜¯çœŸéš¾å—ï¼Œå¥½æ¯”ä½ é»˜è®¤ä¹ æƒ¯âŒ˜+wæ˜¯å…³é—­æ ‡ç­¾ï¼Œåœ¨è¿™ä¸ªé”®ä½ç»‘å®šä¸­ç«Ÿç„¶æ˜¯æ ¹æ®ç¬¦å·é€‰æ‹©æ–‡æœ¬çš„ä¸€ä¸ªå¿«æ·é”®. è¿™é‡Œä¸»è¦ä»‹ç»å‡ ä¸ªå¯èƒ½å¤§å®¶å¸¸ç”¨çš„ï¼Œæˆ–è€…æ˜¯ä½ å¯èƒ½å¹¶ä¸çŸ¥é“IntelliJä¸­æœ‰çš„å‡ ä¸ªå¿«æ·é”®ï¼Œç‰¹åˆ«å¸¸ç”¨çš„ä½ ç›´æŽ¥å‚ç…§å®˜ç½‘çš„Keymapä»‹ç»Getting Startedå°±å¯ä»¥äº†ã€‚å­¦ä¼šåœ¨Keymapä¸­è‡ªå·±æŸ¥è¯¢éœ€è¦çš„å¿«æ·é”®æ˜¯ä¸»è¦çš„ï¼Œä¸è¦æ¯æ¬¡éƒ½æ‰“å¼€é‚£ä¸ªæ²¡ç”¨çš„ç™¾åº¦ï¼Œå…·ä½“å¯ä»¥å‚ç…§æœ¬æ–‡æœ€åŽç»™å‡ºçš„é“¾æŽ¥ã€‚ Outlineè°ƒå‡ºä»¥å‰åœ¨Eclipseä¸­ç”¨çš„å¾ˆå¤šçš„ä¸€ä¸ªå¿«æ·é”®å°±æ˜¯ctrl+oï¼Œè¿™æ ·å¯ä»¥è°ƒå‡ºä»£ç æ–‡ä»¶çš„æ‰€æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒæœç´¢å¾ˆæ˜¯æ–¹ä¾¿ï¼ŒIntelliJè¿™ç§åŸºæœ¬çš„åŠŸèƒ½è‡ªç„¶æ˜¯æœ‰ï¼Œæ–°æ‰‹çš„è¯è¿˜ç»å¸¸é—®ï¼Œè¿™ä¸ªåœ¨IntellJä¸­çš„å¿«æ·é”®æ˜¯âŒ˜+F12 (File Structure)ã€‚å¦‚æžœä½ ä¸æ˜¯Mac OSX 10.5+é”®ä½ç»‘å®šçš„è¯ï¼Œå°æ‹¬å·ä¸­çš„å†…å®¹å°±æ˜¯ä½ å¯ä»¥åŽ»Keymapä¸­åŽ»æœç´¢çš„å†…å®¹ã€‚ ###åŸºæœ¬æ“ä½œ å¤åˆ¶æ•´è¡Œæˆ–è€…å—:åœ¨Eclipseä¸­ä½¿ç”¨ctrl+alt+Upï¼ŒIntelliJé»˜è®¤æ˜¯âŒ˜+D (Duplicate Line or Block)ï¼Œå…¶å®žè¿™ä¸ªå’ŒEclipseä¸­çš„æœ‰å·®è·ï¼Œå°¤å…¶æ˜¯å¤šè¡Œçš„æ—¶å€™æˆ–è€…é€‰ä¸­å†…å®¹çš„æ—¶å€™ï¼Œä¸ä¿¡ä½ å¯ä»¥è¯•è¯•ã€‚æ‰€ä»¥ä½ å¯ä»¥æŠŠKeymapä¸­çš„Duplicate Lineså®šä¹‰ä¸Šä¸€ä¸ªå¿«æ·é”®ï¼Œæˆ‘å®šä¹‰çš„æ˜¯Option+Dï¼Œè¿™ä¸ªé”®ä½åœ¨æˆ‘çš„é»˜è®¤ç»‘å®šä¸­æ˜¯æ²¡ä»»ä½•å¿«æ·é”®çš„ï¼Œä½ å¯ä»¥è‡ªå·±ç»‘å®šä¸€ä¸ªè¯•è¯•ã€‚ æ ¹æ®ç¬¦å·é€‰æ‹©æ–‡æœ¬:è¿™ä¸ªé”®ä½ç”¨çš„å¤ªå¤šäº†ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯éžå¸¸çš„å¥½ç”¨ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæœ‰è¿™æ ·ä¸€è¡Œä»£ç &lt;name&gt;SpringSource Milestones Proxy&lt;/name&gt; ä½ å…‰æ ‡åœ¨Milestonesä¸­çš„æŸä¸€ä¸ªä½ç½®ï¼Œä½ æƒ³æ›¿æ¢SpringSource Milestones Proxyä¸ºå…¶ä»–å•è¯ï¼Œå‡è®¾æƒ³æ›¿æ¢ä¸ºTest XXï¼Œå…¶å®žè¿™æ ·ä½ åªéœ€è¦Option+Up (Select Word at Caret)ä¸¤ä¸‹å°±å¯ä»¥é€‰ä¸­ä½ æƒ³è¦çš„å•è¯äº†ï¼Œå½“ä½ æƒ³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå‘çŽ°è¿™ä¸ªé”®ä½ç”¨çš„å¤ªå¤šäº†ï¼Œå¤šåˆ°æ¢äº†å…¶ä»–æ²¡æœ‰è¿™ä¸ªé”®ä½çš„ç¼–è¾‘å™¨æˆ–è€…IDEä¸Šï¼Œå¾ˆæ˜¯ä¸ä¹ æƒ¯ã€‚ åˆ é™¤æ•´è¡Œ: å¯ä»¥ç›´æŽ¥âŒ˜+delete (Delete Line)æˆ–è€…åˆ©ç”¨IntelliJæ™ºèƒ½çš„åŠŸèƒ½ï¼Œå‰ªåˆ‡çš„å¿«æ·é”®ï¼Œå½“æœ¬è¡Œé€‰ä¸­æ–‡æœ¬çš„æ—¶å€™å‰ªåˆ‡âŒ˜+xä¼šæŒ‰ç…§é€‰ä¸­çš„æ–‡æœ¬å®žçŽ°å‰ªåˆ‡ï¼Œä½†æ˜¯ä½ æœ¬è¡Œå†…æ— ä»»ä½•é€‰ä¸­æ–‡æœ¬çš„æ—¶å€™ä¼šè‡ªåŠ¨å‰ªåˆ‡æ•´è¡Œï¼Œé‚£ä¹ˆè‡ªç„¶å°±ç±»ä¼¼ä¸€ä¸ªåˆ é™¤æœ¬è¡Œçš„å¿«æ·é”®ï¼Œä½†æ˜¯è¿™ä¸ªå…¶å®žè¿˜æ˜¯æ¯”è¾ƒè¹©è„šçš„ï¼Œå»ºè®®ä½¿ç”¨âŒ˜+delete`ã€‚ æƒ³ç›´æŽ¥è·³è½¬åˆ°æŽ¥å£çš„å®žçŽ°æ–¹æ³•: âŒ˜+option+é¼ æ ‡å•å‡»æˆ–è€…âŒ˜+option+Bã€‚ è¯­å¥è‡ªåŠ¨å®Œæˆ Statements completion:è¿™ä¸ªåœ¨IntelliJ IDEA çš„ 20 ä¸ªä»£ç è‡ªåŠ¨å®Œæˆçš„ç‰¹æ€§ä¸­å·²ç»è¯´æ˜Žï¼Œè¿™é‡Œè¿˜æ˜¯ç€é‡è¯´ä¸‹ï¼Œå› ä¸ºçš„ç¡®å¾ˆå¥½ç”¨ï¼Œä¹Ÿå¼ºçƒˆæŽ¨èä¸‹ï¼Œè¿˜æœ‰æ–‡ä¸­è¯´çš„æ™ºèƒ½è‡ªåŠ¨å®Œæˆ ctrl+shift+Spaceï¼Œå½“ç»™ä½ çš„æç¤ºå¤ªå¤šçš„æ—¶å€™ï¼Œè¿™ä¸ªé”®ç»å¯¹ä¼šç»™ä½ æƒŠå–œ. åŒæ ·å•è¯ä¹‹é—´è·³è½¬:åœ¨Eclipseä¸­çš„å¿«æ·é”®æ˜¯ctrl+kï¼Œè¿™ä¸ªæŒºå¥½ç”¨çš„ï¼Œåœ¨IntelliJä¸­ä¹Ÿä¸ç¼ºè¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯åœ¨Mac OSX 10.5+çš„é”®ä½ç»‘å®šä¸­é»˜è®¤ä¸ºç©ºã€‚æ®è¯´Windowsçš„é»˜è®¤ç»‘å®šä¸­æ˜¯æœ‰ç»‘å®šçš„ï¼Œè‡ªå·±å¯ä»¥æŸ¥è¯¢ä¸‹ï¼Œæˆ‘è‡ªå·±ç»‘å®šäº†ä¸€ä¸ªâŒ˜+ctrl+k (Find Word at Caret)ï¼Œæ²¡æœ‰çš„éœ€è¦è‡ªå·±ç»‘å®šä¸€ä¸ªï¼Œç„¶åŽè¿˜èƒ½ç»“åˆå…¶ä»–çš„é”®ä½å®žçŽ°ä¸Šä¸€ä¸ªâŒ˜+G (Find Next)ä¸‹ä¸€ä¸ªâŒ˜+Shift+G (Find Previous)çš„åŠŸèƒ½.å¾ˆæ˜¯å®žç”¨ã€‚ ##ç‰ˆæœ¬æŽ§åˆ¶è®¾ç½®æˆ‘ä»¬å¼€å‘è‚¯å®šæ˜¯æœ‰ç‰ˆæœ¬æŽ§åˆ¶çš„ï¼Œå¤§å®¶ä»¥å‰Eclipseçš„æ—¶å€™åœ¨æœ¬åœ°æ–‡ä»¶å’Œç‰ˆæœ¬åº“ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ–‡ä»¶ä»¥åŠæ‰€åœ¨çš„æ–‡ä»¶å¤¹éƒ½ä¼šå‡ºçŽ°ä¸€ä¸ªã€‰è¡¨ç¤ºï¼Œå¤§å®¶èƒ½å¾ˆè½»æ¾çš„çœ‹åˆ°æœ¬åœ°æ–‡ä»¶ä¿®æ”¹äº†å“ªä¸€äº›ï¼Œä½†æ˜¯IntelliJä¸­é»˜è®¤æ˜¯ä¸èƒ½è¿™æ ·çš„ã€‚ä»…ä»…æ˜¯ç»™å˜åŒ–çš„æ–‡ä»¶åœ¨ä¿®æ”¹çš„æ—¶å€™æä¾›äº†é¢œè‰²ä¸Šçš„å˜åŒ–ï¼Œä¸åŒ…æ‹¬å…¶æ‰€åœ¨çš„å„ä¸ªçˆ¶çº§æ–‡ä»¶å¤¹å“¦ï¼Œå¦‚æžœæƒ³å’ŒEclipseä¸€æ ·çš„è¯éœ€è¦å¦‚ä¸‹å›¾æŠŠè®¾ç½®å‹¾é€‰å°±å¯ä»¥äº† å…¶å®žçœ‹è‹±æ–‡è§£é‡Šå°±å¯ä»¥æ˜Žç™½äº†ï¼Œè¿™ä¸ªé»˜è®¤å¼€å¯ä»¥åŽå¦‚æžœæƒ³è°ƒæ•´æ–‡ä»¶å¤¹çš„æ˜¾ç¤ºé¢œè‰²çš„æ—¶å€™å°±ç›´æŽ¥åŽ»Settings &gt; Editor &gt; Colors &amp; Fonts &gt; File Statusä¸­è°ƒæ•´å³å¯äº†ï¼Œå¯ä»¥è°ƒæ•´æˆè‡ªå·±å–œæ¬¢çš„æ ·å­ã€‚ ##Javaèµ„æºæ–‡ä»¶éžè‹±æ–‡çš„æƒ…å†µæ˜¾ç¤ºIntelliJåœ¨èµ„æºæ–‡ä»¶è¿™æ–¹é¢ä¸ªäººè§‰å¾—ä¹Ÿæ˜¯å®ŒèƒœEclipseçš„ï¼Œåœ¨Resource Bundleæ–¹å¼ä¸‹æƒ³ä¿®æ”¹ä¸€ä¸ªå±žæ€§æ˜¯ç›¸å½“æ–¹ä¾¿çš„ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ“ä½œç•Œé¢ä¸Šä¿®æ”¹æ‰€æœ‰è¯­è¨€çš„å±žæ€§ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¹¶ä¸”è¿˜å¾ˆè´´å¿ƒçš„æœ‰ä¸€ä¸ªæŽ’åºå’Œåˆ†ç»„çš„åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯è¿™ä¸ªæŽ’åºã€‚ é»˜è®¤è®¾ç½®ä¸‹ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸­æ–‡é»˜è®¤ä¼šæ˜¾ç¤ºä¸ºUnicodeç çš„ï¼Œå…¶å®žå‹¾é€‰ä¸€ä¸ªè®¾ç½®(Settings &gt; File Encodings)å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹å›¾ï¼š è¿™æ ·è®¾ç½®ä»¥åŽæ‰€æœ‰Unicodeæ˜¾ç¤ºçš„å°±å¯ä»¥è‡ªåŠ¨è½¬åŒ–ä¸ºå…¶åº”è¯¥æ˜¾ç¤ºçš„è¯­è¨€äº†. ç¬¦åˆMavençº¦å®šç»“æž„çš„webé¡¹ç›®å¦‚ä½•æ›´å¥½çš„è¿è¡Œè®°å¾—åˆšå¼€å§‹ç”¨Eclipseçš„æ—¶å€™é‚£æ—¶å€™é»˜è®¤æ˜¯ä¸æ”¯æŒJava EEé¡¹ç›®çš„ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªMyEclipseçš„æ’ä»¶ï¼Œç›´åˆ°ä»Šå¤©å¥½ä¼¼è¿˜æœ‰äººåœ¨ç”¨è¿™ä¸ªçŽ©æ„ï¼Œå½“å¹´çš„æ—¶å€™æ¯ä¸ªWebé¡¹ç›®ä¿®æ”¹ä¹‹åŽéƒ½å¿…é¡»Deployä¸€ä¸‹ï¼Œä¿®æ”¹çš„ä¸œè¥¿æ‰ä¼šè¢«æ‰§è¡Œï¼Œå¾ˆæ˜¯ç—›è‹¦ã€‚åŽæ¥å°±è‡ªå·±åˆ©ç”¨Tomcatæ’ä»¶ï¼Œè¿™ä¸ªå¯ä»¥ä¿è¯ä½ ä¿®æ”¹jspä»¥åŠé™æ€æ–‡ä»¶çš„æ—¶å€™ä¸éœ€è¦Deployç›´æŽ¥å°±å¯ä»¥è¢«æ‰§è¡Œï¼Œå› ä¸ºTomcatçš„ç›®å½•æŒ‡å‘å…¶å®žç›´æŽ¥æ˜¯æŒ‡å‘åˆ°äº†ä½ çš„é¡¹ç›®æ–‡ä»¶ï¼Œè¿™æ ·çš„ç¡®çœå¿ƒäº†å¾ˆå¤šã€‚ åœ¨IntelliJä¸­å¦‚æžœä½ æ˜¯ä¼ ç»Ÿçš„Java EEçš„ç»“æž„(æ ¹ç›®å½•ä¸‹é¢æœ‰srcï¼ŒwebMoudleè¿™æ ·çš„ç»“æž„)ï¼Œé‚£ä¹ˆåœ¨ç›´æŽ¥åœ¨Run Configurationsä¸­æ·»åŠ ä¸€ä¸ªTomcatå³å¯ï¼Œç‚¹å‡»+å·æ·»åŠ å³å¯(å½“ç„¶éœ€è¦æ³¨æ„è™½ç„¶æ²¡æœç´¢æ¡†ï¼Œä½ è¾“å…¥å­—ç¬¦ä¼šè‡ªåŠ¨ç»™ä½ ç­›é€‰ç»“æžœ)ï¼Œè¿™æ ·è¿è¡Œçš„æ—¶å€™ä¿®æ”¹Javaæ–‡ä»¶çš„è¯éœ€è¦ä¸»åŠ¨Make Projectä¹Ÿå°±æ˜¯âŒ˜+F9 (Make Project).ä½†æ˜¯å¦‚æžœä½ æ˜¯ç¬¦åˆmavençº¦å®šçš„é¡¹ç›®ç»“æž„çš„è¯å¦‚æžœç»§ç»­è¿™æ ·é…ç½®å°±å¾ˆä¸ç†æƒ³äº†ï¼Œæ¯æ¬¡ä¿®æ”¹äº†jspæ–‡ä»¶ç«Ÿç„¶ä¹Ÿéœ€è¦Make Projectæ‰å¯ä»¥ï¼Œå› ä¸ºæ¯æ¬¡Make Projectä»¥åŽIntelliJä¼šè‡ªåŠ¨ç»™ä½ DeployMentï¼Œè¿™æ ·å¥½ä¼¼åˆå›žåˆ°äº†å‡ å¹´å‰é‚£ç§å¾ˆéº»çƒ¦çš„çŽ¯å¢ƒ. è¿™ä¸ªé—®é¢˜å…¶å®žå¾ˆå®¹æ˜“è§£å†³ï¼Œå°±æ˜¯ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼æ¥è¿è¡Œä½ çš„webé¡¹ç›®ï¼Œæ—¢ç„¶ç¬¦åˆmavenç»“æž„çš„é¡¹ç›®è‡ªç„¶æ˜¯ä½¿ç”¨mavenæˆ–è€…gradleè¿™ç§æž„å»ºå·¥å…·äº†ï¼Œé‚£ä¹ˆä½ éœ€è¦åˆ©ç”¨mavençš„jettyçš„æ’ä»¶æ¥è¿è¡Œé¡¹ç›®å³å¯äº†ï¼Œå¦‚ä¸‹å›¾é…ç½®å³å¯: å½“ç„¶ä½ ä¹Ÿå¯ä»¥å¦‚ä¸‹å›¾ç›´æŽ¥ç‚¹å‡»è¿è¡Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ª: å‚çœ‹ä¸Šå›¾å…¶å®žä¹Ÿæ²¡å¿…é¡»éžç”¨jettyï¼Œç”¨tomcat6æˆ–è€…tomcat7çš„æ’ä»¶è¿è¡Œä¹Ÿå¯ä»¥ã€‚ ##Eclipseçš„webç»“æž„é¡¹ç›®å¦‚ä½•å¯¼å…¥å’Œè¿è¡Œé‰´äºŽæœ‰ä¸€äº›ç”¨æˆ·è¿˜æ²¡è½¬åž‹Mavenç­‰æ¥æž„å»ºé¡¹ç›®ï¼Œå½“ç„¶æˆ‘ä¹Ÿè¡·å¿ƒçš„è¯´ä¸€å¥ï¼Œæž„å»ºè¿™å—è¿˜æ˜¯èµ¶ç´§è½¬äº†å§.å› ä¸ºä¸è½¬çš„è¯è¿˜å•ç‹¬å‡ºæ¥è¿™ä¸ªç« èŠ‚ï¼Œå¹¶ä¸”æœ‰çš„æ“ä½œè¿˜æ˜¯ç›¸å½“éº»çƒ¦ï¼Œä¸‹é¢ä¹Ÿä¼šè®²åˆ°ï¼Œè¿˜æ˜¯ä¸€ä¸€é“æ¥å§ï¼Œå¯¼å…¥çš„æ—¶å€™æœ‰ä¸¤ä¸ªé€‰æ‹©ç„¶åŽæˆ‘åˆ†ä¸¤ä¸ªéƒ¨åˆ†è¯´æ˜Žï¼Œç‚¹å‡»File &gt; Import Projectâ€¦ï¼Œç„¶åŽé€‰æ‹©ä½ çš„é¡¹ç›®ç›®å½•ï¼Œç‚¹å‡»OKï¼Œå¦‚ä¸‹å›¾: ä½¿ç”¨æ–°å»ºé¡¹ç›®æ¥å¯¼å…¥è¿™ä¸ªæ–¹å¼å›¾ä¸­æ‰€ç¤ºçš„ç¬¬ä¸€ç§ï¼Œå¯¼å…¥åŸºæœ¬å°±æ˜¯ä¸€è·¯nextåˆ°å®Œæˆï¼Œä½†æ˜¯ä½ ç¬¬ä¸€æ¬¡ä¹Ÿå¯ä»¥è´¹ç‚¹å¿ƒæ€æ³¨æ„ä¸‹æ¯ä¸€æ­¥åšäº†å•¥ï¼Œä¾‹å¦‚å¸®ä½ åˆ†æžäº†jaræœ‰å“ªä¸€äº›ï¼Œå¦‚æžœä½ ä½¿ç”¨äº†Springè¿˜ç»™ä½ åˆ†æžä½ çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚æœ€åŽå®Œæˆä»¥åŽé¡¹ç›®å°±å¼€å§‹æž„å»ºç´¢å¼•ï¼Œç­‰ä¸€åˆ‡å°±ç»ªä»¥åŽæˆ‘ä»¬å°±å¯ä»¥å®Œæˆçš„åŸºæœ¬é…ç½®äº†ï¼Œç”±äºŽæ˜¯webé¡¹ç›®åŸºæœ¬ä¸Šèƒ½å¤Ÿåœ¨Tomcatç­‰æœåŠ¡å™¨ä¸Šè·‘èµ·æ¥å°±åŸºæœ¬ç®—æˆåŠŸäº†ã€‚ä¸»è¦å‡ ä¸ªç‚¹: å¤„ç†å¥½ä¾èµ–å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡ä½¿ç”¨mavenï¼Œæ‰€ä»¥ä½ å¾—è‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿäº† è®¾ç½®javaæ–‡ä»¶çš„ç¼–è¯‘è·¯å¾„ï¼Œå¦‚æžœéœ€è¦çš„è¯ æ·»åŠ ä½ çš„Tomcatï¼Œè¿è¡ŒæˆåŠŸ ä¾èµ–å…³ç³»æ‰“å¼€File &gt; Project Structure ï¼Œæœ¬èŠ‚æˆ‘ä»¬ä¸»è¦ç”¨åˆ°ä¸‹å›¾å‡ ä¸ªæ ‡çº¢çš„éƒ¨åˆ†: æˆ‘ä»¬å…ˆäº†è§£ä¸‹è¿™å‡ ä¸ªä¸»è¦éƒ¨ä»¶: SDKs:ä¸»è¦å­˜æ”¾äº†æˆ‘ä»¬çš„JDKç­‰ï¼Œå¦‚ä¸‹å›¾(æˆ‘è‡ªå·±ä¸‹è½½å¸¦sourceçš„JDKï¼Œè¿™æ ·å¯ä»¥ç›´æŽ¥æŸ¥çœ‹JDKç›¸å…³çš„Javaæºä»£ç ): Global Libraries:ä¸»è¦æ˜¯å…¬ç”¨çš„jaræ–‡ä»¶ï¼Œä¾‹å¦‚servletçš„å‡ ä¸ªjarå¯èƒ½æ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦ï¼Œä½†æ˜¯Eclipseçš„å˜é‡åœ¨æ­¤å˜å¾—ä¸å¥½ä½¿ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨è¿™ä¸ªåœ°æ–¹æ¥é…ç½®ï¼Œå¦‚ä¸‹å›¾å‚ç…§ä½¿ç”¨å³å¯: Facets:åœ¨æ­¤ä¸åšä»‹ç»ï¼Œå¦‚æœ‰éœ€è¦åŽç»­æ·»åŠ  Libraries:è¿™é‡ŒåŸºæœ¬æ˜¯é¡¹ç›®çš„åº“ï¼Œä¸æ˜¯å…¨å±€çš„ï¼Œå¯¼å…¥çš„é¡¹ç›®ä¸€èˆ¬éƒ½ä¼šæŠŠä½ Eclipseä¸­çš„ã€‚classpathä¸­çš„æ‰€æœ‰çš„ä¾èµ–éƒ½å¯¼è¿‡æ¥ä½œä¸ºä¸€ä¸ªlibåº“ï¼Œç„¶åŽåº”ç”¨åˆ°ä½ çš„é¡¹ç›®çš„æ¨¡å—ä¸­ Modules:è¿™ä¸ªåŸºæœ¬åŒ…æ‹¬äº†é¡¹ç›®çš„æ¨¡å—ï¼Œé€šå¸¸æ¥è¯´Eclipseçš„é¡¹ç›®ç»“æž„ä¸­æ˜¯å•æ¨¡å—çš„ æˆ‘ä»¬éœ€è¦åšçš„é…ç½®ä¸»è¦åœ¨Modulesä¸­ï¼Œå…¶ä»–çš„å‡ ä¸ªè‡ªå·±æ ¹æ®ç†è§£é…ç½®å³å¯ã€‚ æˆ‘ä»¬å…ˆæŸ¥çœ‹Modulesä¸­çš„Sourcesï¼Œå¦‚ä¸‹å›¾: æŠŠé¡¹ç›®æ‰€æœ‰çš„æºç éƒ½æ·»åŠ å³å¯ï¼Œå›¾ä¸­æ‰€ç¤ºæˆ‘çš„é¡¹ç›®ä¸­å…¶å®žå°‘äº†resourceçš„æ–‡ä»¶å¤¹ï¼Œè¿™æ ·æˆ‘é€‰ä¸­resourceç„¶åŽç‚¹å‡»Sourceså³å¯ï¼Œè¿™æ ·å°±ä¼šåœ¨å·¦è¾¹çš„Source Foldersä¸­æ·»åŠ ä¸€ä¸ªresourceçš„æ–‡ä»¶å¤¹ã€‚ ç„¶åŽæ˜¯Pathséƒ¨åˆ†ï¼Œè¿™ä¸ªä¸»è¦æ˜¯classçš„è¾“å‡ºè·¯å¾„ï¼Œé»˜è®¤æ˜¯åœ¨æ ¹ç›®å½•ä¸‹çš„outæ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æžœé¡¹ç›®ä¸­å¯¹é…ç½®æ–‡ä»¶çš„è§£æžç­‰æœ‰å†™æ­»è·¯å¾„ï¼Œå¿…é¡»ä¸¥æ ¼éµå¾ªJava EEçš„è§„èŒƒçš„è¯ï¼Œé‚£ä¹ˆéœ€è¦å°†æ­¤éƒ¨åˆ†ä¿®æ”¹å¦‚ä¸‹(å¦‚æžœä¸å­˜åœ¨æˆ‘å‡è®¾çš„æƒ…å†µå¯å¿½ç•¥æœ¬æ­¥éª¤): ç„¶åŽçš„Dependenciesï¼Œå°±æ›´å¥½é…ç½®äº†ï¼Œæ·»åŠ éœ€è¦çš„ä¾èµ–å³å¯ã€‚ è¿™äº›æ­¥éª¤å®Œæˆä»¥åŽæˆ‘ä»¬å°±å¯ä»¥ç‚¹å‡»Run &gt; Edit Configurations ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„+å·ï¼Œç„¶åŽé€‰æ‹©Tomcat &gt; Local Server ï¼Œè¿™äº›æ­¥éª¤å’ŒEclipseç±»ä¼¼ï¼Œé€‰æ‹©ç›¸åº”è·¯å¾„ç­‰ç­‰ï¼Œåªéœ€è¦æ³¨æ„ä¸€ç‚¹å°±å¯ä»¥ï¼Œå°±æ˜¯éœ€è¦æ·»åŠ ä¸€ä¸ªDeployMentï¼Œå¦‚ä¸‹å›¾: å¦‚æžœæ˜¯Windowsçš„å›¾ä¸­çš„DeployMentä¸­çš„+å·å¯èƒ½æ˜¯åœ¨å³ä¾§ï¼Œç‚¹å‡»ä¹‹åŽä¼šå¼¹å‡ºå¯¹è¯æ¡†é€‰æ‹©æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©eclipseé»˜è®¤çš„webMoudleæ–‡ä»¶å¤¹å³å¯(MyEclipseå°±æ˜¯WebRootæ–‡ä»¶å¤¹)ï¼Œè¿™ä¸ªä¸€å®šä¸èƒ½é€‰é”™ï¼Œä¸è¦é€‰æˆé¡¹ç›®çš„ä¸»æ–‡ä»¶å¤¹ï¼Œå¦åˆ™è¿è¡Œå°±ä¸æˆåŠŸäº†ï¼Œå†ç„¶åŽctrl+Rè¿è¡Œå³å¯ã€‚ä»¥debugæ–¹å¼è¿è¡Œå°±æ˜¯ctrl+Dã€‚ ä½¿ç”¨IntelliJå¯¹Eclipseé¡¹ç›®çš„æ”¯æŒå¯¼å…¥é¡¹ç›®åŸºæœ¬å‚ç…§ä¸Šä¸ªåŸºæœ¬éƒ½ç±»ä¼¼ï¼Œå°±æ˜¯æ­¥éª¤æ¯”ä¸Šä¸ªæ­¥éª¤è¦å°‘ç‚¹ï¼Œå¦‚æžœå‡ºçŽ°é—®é¢˜å‚ç…§ä¸Šä¸ªç« èŠ‚å³å¯ã€‚ HQLæŸ¥è¯¢æ”¯æŒä»¥å‰Eclipseæœ‰ä¸ªHQLçš„æ’ä»¶å¯ä»¥ç›´æŽ¥è¾“å…¥HQLè¯­æ³•ï¼ŒæŸ¥è¯¢æµ‹è¯•ç»“æžœæ˜¯å¦æ­£ç¡®ï¼Œåœ¨IntelliJä¸­ä½ ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡ä¸éœ€è¦ä»»ä½•æ’ä»¶é»˜è®¤æä¾›æ”¯æŒçš„ï¼Œå¦‚æžœåœ¨å¯¼å…¥é¡¹ç›®çš„æ—¶å€™æ²¡æœ‰è‡ªåŠ¨æ·»åŠ Hibernateçš„æ”¯æŒçš„è¯ï¼Œé‚£éœ€è¦æ·»åŠ ä¸€ä¸‹Hibernateçš„æ”¯æŒï¼Œé¼ æ ‡é€‰ä¸­é¡¹ç›®ï¼Œç‚¹å‡»å³é”®å¦‚ä¸‹å›¾: ç‚¹å‡»é€‰æ‹©Hibernateå³å¯ï¼Œå¦‚æžœæ²¡æœ‰Hibernateåº”è¯¥æ˜¯é¡¹ç›®å·²ç»è‡ªåŠ¨æ·»åŠ äº†Hibernateçš„æ”¯æŒäº†ã€‚ç„¶åŽå®Œæˆä»¥åŽå°±å¯ä»¥å¦‚ä¸‹å›¾æ“ä½œå³å¯: é€‰ä¸­ä¸Šé¢HQLå›¾æ ‡ï¼Œåœ¨å‡ºæ¥çš„æŽ§åˆ¶å°è¾“å…¥ä½ æƒ³è¾“å…¥çš„HQLå³å¯äº†ï¼Œä¸€æ ·å¯ä»¥è‡ªåŠ¨å®Œæˆçš„å“¦ã€‚ æ³¨æ„äº‹é¡¹ IntelliJå¯¹äºŽæ–‡ä»¶æ˜¯é»˜è®¤éšæ—¶ä¿å­˜çš„ï¼ŒåŸºæœ¬ä¸éœ€è¦ä½ âŒ˜+s(è¿™ä¸ªé”®ä½é»˜è®¤æ˜¯ä¿å­˜æ‰€æœ‰)ï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„ä¸è¦éšæ‰‹ä¸å°å¿ƒæŠŠæŸä¸ªæ–‡ä»¶æ”¹äº†ä¸‹ï¼Œç„¶åŽç›´æŽ¥å…³é—­æ ‡ç­¾äº†ï¼Œå…¶å®žä½ çš„æ— æ„çš„æ“ä½œå·²ç»å¯¼è‡´ä¿®æ”¹äº†æ–‡ä»¶ï¼Œå¯èƒ½å¯¼è‡´ä½ åœ¨é¡¹ç›®è¿è¡Œçš„æ—¶å€™å‘çŽ°ä¸€ä¸ªå¾ˆç¦»å¥‡çš„é”™è¯¯ï¼Œæˆ‘æš‚æ—¶æ²¡å‘çŽ°å¯ä»¥å…³é—­è‡ªåŠ¨ä¿å­˜çš„è®¾ç½®ï¼Œå¦‚æžœä½ å¯¹æ­¤éžæœ‰å¼ºè¿«ç—‡çš„è¯ï¼Œvimçš„æ’ä»¶å¯èƒ½ä¼šå¸®åŠ©åˆ°ä½ ã€‚ IntelliJä¸­çš„æ–‡ä»¶æ˜¯å®žæ—¶å’Œæœ¬åœ°æ–‡ä»¶åŒæ­¥çš„ï¼Œæ‰€ä»¥Eclipseçš„åˆ·æ–°åŠŸèƒ½å°±ä¸è¦é—®äº†ï¼Œå› ä¸ºåœ¨è¿™æ ¹æœ¬ä¸éœ€è¦é‚£ä¸ªåŠŸèƒ½ã€‚æœ‰çš„ç¼–è¾‘å™¨ä¼šæé†’ä½ æ˜¯å¦å’Œæœ¬åœ°æ–‡ä»¶æ›´æ–°ï¼Œè¿™é‡Œä¹Ÿæ˜¯é»˜è®¤ä¸ç»™ä»»ä½•æé†’çš„ï¼Œåªè¦ä½ ä¿®æ”¹äº†ï¼Œè¿™é‡Œå°±ä¼šç«‹å³è‡ªåŠ¨åŒæ­¥æ›´æ–°æ–‡ä»¶ã€‚ åœ¨ä¸»èœå•Fileä¸‹é¢ï¼Œæœ‰ä¸ªå¥‡æ€ªçš„Power Save Modeï¼Œè¿™é‡Œä¹Ÿè¯´æ˜Žä¸‹ï¼Œè¿™ä¸ªé¡¾åæ€ä¹‰æ˜¯çœç”µæ¨¡å¼ã€‚å½“ä½ å‹¾é€‰æ­¤æ¨¡å¼ä»¥åŽï¼ŒIntelliJä¸ä¼šç»™ä½ å®Œæˆä»»ä½•è‡ªåŠ¨å®Œæˆçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æœ¬æ¥ä½ è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¼šè‡ªåŠ¨æç¤ºçš„ï¼Œå‹¾é€‰ä»¥åŽå°±æ²¡æœ‰äº†ï¼Œå¦‚æžœå‡ºçŽ°æ­¤é—®é¢˜çš„è¯å¯ä»¥è€ƒè™‘æ˜¯ä¸æ˜¯è‡ªå·±æ‰‹è´±ç‚¹è¿‡è¿™ä¸ªæŒ‰é’®å™¢ï¼Œè¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒé€‚åˆå¼€ä¼šçš„æ—¶å€™æ— èŠçœ‹ä»£ç ç”¨çš„ï¼Œåˆçœç”µåˆä¸å½±å“ä½ çœ‹ä»£ç ã€‚ Eclipseä¸­æœ‰ä¸ªF2çš„åŠŸèƒ½ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°Javaæ–‡ä»¶å®šä¹‰ï¼Œä½ åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­å¯èƒ½éœ€è¦é…ç½®è¿™ä¸ªå€¼ï¼Œä½†æ˜¯åœ¨IntelliJä¸­è¿™ä¸ªæ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºå¯¹äºŽSpringè¿™æ ·çš„æ”¯æŒå¾ˆæ˜¯å®Œå–„ï¼Œä½ åªéœ€è¦åœ¨classçš„å±žæ€§ä¸­è¾“å…¥classçš„åå­—ç„¶åŽctrl+ç©ºæ ¼ (Basic è¿™ä¸ªåœ¨codeçš„completionä¸‹é¢)è‡ªåŠ¨å°±å®Œæˆäº†å…¨è·¯å¾„ï¼Œåœ¨æ™ºèƒ½çš„æ¡ä»¶ä¸‹å¯èƒ½å°±ä¸éœ€è¦è¹©è„šçš„å®žçŽ°ã€‚ é¡¹ç›®åˆšå¼€å§‹å¯¼å…¥æˆ–è€…æ¸…é™¤cacheé‡æ–°æ‰“å¼€çš„æ—¶å€™ï¼Œä¸‹é¢çš„çŠ¶æ€æ éƒ¨åˆ†ä¼šæ˜¾ç¤ºIndexingï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±ç­‰ç€å°±å¯ä»¥äº†ï¼ŒåŸºæœ¬ä½ æƒ³åšçš„äº‹æƒ…ä»€ä¹ˆéƒ½ä¸èƒ½åšï¼Œåˆ«åœ¨è¿™ä¸ªæ—¶å€™ç€æ€¥ç‚¹æ¥ç‚¹åŽ»ï¼Œä¸è¿‡å®ƒç´¢å¼•çš„é€Ÿåº¦æŒºå¿«çš„ï¼Œåˆ«ç€æ€¥ã€‚ Eclipseæœ‰ä¸ªSave Actionsçš„åŠŸèƒ½ï¼Œä¸»è¦æ˜¯é’ˆå¯¹Javaå¯ä»¥è‡ªåŠ¨æ ¼å¼åŒ–ä»¥åŠä¼˜åŒ–importç­‰åŠŸèƒ½ï¼Œè¿™ä¸ªåœ¨IntelliJä¸Šå…¶å®žé»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œæƒ³åœ¨IntelliJä¸­ä½¿ç”¨è¿™åŠŸèƒ½å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ€è·¯: åˆ©ç”¨å®å½•åˆ¶ï¼Œå®åœ¨å¼€å§‹ä»¥åŽä½ å°±æ ¼å¼åŒ–ä¸‹ä»£ç ï¼Œç„¶åŽä¼˜åŒ–ä¸‹importç­‰æ“ä½œï¼Œç„¶åŽç»“æŸæŠŠå®å®šä¹‰ä¸€ä¸ªâŒ˜+sï¼Œä¸è¿‡é—®é¢˜å°±æ˜¯ä¸ç®¡ä»€ä¹ˆæ–‡ä»¶éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå®ï¼Œä¸ä»…ä»…æ˜¯javaæ–‡ä»¶ï¼Œæˆ‘å°±æ˜¯åˆ©ç”¨è¿™ä¸ªå®ä¸»è¦å®ŒæˆæŠŠtabè½¬ä¸ºç©ºæ ¼ã€‚ ä½¿ç”¨Eclipse Code Formatterçš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶åŸºæœ¬å’ŒEclipseé»˜è®¤çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰å°‘è®¸åŒºåˆ«ï¼Œç”¨æˆ·è‡ªå·±æ€é‡æ˜¯å¦ä½¿ç”¨å³å¯ã€‚ åœ¨Macä¸‹IntelliJä»£ç åŒºåŸŸæ˜¯æ”¯æŒæ‰‹åŠ¿æ”¾å¤§çš„ï¼Œè¿™ä¸ªåœ¨ç»™åˆ«äººæ¼”ç¤ºçš„æ—¶å€™å¾ˆæ˜¯æ–¹ä¾¿ã€‚ä½†æ˜¯Runã€Debugç­‰è§†å›¾çš„æ—¶å€™é»˜è®¤èƒ½ä½¿æƒ³åˆ°çš„å°±æ˜¯æ‰‹åŠ¨çš„æ‹–åŠ¨å¤§å°ï¼Œå¾ˆæ˜¯ä¸ä¾¿ã€‚ä½ å¯ä»¥å°è¯•ä¸‹âŒ˜+shift+up/down (Stretch to Top / Bottom)ï¼Œå½“ç„¶å…¶ä»–çš„projectè§†å›¾ç­‰çš„ä¹Ÿéƒ½å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¿«æ·é”®é…ç½®ä¸Šä¸‹å·¦å³çš„æ–¹å‘é”®æ¥é…ç½®ä½¿ç”¨ï¼Œæ–¹ä¾¿çš„å¾ˆï¼Œå¼ºçƒˆæŽ¨èä½¿ç”¨ã€‚ Eclipseä¸­å¯ä»¥åŒä¸€ä¸ªçª—å£æ‰“å¼€å¤šä¸ªé¡¹ç›®ï¼Œä½†æ˜¯IntelliJ IDEAåœ¨è¿™é‡Œçš„è®¾è®¡æ˜¯ä¸ä¸€æ ·çš„ï¼Œå…·ä½“å¯ä»¥å‚çœ‹IntelliJ IDEA Q&amp;A for Eclipse Usersã€‚ jarçš„sourceä¾èµ–é—®é¢˜ï¼Œå¦‚æžœä½ æ˜¯ä½¿ç”¨Mavençš„è¯éƒ½æ˜¯å¯ä»¥è‡ªåŠ¨å®Œæˆçš„ï¼Œåªéœ€è¦ä½ å‘å¸ƒå‡ºä½ çš„source jarå°±å¯ä»¥ï¼Œä½†æ˜¯å¦‚æžœä½ é¡¹ç›®ä¸æ˜¯ä½¿ç”¨mavençš„è¯ä½ å°±éœ€è¦åœ¨é¡¹ç›®é…ç½®çš„ä¾èµ–çš„åœ°æ–¹ï¼Œç‚¹å‡»ä½ çš„éœ€è¦å¼•å…¥sourceçš„jarï¼Œç„¶åŽå³é”®ç¼–è¾‘ï¼Œaddä½ çš„æœ¬åœ°sourceç›®å½•å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦åšProjectçš„å¤šä¸ªmoudleå³å¯ï¼Œè¿™é‡Œå’ŒEclipseä¸­çš„åŸºæœ¬ç›¸ä¼¼ã€‚ æœ€åŽç¬¬ä¸€æ¬¡å‘æ–‡ï¼Œå¦‚æžœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿Žç•™è¨€äº¤æµï¼ŒåŽŸå§‹æ–‡æ¡£æ”¾åœ¨githubä¸Šï¼Œå„ä½å¦‚æžœä¹Ÿæœ‰ä¸€äº›æŠ€å·§ä¸å¦¨å…±åŒå®Œå–„ä¸‹æœ¬æ–‡æ¡£ã€‚åªéœ€è¦Fockç„¶åŽPull Requestå°±å¯ä»¥äº†ï¼Œå¦‚æžœä½ è§‰å¾—æœ‰ä¸ªgithubå¸å·è¿‡äºŽéº»çƒ¦çš„è¯ï¼Œé‚£æˆ‘ä¸ªäººè§‰å¾—ä½ è¿˜æ˜¯è½¬è¡Œæ¯”è¾ƒåˆé€‚ã€‚å¦‚æžœä¸æƒ³æ›´æ–°åªæ˜¯æƒ³è®¢é˜…æŒç»­æ›´æ–°çš„å†…å®¹ï¼Œåªéœ€è¦Watchè¯¥é¡¹ç›®å³å¯ã€‚è¿˜å¯ä»¥å¯¹é¡¹ç›®Starï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨è‡ªå·±çš„å¸å·é¡µé¢å¿«é€Ÿæ‰¾åˆ°æœ¬é¡¹ç›®ã€‚ é™„å½• Winå¿«æ·é”® Win Keymap Mac OS å¿«æ·é”® Mac OS Keymap åŽŸæ–‡åœ°å€ï¼šhttps://github.com/ethanfu/Documents/blob/master/intellij/intellij_idea_use_documents.md]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>tools</tag>
        <tag>intellij idea</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³springboot waråŒ…åœ¨tomcatéƒ¨ç½²æ—¶å¯åŠ¨æ…¢çš„é—®é¢˜]]></title>
    <url>%2F2018%2F07%2F10%2F%E8%A7%A3%E5%86%B3springboot%20war%E5%8C%85%E5%9C%A8tomcat%E9%83%A8%E7%BD%B2%E6%97%B6%E5%90%AF%E5%8A%A8%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[linuxä¸Šçš„tomcatä¸Šéƒ¨ç½²ä¸Šspringbootçš„waråŒ…å¯åŠ¨æ€»æ˜¯å¾ˆæ…¢ï¼Œåˆ†æžå¯åŠ¨logï¼Œä¸‰æ­¥è°ƒæ•´ï¼Œä½¿å¯åŠ¨æ—¶é—´ä»Ž10åˆ†é’Ÿè°ƒæ•´åˆ°3åˆ†é’Ÿã€‚ç®€ä¹¦åœ°å€ æœ€è¿‘æµ‹è¯•æœåŠ¡å™¨tomcatå‘å¸ƒä¸€æ¬¡å¾ˆæ…¢ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç‰¹åœ°çœ‹äº†tomcatçš„logæ–‡ä»¶ï¼Œå¯åŠ¨æ—¥å¿—åœ¨tomcat/logs/catalina.outæ–‡ä»¶ä¸­ã€‚ 1ã€INFOï¼šorg.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory xxx.warå¡é¡¿åˆºé£ŽåŒå­¦å°±æ˜¯å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´çš„å®žè·µè€…ï¼Œè¢«æˆ‘ä¹Ÿç”¨ä¸Šäº†ã€‚æ‰¾åˆ°jdk1.x.x_xx/jre/lib/security/Java.securityæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°securerandom.sourceè¿™ä¸ªè®¾ç½®é¡¹ï¼Œå°†å…¶æ”¹ä¸ºï¼š1securerandom.source=file:/dev/./urandom é‡å¯tomcat,è¿™ä¸€æ­¥çš„é€Ÿåº¦æ˜Žæ˜¾åŠ å¿«ã€‚åŽŸç†æ®è¯´æ˜¯è¿™æ ·çš„ï¼š linuxæˆ–è€…éƒ¨åˆ†unixç³»ç»Ÿæä¾›éšæœºæ•°è®¾å¤‡æ˜¯/dev/random å’Œ/dev/urandom ï¼Œä¸¤ä¸ªæœ‰åŒºåˆ«ï¼Œurandomå®‰å…¨æ€§æ²¡æœ‰randomé«˜ï¼Œä½†randoméœ€è¦æ—¶é—´é—´éš”ç”Ÿæˆéšæœºæ•°ã€‚jdké»˜è®¤è°ƒç”¨randomã€‚ 2ã€ WARN: Establishing SSL connection without serverâ€™s identity verification is not recommended.å…·ä½“é”™è¯¯æ˜¯è¿™æ ·çš„ï¼š123Mon Jul 09 09:30:13 CST 2018 WARN: Establishing SSL connection without server&apos;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&apos;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &apos;false&apos;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.Mon Jul 09 09:30:13 CST 2018 WARN: Establishing SSL connection without server&apos;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&apos;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &apos;false&apos;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.Mon Jul 09 09:30:14 CST 2018 WARN: Establishing SSL connection without server&apos;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&apos;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &apos;false&apos;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification. è¿™ä¸ªé”™è¯¯ä¼šæ‰“å‡ éï¼Œæ¯ä¸€ééƒ½ä¼šå¡ä¸€ä¼šå„¿ï¼Œåº”è¯¥æ˜¯åœ¨éªŒè¯mysqlçš„SSLé…ç½®ã€‚æŸ¥é˜…èµ„æ–™è¯´mysqlçš„é«˜ç‰ˆæœ¬é»˜è®¤è¦æ±‚ä½¿ç”¨SSLé“¾æŽ¥ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰é…ç½®SSLä¹Ÿæ²¡æœ‰è¯´SSLä¸éœ€è¦æ—¶ï¼Œå°±ä¼šä¸€ç›´éªŒè¯ï¼ŒéªŒè¯å¥½å‡ éä»¥åŽæ”¾å¼ƒã€‚è¿™ä¸ªæ—¶é—´å¤§æ¦‚æœ‰1åˆ†é’Ÿã€‚å½“ç„¶ï¼Œæ–¹æ¡ˆå°±æ˜¯åœ¨jdbcçš„é“¾æŽ¥ä¸ŠåŠ ä¸ŠuserSSL=falseè¿™ä¸ªå‚æ•°ï¼Œjdbc:p6spy:mysql://127.0.0.1:3306/chuangke?characterEncoding=utf-8&amp;useSSL=false&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Hongkong&amp;autoReconnect=trueç±»ä¼¼è¿™æ ·ã€‚ 3ã€ ç¦ç”¨Springbootçš„JNDIåŠŸèƒ½åŽŸæ¥çš„log123456789101112131415161718192021222324252627282930313233343536373839404142434410:40:24.103 [localhost-startStop-1] DEBUG org.springframework.web.context.support.StandardServletEnvironment - Replacing PropertySource &apos;servletContextInitParams&apos; with &apos;servletContextInitParams&apos;10:40:24.685 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.exception-conversion-word]10:40:24.686 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.exception-conversion-word] not found - trying original name [logging.exception-conversion-word]. javax.naming.NameNotFoundException: Name [logging.exception-conversion-word] is not bound in this Context. Unable to find [logging.exception-conversion-word].10:40:24.687 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.exception-conversion-word]10:40:24.687 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.exception-conversion-word] threw NamingException with message: Name [logging.exception-conversion-word] is not bound in this Context. Unable to find [logging.exception-conversion-word].. Returning null.10:40:24.687 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.exception_conversion_word]10:40:24.688 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.exception_conversion_word] not found - trying original name [logging.exception_conversion_word]. javax.naming.NameNotFoundException: Name [logging.exception_conversion_word] is not bound in this Context. Unable to find [logging.exception_conversion_word].10:40:24.688 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.exception_conversion_word]10:40:24.688 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.exception_conversion_word] threw NamingException with message: Name [logging.exception_conversion_word] is not bound in this Context. Unable to find [logging.exception_conversion_word].. Returning null.10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.exceptionConversionWord]10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.exceptionConversionWord] not found - trying original name [logging.exceptionConversionWord]. javax.naming.NameNotFoundException: Name [logging.exceptionConversionWord] is not bound in this Context. Unable to find [logging.exceptionConversionWord].10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.exceptionConversionWord]10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.exceptionConversionWord] threw NamingException with message: Name [logging.exceptionConversionWord] is not bound in this Context. Unable to find [logging.exceptionConversionWord].. Returning null.10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.exceptionconversionword]10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.exceptionconversionword] not found - trying original name [logging.exceptionconversionword]. javax.naming.NameNotFoundException: Name [logging.exceptionconversionword] is not bound in this Context. Unable to find [logging.exceptionconversionword].10:40:24.689 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.exceptionconversionword]10:40:24.690 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.exceptionconversionword] threw NamingException with message: Name [logging.exceptionconversionword] is not bound in this Context. Unable to find [logging.exceptionconversionword].. Returning null.10:40:24.690 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.EXCEPTION-CONVERSION-WORD]10:40:24.690 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.EXCEPTION-CONVERSION-WORD] not found - trying original name [logging.EXCEPTION-CONVERSION-WORD]. javax.naming.NameNotFoundException: Name [logging.EXCEPTION-CONVERSION-WORD] is not bound in this Context. Unable to find [logging.EXCEPTION-CONVERSION-WORD].10:40:24.690 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.EXCEPTION-CONVERSION-WORD]10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.EXCEPTION-CONVERSION-WORD] threw NamingException with message: Name [logging.EXCEPTION-CONVERSION-WORD] is not bound in this Context. Unable to find [logging.EXCEPTION-CONVERSION-WORD].. Returning null.10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.EXCEPTION_CONVERSION_WORD]10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.EXCEPTION_CONVERSION_WORD] not found - trying original name [logging.EXCEPTION_CONVERSION_WORD]. javax.naming.NameNotFoundException: Name [logging.EXCEPTION_CONVERSION_WORD] is not bound in this Context. Unable to find [logging.EXCEPTION_CONVERSION_WORD].10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.EXCEPTION_CONVERSION_WORD]10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.EXCEPTION_CONVERSION_WORD] threw NamingException with message: Name [logging.EXCEPTION_CONVERSION_WORD] is not bound in this Context. Unable to find [logging.EXCEPTION_CONVERSION_WORD].. Returning null.10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging.EXCEPTIONCONVERSIONWORD]10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging.EXCEPTIONCONVERSIONWORD] not found - trying original name [logging.EXCEPTIONCONVERSIONWORD]. javax.naming.NameNotFoundException: Name [logging.EXCEPTIONCONVERSIONWORD] is not bound in this Context. Unable to find [logging.EXCEPTIONCONVERSIONWORD].10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging.EXCEPTIONCONVERSIONWORD]10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging.EXCEPTIONCONVERSIONWORD] threw NamingException with message: Name [logging.EXCEPTIONCONVERSIONWORD] is not bound in this Context. Unable to find [logging.EXCEPTIONCONVERSIONWORD].. Returning null.10:40:24.691 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging_exception-conversion-word]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging_exception-conversion-word] not found - trying original name [logging_exception-conversion-word]. javax.naming.NameNotFoundException: Name [logging_exception-conversion-word] is not bound in this Context. Unable to find [logging_exception-conversion-word].10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging_exception-conversion-word]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging_exception-conversion-word] threw NamingException with message: Name [logging_exception-conversion-word] is not bound in this Context. Unable to find [logging_exception-conversion-word].. Returning null.10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging_exception_conversion_word]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging_exception_conversion_word] not found - trying original name [logging_exception_conversion_word]. javax.naming.NameNotFoundException: Name [logging_exception_conversion_word] is not bound in this Context. Unable to find [logging_exception_conversion_word].10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging_exception_conversion_word]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging_exception_conversion_word] threw NamingException with message: Name [logging_exception_conversion_word] is not bound in this Context. Unable to find [logging_exception_conversion_word].. Returning null.10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging_exceptionConversionWord]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging_exceptionConversionWord] not found - trying original name [logging_exceptionConversionWord]. javax.naming.NameNotFoundException: Name [logging_exceptionConversionWord] is not bound in this Context. Unable to find [logging_exceptionConversionWord].10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging_exceptionConversionWord]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiPropertySource - JNDI lookup for name [logging_exceptionConversionWord] threw NamingException with message: Name [logging_exceptionConversionWord] is not bound in this Context. Unable to find [logging_exceptionConversionWord].. Returning null.10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [java:comp/env/logging_exceptionconversionword]10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/logging_exceptionconversionword] not found - trying original name [logging_exceptionconversionword]. javax.naming.NameNotFoundException: Name [logging_exceptionconversionword] is not bound in this Context. Unable to find [logging_exceptionconversionword].10:40:24.692 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiTemplate - Looking up JNDI object with name [logging_exceptionconversionword] å‚è€ƒé…ç½®æ•™ç¨‹ä¿®æ”¹ã€‚ æ‘˜è¦ï¼šåœ¨å®žé™…é¡¹ç›®å¼€å‘ä¸­ä½¿ç”¨springbootçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨jaråŒ…çš„æ–¹å¼è¿è¡Œé¡¹ç›®ï¼Œä¹Ÿå¯ä»¥å°†springbooté¡¹ç›®æ‰“æˆwaråŒ…ä½¿ç”¨ã€‚springboot waråŒ…è¿è¡Œå¯èƒ½ä¼šå‡ºçŽ°1 [localhost-startStop-1] DEBUG org.springframework.jndi.JndiLocatorDelegate - Converted JNDI name [java:comp/env/LOGGING.pattern_level] not found - trying original name [LOGGING.pattern_level]. javax.naming.NameNotFoundException: Name [LOGGING.pattern_level] is not bound in this Context. Unable to find [LOGGING.pattern_level]ã€‚ åæ­£å°±æ˜¯è¯¸å¦‚æ­¤ç±»çš„é—®é¢˜å§ã€‚ ä¸Šè¿°çš„é—®é¢˜ï¼Œåœ¨é«˜ç‰ˆæœ¬çš„spring bootä¸­ä¼šå‡ºçŽ°çš„ï¼Œä½Žç‰ˆæœ¬ä¸ä¼šå‡ºçŽ°è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºé«˜ç‰ˆæœ¬ä¸­å¼•å…¥äº†JNDIæŸ¥è¯¢çš„æ“ä½œã€‚ è§£å†³æ–¹æ¡ˆï¼š åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­æ–°å»ºspring.propertiesé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ·»åŠ å±žæ€§ä»¥åŠå€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š1spring.jndi.ignore=true åŽŸç†: æ‰“å¼€StandardServletEnvironmentç±»ï¼Œè¯¥ç±»ä¸­çš„customizePropertySourcesæ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627public static final String JNDI_PROPERTY_SOURCE_NAME = &quot;jndiProperties&quot;;protected void customizePropertySources(MutablePropertySources propertySources) &#123;propertySources.addLast(new StubPropertySource(SERVLET_CONFIG_PROPERTY_SOURCE_NAME));propertySources.addLast(new StubPropertySource(SERVLET_CONTEXT_PROPERTY_SOURCE_NAME));if (JndiLocatorDelegate.isDefaultJndiEnvironmentAvailable()) &#123;propertySources.addLast(new JndiPropertySource(JNDI_PROPERTY_SOURCE_NAME));&#125; super.customizePropertySources(propertySources);&#125;JndiLocatorDelegate.isDefaultJndiEnvironmentAvailable()ä»£ç å¦‚ä¸‹ï¼špublic static final String IGNORE_JNDI_PROPERTY_NAME = &quot;spring.jndi.ignore&quot;;private static final boolean shouldIgnoreDefaultJndiEnvironment =SpringProperties.getFlag(IGNORE_JNDI_PROPERTY_NAME);public static boolean isDefaultJndiEnvironmentAvailable() &#123;//å¦‚æžœå¿½ç•¥jndiåˆ™è¿”å›žfalseif (shouldIgnoreDefaultJndiEnvironment) &#123;return false;&#125; try &#123; //å‡†å¤‡jndiçŽ¯å¢ƒ new InitialContext().getEnvironment(); return true;&#125;catch (Throwable ex) &#123; return false;&#125;&#125; é€šè¿‡ä¸Šæ–‡å¯çŸ¥ï¼š 1ã€å¦‚æžœæˆ‘ä»¬éœ€è¦å¿½ç•¥jndiåˆ™å¯ä»¥é…ç½®spring.jndi.ignoreå€¼ä¸ºtrueå³å¯ã€‚ 2ã€åœ¨å“ªé‡Œé…ç½®å‘¢ï¼Ÿæˆ‘ä»¬ä¸å¦¨è·Ÿè¿›SpringPropertiesç±»ä¸­çš„getFlagæ–¹æ³•ã€‚ spring.jndi.ignoreèŽ·å–åŽŸç† SpringPropertiesç±»çš„getFlagæ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 123public static boolean getFlag(String key) &#123; return Boolean.parseBoolean(getProperty(key));&#125; ç»§ç»­è·Ÿè¿›getPropertyæ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112public static String getProperty(String key) &#123; //èŽ·å–spring.jndi.ignoreå€¼String value = localProperties.getProperty(key);if (value == null) &#123; try &#123;//èŽ·å–ç³»ç»Ÿçš„å˜é‡ value = System.getProperty(key); &#125; catch (Throwable ex) &#123; &#125; &#125; return value;&#125; ä¸Šè¿°çš„æ–¹æ³•å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š ä»ŽlocalPropertiesé›†åˆä¸­èŽ·å–spring.jndi.ignoreå±žæ€§ï¼Œå¦‚æžœæ²¡æœ‰èŽ·å–åˆ°åˆ™ç›´æŽ¥ä»ŽçŽ¯å¢ƒå˜é‡ä¸­è¿›è¡ŒèŽ·å–ã€‚localPropertiesé›†åˆåœ¨å“ªé‡Œåˆå§‹åŒ–çš„å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸€ä¸‹SpringPropertiesç±»ä¸­çš„é™æ€ä»£ç å—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920private static final String PROPERTIES_RESOURCE_LOCATION = &quot;spring.properties&quot;;static &#123;try &#123; ClassLoader cl = SpringProperties.class.getClassLoader(); URL url = (cl != null ? cl.getResource(PROPERTIES_RESOURCE_LOCATION) :ClassLoader.getSystemResource(PROPERTIES_RESOURCE_LOCATION)); if (url != null) &#123; logger.info(&quot;Found &apos;spring.properties&apos; file in local classpath&quot;); InputStream is = url.openStream(); try &#123; localProperties.load(is); &#125; finally &#123; is.close(); &#125; &#125; &#125;catch (IOException ex) &#123;&#125;&#125;&#125; çœ‹åˆ°ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬æ˜Žç™½äº†ï¼ŒåŽŸæ¥è¿™é‡Œæ˜¯ç›´æŽ¥è¯»å–è·Ÿç›®å½•ä¸­çš„spring.propertiesæ–‡ä»¶ä¸­çš„æ‰€æœ‰å±žæ€§ã€‚çœ‹åˆ°è¿™é‡Œï¼Œç„•ç„¶å¤§æ‚Ÿã€‚åŽŸæ¥å¦‚æ­¤ã€‚ è°ƒè¯•ä¸­ï¼Œæˆ‘ä¿®æ”¹äº†application.ymlæˆ–è€…application-dev.ymlé…ç½®æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­åŠ å…¥äº†spring.jndi.ignore=trueå‡ä¸ºç”Ÿæ•ˆï¼Œå¿…é¡»æ–°å»ºä¸€ä¸ªspring.propertiesï¼Œæˆ‘æ²¡æœ‰éªŒè¯spring.ymlè¡Œä¸è¡Œã€‚ é‡å¯tomcatå®¹å™¨ï¼Œæ²¡æœ‰jndiçš„è­¦å‘Šæ—¥å¿—äº†ã€‚ æ³¨æ„ï¼šè¿™ç§æ—¥å¿—å¦‚æžœåœ¨æœ¬åœ°ä»¥ç›´æŽ¥è¿è¡Œspringbootçš„å…¥å£æ–‡ä»¶çš„æ–¹å¼å¯åŠ¨ï¼Œæ˜¯æ²¡æœ‰çš„ï¼Œåªæœ‰å½“æ‰“æˆwaråŒ…ï¼Œæ”¾åœ¨tomcaté‡Œï¼Œå¯åŠ¨tomcat/bin/startup.shæ—¶æ‰ä¼šæœ‰ã€‚ ç»è¿‡å‡ æ­¥ä¿®æ”¹ï¼Œtomcatå¯åŠ¨é€Ÿåº¦æ˜Žæ˜¾æé«˜ã€‚ éƒ¨ç½²æ…¢ä¿®æ”¹åŽŸæ–‡ï¼šhttps://www.cnblogs.com/mycifeng/p/6972446.htmlç¦ç”¨jndiæ–¹å¼åŽŸæ–‡ï¼šhttps://blog.csdn.net/qq_30739519/article/details/78536965]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>tomcat</tag>
        <tag>tools</tag>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[reactJSé¡¹ç›®buildæ—¶å‘ç”Ÿâ€œv8::internal::V8::FatalProcessOutOfMemoryâ€å¼‚å¸¸]]></title>
    <url>%2F2018%2F07%2F07%2FreactJS%E9%A1%B9%E7%9B%AEbuild%E6%97%B6%E5%8F%91%E7%94%9F%E2%80%9Cv8%3A%3Ainternal%3A%3AV8%3A%3AFatalProcessOutOfMemory%E2%80%9D%E5%BC%82%E5%B8%B8%2F</url>
    <content type="text"><![CDATA[jenkinsä¸Šbuild Ant design Proç®¡ç†åŽå°é¡¹ç›®æ—¶å†…å­˜æº¢å‡ºå¼‚å¸¸è§£å†³ç®€ä¹¦åœ°å€ çŽ°è±¡æœ€è¿‘å·¥ç¨‹é‡Œæœ‰ä¸ªç”¨Ant Design Proæ­å»ºçš„å‰åŽç«¯åˆ†ç¦»çš„åŽå°ç®¡ç†ç³»ç»Ÿï¼Œä¸€ç›´ä½¿ç”¨jenkinsè‡ªåŠ¨éƒ¨ç½²çš„ï¼Œä½†æ˜¯ä»Šå¤©ä¸€ä¸å°å¿ƒbuildå¤±è´¥äº†ã€‚è™½ç„¶å¾ˆå¿«å°±æžå®šäº†ï¼Œä½†æ˜¯è¿˜æ˜¯è®°å½•ä¸€ä¸‹ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚ é—®é¢˜å‡ºçŽ°æž„å»ºå¤±è´¥ä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;pre class=&quot;console-output&quot; style=&quot;box-sizing: border-box; white-space: pre-wrap; word-wrap: break-word; margin: 0px; color: rgb(51, 51, 51); font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;Started by user [è¶…çº§ç®¡ç†å‘˜](http://jenkins.haier.haiqiang.xin:7776/user/admin)Building in workspace /var/lib/jenkins/workspace/chuangke_pre_portal_web_auto_deploy &gt; git rev-parse --is-inside-work-tree # timeout=10Fetching changes from the remote Git repository &gt; git config remote.origin.url git@git.3vyd.com:portalmanage.git # timeout=10Fetching upstream changes from git@git.3vyd.com:portalmanage.git &gt; git --version # timeout=10 &gt; git fetch --tags --progress git@git.3vyd.com:portalmanage.git +refs/heads/*:refs/remotes/origin/* &gt; git rev-parse refs/remotes/origin/master^&#123;commit&#125; # timeout=10 &gt; git rev-parse refs/remotes/origin/origin/master^&#123;commit&#125; # timeout=10Checking out Revision c9a9d48ae6453a8d84734920f8718abec5598f2a (refs/remotes/origin/master) &gt; git config core.sparsecheckout # timeout=10 &gt; git checkout -f c9a9d48ae6453a8d84734920f8718abec5598f2aCommit message: &quot;ç›´æ’­ç»Ÿè®¡&quot; &gt; git rev-list --no-walk 34ede46c51b5a223746b1c07d0845952d7d0eefd # timeout=10[chuangke_pre_portal_web_auto_deploy] $ /bin/sh -xe /tmp/jenkins1426166608252484443.sh+ yarnyarn install v1.3.2[1/4] Resolving packages...success Already up-to-date.Done in 2.31s.+ REACT_APP_BRANCH=PRE+ yarn buildyarn run v1.3.2$ node scripts/build.jsCreating an optimized production build...&lt;--- Last few GCs ---&gt; 780502 ms: Mark-sweep 1323.4 (1408.7) -&gt; 1317.3 (1408.7) MB, 955.6 / 0.0 ms [allocation failure] [GC in old space requested]. 781304 ms: Mark-sweep 1317.3 (1408.7) -&gt; 1317.3 (1410.7) MB, 802.4 / 0.0 ms [allocation failure] [GC in old space requested]. 782171 ms: Mark-sweep 1317.3 (1410.7) -&gt; 1326.8 (1403.7) MB, 866.5 / 0.0 ms [last resort gc]. 782958 ms: Mark-sweep 1326.8 (1403.7) -&gt; 1336.9 (1403.7) MB, 787.3 / 0.0 ms [last resort gc].&lt;--- JS stacktrace ---&gt;==== JS stack trace =========================================Security context: 0x1116596cf781 &lt;JS Object&gt; 1: stringify [native json.js:~176] [pc=0x1ab7d7e562d3] (this=0x1116596c92a1 &lt;a JSON with map 0xa5d18e09b09&gt;,E=0x27fe2de64711 &lt;an Object with map 0x23d396b32619&gt;,F=0x111659604381 &lt;undefined&gt;,S=0x111659604381 &lt;undefined&gt;) 2: arguments adaptor frame: 1-&gt;3 3: /* anonymous */(aka /* anonymous */) [/var/lib/jenkins/workspace/chuangke_pre_portal_web_auto_deploy/node_modules/webpack/lib/Sou...FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory 1: node::Abort() [node] 2: 0xdf1d9c [node] 3: v8::Utils::ReportApiFailure(char const*, char const*) [node] 4: v8::internal::V8::FatalProcessOutOfMemory(char const*, bool) [node] 5: v8::internal::Factory::NewRawTwoByteString(int, v8::internal::PretenureFlag) [node] 6: v8::internal::String::SlowFlatten(v8::internal::Handle&lt;v8::internal::ConsString&gt;, v8::internal::PretenureFlag) [node] 7: v8::internal::String::Flatten(v8::internal::Handle&lt;v8::internal::String&gt;, v8::internal::PretenureFlag) [node] 8: v8::internal::BasicJsonStringifier::SerializeString(v8::internal::Handle&lt;v8::internal::String&gt;) [node] 9: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_&lt;false&gt;(v8::internal::Handle&lt;v8::internal::Object&gt;, bool, v8::internal::Handle&lt;v8::internal::Object&gt;) [node]10: v8::internal::BasicJsonStringifier::SerializeJSArraySlow(v8::internal::Handle&lt;v8::internal::JSArray&gt;, unsigned int, unsigned int) [node]11: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_&lt;true&gt;(v8::internal::Handle&lt;v8::internal::Object&gt;, bool, v8::internal::Handle&lt;v8::internal::Object&gt;) [node]12: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_&lt;false&gt;(v8::internal::Handle&lt;v8::internal::Object&gt;, bool, v8::internal::Handle&lt;v8::internal::Object&gt;) [node]13: v8::internal::BasicJsonStringifier::Stringify(v8::internal::Handle&lt;v8::internal::Object&gt;) [node]14: v8::internal::Runtime_BasicJSONStringify(int, v8::internal::Object**, v8::internal::Isolate*) [node]15: 0x1ab7ca0092a7error Command failed with signal &quot;SIGABRT&quot;.info Visit [https://yarnpkg.com/en/docs/cli/run](https://yarnpkg.com/en/docs/cli/run) for documentation about this command.Build step &apos;Execute shell&apos; marked build as failureSending e-mails to: marvin.ma@3vyd.com damon.shen@3vyd.comFinished: FAILURE&lt;/pre&gt; è§£å†³æ€è·¯1ã€JenkinsæœåŠ¡å™¨ç³»ç»Ÿå†…å­˜ä¸å¤Ÿçœ‹äº†çœ‹jenkinsæ‰€åœ¨æœåŠ¡å™¨çš„å†…å­˜ï¼Œåœ¨jenkinsæ‰§è¡Œè¿™ä¸ªjobçš„æ—¶å€™ï¼Œå†…å­˜æœ€é«˜ä¹Ÿå°±140%ï¼Œå› ä¸ºæœåŠ¡å™¨æ˜¯Centos 4æ ¸16Gçš„é…ç½®ï¼Œç”¨freeæŸ¥çœ‹ï¼Œå¯ç”¨å†…å­˜ä»ç„¶9Gå¤šã€‚å½“æ—¶æ²¡æœ‰æˆªå›¾ï¼Œæ‰€ä»¥å°±ä¸è´´å›¾äº†ï¼Œä½†æ˜¯è‚¯å®šä¸æ˜¯è¯´æœåŠ¡å™¨å†…å­˜åƒç´§å¯¼è‡´çš„ã€‚ 2ã€æŽ’é™¤äº†æœåŠ¡å™¨æœ¬èº«å†…å­˜å°çš„é—®é¢˜ï¼Œè€ƒè™‘æœ¬æ¬¡buildæ–°è¿›çš„ä»£ç çš„é—®é¢˜ï¼Œçœ‹äº†ä¸€ä¸‹å°±ä¸¤ä¸ªcommitï¼Œå› ä¸ºç½‘ä¸Šæœ‰è¯´æ˜¯è°ƒç”¨file.writeçš„æ—¶å€™å¤„ç†ä¸å½“ï¼Œä¼šå¯¼è‡´è¯¥é—®é¢˜çš„äº§ç”Ÿçš„ï¼Œæ­£å¥½æœ¬æ¬¡buildæœ‰ä¸€ä¸ªcommitæ˜¯æ·»åŠ äº†å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä½†æ˜¯æ£€æŸ¥ä¸€åœˆå¥½åƒæ²¡æœ‰é—®é¢˜ã€‚ 3ã€æ¡†æž¶é—®é¢˜ï¼Œé™åˆ¶äº†å†…å­˜ã€‚ è§£å†³æ–¹æ¡ˆæœ€åŽé€šè¿‡https://stackoverflow.com/questions/38558989/node-js-heap-out-of-memoryä¸€æ–‡æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆã€‚å…ˆåšæœ¬åœ°éƒ¨ç½²å°è¯•ï¼Œä¿®æ”¹è¯¥jobçš„buildå‘½ä»¤ï¼Œå°†åŽŸæ¥çš„ yarnREACT_APP_BRANCH=PRE yarn build æ”¹æˆäº† yarnREACT_APP_BRANCH=PRE node â€“max-old-space-size=4096 scripts/build.js é‡æ–°buildï¼Œsuccessã€‚ ç„¶åŽå› ä¸ºè¯¥é¡¹ç›®åˆ†å¼€å‘ï¼Œæµ‹è¯•ã€ç”Ÿäº§ç­‰å¤šä¸ªçŽ¯å¢ƒï¼Œå› æ­¤æ‰“ç®—åœ¨ä»£ç æ¡†æž¶é‡Œç›´æŽ¥ä½œä¸ºé…ç½®é¡¹ï¼Œå…·ä½“çš„åšæ³•æ˜¯åœ¨package.jsonçš„buildå‘½ä»¤å‰åŠ ä¸ŠæŒ‡å®šå†…å­˜çš„å‚æ•°--max-old-space-size=4096ã€‚å°†åŽŸæ¥çš„ï¼š12345&quot;scripts&quot;: &#123; &quot;start&quot;: &quot;node scripts/start.js&quot;, &quot;build&quot;: &quot;node scripts/build.js&quot;, &quot;test&quot;: &quot;node scripts/test.js --env=jsdom&quot; &#125; ä¿®æ”¹ä¸ºï¼š12345&quot;scripts&quot;: &#123; &quot;start&quot;: &quot;node scripts/start.js&quot;, &quot;build&quot;: &quot;node --max-old-space-size=4096 scripts/build.js&quot;, &quot;test&quot;: &quot;node scripts/test.js --env=jsdom&quot;&#125;, æäº¤ä»£ç ï¼Œjenkinsä¿®æ”¹å›žåŽŸæ¥çš„yarn startï¼Œé‡æ–°buildï¼Œ SUCCESSã€‚ä¸€åŠ³æ°¸é€¸ã€‚]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tcpdumpæŠ“åŒ…å¹¶ç”¨WireSharkè¿›è¡Œæ•°æ®åˆ†æž]]></title>
    <url>%2F2018%2F07%2F07%2Ftcpdump%E6%8A%93%E5%8C%85%E5%B9%B6%E7%94%A8WireShark%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[åœ¨linuxä¸Šä½¿ç”¨tcpdumpæŠ“å–http/tcpæŠ¥æ–‡ï¼Œä½¿ç”¨WireSharkè¿›è¡Œå‚æ•°åˆ†æžã€‚ç®€ä¹¦åœ°å€ 1ã€ä½¿ç”¨èƒŒæ™¯æœ€è¿‘åœ¨é¡¹ç›®å¼€å‘æ—¶é‡åˆ°ä¸€ç§æƒ…å†µï¼Œå†™çš„æŽ¥å£å‰ç«¯åŒäº‹åé¦ˆæ˜¯400ï¼ŒåŽç«¯åŒäº‹è®¤ä¸ºhttp status æ˜¯4å¼€å¤´çš„ï¼Œè‚¯å®šæ˜¯å‰ç«¯çš„é—®é¢˜ï¼Œå‰ç«¯çš„åŒäº‹åˆä¸çŸ¥é“æŽ¥å£æ˜¯æ€Žä¹ˆå†™çš„ï¼Œéœ€è¦ä¼ çš„å‚æ•°ä¹Ÿä¼ äº†ï¼Œä½†æ˜¯å°±æ˜¯400ï¼Œé‚£ä¹ˆä½œä¸ºè´Ÿè´£äººï¼Œä¸èƒ½ä»»ç”±ä¸¤è¾¹è¸¢çš®çƒå§ï¼Œå¾—æ‹¿å‡ºä¸ªæ–¹æ¡ˆçœ‹çœ‹ä¸ºå•¥400ã€‚å½“ç„¶tacpdumpè¿™æ¬¾å¼ºå¤§çš„æŠ“åŒ…å·¥å…·ä¸åªæ˜¯ç”¨ä½¿ç”¨è§£å†³æˆ‘è¿™ä¸ªå¾ˆlowçš„é—®é¢˜ï¼Œæˆ‘çš„åœºæ™¯å¦‚æžœæ˜¯å‰åŽç«¯é…åˆå¾—å½“çš„è¯ï¼Œæˆ–è€…å·²æœ‰é»˜å¥‘çš„è¯ï¼Œæ›´å¥½ç‚¹ï¼Œå¦‚æžœæœ‰æ–‡æ¡£ï¼Œå°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜äº†ã€‚åºŸè¯å°‘è¯´ï¼Œç›´æŽ¥è¯´æ€Žä¹ˆåšçš„å§ã€‚æœ€åŽé€‰æ‹©linuxæœåŠ¡å™¨ä¸ŠæŠ“å¥½æŠ¥æ–‡ï¼Œç”¨WireSharkè¿™æ¬¾å¼ºå¤§çš„æŠ“åŒ…å·¥å…·æ¥åˆ†æžä¸€ä¸‹å•¦ã€‚ å·¥å…·ä»‹ç» Wiresharkæ˜¯ä¸€ä¸ªç½‘ç»œåè®®æ£€æµ‹å·¥å…·ï¼Œæ”¯æŒWindowså¹³å°å’ŒUnixå¹³å°ï¼Œæˆ‘ä¸€èˆ¬åªåœ¨Windowså¹³å°ä¸‹ä½¿ç”¨Wiresharkï¼Œå¦‚æžœæ˜¯Linuxçš„è¯ï¼Œæˆ‘ç›´æŽ¥ç”¨tcpdumpäº†ï¼Œå› ä¸ºæˆ‘å·¥ä½œçŽ¯å¢ƒä¸­çš„Linuxä¸€èˆ¬åªæœ‰å­—ç¬¦ç•Œé¢ï¼Œä¸”ä¸€èˆ¬è€Œè¨€Linuxéƒ½è‡ªå¸¦çš„tcpdumpï¼Œæˆ–è€…ç”¨tcpdumpæŠ“åŒ…ä»¥åŽç”¨Wiresharkæ‰“å¼€åˆ†æžã€‚åœ¨Windowså¹³å°ä¸‹ï¼ŒWiresharké€šè¿‡WinPcapè¿›è¡ŒæŠ“åŒ…ï¼Œå°è£…çš„å¾ˆå¥½ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åˆ¶å®šæŠ“åŒ…è¿‡æ»¤å™¨æˆ–è€…æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œå…·ä½“åœ¨ä¸‹é¢ä»‹ç»ã€‚Wiresharkæ˜¯ä¸€ä¸ªå…è´¹çš„å·¥å…·ï¼Œåªè¦googleä¸€ä¸‹å°±èƒ½å¾ˆå®¹æ˜“æ‰¾åˆ°ä¸‹è½½çš„åœ°æ–¹ã€‚ tcpdumpæ˜¯åŸºäºŽUnixç³»ç»Ÿçš„å‘½ä»¤è¡Œå¼çš„æ•°æ®åŒ…å—…æŽ¢å·¥å…·ã€‚å¦‚æžœè¦ä½¿ç”¨tcpdumpæŠ“å–å…¶ä»–ä¸»æœºMACåœ°å€çš„æ•°æ®åŒ…ï¼Œå¿…é¡»å¼€å¯ç½‘å¡æ··æ‚æ¨¡å¼ï¼Œæ‰€è°“æ··æ‚æ¨¡å¼ï¼Œç”¨æœ€ç®€å•çš„è¯­è¨€å°±æ˜¯è®©ç½‘å¡æŠ“å–ä»»ä½•ç»è¿‡å®ƒçš„æ•°æ®åŒ…ï¼Œä¸ç®¡è¿™ä¸ªæ•°æ®åŒ…æ˜¯ä¸æ˜¯å‘ç»™å®ƒæˆ–è€…æ˜¯å®ƒå‘å‡ºçš„ï¼Œç‚¹å‡»ã€http://en.wikipedia.org/wiki/Promiscuous_modeã€‘èŽ·å–æ›´å¤šæœ‰å…³æ··æ‚æ¨¡å¼çš„èµ„æ–™ã€‚ä¸€èˆ¬è€Œè¨€ï¼ŒUnixä¸ä¼šè®©æ™®é€šç”¨æˆ·è®¾ç½®æ··æ‚æ¨¡å¼ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥çœ‹åˆ°åˆ«äººçš„ä¿¡æ¯ï¼Œæ¯”å¦‚telnetçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™æ ·ä¼šå¼•èµ·ä¸€äº›å®‰å…¨ä¸Šçš„é—®é¢˜ï¼Œæ‰€ä»¥åªæœ‰rootç”¨æˆ·å¯ä»¥å¼€å¯æ··æ‚æ¨¡å¼ï¼Œå¼€å¯æ··æ‚æ¨¡å¼çš„å‘½ä»¤æ˜¯ï¼šifconfig eth0 promisc, eth0æ˜¯ä½ è¦æ‰“å¼€æ··æ‚æ¨¡å¼çš„ç½‘å¡ã€‚è‚¯å®šæœ‰äººè¦é—®å¦‚æžœåœ¨windowsä¸‹è¦ä¸è¦æ‰“å¼€æ··æ‚æ¨¡å¼ï¼Œwindowsä¸‹ç½‘å¡æ²¡æœ‰ä»€ä¹ˆæ··æ‚æ¨¡å¼ä¸æ··æ‚æ¨¡å¼ï¼Œåœ¨äºŽåº”ç”¨ç¨‹åºæœ¬èº«ï¼Œå¦‚ä½¿ç”¨WiresharkæŠ“åŒ…çš„æ—¶å€™å¯ä»¥é€šè¿‡è®¾ç½®ä¸ºåœ¨æ··æ‚æ¨¡å¼ä¸‹æŠ“åŒ…ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯¥æ­»çš„ARPæ¬ºéª—ç—…æ¯’å¯ä»¥çŒ–ç‹‚çš„åŽŸå› ï¼‰ã€‚tcpdumpå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šæŠ“åŒ…è¿‡æ»¤å™¨ï¼Œè€Œä¸”å…¶è¿‡æ»¤å™¨è¯­è¨€éžå¸¸è‘—åï¼Œå«åšBerkeleyåŒ…è¿‡æ»¤ï¼Œç®€ç§°BPFè¯­è¨€ã€‚ 2ã€å®žé™…æ“ä½œå®žé™…æ“ä½œè¿‡ç¨‹å› ä¸ºæˆ‘ä½œä¸ºåŽç«¯å·¥ç¨‹å¸ˆï¼Œæ²¡æœ‰å‰ç«¯çŽ¯å¢ƒï¼Œå› æ­¤ç”¨æˆ‘æœ¬åœ°æŽ¥å£è°ƒè¯•ç¥žå¥‡postmanæ¥æ¨¡æ‹Ÿå‰ç«¯ã€‚æœåŠ¡ç«¯æœ‰ä¸€ä¸ªæŽ¥å£æ˜¯è¿™æ ·çš„ï¼š12345@PostMapping(&quot;tests&quot;)public RtnResult&lt;String&gt; testPost(@RequestBody DataVo vo) &#123; logger.info(&quot;post data:&#123;&#125;&quot; , JSONObject.toJSONString(vo)); return new RtnResult&lt;&gt;(0,&quot;ä¿å­˜æˆåŠŸ&quot;);&#125; ç”¨postmanæœ¬åœ°æµ‹è¯•ï¼Œæ•…æ„ä¸ä¼ å‚æ•°ï¼Œæ•ˆæžœå¦‚ä¸‹ï¼šæŽ¥ä¸‹æ¥ï¼ŒæŠ“åŒ…æŸ¥çœ‹ã€‚ 2.1ã€å‡†å¤‡å·¥ä½œ å…ˆçœ‹çœ‹è‡ªå·±æœ¬åœ°çš„ipï¼Œæœ‰ä¸ªæ¯”è¾ƒå‘çš„åœ°æ–¹ï¼Œå°±æ˜¯ä¸è¦æƒ³å½“ç„¶çš„è®¤ä¸ºåœ¨æœ¬åœ°å‘½ä»¤è¡Œipconfigæˆ–è€…ifconfigæŸ¥çœ‹åˆ°çš„å°±æ˜¯æ‰€è°“çš„æœ¬åœ°ipï¼Œè¦çœ‹å¤–ç½‘å‡ºåŽ»çš„å¯¹å…¬IPåœ°å€ã€‚æ¯”å¦‚http://www.ip138.com/è¿™ä¸ªç½‘ç«™å¯ä»¥å°±å¯ä»¥äº§çœ‹æœ¬åœ°ipï¼Œå¯ä»¥è¯•è¯•ï¼Œä¸¤ç§æ–¹å¼å¾—åˆ°çš„ipåœ°å€æ˜¯ä¸ä¸€æ ·çš„ã€‚ ç¡®ä¿æœåŠ¡å™¨å®‰è£…äº†tcpdumpï¼Œä¸€èˆ¬linuxéƒ½è‡ªå¸¦äº†è¿™ä¸ªå‘½ä»¤ï¼Œå¦‚æžœæ²¡æœ‰çš„è‡ªè¡Œç™¾åº¦å®‰è£…ã€‚ ç¡®å®šæœåŠ¡å™¨çš„ç½‘å¡å·ï¼Œä¸€èˆ¬é»˜è®¤æ˜¯eth0ã€‚2.2ã€æŠ“å–æœåŠ¡ç«¯æŠ¥æ–‡ä¾‹å¦‚æˆ‘æˆªå–æœ¬æœº112.224.67.134å’Œä¸»æœº39.106.35.56ä¹‹é—´çš„æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨39.106.35.56çš„ä»»æ„ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š12[root@dev ~]# tcpdump -A -i eth0 -w dump-file1 host 112.224.67.134tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes åœ¨æœ¬åœ°ç”¨postè¯·æ±‚æœåŠ¡å™¨çš„æŽ¥å£ Ctrl+Cåœæ­¢ä¿å­˜æŠ“åŒ…ï¼ŒæŠ¥æ–‡å†…å®¹ä¿å­˜åœ¨dump-file1æ–‡ä»¶å†…123456789[root@dev ~]# tcpdump -A -i eth0 -w dump-file1 host 112.224.67.134tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes^C24 packets captured25 packets received by filter0 packets dropped by kernel[root@dev ~]# lltotal 4-rw-r--r-- 1 tcpdump tcpdump 2880 Jul 3 14:05 dump-file1[root@dev ~]# å¯ä»¥ä½¿ç”¨tcpdump -r dump-file1å‘½ä»¤æŸ¥çœ‹123456789101112131415161718192021222324252627[root@dev ~]# tcpdump -r dump-file1 reading from file dump-file1, link-type EN10MB (Ethernet)14:04:30.636260 IP dev.ssh &gt; 112.224.67.134.26919: Flags [P.], seq 332116900:332116952, ack 3962938602, win 255, length 5214:04:30.661616 IP dev.ssh &gt; 112.224.67.134.26919: Flags [P.], seq 52:184, ack 1, win 255, length 13214:04:30.710115 IP 112.224.67.134.26919 &gt; dev.ssh: Flags [.], ack 184, win 66, length 014:04:49.658756 IP 112.224.67.134.26920 &gt; dev.ssh: Flags [P.], seq 3449703456:3449703492, ack 3469026640, win 64, length 3614:04:49.698057 IP dev.ssh &gt; 112.224.67.134.26920: Flags [.], ack 36, win 255, length 014:05:04.771846 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [S], seq 3379667287, win 17520, options [mss 1400,nop,wscale 8,nop,nop,sackOK], length 014:05:04.771914 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [S.], seq 2331290743, ack 3379667288, win 29200, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 014:05:04.811492 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], ack 1, win 68, length 014:05:04.820465 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [P.], seq 1:415, ack 1, win 68, length 41414:05:04.820496 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [.], ack 415, win 237, length 014:05:04.824051 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [P.], seq 1:354, ack 415, win 237, length 35314:05:04.824297 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [P.], seq 354:359, ack 415, win 237, length 514:05:04.871458 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], ack 359, win 67, length 014:05:05.911468 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], seq 414:415, ack 359, win 67, length 114:05:05.911526 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [.], ack 415, win 237, options [nop,nop,sack 1 &#123;414:415&#125;], length 014:05:06.951486 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], seq 414:415, ack 359, win 67, length 114:05:06.951537 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [.], ack 415, win 237, options [nop,nop,sack 1 &#123;414:415&#125;], length 014:05:08.011588 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], seq 414:415, ack 359, win 67, length 114:05:08.011644 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [.], ack 415, win 237, options [nop,nop,sack 1 &#123;414:415&#125;], length 014:05:09.051406 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], seq 414:415, ack 359, win 67, length 114:05:09.051452 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [.], ack 415, win 237, options [nop,nop,sack 1 &#123;414:415&#125;], length 014:05:10.091399 IP 112.224.67.134.58166 &gt; dev.d-s-n: Flags [.], seq 414:415, ack 359, win 67, length 114:05:10.091451 IP dev.d-s-n &gt; 112.224.67.134.58166: Flags [.], ack 415, win 237, options [nop,nop,sack 1 &#123;414:415&#125;], length 014:05:10.130248 IP 112.224.67.134.26919 &gt; dev.ssh: Flags [P.], seq 1:53, ack 184, win 66, length 52[root@dev ~]# 2.2ã€ç”¨wiresharkåˆ†æžæŠ¥æ–‡å†…å®¹äº†è§£tcpç½‘ç»œåè®®çš„ï¼Œçœ‹åˆ°ä»¥ä¸ŠæŠ¥æ–‡ï¼Œåº”è¯¥å·²ç»äº†è§£ä¸€äºŒäº†ã€‚ä¸ºäº†å°†å…¶è½¬æ¢æˆå¸¸ç”¨çš„httpåè®®ï¼Œæˆ‘ä»¬ç”¨wiresharkè¿™æ¬¾å·¥å…·å†åˆ†æžä¸€ä¸‹ã€‚ä¸‹è½½è¯¥æ–‡ä»¶ï¼Œåœ¨windowsä¸Šå¯ä»¥ç›´æŽ¥å°†è¯¥æ–‡ä»¶æ‹–å…¥åˆ°wiresharkï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ã€‚å¯ä»¥çœ‹åˆ°ä¸‰æ¬¡æ¡æ‰‹çš„å…·ä½“æŠ¥æ–‡ã€‚åŒæ—¶çœ‹åˆ°äº†ä¸€ä¸ªpostçš„http requestå’Œä¸€ä¸ªhttp statusä¸º200çš„http responseã€‚å³å‡»postè¯·æ±‚ï¼Œé€‰æ‹©ã€è¿½è¸ªæµã€‘-&gt;ã€TCPæµã€‘ï¼šçœ‹åˆ°äº†å‰ç«¯ä¼ è¿‡æ¥çš„å‚æ•°å’Œè¿”å›žå€¼ã€‚ å½“ç„¶ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨logï¼Œä¹Ÿçœ‹åˆ°äº†æ—¥å¿—ä¿¡æ¯122018-07-03 14:24:16.660 INFO 29004 --- [nio-8086-exec-6] com.hczt.shop.weixin.config.CorsFilter : requesturi is : /weixin/tests2018-07-03 14:24:16.661 INFO 29004 --- [nio-8086-exec-6] c.h.s.weixin.controller.TestController : post data:&#123;&quot;address&quot;:&quot;å±±ä¸œé’å²›&quot;,&quot;age&quot;:28,&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;sex&quot;:&quot;ç”·&quot;&#125; è¿™é‡Œæ¼”ç¤ºçš„æ­£å¸¸è¿”å›žçš„ï¼Œå¦‚æžœæŽ¥å£æ˜¯400ï¼ŒæœåŠ¡ç«¯ä¹Ÿå°±æ²¡æœ‰è¿™æ¡logï¼Œè¿™æ—¶å€™æŠ“åŒ…ä¹Ÿæ‰æ›´æœ‰æ„ä¹‰äº†ã€‚åˆ°è¿™é‡Œï¼ŒåŸºæœ¬çš„ä½¿ç”¨å°±ä»‹ç»å®Œäº†ã€‚è‡³äºŽWireSharkåœ¨æœ¬åœ°æ€Žä¹ˆä½¿ç”¨ï¼Œæ€Žä¹ˆæ·»åŠ è¿‡æ»¤å™¨ç­‰ï¼ŒæŸ¥çœ‹å…¶å®ƒåšæ–‡å­¦ä¹ ã€‚ 3ã€æŽ¨èWireSharkæŠ“åŒ…ä½¿ç”¨æ•™ç¨‹tcpdumpè¯­æ³•ä»‹ç»ä¸Žå¸¸ç”¨å‚æ•°ä¸¾ä¾‹]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[â€œSpringBoot2.0ä¸å®¹é”™è¿‡çš„æ–°ç‰¹æ€§ WebFluxå“åº”å¼ç¼–ç¨‹â€å­¦ä¹ ç¬”è®°(ä¸€)]]></title>
    <url>%2F2018%2F07%2F07%2Fspringboot2.0-webflux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01%2F</url>
    <content type="text"><![CDATA[WebFluxå“åº”å¼ç¼–ç¨‹å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ç®€ä¹¦åœ°å€ æ…•è¯¾ç½‘å­¦ä¹ åœ°å€ï¼šhttps://coding.imooc.com/class/209.htmlåŽŸè¯¾ç¨‹æ˜¯ä»˜è´¹çš„ï¼Œä½†æ˜¯åŒäº‹å‘äº†æˆ‘ä¸‹è½½ç¦»çº¿ç‰ˆï¼Œæ‹¿æ¥æŠ½ç©ºå­¦å‘—ï¼Œå­¦æ— æ­¢å¢ƒã€‚ ç¬¬ä¸€èŠ‚ è¯¾ç¨‹ä»‹ç» ç¬¬äºŒèŠ‚ å‡½æ•°å¼ç¼–ç¨‹å’Œlambdaè¡¨è¾¾å¼ æ•°ç»„é‡Œå–æœ€å°å€¼ 12345678910111213141516public static void main(String[] args) &#123; int[] nums = &#123;33,55,-55,90,-666,90&#125;; int min = Integer.MAX_VALUE; for (int i : nums) &#123; if(i &lt; min) &#123; min = i; &#125; &#125; System.out.println(min); // jdk8 int min2 = IntStream.of(nums).parallel().min().getAsInt(); System.out.println(min2);&#125; å¤šçº¿ç¨‹ åŒ¿åå†…éƒ¨ç±» 1234567891011121314151617public static void main(String[] args) &#123; Object target = new Runnable() &#123; @Override public void run() &#123; System.out.println(&quot;ok&quot;); &#125; &#125;; new Thread((Runnable) target).start(); // jdk8 lambda Object target2 = (Runnable)() -&gt; System.out.println(&quot;ok&quot;); Runnable target3 = () -&gt; System.out.println(&quot;ok&quot;); System.out.println(target2 == target3); // false new Thread((Runnable) target2).start();&#125; å‡½æ•°æŽ¥å£ä»¥åŠé“¾å¼æ“ä½œ 123456789101112131415161718192021222324import java.text.DecimalFormat;import java.util.function.Function;class MyMoney &#123; private final int money; public MyMoney(int money) &#123; this.money = money; &#125; public void printMoney(Function&lt;Integer, String&gt; moneyFormat) &#123; System.out.println(&quot;æˆ‘çš„å­˜æ¬¾ï¼š&quot; + moneyFormat.apply(this.money)); &#125;&#125;public class MoneyDemo &#123; public static void main(String[] args) &#123; MyMoney me = new MyMoney(99999999); Function&lt;Integer, String&gt; moneyFormat = i -&gt; new DecimalFormat(&quot;#,###&quot;) .format(i); // å‡½æ•°æŽ¥å£é“¾å¼æ“ä½œ me.printMoney(moneyFormat.andThen(s -&gt; &quot;äººæ°‘å¸ &quot; + s)); &#125;&#125; è¿è¡Œæ•ˆæžœ æˆ‘çš„å­˜æ¬¾ï¼šäººæ°‘å¸ 99,999,999 å‡½æ•°å¼æŽ¥å£1234567891011public static void main(String[] args) &#123; // æ–­è¨€å‡½æ•°æŽ¥å£ IntPredicate predicate = i -&gt; i &gt; 0; System.out.println(predicate.test(-9)); //å»ºè®®ä½¿ç”¨å¸¦ç±»åž‹çš„æŽ¥å£ï¼Œè¿™æ ·å°±ä¸ç”¨å†™æ³›åž‹äº† // IntConsumer // æ¶ˆè´¹å‡½æ•°æŽ¥å£ Consumer&lt;String&gt; consumer = s -&gt; System.out.println(s); consumer.accept(&quot;è¾“å…¥çš„æ•°æ®&quot;);&#125; æ–¹æ³•å¼•ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109import java.util.ArrayList;import java.util.List;import java.util.function.Consumer;import java.util.function.IntUnaryOperator;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author marvin.ma * @create 2018-07-03 18:58 * @desc $&#123;DESCRIPTION&#125; **/class Dog &#123; private String name = &quot;å“®å¤©çŠ¬&quot;; /** * é»˜è®¤10æ–¤ç‹—ç²® */ private int food = 10; public Dog() &#123; &#125; /** * å¸¦å‚æ•°çš„æž„é€ å‡½æ•° * * @param name */ public Dog(String name) &#123; this.name = name; &#125; /** * ç‹—å«ï¼Œé™æ€æ–¹æ³• * * @param dog */ public static void bark(Dog dog) &#123; System.out.println(dog + &quot;å«äº†&quot;); &#125; /** * åƒç‹—ç²® JDK * * é»˜è®¤ä¼šæŠŠå½“å‰å®žä¾‹ä¼ å…¥åˆ°éžé™æ€æ–¹æ³•ï¼Œå‚æ•°åä¸ºthisï¼Œä½ç½®æ˜¯ç¬¬ä¸€ä¸ªï¼› * * @param num * @return è¿˜å‰©ä¸‹å¤šå°‘æ–¤ */ public int eat(int num) &#123; System.out.println(&quot;åƒäº†&quot; + num + &quot;æ–¤ç‹—ç²®&quot;); this.food -= num; return this.food; &#125; @Override public String toString() &#123; return this.name; &#125;&#125;public class MethodRefrenceDemo &#123; public static void main(String[] args) &#123; Dog dog = new Dog(); dog.eat(3); // æ–¹æ³•å¼•ç”¨ Consumer&lt;String&gt; consumer = System.out::println; consumer.accept(&quot;æŽ¥å—çš„æ•°æ®&quot;); // é™æ€æ–¹æ³•çš„æ–¹æ³•å¼•ç”¨ Consumer&lt;Dog&gt; consumer2 = Dog::bark; consumer2.accept(dog); // éžé™æ€æ–¹æ³•ï¼Œä½¿ç”¨å¯¹è±¡å®žä¾‹çš„æ–¹æ³•å¼•ç”¨ // Function&lt;Integer, Integer&gt; function = dog::eat; // UnaryOperator&lt;Integer&gt; function = dog::eat; //å…¥å‚å‡ºå‚éƒ½æ˜¯Integerï¼Œå¯ä»¥ç”¨è¿™ä¸ª IntUnaryOperator function = dog::eat; // dogç½®ç©ºï¼Œä¸å½±å“ä¸‹é¢çš„å‡½æ•°æ‰§è¡Œï¼Œå› ä¸ºjava å‚æ•°æ˜¯ä¼ å€¼ dog = null; System.out.println(&quot;è¿˜å‰©ä¸‹&quot; + function.applyAsInt(2) + &quot;æ–¤&quot;); // // // ä½¿ç”¨ç±»åæ¥æ–¹æ³•å¼•ç”¨ // BiFunction&lt;Dog, Integer, Integer&gt; eatFunction = Dog::eat; // System.out.println(&quot;è¿˜å‰©ä¸‹&quot; + eatFunction.apply(dog, 2) + &quot;æ–¤&quot;); // // // æž„é€ å‡½æ•°çš„æ–¹æ³•å¼•ç”¨ // Supplier&lt;Dog&gt; supplier = Dog::new; // System.out.println(&quot;åˆ›å»ºäº†æ–°å¯¹è±¡ï¼š&quot; + supplier.get()); // // å¸¦å‚æ•°çš„æž„é€ å‡½æ•°çš„æ–¹æ³•å¼•ç”¨ Function&lt;String, Dog&gt; function2 = Dog::new; System.out.println(&quot;åˆ›å»ºäº†æ–°å¯¹è±¡ï¼š&quot; + function2.apply(&quot;æ—ºè´¢&quot;)); // æµ‹è¯•javaå˜é‡æ˜¯ä¼ å€¼è¿˜æ˜¯ç©¿å¼•ç”¨ List&lt;String&gt; list = new ArrayList&lt;&gt;(); test(list); System.err.println(list); &#125; private static void test(List&lt;String&gt; list) &#123; list = null; &#125;&#125; è¿è¡Œè¾“å‡ºï¼šåƒäº†3æ–¤ç‹—ç²®æŽ¥å—çš„æ•°æ®å“®å¤©çŠ¬å«äº†åƒäº†2æ–¤ç‹—ç²®è¿˜å‰©ä¸‹5æ–¤åˆ›å»ºäº†æ–°å¯¹è±¡ï¼šæ—ºè´¢ ç±»åž‹å¼•ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445@FunctionalInterfaceinterface IMath &#123; int add(int x, int y);&#125;@FunctionalInterfaceinterface IMath2 &#123; int sub(int x, int y);&#125;public class TypeDemo &#123; public static void main(String[] args) &#123; // å˜é‡ç±»åž‹å®šä¹‰ IMath lambda = (x, y) -&gt; x + y; // æ•°ç»„é‡Œ IMath[] lambdas = &#123; (x, y) -&gt; x + y &#125;; // å¼ºè½¬ Object lambda2 = (IMath) (x, y) -&gt; x + y; // é€šè¿‡è¿”å›žç±»åž‹ IMath createLambda = createLambda(); TypeDemo demo = new TypeDemo(); // å½“æœ‰äºŒä¹‰æ€§çš„æ—¶å€™ï¼Œä½¿ç”¨å¼ºè½¬å¯¹åº”çš„æŽ¥å£è§£å†³ demo.test( (IMath2)(x, y) -&gt; x + y); &#125; public void test(IMath math) &#123; &#125; public void test(IMath2 math) &#123; &#125; public static IMath createLambda() &#123; return (x, y) -&gt; x + y; &#125;&#125; çº§è”è¡¨è¾¾å¼å’Œç‚é‡ŒåŒ–çº§è”è¡¨è¾¾å¼ï¼šæœ‰å¤šä¸ªç®­å¤´çš„å‡½æ•°æŸ¯é‡ŒåŒ–ï¼šæŠŠå¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°é«˜é˜¶å‡½æ•°ï¼šå°±æ˜¯è¿”å›žå‡½æ•°çš„å‡½æ•°123456789101112131415161718192021222324252627282930313233343536import java.util.function.Function;/** * çº§è”è¡¨è¾¾å¼å’ŒæŸ¯é‡ŒåŒ– * æŸ¯é‡ŒåŒ–:æŠŠå¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•° * æŸ¯é‡ŒåŒ–çš„ç›®çš„ï¼šå‡½æ•°æ ‡å‡†åŒ– * é«˜é˜¶å‡½æ•°ï¼šå°±æ˜¯è¿”å›žå‡½æ•°çš„å‡½æ•° */public class CurryDemo &#123; public static void main(String[] args) &#123; // å®žçŽ°äº†x+yçš„çº§è”è¡¨è¾¾å¼ Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt; fun = x -&gt; y -&gt; x + y; System.out.println(fun.apply(2).apply(3)); Function&lt;Integer, Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt;&gt; fun2 = x -&gt; y -&gt; z -&gt; x + y + z; System.out.println(fun2.apply(2).apply(3).apply(4)); int[] nums = &#123; 2, 3, 4 &#125;; Function f = fun2; for (int i = 0; i &lt; nums.length; i++) &#123; if (f instanceof Function) &#123; Object obj = f.apply(nums[i]); if (obj instanceof Function) &#123; f = (Function) obj; &#125; else &#123; System.out.println(&quot;è°ƒç”¨ç»“æŸï¼šç»“æžœä¸º&quot; + obj); &#125; &#125; &#125; &#125;&#125; æ‰§è¡Œç»“æžœ 59è°ƒç”¨ç»“æŸï¼šç»“æžœä¸º9 ç¬¬ä¸‰èŠ‚ Streamæµç¼–ç¨‹ demo1123456789101112131415161718192021222324252627282930313233343536373839import java.util.stream.IntStream;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-03 22:17 * @desc $&#123;DESCRIPTION&#125; **/public class StreamDemo1 &#123; public static void main(String[] args) &#123; int[] nums = &#123;1, 2, 3&#125;; // å¤–éƒ¨è¿­ä»£ int sum = 0; for (int i : nums) &#123; sum += i; &#125; System.out.println(&quot;ç»“æžœä¸ºï¼š&quot; + sum); // ä½¿ç”¨streamçš„å†…éƒ¨è¿­ä»£ // mapå°±æ˜¯ä¸­é—´æ“ä½œï¼ˆè¿”å›žstreamçš„æ“ä½œï¼‰ // sumå°±æ˜¯ç»ˆæ­¢æ“ä½œ System.out.println(&quot;ç»“æžœä¸ºï¼š&quot; + IntStream.of(nums).sum()); int sum2 = IntStream.of(nums).map(i -&gt; i*2).sum(); System.out.println(&quot;ç»“æžœä¸ºï¼š&quot; + sum2); System.out.println(&quot;æƒ°æ€§æ±‚å€¼å°±æ˜¯ç»ˆæ­¢æ²¡æœ‰è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œ&quot;); IntStream.of(nums).map(StreamDemo1::doubleNum); &#125; public static int doubleNum(int i) &#123; System.out.println(&quot;æ‰§è¡Œäº†ä¹˜ä»¥2&quot;); return i * 2; &#125;&#125; æ‰§è¡Œç»“æžœ: ç»“æžœä¸ºï¼š6ç»“æžœä¸ºï¼š6ç»“æžœä¸ºï¼š12æƒ°æ€§æ±‚å€¼å°±æ˜¯ç»ˆæ­¢æ²¡æœ‰è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œ demo 2, æµçš„åˆ›å»º1234567891011121314151617181920212223242526public class StreamDemo2 &#123; public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); // ä»Žé›†åˆåˆ›å»º list.stream(); list.parallelStream(); // ä»Žæ•°ç»„åˆ›å»º Arrays.stream(new int[] &#123; 2, 3, 5 &#125;); // åˆ›å»ºæ•°å­—æµ IntStream.of(1, 2, 3); IntStream.rangeClosed(1, 10); // ä½¿ç”¨randomåˆ›å»ºä¸€ä¸ªæ— é™æµ new Random().ints().limit(10); Random random = new Random(); // è‡ªå·±äº§ç”Ÿæµ Stream.generate(() -&gt; random.nextInt()).limit(20); &#125;&#125; demo3ï¼Œæµçš„ä¸­é—´æ“ä½œ 12345678910111213141516171819202122232425262728293031323334import java.util.Random;import java.util.stream.Stream;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-03 22:39 * @desc æµçš„ä¸­é—´æ“ä½œ **/public class StreamDemo3 &#123; public static void main(String[] args) &#123; String str = &quot;my name is 007&quot;; //æŠŠæ¯ä¸ªå•è¯çš„é•¿åº¦è°ƒç”¨å‡ºæ¥ Stream.of(str.split(&quot; &quot;)).filter(s -&gt; s.length() &gt; 2).map(s -&gt; s.length()).forEach(System.out::println); //flatMap é€‚åˆAå…ƒç´ ä¸‹é¢æœ‰Bå±žæ€§ï¼ŒBå±žæ€§æ˜¯é›†åˆï¼Œæœ€ç»ˆå¾—åˆ°æ‰€æœ‰Aå…ƒç´ é‡Œé¢çš„æ‰€æœ‰Bå±žæ€§çš„é›†åˆ // intStream/longStream å¹¶ä¸æ˜¯Streamçš„å­ç±»ï¼Œæ‰€ä»¥è¦è¿›è¡Œè£…ç®± boxed Stream.of(str.split(&quot; &quot;)).flatMap(s -&gt; s.chars().boxed()) .forEach(i -&gt; System.out.println((char)i.intValue())); //peek ç”¨äºŽdebugï¼Œæ˜¯ä¸ªä¸­é—´æ“ä½œï¼Œä¸Žforeachä¸åŒï¼Œforeachæ˜¯ç»ˆæ­¢æ“ä½œ System.out.println(&quot;--------------peek------------&quot;); Stream.of(str.split(&quot; &quot;)).peek(System.out::println) .forEach(System.out::println); //limitçš„ä½¿ç”¨ new Random().ints().filter(i -&gt; i &gt; 100 &amp;&amp; i &lt; 1000).limit(10) .forEach(System.out::println); &#125;&#125; streamçš„ç»ˆæ­¢æ“ä½œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import java.util.*;import java.util.stream.Collectors;import java.util.stream.Stream;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-06 13:33 * @desc $&#123;DESCRIPTION&#125; **/public class StreamDemo4 &#123; public static void main(String[] args) &#123; String str = &quot;my name is 007&quot;; //ä½¿ç”¨å¹¶è¡Œæµ str.chars().parallel().forEach(i -&gt; System.out.print((char)i)); System.out.println(); // ä½¿ç”¨ forEachOrdered ä¿è¯é¡ºåº str.chars().parallel().forEachOrdered(i -&gt; System.out.print((char) i)); System.out.println(); //æ”¶é›†åˆ°list/set setæ—¶æœ€åŽä½¿ç”¨toSetæ–¹æ³• List&lt;String&gt; list = Stream.of(str.split(&quot; &quot;)).collect(Collectors.toList()); System.out.println(list); //ä½¿ç”¨reduceæ‹¼æŽ¥å­—ç¬¦ä¸² Optional&lt;String&gt; letters = Stream.of(str.split(&quot; &quot;)).reduce((s1, s2) -&gt; s1 + &quot;|&quot; + s2); System.out.println(letters.orElse(&quot;&quot;)); //å¸¦åˆå§‹å€¼çš„reduce String reduce = Stream.of(str.split(&quot; &quot;)).reduce(&quot;&quot;, (s1, s2) -&gt; s1 + &quot;|&quot; + s2); System.out.println(reduce); //è®¡ç®—æ‰€æœ‰å•è¯æ€»é•¿åº¦ Integer length = Stream.of(str.split(&quot; &quot;)).map(s -&gt; s.length()) .reduce(0, (s1, s2) -&gt; s1 +s2); System.out.println(length); //ä½¿ç”¨maxå‡½æ•° Optional&lt;String&gt; max = Stream.of(str.split(&quot; &quot;)).max(Comparator.comparingInt(String::length)); System.out.println(max.get()); //// ä½¿ç”¨ findFirst çŸ­è·¯æ“ä½œ OptionalInt findFirst = new Random().ints().filter(i -&gt; i &gt; 10000).findFirst(); System.out.println(findFirst.getAsInt()); &#125;&#125; è¿è¡Œç»“æžœï¼š immnae7y 0 0 smy name is 007[my, name, is, 007]&gt;my|name|is|007|my|name|is|00711name113660557 å¹¶è¡Œæµ &amp; ä¸²è¡ŒæµçŸ¥è¯†ç‚¹1ã€è°ƒç”¨parallel äº§ç”Ÿä¸€ä¸ªå¹¶è¡Œæµ.2ã€è°ƒç”¨sequential äº§ç”Ÿä¸²è¡Œæµ.3ã€å¤šæ¬¡è°ƒç”¨ parallel / sequential, ä»¥æœ€åŽä¸€æ¬¡è°ƒç”¨ä¸ºå‡†.4ã€å¹¶è¡Œæµä½¿ç”¨çš„é»˜è®¤çº¿ç¨‹æ± åç§°: ForkJoinPool.commonPoolï¼Œé»˜è®¤çš„çº¿ç¨‹æ•°æ˜¯ å½“å‰æœºå™¨çš„cpuä¸ªæ•°.5ã€ä½¿ç”¨è¿™ä¸ªå±žæ€§å¯ä»¥ä¿®æ”¹é»˜è®¤çš„çº¿ç¨‹æ•°ï¼šSystem.setProperty(â€œjava.util.concurrent.ForkJoinPool.common.parallelismâ€, â€œ20â€);6ã€ä¸€èˆ¬åœ°ï¼ŒæŽ¨èä½¿ç”¨è‡ªå·±çš„çº¿ç¨‹æ± , ä¸ä½¿ç”¨é»˜è®¤çº¿ç¨‹æ± , é˜²æ­¢ä»»åŠ¡è¢«é˜»å¡žã€‚æ³¨æ„åœ¨mainå‡½æ•°ä¸­è°ƒç”¨ï¼Œè¦è®©mainå‡½æ•°ä¸é€€å‡ºï¼Œç­‰ä¼šå„¿å†é€€å‡ºã€‚è‡ªå·±æ–°èµ·çš„çº¿ç¨‹è¦ç”¨shutdownå…³é—­ï¼Œä¸ç„¶ä¼šä¸€ç›´æ‰§è¡Œç€ã€‚1234567891011121314151617181920212223public static void main(String[] args) &#123; ForkJoinPool pool = new ForkJoinPool(20); pool.submit(() -&gt; IntStream.range(1, 100).parallel() .peek(StreamDemo5::debug).count()); pool.shutdown(); synchronized (pool) &#123; try &#123; pool.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;public static void debug(int i) &#123; System.out.println(Thread.currentThread().getName() + &quot; debug &quot; + i); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;&#125; è¿è¡Œç»“æžœ ForkJoinPool-1-worker-25 debug 65ForkJoinPool-1-worker-18 debug 31ForkJoinPool-1-worker-11 debug 90ForkJoinPool-1-worker-4 debug 15ForkJoinPool-1-worker-19 debug 56ForkJoinPool-1-worker-15 debug 81ForkJoinPool-1-worker-8 debug 21ForkJoinPool-1-worker-26 debug 40ForkJoinPool-1-worker-29 debug 43ForkJoinPool-1-worker-12 debug 93ForkJoinPool-1-worker-5 debug 28ForkJoinPool-1-worker-30 debug 78ForkJoinPool-1-worker-22 debug 96ForkJoinPool-1-worker-23 debug 87ForkJoinPool-1-worker-1 debug 6ForkJoinPool-1-worker-9 debug 12ForkJoinPool-1-worker-16 debug 18ForkJoinPool-1-worker-2 debug 3ForkJoinPool-1-worker-27 debug 48ForkJoinPool-1-worker-20 debug 37 æ”¶é›†å™¨æ‰€æ”¶é›†çš„å¯¹è±¡ä¿¡æ¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566public class Student &#123; private String name; private int age; private Gender gender; private Grade grade; public Student(String name, int age, Gender gender, Grade grade) &#123; super(); this.name = name; this.age = age; this.gender = gender; this.grade = grade; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public Gender getGender() &#123; return gender; &#125; public void setGender(Gender gender) &#123; this.gender = gender; &#125; public Grade getGrade() &#123; return grade; &#125; public void setGrade(Grade grade) &#123; this.grade = grade; &#125; @Override public String toString() &#123; return &quot;[name=&quot; + name + &quot;, age=&quot; + age + &quot;, gender=&quot; + gender + &quot;, grade=&quot; + grade + &quot;]&quot;; &#125;&#125;/** * æ€§åˆ« */enum Gender &#123; MALE, FEMALE&#125;/** * ç­çº§ */enum Grade &#123; ONE, TWO, THREE, FOUR;&#125; æµ‹è¯•ç±»ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import org.apache.commons.collections.MapUtils;import java.util.Arrays;import java.util.IntSummaryStatistics;import java.util.List;import java.util.Map;import java.util.stream.Collectors;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-07 22:37 * @desc æµæ”¶é›†å™¨demo **/public class CollectDemo &#123; public static void main(String[] args) &#123; // æµ‹è¯•æ•°æ® List&lt;Student&gt; students = Arrays.asList( new Student(&quot;å°æ˜Ž&quot;, 10, Gender.MALE, Grade.ONE), new Student(&quot;å¤§æ˜Ž&quot;, 9, Gender.MALE, Grade.THREE), new Student(&quot;å°ç™½&quot;, 8, Gender.FEMALE, Grade.TWO), new Student(&quot;å°é»‘&quot;, 13, Gender.FEMALE, Grade.FOUR), new Student(&quot;å°çº¢&quot;, 7, Gender.FEMALE, Grade.THREE), new Student(&quot;å°é»„&quot;, 13, Gender.MALE, Grade.ONE), new Student(&quot;å°é’&quot;, 13, Gender.FEMALE, Grade.THREE), new Student(&quot;å°ç´«&quot;, 9, Gender.FEMALE, Grade.TWO), new Student(&quot;å°çŽ‹&quot;, 6, Gender.MALE, Grade.ONE), new Student(&quot;å°æŽ&quot;, 6, Gender.MALE, Grade.ONE), new Student(&quot;å°é©¬&quot;, 14, Gender.FEMALE, Grade.FOUR), new Student(&quot;å°åˆ˜&quot;, 13, Gender.MALE, Grade.FOUR)); // å¾—åˆ°æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„åˆ—è¡¨ // æŽ¨èä½¿ç”¨æ–¹æ³•å¼•ç”¨Student::getAgeï¼Œä¸è¦ä½¿ç”¨s-&gt;s.getAge(),å°±ä¸ä¼šå¤šç”Ÿæˆä¸€ä¸ªç±»ä¼¼ lambda$0è¿™æ ·çš„å‡½æ•° List&lt;Integer&gt; ages = students.stream().map(Student::getAge).collect(Collectors.toList()); System.out.println(&quot;æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„:&quot; + ages); // ç»Ÿè®¡æ±‡æ€»ä¿¡æ¯ IntSummaryStatistics agesSummaryStatistics = students.stream().collect(Collectors.summarizingInt(Student::getAge)); System.out.println(&quot;å¹´é¾„æ±‡æ€»ä¿¡æ¯:&quot; + agesSummaryStatistics); //åˆ†å— Map&lt;Boolean, List&lt;Student&gt;&gt; genders = students.stream().collect(Collectors.partitioningBy(s -&gt; s.getGender() == Gender.MALE)); //System.out.println(&quot;ç”·å¥³å­¦ç”Ÿåˆ—è¡¨:&quot; + genders); MapUtils.verbosePrint(System.out, &quot;ç”·å¥³å­¦ç”Ÿåˆ—è¡¨&quot;, genders); //åˆ†ç»„ï¼Œæ¯”å¦‚åˆ†å—å°±æ˜¯åˆ†ä¸¤ç»„ï¼Œè¿”å›žboolean Map&lt;Grade, List&lt;Student&gt;&gt; grades = students.stream().collect(Collectors.groupingBy(Student::getGrade)); MapUtils.verbosePrint(System.out, &quot;å­¦ç”Ÿç­çº§åˆ—è¡¨&quot;, grades); //å¾—åˆ°æ‰€æœ‰ç­çº§å­¦ç”Ÿçš„ä¸ªæ•° Map&lt;Grade, Long&gt; gradesCount = students.stream().collect(Collectors.groupingBy(Student::getGrade, Collectors.counting())); MapUtils.verbosePrint(System.out, &quot;å­¦ç”Ÿç­çº§ä¸ªæ•°åˆ—è¡¨&quot;, gradesCount); &#125;&#125; è¿è¡Œç»“æžœï¼š Connected to the target VM, address: â€˜javadebugâ€™, transport: â€˜shared memoryâ€™æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„:[10, 9, 8, 13, 7, 13, 13, 9, 6, 6, 14, 13]å¹´é¾„æ±‡æ€»ä¿¡æ¯:IntSummaryStatistics{count=12, sum=121, min=6, average=10.083333, max=14}ç”·å¥³å­¦ç”Ÿåˆ—è¡¨ ={ false = [[name=å°ç™½, age=8, gender=FEMALE, grade=TWO], [name=å°é»‘, age=13, gender=FEMALE, grade=FOUR], [name=å°çº¢, age=7, gender=FEMALE, grade=THREE], [name=å°é’, age=13, gender=FEMALE, grade=THREE], [name=å°ç´«, age=9, gender=FEMALE, grade=TWO], [name=å°é©¬, age=14, gender=FEMALE, grade=FOUR]] true = [[name=å°æ˜Ž, age=10, gender=MALE, grade=ONE], [name=å¤§æ˜Ž, age=9, gender=MALE, grade=THREE], [name=å°é»„, age=13, gender=MALE, grade=ONE], [name=å°çŽ‹, age=6, gender=MALE, grade=ONE], [name=å°æŽ, age=6, gender=MALE, grade=ONE], [name=å°åˆ˜, age=13, gender=MALE, grade=FOUR]]}å­¦ç”Ÿç­çº§åˆ—è¡¨ ={ ONE = [[name=å°æ˜Ž, age=10, gender=MALE, grade=ONE], [name=å°é»„, age=13, gender=MALE, grade=ONE], [name=å°çŽ‹, age=6, gender=MALE, grade=ONE], [name=å°æŽ, age=6, gender=MALE, grade=ONE]] FOUR = [[name=å°é»‘, age=13, gender=FEMALE, grade=FOUR], [name=å°é©¬, age=14, gender=FEMALE, grade=FOUR], [name=å°åˆ˜, age=13, gender=MALE, grade=FOUR]] TWO = [[name=å°ç™½, age=8, gender=FEMALE, grade=TWO], [name=å°ç´«, age=9, gender=FEMALE, grade=TWO]] THREE = [[name=å¤§æ˜Ž, age=9, gender=MALE, grade=THREE], [name=å°çº¢, age=7, gender=FEMALE, grade=THREE], [name=å°é’, age=13, gender=FEMALE, grade=THREE]]}Disconnected from the target VM, address: â€˜javadebugâ€™, transport: â€˜shared memoryâ€™å­¦ç”Ÿç­çº§ä¸ªæ•°åˆ—è¡¨ ={ ONE = 4 FOUR = 3 TWO = 2 THREE = 3} Stream è¿è¡Œæœºåˆ¶éªŒè¯ï¼š æ‰€æœ‰æ“ä½œæ˜¯é“¾å¼è°ƒç”¨, ä¸€ä¸ªå…ƒç´ åªè¿­ä»£ä¸€æ¬¡ æ¯ä¸€ä¸ªä¸­é—´æ“ä½œè¿”å›žä¸€ä¸ªæ–°çš„æµ. æµé‡Œé¢æœ‰ä¸€ä¸ªå±žæ€§sourceStageæŒ‡å‘åŒä¸€ä¸ª åœ°æ–¹,å°±æ˜¯Head Head-&gt;nextStage-&gt;nextStage-&gt;â€¦ -&gt; null æœ‰çŠ¶æ€æ“ä½œä¼šæŠŠæ— çŠ¶æ€æ“ä½œé˜¶æ®µ,å•ç‹¬å¤„ç† å¹¶è¡ŒçŽ¯å¢ƒä¸‹, æœ‰çŠ¶æ€çš„ä¸­é—´æ“ä½œä¸ä¸€å®šèƒ½å¹¶è¡Œæ“ä½œ parallel/ sequetial è¿™2ä¸ªæ“ä½œä¹Ÿæ˜¯ä¸­é—´æ“ä½œ(ä¹Ÿæ˜¯è¿”å›žstream)ä½†æ˜¯ä»–ä»¬ä¸åˆ›å»ºæµ, ä»–ä»¬åªä¿®æ”¹ Headçš„å¹¶è¡Œæ ‡å¿— ç¬¬ä¸‰èŠ‚ reactive stream å“åº”å¼æµ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889import java.util.concurrent.Flow;import java.util.concurrent.SubmissionPublisher;import java.util.concurrent.TimeUnit;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-08 0:03 * @desc å“åº”å¼æµ **/public class FlowDemo &#123; public static void main(String[] args) throws InterruptedException &#123; //1.å®šä¹‰å‘å¸ƒè€…ï¼Œå‘å¸ƒçš„æ•°æ®ç±»åž‹æ˜¯Integer // ç›´æŽ¥ä½¿ç”¨jdkè‡ªå¸¦çš„SubmissionPublisherï¼Œå®ƒå®žçŽ°äº†PublisheræŽ¥å£ SubmissionPublisher&lt;Integer&gt; publisher = new SubmissionPublisher&lt;&gt;(); //2. å®šä¹‰è®¢é˜…è€… Flow.Subscriber&lt;Integer&gt; subscriber = new Flow.Subscriber&lt;Integer&gt;() &#123; private Flow.Subscription subscription; @Override public void onSubscribe(Flow.Subscription subscription) &#123; // ä¿å­˜è®¢é˜…å…³ç³»ï¼Œéœ€è¦ç”¨å®ƒæ¥ç»™å‘å¸ƒè€…å“åº” this.subscription = subscription; // è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); &#125; @Override public void onNext(Integer item) &#123; // æŽ¥æ”¶ä¸€ä¸ªæ•°æ®ï¼Œå¹¶å¤„ç† System.out.println(&quot;æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š&quot; + item); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; // å¤„ç†å®Œè°ƒç”¨requestå†è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); //æˆ–è€… å·²ç»è¾¾åˆ°äº†ç›®æ ‡ï¼Œè°ƒç”¨cancelå‘Šè¯‰å‘å¸ƒè€…ä¸å†æŽ¥æ”¶æ•°æ®äº† //this.subscription.cancel(); &#125; @Override public void onError(Throwable throwable) &#123; //å‡ºçŽ°äº†å¼‚å¸¸ï¼ˆä¾‹å¦‚å¤„ç†æ•°æ®çš„æ—¶å€™äº§ç”Ÿäº†å¼‚å¸¸ï¼‰ throwable.printStackTrace(); //æˆ‘ä»¬å¯ä»¥å‘Šè¯‰å‘å¸ƒè€…ï¼ŒåŽé¢ä¸æŽ¥æ”¶æ•°æ®äº† this.subscription.cancel(); &#125; @Override public void onComplete() &#123; // å…¨éƒ¨æ•°æ®å¤„ç†å®Œäº†ï¼ˆå‘å¸ƒè€…å…³é—­äº†ï¼‰ System.out.println(&quot;å¤„ç†å®Œäº†ï¼&quot;); &#125; &#125;; //3. å‘å¸ƒè€…å’Œè®¢é˜…è€…å»ºç«‹è®¢é˜…å…³ç³» publisher.subscribe(subscriber); //4. ç”Ÿäº§æ•°æ®ï¼Œå¹¶å‘å¸ƒ è¿™é‡Œå¿½ç•¥æ•°æ®ç”Ÿäº§è¿‡ç¨‹ for (int i=0;i&lt;1000;i++) &#123; System.out.println(&quot;ç”Ÿæˆæ•°æ®ï¼š&quot; + i); //submit æ˜¯ä¸ªblockæ–¹æ³• publisher.submit(i); &#125; //5. ç»“æŸåŽ å…³é—­å‘å¸ƒè€… // æ­£å¼çŽ¯å¢ƒåº”è¯¥æ”¾åœ¨finallyæˆ–è€…ä½¿ç”¨try-resource ç¡®ä¿å…³é—­ publisher.close(); //ä¸»çº¿ç¨‹å»¶è¿Ÿåœæ­¢ï¼Œ å¦åˆ™æ•°æ®æ²¡æœ‰æ¶ˆè´¹å°±é€€å‡ºäº† Thread.currentThread().join(1000); //debugçš„æ—¶å€™ï¼Œä¸‹é¢è¿™è¡Œéœ€è¦æœ‰æ–­ç‚¹ã€‚å¦åˆ™ä¸»çº¿ç¨‹ç»“æŸæ— æ³•debug System.out.println(); &#125;&#125; è¿è¡Œæ•ˆæžœ ç”Ÿæˆæ•°æ®ï¼š262æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š6ç”Ÿæˆæ•°æ®ï¼š263æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š7ç”Ÿæˆæ•°æ®ï¼š264æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š8ç”Ÿæˆæ•°æ®ï¼š265æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š9ç”Ÿæˆæ•°æ®ï¼š266æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š10ç”Ÿæˆæ•°æ®ï¼š267æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼š11ç”Ÿæˆæ•°æ®ï¼š268 å¦ä¸€ä¸ªä¾‹å­123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135import java.util.concurrent.Flow;import java.util.concurrent.SubmissionPublisher;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author é©¬æµ·å¼º * @create 2018-07-08 23:14 * @desc å¸¦ process çš„ flow demo * Processor, éœ€è¦ç»§æ‰¿SubmissionPublisherå¹¶å®žçŽ°ProcessoræŽ¥å£ * è¾“å…¥æºæ•°æ® integer, è¿‡æ»¤æŽ‰å°äºŽ0çš„, ç„¶åŽè½¬æ¢æˆå­—ç¬¦ä¸²å‘å¸ƒå‡ºåŽ» **/class MyProcessor extends SubmissionPublisher&lt;String&gt; implements Flow.Processor&lt;Integer, String&gt; &#123; private Flow.Subscription subscription; @Override public void onSubscribe(Flow.Subscription subscription) &#123; // ä¿å­˜è®¢é˜…å…³ç³», éœ€è¦ç”¨å®ƒæ¥ç»™å‘å¸ƒè€…å“åº” this.subscription = subscription; // è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); &#125; @Override public void onNext(Integer item) &#123; // æŽ¥å—åˆ°ä¸€ä¸ªæ•°æ®, å¤„ç† System.out.println(&quot;å¤„ç†å™¨æŽ¥å—åˆ°æ•°æ®: &quot; + item); // è¿‡æ»¤æŽ‰å°äºŽ0çš„, ç„¶åŽå‘å¸ƒå‡ºåŽ» if (item &gt; 0) &#123; this.submit(&quot;è½¬æ¢åŽçš„æ•°æ®:&quot; + item); &#125; // å¤„ç†å®Œè°ƒç”¨requestå†è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); // æˆ–è€… å·²ç»è¾¾åˆ°äº†ç›®æ ‡, è°ƒç”¨cancelå‘Šè¯‰å‘å¸ƒè€…ä¸å†æŽ¥å—æ•°æ®äº† // this.subscription.cancel(); &#125; @Override public void onError(Throwable throwable) &#123; // å‡ºçŽ°äº†å¼‚å¸¸(ä¾‹å¦‚å¤„ç†æ•°æ®çš„æ—¶å€™äº§ç”Ÿäº†å¼‚å¸¸) throwable.printStackTrace(); // æˆ‘ä»¬å¯ä»¥å‘Šè¯‰å‘å¸ƒè€…, åŽé¢ä¸æŽ¥å—æ•°æ®äº† this.subscription.cancel(); &#125; @Override public void onComplete() &#123; // å…¨éƒ¨æ•°æ®å¤„ç†å®Œäº†(å‘å¸ƒè€…å…³é—­äº†) System.out.println(&quot;å¤„ç†å™¨å¤„ç†å®Œäº†!&quot;); // å…³é—­å‘å¸ƒè€… this.close(); &#125;&#125;public class FlowDemo2 &#123; public static void main(String[] args) throws Exception &#123; // 1. å®šä¹‰å‘å¸ƒè€…, å‘å¸ƒçš„æ•°æ®ç±»åž‹æ˜¯ Integer // ç›´æŽ¥ä½¿ç”¨jdkè‡ªå¸¦çš„SubmissionPublisher SubmissionPublisher&lt;Integer&gt; publiser = new SubmissionPublisher&lt;Integer&gt;(); // 2. å®šä¹‰å¤„ç†å™¨, å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤, å¹¶è½¬æ¢ä¸ºStringç±»åž‹ MyProcessor processor = new MyProcessor(); // 3. å‘å¸ƒè€… å’Œ å¤„ç†å™¨ å»ºç«‹è®¢é˜…å…³ç³» publiser.subscribe(processor); // 4. å®šä¹‰æœ€ç»ˆè®¢é˜…è€…, æ¶ˆè´¹ String ç±»åž‹æ•°æ® Flow.Subscriber&lt;String&gt; subscriber = new Flow.Subscriber&lt;String&gt;() &#123; private Flow.Subscription subscription; @Override public void onSubscribe(Flow.Subscription subscription) &#123; // ä¿å­˜è®¢é˜…å…³ç³», éœ€è¦ç”¨å®ƒæ¥ç»™å‘å¸ƒè€…å“åº” this.subscription = subscription; // è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); &#125; @Override public void onNext(String item) &#123; // æŽ¥å—åˆ°ä¸€ä¸ªæ•°æ®, å¤„ç† System.out.println(&quot;æŽ¥å—åˆ°æ•°æ®: &quot; + item); // å¤„ç†å®Œè°ƒç”¨requestå†è¯·æ±‚ä¸€ä¸ªæ•°æ® this.subscription.request(1); // æˆ–è€… å·²ç»è¾¾åˆ°äº†ç›®æ ‡, è°ƒç”¨cancelå‘Šè¯‰å‘å¸ƒè€…ä¸å†æŽ¥å—æ•°æ®äº† // this.subscription.cancel(); &#125; @Override public void onError(Throwable throwable) &#123; // å‡ºçŽ°äº†å¼‚å¸¸(ä¾‹å¦‚å¤„ç†æ•°æ®çš„æ—¶å€™äº§ç”Ÿäº†å¼‚å¸¸) throwable.printStackTrace(); // æˆ‘ä»¬å¯ä»¥å‘Šè¯‰å‘å¸ƒè€…, åŽé¢ä¸æŽ¥å—æ•°æ®äº† this.subscription.cancel(); &#125; @Override public void onComplete() &#123; // å…¨éƒ¨æ•°æ®å¤„ç†å®Œäº†(å‘å¸ƒè€…å…³é—­äº†) System.out.println(&quot;å¤„ç†å®Œäº†!&quot;); &#125; &#125;; // 5. å¤„ç†å™¨ å’Œ æœ€ç»ˆè®¢é˜…è€… å»ºç«‹è®¢é˜…å…³ç³» processor.subscribe(subscriber); // 6. ç”Ÿäº§æ•°æ®, å¹¶å‘å¸ƒ // è¿™é‡Œå¿½ç•¥æ•°æ®ç”Ÿäº§è¿‡ç¨‹ publiser.submit(-111); publiser.submit(111); // 7. ç»“æŸåŽ å…³é—­å‘å¸ƒè€… // æ­£å¼çŽ¯å¢ƒ åº”è¯¥æ”¾ finally æˆ–è€…ä½¿ç”¨ try-resouce ç¡®ä¿å…³é—­ publiser.close(); // ä¸»çº¿ç¨‹å»¶è¿Ÿåœæ­¢, å¦åˆ™æ•°æ®æ²¡æœ‰æ¶ˆè´¹å°±é€€å‡º Thread.currentThread().join(1000); &#125;&#125; è¿è¡Œç»“æžœ: å¤„ç†å™¨æŽ¥å—åˆ°æ•°æ®: -111å¤„ç†å™¨æŽ¥å—åˆ°æ•°æ®: 111å¤„ç†å™¨å¤„ç†å®Œäº†!æŽ¥å—åˆ°æ•°æ®: è½¬æ¢åŽçš„æ•°æ®:111å¤„ç†å®Œäº†!]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
        <tag>webflux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[springbootä¹‹â€œæœåŠ¡ç«¯æŽ¨é€äº‹ä»¶SSEï¼ˆserver-send-eventsï¼‰â€]]></title>
    <url>%2F2018%2F07%2F01%2Fspringboot%E4%B9%8B%E2%80%9C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%8E%A8%E9%80%81%E4%BA%8B%E4%BB%B6SSE%EF%BC%88server-send-events%EF%BC%89%E2%80%9D%2F</url>
    <content type="text"><![CDATA[server-send-eventsç®€å•åº”ç”¨demoç®€ä¹¦åœ°å€ 1.åº”ç”¨åœºæ™¯å½“æˆ‘ä»¬åšå¼‚æ­¥è¯·æ±‚å¤„ç†çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯çš„è¯·æ±‚ä¸æ˜¯ç«‹å³è¿”å›žçš„ï¼Œè€Œæ˜¯åœ¨æœåŠ¡ç«¯æœ‰æ•°æ®çš„æ—¶å€™æ‰å‘é€ç»™å®¢æˆ·ç«¯çš„ã€‚æœ¬ä¾‹æ¼”ç¤ºæ˜¯æœåŠ¡ç«¯æ•°æ®æ˜¯å¦å¤–çš„äº‹ä»¶è§¦å‘å¹¶æŽ¨é€ç»™å®¢æˆ·ç«¯çš„ã€‚ å½“ä½¿ç”¨å¾®ä¿¡æˆ–è€…æ”¯ä»˜å®æ‰«ç æ”¯ä»˜çš„æ—¶å€™ï¼Œåœ¨å®¢æˆ·æ”¯ä»˜æˆåŠŸä¹‹åŽï¼ŒåŽå°å¾—åˆ°å¾®ä¿¡(æ”¯ä»˜å®)å›žè°ƒéœ€è¦é€šçŸ¥æˆ‘ä»¬çš„å®¢æˆ·ç«¯æ”¯ä»˜å·²ç»å®Œæˆï¼Œå®¢æˆ·ç«¯å¾—åˆ°é€šçŸ¥åŽå¯ä»¥åšä¸€äº›åŽç»­çš„æ“ä½œã€‚è¿™æ¶‰åŠåˆ°åŽå°éœ€è¦å°†æ”¯ä»˜æˆåŠŸçš„æ¶ˆæ¯ä¸»åŠ¨æŽ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè®©å®¢æˆ·ç«¯è®°æ€§åŽç»­çš„æ“ä½œã€‚ å®¢æˆ·ç«¯å‘åŽå°(SseController-&gt;push)å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œå®¢æˆ·ç«¯å¤„äºŽç›‘å¬ç­‰å¾…çŠ¶æ€; å¾®ä¿¡(æ”¯ä»˜å®)æ”¯ä»˜æˆåŠŸåŽå›žè°ƒåŽå°(SseController-&gt;payCallbackæ¨¡æ‹Ÿ); payCallbackæ–¹æ³•é€šè¿‡applicationContext.publishEventå‘ç³»ç»Ÿå†…éƒ¨å‘é€æ”¯ä»˜å®Œæˆäº‹ä»¶; pushæ–¹æ³•é€šè¿‡payCompletedListenerç›‘å¬äº‹ä»¶å¹¶é€šè¿‡SseEmitterå‘é€ç»™å®¢æˆ·ç«¯ã€‚åè¯è§£é‡Šï¼šSSEâ€“server send eventæ˜¯ä¸€ç§æœåŠ¡ç«¯æŽ¨é€çš„æŠ€æœ¯ï¼Œæœ¬ä¾‹ä½¿ç”¨SseEmitteræ¥å®žçŽ°ã€‚2. ä¸Šä»£ç web api æŽ¥å£ç±»SseController123456789101112131415161718192021222324252627@RestControllerpublic class SseController &#123; @Autowired ApplicationContext applicationContext; @Autowired PayCompletedListener payCompletedListener; @GetMapping(&quot;/push&quot;) public SseEmitter push(@RequestParam Long payRecordId)&#123; final SseEmitter emitter = new SseEmitter(); try &#123; payCompletedListener.addSseEmitters(payRecordId,emitter); &#125;catch (Exception e)&#123; emitter.completeWithError(e); &#125; return emitter; &#125; @GetMapping(&quot;/pay-callback&quot;) public String payCallback(@RequestParam Long payRecordId)&#123; applicationContext.publishEvent(new PayCompletedEvent(this,payRecordId)); return &quot;è¯·åˆ°ç›‘å¬å¤„æŸ¥çœ‹æ¶ˆæ¯&quot;; &#125;&#125; æ”¯ä»˜å®Œæˆäº‹ä»¶ PayCompletedEvent12345678910@Getter@Setterpublic class PayCompletedEvent extends ApplicationEvent &#123; private Long payRecordId; public PayCompletedEvent(Object source, Long payRecordId) &#123; super(source); this.payRecordId = payRecordId; &#125;&#125; æ”¯ä»˜å®Œæˆäº‹ä»¶ç›‘å¬å™¨PayCompletedListener1234567891011121314151617@Componentpublic class PayCompletedListener &#123; private static Map&lt;Long,SseEmitter&gt; sseEmitters = new Hashtable&lt;&gt;(); public void addSseEmitters(Long payRecordId, SseEmitter sseEmitter) &#123; sseEmitters.put(payRecordId, sseEmitter); &#125; @EventListener public void deployEventHandler(PayCompletedEvent payCompletedEvent) throws IOException &#123; Long payRecordId = payCompletedEvent.getPayRecordId(); SseEmitter sseEmitter = sseEmitters.get(payRecordId); sseEmitter.send(&quot;æ”¯ä»˜æˆåŠŸ&quot;); sseEmitter.complete(); &#125;&#125; 3. æ•ˆæžœæ¼”ç¤º å…ˆè®¿é—®http://localhost:8080/push?payRecordId=123,æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºŽç­‰å¾…çŠ¶æ€. å†è®¿é—®http://localhost:8080/pay-callback?payRecordId=123,æ¨¡æ‹Ÿå›žè°ƒé€šçŸ¥å®¢æˆ·ç«¯æ”¯ä»˜æˆåŠŸ,è¿™æ˜¯ä¼šé€šçŸ¥ä¸Šä¸€æ­¥å¹¶æŽ¨é€åˆ°å®¢æˆ·ç«¯. 4. å¦å¤–ä¸€ä¸ªæžç®€çš„ä¾‹å­ æœåŠ¡ç«¯æ¨¡æ‹Ÿservletçš„ä¸€ä¸ªgetè¯·æ±‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import java.io.IOException;import java.util.concurrent.TimeUnit;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;/** * Servlet implementation class SSE */@WebServlet(&quot;/SSE&quot;)public class SSE extends HttpServlet &#123; private static final long serialVersionUID = 1L; /** * @see HttpServlet#HttpServlet() */ public SSE() &#123; super(); // TODO Auto-generated constructor stub &#125; /** * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse * response) */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; response.setContentType(&quot;text/event-stream&quot;); response.setCharacterEncoding(&quot;utf-8&quot;); for (int i = 0; i &lt; 5; i++) &#123; // æŒ‡å®šäº‹ä»¶æ ‡è¯† response.getWriter().write(&quot;event:me\n&quot;); // æ ¼å¼: data: + æ•°æ® + 2ä¸ªå›žè½¦ response.getWriter().write(&quot;data:&quot; + i + &quot;\n\n&quot;); response.getWriter().flush(); try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; &#125; &#125; &#125; /** * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse * response) */ protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; // TODO Auto-generated method stub doGet(request, response); &#125;&#125; æ¨¡æ‹Ÿå®¢æˆ·ç«¯çš„ä»£ç  12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;Insert title here&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script type=&quot;text/javascript&quot;&gt; // åˆå§‹åŒ–, å‚æ•°ä¸ºurl // ä¾èµ–H5 var sse = new EventSource(&quot;SSE&quot;); sse.onmessage = function(e) &#123; console.log(&quot;message&quot;, e.data, e); &#125; // ç›‘å¬æŒ‡å®šäº‹ä»¶, (å°±ä¸ä¼šè¿›å…¥onmessageäº†) sse.addEventListener(&quot;me&quot;, function(e) &#123; console.log(&quot;me event&quot;, e.data); // å¦‚æžœä¸å…³é—­,ä¼šè‡ªåŠ¨é‡è¿ž if (e.data == 3) &#123; sse.close(); &#125; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ•ˆæžœ 5.é¸£è°¢http://www.wisely.top/2018/03/01/sse-eventlistener/]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
        <tag>sse</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[springboot ä¹‹ â€œå®šæ—¶ä»»åŠ¡-åŠ¨æ€ä¿®æ”¹è¡¨è¾¾å¼â€]]></title>
    <url>%2F2018%2F06%2F29%2Fspringboot%20%E4%B9%8B%20%E2%80%9C%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E2%80%9D%2F</url>
    <content type="text"><![CDATA[å®šæ—¶ä»»åŠ¡ä¸»è¦ç”¨äºŽå®šæ—¶å‘é€é‚®ä»¶ã€å¤œé—´è‡ªåŠ¨ç»´æŠ¤ç­‰ã€‚ç®€ä¹¦åœ°å€ ï¼ˆ1ï¼‰å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½1234567891011@Configuration @EnableScheduling public class SpringTaskScheduleConfig &#123; @Bean public TaskScheduler poolScheduler() &#123; ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler(); scheduler.setThreadNamePrefix(&quot;poolScheduler&quot;); scheduler.setPoolSize(10); return scheduler; &#125; &#125; æˆ–è€…åœ¨è¿è¡Œç±»TaskApplicationæ·»åŠ ä¸Š@EnableSchedulingæ³¨è§£ã€‚ï¼ˆ2ï¼‰ä¸»è§’ç™»åœºï¼Œæ·»åŠ å®šæ—¶ä»»åŠ¡ ç®€å•æ–¹å¼ï¼šä¿®æ”¹å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œå‘¨æœŸï¼› æŒ‰æ­£å¸¸æ¥è®²ï¼Œä¿®æ”¹å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œå‘¨æœŸï¼ŒæŠŠæœåŠ¡åœä¸‹æ¥ï¼Œæ”¹ä¸‹ä»»åŠ¡çš„cronå‚æ•°ï¼Œå†é‡å¯æœåŠ¡å°±æžæžå®šäº†ã€‚è¿™ç§æ–¹å¼å¾ˆç®€å•ï¼Œæ²¡æœ‰å¯è¯´çš„ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œåœ¨ä¸åœæœåŠ¡çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥åŠ¨æ€çš„ä¿®æ”¹ä»»åŠ¡çš„cronå‚æ•°å‘¢ï¼Ÿå“ˆå“ˆï¼Œé‚£æ˜¯å¿…é¡»çš„å¿…ã€‚æ¯”å¦‚ï¼š 123456789101112131415161718192021222324252627import com.hczt.haier.task.service.UserTaskService;import lombok.extern.slf4j.Slf4j;import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Component;import javax.annotation.Resource;/** * ç”¨æˆ·èœå•å®šæ—¶è®¾ç½® */@Slf4j@Componentpublic class UserMenuTask &#123; @Resource private UserTaskService userTaskService; /** * æ¯å¤©ä¸€ç‚¹è¿›è¡ŒåŒæ­¥ */ @Scheduled(cron = &quot;0 0 1 * * *&quot;) public void setUserMenu()&#123; log.info(&quot;-----Start Set User Menus -----&quot;); userTaskService.timeSetMenus(); log.info(&quot;-----End Set User Menus -----&quot;); &#125;&#125; åŠ¨æ€ä¿®æ”¹å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œå‘¨æœŸï¼› é¦–å…ˆæˆ‘ä»¬å…ˆä¼šå›žé¡¾ä¸‹ï¼Œæˆ‘ä»¬ä¹‹å‰æ˜¯ä½¿ç”¨äº†@Scheduled(cron =â€œ0/5 *â€)è¿™ç§æ–¹å¼é€‚ç”¨äºŽå›ºå®šä»»åŠ¡å‘¨æœŸçš„ä»»åŠ¡ï¼Œè‹¥è¦ä¿®æ”¹ä»»åŠ¡æ‰§è¡Œå‘¨æœŸï¼Œåªèƒ½èµ°â€œåœæœåŠ¡â€”ä¿®æ”¹ä»»åŠ¡æ‰§è¡Œå‘¨æœŸâ€”é‡å¯æœåŠ¡â€è¿™æ¡è·¯ã€‚é‚£ä¹ˆå¦‚ä½•åŠ¨æ€ä¿®æ”¹å‘¢ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ­¥éª¤ï¼š â‘  åœ¨å®šæ—¶ä»»åŠ¡ç±»ä¸Šå¢žåŠ @EnabledSchedulingæ³¨è§£ï¼Œå¹¶å®žçŽ°SchedulingConfigureræŽ¥å£ã€‚â‘¡ è®¾ç½®ä¸€ä¸ªé™æ€çš„cronï¼Œç”¨äºŽå­˜æ”¾ä»»åŠ¡æ‰§è¡Œå‘¨æœŸå‚æ•°ã€‚â‘¢ å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œç”¨äºŽæ¨¡æ‹Ÿå®žé™…ä¸šåŠ¡ä¸­å¤–éƒ¨åŽŸå› ä¿®æ”¹äº†ä»»åŠ¡æ‰§è¡Œå‘¨æœŸã€‚â‘£ è®¾ç½®ä»»åŠ¡è§¦å‘å™¨ï¼Œè§¦å‘ä»»åŠ¡æ‰§è¡Œã€‚ æœ¬é¡¹ç›®æ˜¯åŸºäºŽspring data jpaçš„ï¼Œæ•°æ®æ£€ç´¢ä½¿ç”¨çš„æ˜¯repositoryï¼Œå…·ä½“åˆ›å»ºæ•°æ®è¡¨ï¼š1234567891011121314CREATE TABLE `t_scheduled_task_cron` ( `task_cron_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT &apos;idè‡ªå¢ž&apos;, `task_code` VARCHAR(40) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;å®šæ—¶ä»»åŠ¡ç¼–ç &apos;, `task_name` VARCHAR(40) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;å®šæ—¶ä»»åŠ¡åç§°&apos;, `task_package` VARCHAR(400) NULL DEFAULT &apos;&apos; COMMENT &apos;å®šæ—¶ä»»åŠ¡åŒ…å&apos;, `task_cron` VARCHAR(40) NOT NULL DEFAULT &apos;&apos; COMMENT &apos;å®šæ—¶ä»»åŠ¡æ‰§è¡Œè¡¨è¾¾å¼&apos;, `task_cron_description` VARCHAR(400) NOT NULL DEFAULT &apos;&apos;, `remark` VARCHAR(400) NULL DEFAULT NULL COMMENT &apos;å¤‡æ³¨&apos;, PRIMARY KEY (`task_cron_id`))COMMENT=&apos;å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶é—´å­˜å‚¨è¡¨&apos;COLLATE=&apos;utf8mb4_general_ci&apos;ENGINE=InnoDB; åˆ›å»ºå®žä½“12345678910111213141516171819202122232425262728import javax.persistence.*;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author marvin.ma * @create 2018-06-28 22:35 * @desc å®šæ—¶ä»»åŠ¡è¡¨è¾¾å¼å®žä½“ **/@Data@Entity@Table(name = &quot;t_scheduled_task_cron&quot;)public class ScheduledTaskCron &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) @Column(name = &quot;task_cron_id&quot;) private String taskCronId; private String taskCode; private String taskName; private String taskPackage; private String taskCron; private String taskCronDescription; private String remark;&#125; åˆ›å»ºrepository1234567891011121314151617import com.hczt.haier.db.user.entity.ScheduledTaskCron;import org.springframework.data.jpa.repository.JpaRepository;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author marvin.ma * @create 2018-06-28 22:37 * @desc å®šæ—¶ä»»åŠ¡è¡¨è¾¾å¼dao **/public interface ScheduledTaskCronRepository extends JpaRepository&lt;ScheduledTaskCron, String&gt; &#123; ScheduledTaskCron findByTaskCode(String taskCode);&#125; åˆ›å»ºå®šæ—¶ä»»åŠ¡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869import com.hczt.haier.db.user.entity.ScheduledTaskCron;import com.hczt.haier.db.user.repository.ScheduledTaskCronRepository;import com.hczt.haier.task.service.UserTaskService;import org.apache.commons.lang3.StringUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.scheduling.Trigger;import org.springframework.scheduling.TriggerContext;import org.springframework.scheduling.annotation.SchedulingConfigurer;import org.springframework.scheduling.config.ScheduledTaskRegistrar;import org.springframework.scheduling.support.CronTrigger;import org.springframework.stereotype.Component;import java.text.SimpleDateFormat;import java.util.Date;/** * ç²¾è¯šæ‰€è‡³ï¼Œé‡‘çŸ³ä¸ºå¼€ã€‚ * çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´;é™½æ°—ã®ç™ºã™ã‚‹æ‰€é‡‘çŸ³äº¦é€ã‚‹ã€‚ * Faith moves mountains. * * @author marvin.ma * @create 2018-06-28 13:27 * @desc åŠ¨æ€è¡¨è¾¾å¼å®šæ—¶ä»»åŠ¡ **/@Componentpublic class DynamicScheduledTask implements SchedulingConfigurer &#123; private static final SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;HH:mm:ss&quot;); private static final String DEFAULT_CRON = &quot;0/5 * * * * ?&quot;; private String cron = DEFAULT_CRON; @Autowired private ScheduledTaskCronRepository scheduledTaskCronRepository; @Autowired private UserTaskService userTaskService; @Override public void configureTasks(ScheduledTaskRegistrar taskRegistrar) &#123; Runnable task = new Runnable() &#123; @Override public void run() &#123; // å®šæ—¶ä»»åŠ¡çš„ä¸šåŠ¡é€»è¾‘ System.out.println(&quot;åŠ¨æ€ä¿®æ”¹å®šæ—¶ä»»åŠ¡cronå‚æ•°ï¼Œå½“å‰æ—¶é—´ï¼š&quot; + dateFormat.format(new Date())); userTaskService.timeSetMenus(); &#125; &#125;; Trigger trigger = new Trigger() &#123; @Override public Date nextExecutionTime(TriggerContext triggerContext) &#123; // å®šæ—¶ä»»åŠ¡è§¦å‘ï¼Œå¯ä¿®æ”¹å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œå‘¨æœŸ ScheduledTaskCron scheduledTaskCronEntity = scheduledTaskCronRepository.findByTaskCode(&quot;1&quot;); if (null == scheduledTaskCronEntity || StringUtils.isEmpty(scheduledTaskCronEntity.getTaskCron())) &#123; cron = DEFAULT_CRON; &#125; CronTrigger trigger = new CronTrigger(cron); Date nextExecDate = trigger.nextExecutionTime(triggerContext); return nextExecDate; &#125; &#125;; taskRegistrar.addTriggerTask(task, trigger); &#125; public void setCron(String cron) &#123; this.cron = cron; &#125;&#125; ä¿®æ”¹æ•°æ®åº“åŽå®šæ—¶ä»»åŠ¡ç«‹å³ç”Ÿæ•ˆã€‚ å‚è€ƒæ–‡ç« ï¼šhttp://412887952-qq-com.iteye.com/blog/2367537http://rensanning.iteye.com/blog/2361912]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springboot</tag>
        <tag>å®šæ—¶ä»»åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ngrokä¸€åˆ†é’Ÿå®žçŽ°å†…ç½‘ç©¿é€]]></title>
    <url>%2F2018%2F06%2F26%2F%E4%BD%BF%E7%94%A8ngrok%E4%B8%80%E5%88%86%E9%92%9F%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%2F</url>
    <content type="text"><![CDATA[ä¸€åˆ†é’Ÿæœ‰ç‚¹å¤¸å¼ ï¼Œ5åˆ†é’Ÿæ€»å¯ä»¥å°†æœ¬åœ°webæœåŠ¡æ˜ å°„åˆ°å…¬ç½‘äº†å§ã€‚ç®€ä¹¦åœ°å€ 1ã€ å› æžœå‘¨æœ«ä½œä¸ºçº¯åŽç«¯ï¼Œä¸Žå‰ç«¯åŒäº‹è”è°ƒå¾®ä¿¡jsapiçš„æŽˆæƒæŽ¥å£ï¼Œå¬è¯´å°±ä¸€ä¸ªæŽ¥å£ï¼Œä¸ç”¨æ•°æ®åº“ï¼Œä¸é¸Ÿæƒé™çš„äº‹ï¼Œå°±æ˜¯ä»ŽæœåŠ¡ç«¯å‘å¾®ä¿¡å‘èµ·ä¸€ä¸ªè¯·æ±‚tokenå’Œticketçš„æŽ¥å£ï¼Œè¿”å›žç»™å‰ç«¯è€Œå·²ã€‚åŽŸè®¡åˆ’åŠä¸ªå°æ—¶æžå®šçš„ï¼Œç»“æžœæžäº†ä¸‰ä¸ªå¤šå°æ—¶ï¼Œå¦‚æžœä¸æ˜¯å‚è€ƒåŽŸæ¥ä¸€ä¸ªé¡¹ç›®é‡Œçš„å®žçŽ°ï¼Œä¼°è®¡åœ¨åŠ ä¸¤ä¸ªå°æ—¶ä¹Ÿä¸ä¸€å®šèƒ½æžå‡ºä¸ªæˆå“ã€‚å› ä¸ºå¾®ä¿¡é™åˆ¶è°ƒç”¨é¢‘æ¬¡ï¼Œè€Œä¸”æœ¬åœ°èŽ·å–è¿˜éœ€è¦åŠ ç™½åå•ï¼Œä½†æ˜¯ç»™å‰ç«¯åŒäº‹è”è°ƒçš„è¯è¿˜éœ€è¦æ‰“åŒ…æ‰”åˆ°ä¸€å°å…¬ç½‘æœåŠ¡å™¨ä¸Šï¼Œç”šæ˜¯éº»çƒ¦å•Šï¼ŒäºŽæ˜¯æƒ³è¿™æ¬¡å¼„å®Œçœ‹çœ‹æžä¸€ä¸ªå†…ç½‘ç©¿é€ï¼Œå†æœ‰ç±»ä¼¼åœºæ™¯ï¼Œç›´æŽ¥ä½¿ç”¨ã€‚ 2ã€åè¯è§£é‡Š2.1ã€ä¸ºä»€ä¹ˆéœ€è¦å†…ç½‘ç©¿é€å½“å†…ç½‘ä¸­çš„ä¸»æœºæ²¡æœ‰é™æ€IPåœ°å€è¦è¢«å¤–ç½‘ç¨³å®šè®¿é—®æ—¶å¯ä»¥ä½¿ç”¨å†…ç½‘ç©¿é€ åœ¨äº’è”ç½‘ä¸­å”¯ä¸€å®šä½ä¸€å°ä¸»æœºçš„æ–¹æ³•æ˜¯é€šè¿‡å…¬ç½‘çš„IPåœ°å€ï¼Œä½†å›ºå®šIPæ˜¯ä¸€ç§éžå¸¸ç¨€ç¼ºçš„èµ„æºï¼Œä¸å¯èƒ½ç»™æ¯ä¸ªå…¬å¸éƒ½åˆ†é…ä¸€ä¸ªï¼Œä¸”è®¸å¤šä¸­å°å…¬å¸ä¸æ„¿æ„ä¸ºé«˜æ˜‚çš„è´¹ç”¨ä¹°å•ï¼Œå¤šæ•°å…¬å¸ç›´æŽ¥æˆ–é—´æŽ¥çš„æ‹¨å·ä¸Šç½‘ï¼Œç”µä¿¡éƒ¨é—¨ä¼šç»™æŽ¥å…¥ç½‘ç»œçš„ç”¨æˆ·åˆ†é…IPåœ°å€ï¼Œä»¥å‰ä¸Šç½‘ç”¨æˆ·å°‘çš„æ—¶å€™åŸºæœ¬åˆ†é…çš„éƒ½æ˜¯ä¸´æ—¶çš„é™æ€IPåœ°å€ï¼Œç§Ÿçº¦è¿‡äº†ä¹‹åŽå¯èƒ½ä¼šæ›´æ¢æˆå¦ä¸€ä¸ªIPåœ°å€ï¼Œè¿™æ ·å¤–ç½‘è®¿é—®å°±ä¸ç¨³å®šï¼Œå› ä¸ºå†…ç½‘çš„é™æ€IPåœ°å€ä¸€ç›´å˜åŒ–ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨åŠ¨æ€åŸŸåè§£æžçš„åŠžæ³•å˜æ¢åŸŸåæŒ‡å‘çš„é™æ€IPåœ°å€ã€‚ä½†æ˜¯çŽ°åœ¨è¶Šæ¥è¶Šå¤šçš„ä¸Šç½‘ç”¨æˆ·ä½¿å¾—ä¸´æ—¶åˆ†é…çš„é™æ€IPåœ°å€ä¹Ÿä¸å¤Ÿç”¨äº†ï¼Œç”µä¿¡éƒ¨é—¨å¼€å§‹åˆ†é…ä¸€äº›è™šæ‹Ÿçš„é™æ€IPåœ°å€ï¼Œè¿™äº›IPæ˜¯å…¬ç½‘ä¸èƒ½ç›´æŽ¥è®¿é—®çš„ï¼Œå¦‚ä»¥125å¼€å¤´çš„ä¸€äº›IPåœ°å€ï¼Œä»¥å‰å•çº¯çš„åŠ¨æ€åŸŸåè§£æžå°±ä¸å¥½ç”¨äº†ã€‚ 2.2ã€å†…ç½‘ç©¿é€çš„å®šä¹‰ä¸Žéšœç¢ç®€å•æ¥è¯´å®žçŽ°ä¸åŒå±€åŸŸç½‘å†…çš„ä¸»æœºä¹‹é—´é€šè¿‡äº’è”ç½‘è¿›è¡Œé€šä¿¡çš„æŠ€æœ¯å«å†…ç½‘ç©¿é€ã€‚ éšœç¢ä¸€ï¼šä½äºŽå±€åŸŸç½‘å†…çš„ä¸»æœºæœ‰ä¸¤å¥— IP åœ°å€ï¼Œä¸€å¥—æ˜¯å±€åŸŸç½‘å†…çš„ IP åœ°å€ï¼Œé€šå¸¸æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œä»…ä¾›å±€åŸŸç½‘å†…çš„ä¸»æœºé—´é€šä¿¡ä½¿ç”¨ï¼›ä¸€å¥—æ˜¯ç»è¿‡ç½‘å…³è½¬æ¢åŽçš„å¤–ç½‘ IP åœ°å€ï¼Œç”¨äºŽä¸Žå¤–ç½‘ç¨‹ã€‚ éšœç¢äºŒï¼šä½äºŽä¸åŒå±€åŸŸç½‘å†…çš„ä¸¤å°ä¸»æœºï¼Œå³ä½¿æ˜¯çŸ¥é“äº†å¯¹æ–¹çš„ IP åœ°å€å’Œç«¯å£å·ï¼Œâ€œä¸€åŽ¢æƒ…æ„¿â€åœ°å°†æ•°æ®åŒ…å‘é€è¿‡åŽ»ï¼Œå¯¹æ–¹ä¹Ÿæ˜¯æŽ¥æ”¶ä¸åˆ°çš„ã€‚ å› ä¸ºå‡ºäºŽå®‰å…¨èµ·è§ï¼Œé™¤éžæ˜¯ä¸»æœºä¸»åŠ¨å‘å¯¹æ–¹å‘å‡ºäº†è¿žæŽ¥è¯·æ±‚ï¼ˆè¿™æ—¶ä¼šåœ¨è¯¥ä¸»æœºçš„æ•°æ®ç»“æž„ä¸­ç•™ä¸‹ä¸€æ¡è®°å½•ï¼‰ï¼Œå¦åˆ™ï¼Œå½“ä¸»æœºæŽ¥æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå¦‚æžœåœ¨å…¶æ•°æ®ç»“æž„ä¸­æŸ¥è¯¢ä¸åˆ°å¯¹åº”çš„è®°å½•ï¼Œé‚£äº›ä¸è¯·è‡ªæ¥çš„æ•°æ®åŒ…å°†ä¼šè¢«ä¸¢å¼ƒã€‚ è§£å†³åŠžæ³•ï¼šè¦æƒ³è§£å†³ä»¥ä¸Šä¸¤å¤§éšœç¢ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€å°å…·æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨è¿›è¡Œæ¡¥æŽ¥ã€‚ 3ã€ é€‰åž‹3.1ã€èŠ±ç”Ÿå£³èŠ±ç”Ÿå£³æ—¢æ˜¯å†…ç½‘ç©¿é€è½¯ä»¶ã€å†…ç½‘æ˜ å°„è½¯ä»¶,ä¹Ÿæ˜¯ç«¯å£æ˜ å°„è½¯ä»¶ã€‚è§„æ¨¡æœ€å¤§ï¼Œè¾ƒæ­£è§„ï¼Œå®Œå–„ã€‚ æ”¶è´¹é«˜ï¼Œä½¿ç”¨ç®€å• å®˜ç½‘ï¼šhttp://www.oray.com/ 3.2ã€Nat123nat123æ˜¯å†…ç½‘ç«¯å£æ˜ å°„ä¸ŽåŠ¨æ€åŸŸåè§£æžè½¯ä»¶ï¼Œåœ¨å†…ç½‘å¯åŠ¨æ˜ å°„åŽï¼Œå¯åœ¨å¤–ç½‘è®¿é—®è¿žæŽ¥å†…ç½‘ç½‘ç«™ç­‰åº”ç”¨ã€‚æ•´ä¸ªç½‘ç«™æˆ‘éƒ½æ²¡æœ‰æ‰¾åˆ°å®¢æœç”µè¯ï¼Œç½‘å‹å‘äº†ä¸€äº›åé¢çš„è¯„ä»· æ”¶è´¹ï¼Œä½¿ç”¨ç®€å• å®˜ç½‘ï¼šhttp://www.nat123.com 3.3ã€NATAPPNATAPPåŸºäºŽngrokçš„å›½å†…å†…ç½‘ç©¿é€æœåŠ¡ï¼Œå…è´¹ç‰ˆä¼šå¼ºåˆ¶æ›´æ¢åŸŸåï¼Œä¸´æ—¶ç”¨ä¸€ä¸‹å¯ä»¥ æ”¶è´¹ï¼Œä½¿ç”¨ç®€å• å®˜ç½‘ï¼šhttps://natapp.cn/ 3.4ã€frpä¸Žå…¶å®ƒfrp æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è½»æ¾åœ°è¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå¯¹å¤–ç½‘æä¾›æœåŠ¡ï¼Œæ”¯æŒ tcp, http, https ç­‰åè®®ç±»åž‹ï¼Œå¹¶ä¸” web æœåŠ¡æ”¯æŒæ ¹æ®åŸŸåè¿›è¡Œè·¯ç”±è½¬å‘ã€‚ å¼€æºå…è´¹ ä½¿ç”¨ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ä»£ç†æœåŠ¡å™¨æ”¯æŒ å®˜ç½‘ï¼šhttps://github.com/fatedier/frp æ–‡æ¡£ï¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼Œç®€ä¹¦ç¤ºä¾‹ åˆ©ç”¨å¤„äºŽå†…ç½‘æˆ–é˜²ç«å¢™åŽçš„æœºå™¨ï¼Œå¯¹å¤–ç½‘çŽ¯å¢ƒæä¾› http æˆ– https æœåŠ¡ã€‚ å¯¹äºŽ http, https æœåŠ¡æ”¯æŒåŸºäºŽåŸŸåçš„è™šæ‹Ÿä¸»æœºï¼Œæ”¯æŒè‡ªå®šä¹‰åŸŸåç»‘å®šï¼Œä½¿å¤šä¸ªåŸŸåå¯ä»¥å…±ç”¨ä¸€ä¸ª80ç«¯å£ã€‚ åˆ©ç”¨å¤„äºŽå†…ç½‘æˆ–é˜²ç«å¢™åŽçš„æœºå™¨ï¼Œå¯¹å¤–ç½‘çŽ¯å¢ƒæä¾› tcp å’Œ udp æœåŠ¡ï¼Œä¾‹å¦‚åœ¨å®¶é‡Œé€šè¿‡ ssh è®¿é—®å¤„äºŽå…¬å¸å†…ç½‘çŽ¯å¢ƒå†…çš„ä¸»æœºã€‚ å› ä¸ºfrp ä»ç„¶å¤„äºŽå‰æœŸå¼€å‘é˜¶æ®µï¼Œæœªç»å……åˆ†æµ‹è¯•ä¸ŽéªŒè¯ï¼Œä¸æŽ¨èç”¨äºŽç”Ÿäº§çŽ¯å¢ƒï¼Œæ‰€æœ‰æˆ‘é€‰æ‹©äº†ngrokï¼Œèµ„æ–™æ¯”è¾ƒå¤šã€‚ è¿˜æœ‰å¦‚åœ£å‰‘å†…ç½‘é€šã€ngrokï¼ˆå¼€æºå…è´¹ï¼‰ã€æ›´å¤šåŠžæ³• 3.5ã€ngrokngrokæ˜¯ä¸€ä¸ªåå‘ä»£ç†ï¼Œé€šè¿‡åœ¨å…¬å…±çš„ç«¯ç‚¹å’Œæœ¬åœ°è¿è¡Œçš„WebæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é€šé“ã€‚ngrokå¯æ•èŽ·å’Œåˆ†æžæ‰€æœ‰é€šé“ä¸Šçš„æµé‡ï¼Œä¾¿äºŽåŽæœŸåˆ†æžä¸Žå“åº”ã€‚ å¼€æºå…è´¹ å®˜ç½‘ï¼šhttps://ngrok.com/ æºç ï¼šhttps://github.com/inconshreveable/ngrok ngrok1.xå¼€æºï¼Œngrok2.xä¸å¼€æº ngrokä½¿ç”¨goè¯­è¨€å¼€å‘ï¼Œæºä»£ç åˆ†ä¸ºå®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ç«¯ã€‚ å›½å†…å…è´¹æœåŠ¡å™¨ï¼šhttp://ngrok.ciqiuwl.cn/ï¼Œæ›´å¤šå…è´¹æœåŠ¡å™¨è¯·å¤§å®¶æŒ–æŽ˜ï¼Œèµ„æºå…±äº«ï¼Œæˆ‘éšæ—¶æ›´æ–°ï¼šï¼‰ å¦‚æžœæœ‰æœåŠ¡å™¨ï¼Œä»…å®¢æˆ·ç«¯çš„ä½¿ç”¨æ˜¯ä¸å¤æ‚çš„ï¼Œä»¥ä¸Šé¢çš„å…è´¹æœåŠ¡å™¨ä¸ºç¤ºä¾‹å®Œæˆå†…ç½‘ç©¿é€ æœ¬å±Œä¸ä¸€å‘æ²¡æœ‰å¤šä½™é’±ç»™æœåŠ¡å•†ï¼Œåªèƒ½æœç´¢å…è´¹çš„ï¼Œæœ€åŽé€‰äº†ngrok 3ã€ æ­å»ºæ­å»ºè¿‡ç¨‹å¾ˆç®€å•ï¼Œå¦‚æžœå‚è€ƒå®˜ç½‘ä¼°è®¡ä¼šèµ°ç‚¹å¼¯è·¯ï¼Œå› ä¸ºwindowså¯¹å¾ˆå¤šä¸œè¥¿éƒ½æœ‰è¿™è¦æ±‚ã€‚ä¸è¿‡è¿˜å¥½ï¼Œæ‰¾åˆ°äº†å°ç±³çƒngrokï¼Œè®©æ‰€è°“çš„æ­å»ºå¥½åƒæ²¡ä»€ä¹ˆå¯ä»¥è¯´çš„äº†ã€‚å¤åˆ¶ä¸€ä¸‹ä½¿ç”¨æ•™ç¨‹ã€‚ â—windowsç”¨æˆ·:1ã€ä¸‹è½½windowsç‰ˆæœ¬çš„å®¢æˆ·ç«¯ï¼Œè§£åŽ‹åˆ°ä½ å–œæ¬¢çš„ç›®å½•2ã€åœ¨å‘½ä»¤è¡Œä¸‹è¿›å…¥åˆ°ngrokå®¢æˆ·ç«¯ç›®å½•ä¸‹3ã€æ‰§è¡Œ ngrok -config=ngrok.cfg -subdomain xxx 80 //(xxx æ˜¯ä½ è‡ªå®šä¹‰çš„åŸŸåå‰ç¼€)4ã€å¦‚æžœå¼€å¯æˆåŠŸ ä½ å°±å¯ä»¥ä½¿ç”¨ xxx.ngrok.xiaomiqiu.cn æ¥è®¿é—®ä½ æœ¬æœºçš„ 127.0.0.1:80 çš„æœåŠ¡å•¦5ã€å¦‚æžœä½ è‡ªå·±æœ‰é¡¶çº§åŸŸåï¼Œæƒ³é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®æœ¬æœºçš„é¡¹ç›®ï¼Œé‚£ä¹ˆå…ˆå°†è‡ªå·±çš„é¡¶çº§åŸŸåè§£æžåˆ°&gt;120.25.161.137(åŸŸåéœ€è¦å·²å¤‡æ¡ˆå“¦)ï¼Œç„¶åŽæ‰§è¡Œ ngrok -config=ngrok.cfg -hostname xxx.xxx.xxx 80 //(xxx.xxx.xxxæ˜¯ä½ è‡ªå®šä¹‰çš„é¡¶çº§åŸŸå)6ã€å¦‚æžœå¼€å¯æˆåŠŸ ä½ å°±å¯ä»¥ä½¿ç”¨ä½ çš„é¡¶çº§åŸŸåæ¥è®¿é—®ä½ æœ¬æœºçš„ 127.0.0.1:80 çš„æœåŠ¡å•¦7ã€å¦‚æžœå¤±è´¥ å°±åŠ ä¸‹äº¤æµç¾¤ åé¦ˆä¸‹é—®é¢˜ æœ¬å±Œä¼šçœ‹çœ‹ä»€ä¹ˆåŽŸå› â€¦.å§8ã€å¦‚æžœå®žåœ¨é—²å‘½ä»¤æ‰“å¼€éº»çƒ¦ï¼Œwindowsç‰ˆæä¾›äº†ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ç›´æŽ¥å¯åŠ¨å³å¯ï¼ˆå…¶å®ƒç‰ˆæœ¬æ²¡æœ‰è„šæœ¬ï¼‰â—linuxç”¨æˆ·:åªåœ¨centos6.5 amd64 ä¸‹æµ‹è¯•æ²¡æœ‰é—®é¢˜1ã€ä¸‹è½½linuxç‰ˆæœ¬çš„å®¢æˆ·ç«¯ï¼Œè§£åŽ‹åˆ°ä½ å–œæ¬¢çš„ç›®å½•,æ³¨æ„ï¼šè¦ç»™ngrokæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™2ã€åœ¨å‘½ä»¤è¡Œä¸‹è¿›å…¥åˆ°ngrokå®¢æˆ·ç«¯ç›®å½•ä¸‹3ã€æ‰§è¡Œ ./ngrok -config=ngrok.cfg -subdomain xxx 80 //(xxx æ˜¯ä½ è‡ªå®šä¹‰çš„åŸŸåå‰ç¼€)4ã€å¦‚æžœå¼€å¯æˆåŠŸ ä½ å°±å¯ä»¥ä½¿ç”¨ xxx.ngrok.xiaomiqiu.cn æ¥è®¿é—®ä½ æœ¬æœºçš„ 127.0.0.1:80 çš„æœåŠ¡å•¦5ã€å¦‚æžœä½ è‡ªå·±æœ‰é¡¶çº§åŸŸåï¼Œæƒ³é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®æœ¬æœºçš„é¡¹ç›®ï¼Œé‚£ä¹ˆå…ˆå°†è‡ªå·±çš„é¡¶çº§åŸŸåè§£æžåˆ°120.25.161.137 (åŸŸåéœ€è¦å·²å¤‡æ¡ˆå“¦),ç„¶åŽæ‰§è¡Œ./ngrok -config=ngrok.cfg -hostname xxx.xxx.xxx 80 //(xxx.xxx.xxxæ˜¯ä½ è‡ªå®šä¹‰çš„é¡¶çº§åŸŸå)6ã€å¦‚æžœå¼€å¯æˆåŠŸ ä½ å°±å¯ä»¥ä½¿ç”¨ä½ çš„é¡¶çº§åŸŸåæ¥è®¿é—®ä½ æœ¬æœºçš„ 127.0.0.1:80 çš„æœåŠ¡å•¦7ã€æœ€è¿‘æœ‰å¾ˆå¤šåŒå­¦æåˆ°éœ€è¦linux32ä½ä¸Žarmç‰ˆæœ¬ï¼Œè¿™è¾¹ä¹Ÿæ–°å¢žäº†ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œç”±äºŽæœ¬å±Œæ²¡æœ‰ç›¸åº”è®¾å¤‡æˆ–çŽ¯å¢ƒï¼Œè¯·è‡ªè¡Œæµ‹è¯•ï¼Œå¦‚æžœæœ‰é—®é¢˜ï¼Œå¯ä»¥åé¦ˆã€‚8ã€å¦‚æžœå¤±è´¥ å°±åŠ ä¸‹äº¤æµç¾¤ åé¦ˆä¸‹é—®é¢˜ æœ¬å±Œä¼šçœ‹çœ‹ä»€ä¹ˆåŽŸå› â€¦.å§â—Mac ç”¨æˆ·:1ã€å‘ƒ,è™½ç„¶æä¾›äº†macç‰ˆçš„å®¢æˆ·ç«¯ï¼Œä½†æ˜¯æœ¬å±Œæ²¡æœ‰macï¼Œæ‰€æœ‰æ²¡æœ‰æµ‹è¯•ï¼2ã€æ‰€ä»¥ä½ ä¸‹è½½äº†ä¹‹åŽ è‡ªå·±ç¢ç£¨å§(åº”è¯¥å’Œlinuxçš„ä½¿ç”¨ä¸€æ ·â€¦.å§)â€¦â€¦.â—å…¶ä»–ä½¿ç”¨æ–¹æ³•1ã€å‘ƒ,è™½ç„¶æ­å»ºäº†ngrokæœåŠ¡ï¼Œä½†æ˜¯å®žé™…ä¸Šä¸Šé¢çš„æ•™ç¨‹åªä»‹ç»äº†ä¸€äº›ç®€å•çš„æ“ä½œ2ã€ngrokè¿˜æœ‰è®¸å¤šä½¿ç”¨æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å¤šäº†è§£æŽ¢ç´¢ä¸€ä¸‹3ã€æ¯”å¦‚ï¼ŒåŒæ—¶å¼€å¯å¤šä¸ªæœåŠ¡ï¼ŒTCPç«¯å£è½¬å‘ï¼Œè¿™äº›å¤§å®¶å¯ä»¥åœ¨.cfgä¸Šè¿›è¡Œé…ç½®ï¼Œæœ¬å±Œå°±ä¸ä¸€ä¸€å™è¿°äº†ã€‚ 3.1ã€ä¸‹è½½ä¸‹è½½ windows 64ä½ç‰ˆï¼ˆå¯†ç : p6n6ï¼‰ï¼Œå¹¶è§£åŽ‹ï¼Œå†…åŒ…å«3ä¸ªæ–‡ä»¶ï¼š ngrok.cfgngrok.exeå°ç±³çƒNgrokå¯åŠ¨å·¥å…·.bat 3.2ã€è¿è¡Œæœ¬åœ°webæœåŠ¡æˆ‘çŽ°åœ¨æœ¬åœ°è¿è¡Œæˆ‘çš„ç¨‹åºï¼Œåœ¨80ç«¯å£ä¸Šï¼Œè¿è¡Œèµ·æ¥ä»¥åŽè®¿é—®æˆ‘å†™çš„èŽ·å–å¾®ä¿¡ç­¾åçš„æŽ¥å£ï¼š 3.3ã€å¯åŠ¨ngrokï¼Œé…ç½®æ˜ å°„å›žè½¦ï¼Œæç¤ºé…ç½®æˆåŠŸï¼Œæ˜¾ç¤ºå‡ºè®¿é—®åœ°å€ï¼šæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨è®¿é—®ä¸€ä¸‹:ç„¶åŽå†è§‚å¯Ÿngrokçš„æŽ§åˆ¶å°ï¼Œå‘çŽ°å·²ç»è®°å½•äº†ä¸€æ¡è®¿é—®access logï¼šåˆ°æ­¤ï¼Œç©¿é€å®Œæ¯•ï¼Œso easyï¼ é¸£è°¢æ„Ÿè°¢å°ç±³çƒçš„åˆ†äº«è¿™ç¯‡æ–‡ç« ç”¨ngrokå®˜ç½‘çš„æŒ‡å¯¼ä½¿ç”¨ä¹Ÿä¸é”™]]></content>
      <categories>
        <category>å·¥å…·ä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>tools</tag>
        <tag>server</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react nativeé¡¹ç›®ç¼–è¯‘ï¼Œæ‰“åŒ…æˆandroid APP]]></title>
    <url>%2F2018%2F06%2F15%2Freact%20native%E9%A1%B9%E7%9B%AE%E7%BC%96%E8%AF%91%EF%BC%8C%E6%89%93%E5%8C%85%E6%88%90android%20APP%2F</url>
    <content type="text"><![CDATA[ç¼–è¯‘react nativeé¡¹ç›®ï¼Œå¹¶æœ€ç»ˆæ‰“åŒ…æˆå®‰å“çš„apkåŒ…ç®€ä¹¦åœ°å€ ç¬¬åç«  ç¦»çº¿æ‰“åŒ…å‘å¸ƒ10.2 Androidæ‰“åŒ…å‘å¸ƒ1ï¼‰å°†jsä»£ç æ‰“åŒ…æˆjsbundleåŒ… åœ¨androidå·¥ç¨‹ä¸­åˆ›å»ºassetsæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç”¨å‘½ä»¤è¡Œåˆ›å»ºï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œå‘½ä»¤å¦‚ä¸‹: mkdir android/app/src/main/assets åœ¨å·¥ç¨‹çš„æ ¹ç›®å½•è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ‰“åŒ… react-native bundle â€“entry-file demo/index.js â€“bundle-output ./android/app/src/main/assets/index.android.jsbundle â€“platform android â€“assets-dest ./android/app/src/main/res/ â€“dev false ã€æ³¨æ„ï¼šä¸Šè¿°å‘½ä»¤ä¸­ â€œdemo/index/.jsâ€æ˜¯ä½ å·¥ç¨‹çš„å®‰å“å…¥å£æ–‡ä»¶ç›®å½•ã€‘ -entry-file æŒ‡å®šå…¥å£æ–‡ä»¶ å› ä¸ºè¦æ‰“åŒ…ioså¹³å°ï¼Œæ‰€ä»¥æŒ‡å®šä¸ºrné¡¹ç›®çš„index.ios.jsä½œä¸ºå…¥å£ â€“bundle-output æŒ‡å®šè¾“å‡ºçš„jsbundleæ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶å æŒ‡å®šåˆ°rné¡¹ç›®çš„ioså·¥ç¨‹æ–‡ä»¶å¤¹ä¸‹ï¼Œè®°å¾—ä¸€å®šè¦å…ˆåˆ›å»ºbundleæ–‡ä»¶å¤¹ï¼Œä¸ç„¶ç»ˆç«¯ä¼šæŠ¥æ–‡ä»¶å¤¹æ‰¾ä¸åˆ°çš„é”™è¯¯ â€“platform æŒ‡å®šå¹³å°ç±»åž‹ â€“assets-dest æŒ‡å®šèµ„æºæ–‡ä»¶å¤¹è·¯å¾„ assetsæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ŒåŒ…å«å›¾ç‰‡ã€nodeæ¨¡å—ç­‰èµ„æº â€“dev æ˜¯å¦ä¸ºå¼€å‘æ¨¡å¼ å¦‚æžœè®¾ç½®ä¸ºfalseï¼Œä¸ä¼šäº§ç”Ÿè­¦å‘Šï¼Œå¹¶ä¸”bundleä¼šè¢«åŽ‹ç¼© è¿˜æœ‰å…¶ä»–å‘½ä»¤ï¼Œæ¯”å¦‚ï¼štransformerã€prepackã€bundle-encodingç­‰ï¼Œå¯ä»¥åˆ°å®˜ç½‘æŸ¥çœ‹å…·ä½“ä»‹ç»ã€‚ åœ¨MyApplication.javaä¸­çš„ReactNativeHostä¸­æ·»åŠ getBundleAssetName`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›žå€¼ï¼Œå¿…é¡»ä¸Žä¸Šä¸€æ­¥ä¸­ç”Ÿæˆçš„jsbundleæ–‡ä»¶çš„æ–‡ä»¶åä¿æŒä¸€è‡´ã€‚ 12345@Nullable@Overrideprotected String getBundleAssetName() &#123; return &quot;index.android.bundle&quot;;&#125; 2ï¼‰åˆ©ç”¨å‘½ä»¤è¡Œæ‰“åŒ…å®‰å“APKAndroidè¦æ±‚æ‰€æœ‰åº”ç”¨éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç­¾åè¯ä¹¦æ‰å…è®¸å®‰è£…åœ¨æ‰‹æœºä¸Šï¼Œæ‰€ä»¥ï¼Œåœ¨æŠŠåº”ç”¨å‘å¸ƒåˆ°åº”ç”¨å¸‚åœºä¹‹å‰å¿…é¡»ç”Ÿæˆ1ä¸ªç­¾åçš„apkåŒ…ã€‚ ç”Ÿæˆç­¾åç§˜é’¥ åœ¨Windowsä¸Škeytoolå‘½ä»¤æ”¾åœ¨JDKçš„binç›®å½•ä¸­ï¼ˆæ¯”å¦‚C:\Program Files\Java\jdkx.x.x_x\binï¼‰ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­å…ˆè¿›å…¥é‚£ä¸ªç›®å½•æ‰èƒ½æ‰§è¡Œæ­¤å‘½ä»¤ã€‚åœ¨macä¸Šï¼Œå»ºè®®åœ¨å·¥ç¨‹ç›®å½•ä¸‹ç”Ÿæˆï¼š 12&gt;$ keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000&gt; ã€æ³¨ï¼škeystoreåç§°å¯è‡ªå·±ä¿®æ”¹ã€‘ è¿™æ¡å‘½ä»¤ä¼šè¦æ±‚ä½ è¾“å…¥å¯†é’¥åº“ï¼ˆkeystoreï¼‰å’Œå¯¹åº”å¯†é’¥çš„å¯†ç ï¼Œç„¶åŽè®¾ç½®ä¸€äº›å‘è¡Œç›¸å…³çš„ä¿¡æ¯ã€‚æœ€åŽå®ƒä¼šç”Ÿæˆä¸€ä¸ªå«åšmy-release-key.keystoreçš„å¯†é’¥åº“æ–‡ä»¶ã€‚ åœ¨è¿è¡Œä¸Šé¢è¿™æ¡è¯­å¥ä¹‹åŽï¼Œå¯†é’¥åº“é‡Œåº”è¯¥å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªå•ç‹¬çš„å¯†é’¥ï¼Œæœ‰æ•ˆæœŸä¸º10000å¤©ã€‚â€“aliaså‚æ•°åŽé¢çš„åˆ«åæ˜¯ä½ å°†æ¥ä¸ºåº”ç”¨ç­¾åæ—¶æ‰€éœ€è¦ç”¨åˆ°çš„ï¼Œæ‰€ä»¥è®°å¾—è®°å½•è¿™ä¸ªåˆ«åã€‚ è®¾ç½®gradleå˜é‡ æŠŠmy-release-key.keystoreæ–‡ä»¶æ”¾åˆ°ä½ å·¥ç¨‹ä¸­çš„android/appæ–‡ä»¶å¤¹ä¸‹ã€‚ åœ¨androidå·¥ç¨‹çš„gradle.propertiesæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 1234MYAPP_RELEASE_STORE_FILE=my-release-key.keystoreMYAPP_RELEASE_KEY_ALIAS=my-key-aliasMYAPP_RELEASE_STORE_PASSWORD=hongchuangMYAPP_RELEASE_KEY_PASSWORD=hongchuang æ·»åŠ ç­¾ååˆ°gradleé…ç½®æ–‡ä»¶ ç¼–è¾‘ä½ é¡¹ç›®ç›®å½•ä¸‹çš„android/app/build.gradleï¼Œæ·»åŠ å¦‚ä¸‹çš„ç­¾åé…ç½®ï¼š 1234567891011121314151617181920...android &#123; ... defaultConfig &#123; ... &#125; signingConfigs &#123; release &#123; storeFile file(MYAPP_RELEASE_STORE_FILE) storePassword MYAPP_RELEASE_STORE_PASSWORD keyAlias MYAPP_RELEASE_KEY_ALIAS keyPassword MYAPP_RELEASE_KEY_PASSWORD &#125; &#125; buildTypes &#123; release &#123; ... signingConfig signingConfigs.release &#125; &#125;&#125;... ç”Ÿæˆç­¾åapkåŒ… cd android ./gradlew assembleRelease ./gradlew assembleReleaseåœ¨macOSã€Linuxæˆ–æ˜¯windowsçš„PowerShellçŽ¯å¢ƒä¸­è¡¨ç¤ºæ‰§è¡Œå½“å‰ç›®å½•ä¸‹çš„åä¸ºgradlewçš„è„šæœ¬æ–‡ä»¶ï¼Œä¸”å…¶è¿è¡Œå‚æ•°ä¸ºassembleReleaseï¼Œæ³¨æ„è¿™ä¸ª./ä¸å¯çœç•¥ï¼›è€Œåœ¨windowsçš„ä¼ ç»ŸCMDå‘½ä»¤è¡Œä¸‹åˆ™éœ€è¦åŽ»æŽ‰./ã€‚ Gradleçš„assembleReleaseå‚æ•°ä¼šæŠŠæ‰€æœ‰ç”¨åˆ°çš„JavaScriptä»£ç éƒ½æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œç„¶åŽå†…ç½®åˆ°APKåŒ…ä¸­ã€‚å¦‚æžœä½ æƒ³è°ƒæ•´ä¸‹è¿™ä¸ªè¡Œä¸ºï¼ˆæ¯”å¦‚jsä»£ç ä»¥åŠé™æ€èµ„æºæ‰“åŒ…çš„é»˜è®¤æ–‡ä»¶åæˆ–æ˜¯ç›®å½•ç»“æž„ç­‰ï¼‰ï¼Œå¯ä»¥çœ‹çœ‹android/app/build.gradleæ–‡ä»¶ï¼Œç„¶åŽç¢ç£¨ä¸‹åº”è¯¥æ€Žä¹ˆä¿®æ”¹ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚ ç”Ÿæˆçš„APKæ–‡ä»¶ä½äºŽandroid/app/build/outputs/apk/app-release.apkï¼Œå®ƒå·²ç»å¯ä»¥ç”¨æ¥å‘å¸ƒäº†ã€‚ æµ‹è¯•ç­¾ååŒ… è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ä¸Šä¸€æ­¥ç”Ÿæˆçš„ç­¾ååŒ…ï¼Œæ¥è¿›è¡Œæµ‹è¯•ã€‚ cd android ./gradlew installRelease æ³¨æ„installReleaseå‚æ•°åªèƒ½åœ¨ä½ å®Œæˆäº†ä¸Šé¢çš„ç­¾åé…ç½®ä¹‹åŽæ‰å¯ä»¥ä½¿ç”¨ã€‚ ä½ çŽ°åœ¨å¯ä»¥å…³æŽ‰è¿è¡Œä¸­çš„packageräº†ï¼Œå› ä¸ºä½ æ‰€æœ‰çš„ä»£ç å’Œæ¡†æž¶ä¾èµ–å·²ç»éƒ½è¢«æ‰“åŒ…åˆ°apkåŒ…ä¸­ï¼Œå¯ä»¥ç¦»çº¿è¿è¡Œäº†ã€‚ åœ¨debugå’Œreleaseç‰ˆæœ¬é—´æ¥å›žåˆ‡æ¢å®‰è£…æ—¶å¯èƒ½ä¼šæŠ¥é”™ç­¾åä¸åŒ¹é…ï¼Œæ­¤æ—¶éœ€è¦å…ˆå¸è½½å‰ä¸€ä¸ªç‰ˆæœ¬å†å°è¯•å®‰è£…ã€‚ å¯ç”¨Proguardä»£ç æ··æ·†æ¥ç¼©å°apkæ–‡ä»¶å¤§å°ï¼ˆå¯é€‰ï¼‰ Proguardæ˜¯ä¸€ä¸ªJavaå­—èŠ‚ç æ··æ·†åŽ‹ç¼©å·¥å…·ï¼Œå®ƒå¯ä»¥ç§»é™¤æŽ‰React Native Javaï¼ˆå’Œå®ƒçš„ä¾èµ–åº“ä¸­ï¼‰ä¸­æ²¡æœ‰è¢«ä½¿ç”¨åˆ°çš„éƒ¨åˆ†ï¼Œæœ€ç»ˆæœ‰æ•ˆçš„å‡å°‘APKçš„å¤§å°ã€‚ ã€å¯ç”¨Proguardä¹‹åŽï¼Œä½ å¿…é¡»å†æ¬¡å…¨é¢åœ°æµ‹è¯•ä½ çš„åº”ç”¨ã€‚Proguardæœ‰æ—¶å€™éœ€è¦ä¸ºä½ å¼•å…¥çš„æ¯ä¸ªåŽŸç”Ÿåº“åšä¸€äº›é¢å¤–çš„é…ç½®ã€‚å‚è§app/proguard-rules.proæ–‡ä»¶ã€‚ã€‘ å¯ç”¨æ–¹æ³•æ˜¯ä¿®æ”¹androidå·¥ç¨‹çš„build.gradleæ–‡ä»¶ï¼Œè®¾ç½®minifyEnabledé€‰é¡¹ä¸ºtrue 1234567buildTypes &#123; release &#123; signingConfig signingConfigs.release minifyEnabled true proguardFile &apos;proguard.txt&apos; &#125; &#125; 3ï¼‰åˆ©ç”¨androidStudioæ‰“åŒ…ç”Ÿæˆapk åˆ©ç”¨AndroidStudioç”Ÿæˆç­¾åç§˜é’¥ å…·ä½“æ–¹æ³•æ˜¯ï¼ŒandroidStudioâ€”&gt;Buildâ€”&gt;Generate Signed apkâ€”&gt;ç‚¹å‡»ã€nextã€‘â€”&gt;ã€Create newã€‘ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç„¶åŽè¿›å…¥åˆ›å»ºçª—å£ï¼Œé€‰æ‹©keystoreè·¯å¾„ï¼Œkey storeå¯†ç ï¼Œç„¶åŽä¸‹é¢å¦‚å›¾æ‰€ç¤ºè¾“å…¥å…¬å¸åŠå¼€å‘è€…ä¿¡æ¯ï¼Œä¿¡æ¯è¾“å…¥å®ŒæˆåŽç‚¹å‡»ã€okã€‘å³å¯ç”Ÿæˆkeystoreã€‚ æ­¤å¤„çš„keystore password è·Ÿkey Alias ä»¥åŠpassword éœ€è¦è®°ä½ï¼Œå½“åˆ©ç”¨keystoreæ‰“åŒ…æ—¶éœ€è¦å¡«å†™ã€‚ åˆ©ç”¨AndroidStudioæ‰“åŒ…ç”Ÿæˆç­¾åapk æ–¹æ³•è¿˜æ˜¯ï¼ŒandroidStudioâ€”&gt;Buildâ€”&gt;Generate Signed apkâ€”&gt;ç‚¹å‡»ã€nextã€‘â€”&gt;ã€Choose existingã€‘â€”&gt;é€‰æ‹©ä¸Šä¸€æ­¥ç”Ÿæˆçš„keystoreæ–‡ä»¶è·¯å¾„â€”&gt;è¾“å…¥keystoreç›¸å…³ä¿¡æ¯â€”&gt;ã€Nextã€‘ ç„¶åŽé€‰æ‹©apkå­˜å‚¨è·¯å¾„â€”&gt;Signature Versions é€‰æ‹©ã€V2ï¼ˆFull APK Signatureï¼‰ã€‘â€”&gt;ã€Finishã€‘ç„¶åŽç­‰å¾…apk æ‰“åŒ…å®Œæˆå³å¯ åˆ°è¿™é‡Œï¼Œæ‰“åŒ…å·¥ä½œå°±å®Œæˆäº†ï¼ŒæŠŠapkä¸Šä¼ åº”ç”¨å•†åº—å³å¯ã€‚ æŽ¨è å¦ä¸€ç¯‡å¥½åšæ–‡]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>react-native</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react-native å®‰å“é¡¹ç›®gradleä¼˜åŒ–]]></title>
    <url>%2F2018%2F06%2F15%2Freact-native%20%E5%AE%89%E5%8D%93%E9%A1%B9%E7%9B%AEgradle%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[å¤§å‰ç«¯å­¦ä¹ ä¹‹å®‰å“é¡¹ç›®ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–ç®€ä¹¦åœ°å€ profileæŠ¥å‘Šå‘½ä»¤1./gradlew clean app:assembleDebug --profile 1ã€debugçŽ¯å¢ƒç¦æ­¢crashLyticsä¸ŠæŠ¥2ã€é¿å…Legacy Multidex è®°å½•2018-11-06 11:05 cleangradlew clean app:assembleDebug â€“profile 1ã€ä¿®æ”¹å‚æ•°ï¼ŒåŠ å¿«buildorg.gradle.jvmargs=-Xmx4608M -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8å®‰å“ï¼šéžå‘å¸ƒç‰ˆç¦ç”¨fabricä¸ŠæŠ¥ï¼Œä¿®æ”¹jvmargså‚æ•°ï¼Œä½¿å¼€å‘çŽ¯å¢ƒbuildæ—¶é—´é™è‡³2minä»¥å†…http://www.easemob.com/news/852https://medium.com/exploring-code/how-to-decrease-your-gradle-build-time-by-65-310b572b0c43 debugçŽ¯å¢ƒç¦ç”¨fabricéžå‘å¸ƒç‰ˆæœ¬å…³é—­Fabirc123456android &#123; buildTypes &#123; debug &#123; // Disable fabric build ID generation for debug builds ext.enableCrashlytics = false ... å‚è€ƒï¼šhttps://www.cnblogs.com/zhou-guobao/p/disable-crashlytics-for-debug-builds.html 2ã€é…ç½®ä¸åŒçš„å›¾æ ‡https://blog.csdn.net/MAIMIHO/article/details/76106700?utm_source=blogxgwz4 é…ç½®ä¸åŒappåç§°é‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼š12345678910111213FAILURE: Build failed with an exception.* What went wrong:Execution failed for task &apos;:app:processDebugManifest&apos;.&gt; Manifest merger failed : Attribute application@label value=(@string/app_name_debug) from AndroidManifest.xml:86:9-37 is also present at [:react-native-fetch-blob] AndroidManifest.xml:11:18-50 value=(@string/app_name). Suggestion: add &apos;tools:replace=&quot;android:label&quot;&apos; to &lt;application&gt; element at AndroidManifest.xml:80:5-324:19 to override.* Try:Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.* Get more help at https://help.gradle.org æŒ‰ç…§æç¤ºè§£å†³ï¼Œè§£é‡Šï¼šhttps://www.2cto.com/kf/201712/702939.html 3ã€é…ç½®ä¸åŒapplicationIdfileprovider ä¿®æ”¹ï¼Œhttps://www.jianshu.com/p/1afa7d4c0afd æé†’FileHelp.javaä¸­ä½¿ç”¨çˆ¶é¡¹ç›®çš„BuildConf.applicationId 4ã€æ‰“jsbundleåŽç”Ÿæˆçš„è¿™ä¸ªåžƒåœ¾æ–‡ä»¶D:\Git\pingtai\Portal\android\app\src\main\res\drawable-mdpi\js_commonview_echarts_tpl.html 5ã€android studio ä¸­distributionUrlä½¿ç”¨æœ¬åœ°æ–‡ä»¶D:\Git\pingtai\Portal\android\gradle\wrapper\gradle-wrapper.properties 6ã€ä¿®æ”¹combile 7ã€å¼€å‘çŽ¯å¢ƒä½¿ç”¨æ¯”android studio è‡ªå¸¦çš„ã€apply changesã€‘æ›´ç‰›é€¼çš„ã€JRebel for Androidã€‘ 1ã€å®‰è£…Jrebelæ’ä»¶ï¼šhttps://zeroturnaround.com/software/jrebel-for-android/quick-start/#!/installation 2ã€æ¿€æ´»å¸®åŠ©ï¼šhttp://blog.lanyus.com/archives/299.html ç”ŸæˆGUIDï¼šhttps://www.qvdv.com/tools/guid.htmlæˆ‘ç”Ÿæˆçš„ï¼šhttp://idea.lanyus.com/E086630D-638A-07A7-58D2-68ED4762D053 3ã€é…ç½®å‚è€ƒåšå®¢åœ°å€ï¼šhttp://www.czhzero.com/2016/08/10/jrebel-for-android-guide/ 8ã€å‡å°APPçš„ä½“ç§¯]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>react-native</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlæ•°æ®åº“å®‰è£…å’Œä¸€èˆ¬é…ç½®]]></title>
    <url>%2F2018%2F06%2F15%2Fmysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%92%8C%E4%B8%80%E8%88%AC%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[åœ¨linuxä¸Šå®‰è£…mysql serverï¼Œè¿›è¡Œå¸¸è§„è®¾ç½®ç®€ä¹¦åœ°å€ åŒäº‹é‚£é‡Œçš„æ€»ç»“æ‹¿è¿‡æ¥è‡ªå·±ä¿å­˜ä¸€ä»½ï¼Œç±»ä¼¼çš„æ•™ç¨‹å¤ªå¤šäº†ã€‚ åœ¨linuxä¸Šå®‰è£…mysql serverï¼Œè¿›è¡Œå¸¸è§„è®¾ç½® MySQLæ•°æ®åº“å®‰è£… å®‰è£… 12345# æ›´æ–°åŒ…ç´¢å¼•sudo apt-get update# å®‰è£…sudo apt-get install mysql-server å®‰è£…è¿‡ç¨‹ä¸­ä¼šæç¤ºè®¾ç½®rootå¯†ç ã€‚ è®¾ç½® 12345678910# æ‰§è¡Œå®‰å…¨è„šæœ¬è®¾ç½®sudo mysql_secure_installation# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬(æŒ‰æ­¤æ–¹æ³•å®‰è£…ä¸ç”¨æ‰§è¡Œ)# 5.7.6ä¹‹å‰çš„ç‰ˆæœ¬æ‰§è¡Œmysql_install_db# 5.7.6åŠåŽç»­ç‰ˆæœ¬æ‰§è¡Œmysqld --initialize æµ‹è¯• 1234567891011# æŸ¥çœ‹mysqlè¿è¡ŒçŠ¶æ€systemctl status mysql.service# å¯åŠ¨Mysqlsudo systemctl start mysql# åœæ­¢Mysqlsudo systemctl stop mysql# é‡å¯Mysqlsudo systemctl restart mysql MySQLæ•°æ®åº“é…ç½®æŒ‰æ­¤ç§æ–¹å¼å®‰è£…å®ŒMysqlåŽï¼Œé…ç½®æ–‡ä»¶é»˜è®¤ä½äºŽ/etc/msyqlä¸‹ï¼Œå…¶ä¸­mysql.conf.dä¸‹çš„mysqld.cnfç”¨äºŽé…ç½®æœåŠ¡ç«¯ï¼Œconf.dä¸‹çš„mysql.cnfç”¨äºŽé…ç½®å®¢æˆ·ç«¯ã€‚ å¿½ç•¥å¤§å°å†™ 123456# ç¼–è¾‘my.cnfæ–‡ä»¶vim /etc/my.cnf# åœ¨[msyqld]ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç [mysqld]lower_case_table_names=1 è®¾ç½®ç¼–ç æ ¼å¼ä¸ºutf8mb4ï¼Œå¹¶æ”¯æŒemojiè¡¨æƒ… 12345678910111213141516171819# ç¼–è¾‘my.cnfæ–‡ä»¶vim /etc/my.cnf[client]default-character-set=utf8mb4[mysqld]character-set-client-handshake = FALSEcharacter-set-server = utf8mb4collation-server = utf8mb4_unicode_ciinit_connect=â€™SET NAMES utf8mb4'[mysql]default-character-set=utf8mb4 æ•°æ®åº“ã€è¡¨å’Œå­—æ®µçš„è®¾ç½®åˆ†åˆ«å¦‚ä¸‹ï¼š 1ï¼‰ ä¿®æ”¹databaseçš„å­—ç¬¦é›†ï¼š ALTER DATABASE æ•°æ®åº“å CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci; ç¤ºä¾‹ï¼š ALTER DATABASE xxxdb CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci; 2ï¼‰ æ­¥éª¤1ï¼‰æ‰§è¡Œå®Œæˆä¹‹åŽï¼Œéœ€è¦æ‰§è¡Œuse æ•°æ®åº“åï¼ŒæŒ‡æ˜Žå½“å‰éœ€è¦è¿›è¡Œå­—ç¬¦é›†ä¿®æ”¹çš„æ•°æ®åº“ï¼›ç¤ºä¾‹ï¼šuse xxxdb; 3ï¼‰ä¿®æ”¹tableçš„å­—ç¬¦é›†ï¼š ALTER TABLE è¡¨å CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ç¤ºä¾‹ï¼š ALTER TABLE user_comments CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; 4ï¼‰ ä¿®æ”¹columnçš„å­—ç¬¦é›†ï¼š ALTER TABLE è¡¨å CHANGE å­—æ®µå å­—æ®µå è¯¥å­—æ®µåŽŸæ¥çš„æ•°æ®ç±»åž‹ CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ç¤ºä¾‹ï¼š ALTER TABLE user_comments CHANGE content content TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; è®¾ç½®max_allowed_package 1234# ç¼–è¾‘my.cnfæ–‡ä»¶vim /etc/my.cnf[mysqld]max_allowed_packet=100M å…è®¸è¿œç¨‹è®¿é—® 4.1 æŽ’é˜Ÿç½‘ç»œæˆ–é˜²ç«å¢™é—®é¢˜ å…ˆçœ‹èƒ½å¦pingé€šè¿œç¨‹æœåŠ¡å™¨ï¼Œå¦‚æžœä¸å¯ä»¥å°±æ˜¯ç½‘ç»œé—®é¢˜ã€‚ç„¶åŽï¼Œæ£€æŸ¥ç«¯å£æ˜¯å¦è¢«é˜²ç«å¢™æŒ¡ä½äº† 1telnet ipåœ°å€ 3306 å¦‚æžœè¿žæŽ¥å¤±è´¥ï¼Œé…ç½®é˜²ç«å¢™ 123# é˜²ç«å¢™æ”¾å¼€Mysqlç«¯å£iptables -A INPUT -p tcp --dport 3306 -j ACCEPT iptables -A OUTPUT -p tcp --dport 3306 -j ACCEPT 4.2 æ£€æŸ¥MySQLé…ç½®å¦‚æžœå¼€å¯äº†é˜²ç«å¢™ï¼Œtelnetè¿˜æ˜¯å¤±è´¥ï¼Œé€šè¿‡netstatæŸ¥çœ‹3306çš„ç«¯å£çŠ¶æ€ 1234netstat -apn | grep 3306# è¿”å›žç»“æžœtcp6 0 0 127.0.0.1:3306 :::* LISTEN 13524/mysqld å¦‚æžœæ˜¾ç¤º127.0.0.1ï¼š3306è¡¨ç¤º3306è¢«ç»‘å®šåˆ°äº†æœ¬åœ°ã€‚éœ€è¦ä¿®æ”¹mysqld.conf 1234# ç¼–è¾‘mysqld.cnfæ–‡ä»¶vim /etc/mysql/mysql.conf.d/mysqld.cnf[mysqld]bind-address=addr ä¸é…ç½®æˆ–è€…IPé…ç½®ä¸º0.0.0.0ï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰å®¢æˆ·ç«¯è¿žæŽ¥ã€‚ 4.3 æ£€æŸ¥ç”¨æˆ·è®¿é—®æƒé™ MySQå»ºç”¨æˆ·çš„æ—¶å€™ä¼šæŒ‡å®šä¸€ä¸ªhost,é»˜è®¤æ˜¯127.0.0.1/localhostï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å°±åªèƒ½æœ¬æœºè®¿é—®ï¼Œå…¶ä»–æœºå™¨ç”¨è¿™ä¸ªè´¦å·è®¿é—®ä¼šæç¤ºæ²¡æœ‰æƒé™ï¼Œhostæ”¹ä¸º%ï¼Œè¡¨ç¤ºå…è®¸æ‰€æœ‰æœºå™¨è®¿é—®ã€‚ 123456789101112131415161718# ç™»å½•mysqlæœåŠ¡å™¨mysql -uroot -p# ä½¿ç”¨mysqlæ•°æ®åº“mysql&gt; use mysql;Database changed# ä¿®æ”¹rootç”¨æˆ·è®¿é—®æƒé™mysql&gt; update user set host=&apos;%&apos; where user=&apos;root&apos;;Query OK, 0 rows affected(0.00 sec)Row matched: 1 Changed: 0 Warnings: 0# æŸ¥çœ‹ç»“æžœmysql&gt; select host, user from user;+------+-------+|host |user |+------+-------+|% |root | é‡å¯Mysqlä½¿ç”¨ä¿®æ”¹ç”Ÿæ•ˆ è®¾ç½®å¼€æœºå¯åŠ¨åŠç¦æ­¢ 12345# ç¦æ­¢å¯åŠ¨sudo systemctl disable mysqld# å¼€æœºå¯åŠ¨sudo systemctl enable mysqld MySQLç”¨æˆ·åŠæ•°æ®åº“/è¡¨æƒé™é…ç½®åŸºæœ¬æ“ä½œå‘½ä»¤ï¼š 1ã€æŸ¥è¯¢ç”¨æˆ·æƒé™ 1show grants for username; 2ã€ç”¨æˆ·æŽˆæƒ 1grant select on db.* to username; 3ã€å›žæ”¶ç”¨æˆ·æƒé™ 1revoke select on db.* from username;(æƒé™ä¸å­˜åœ¨ä¼šæŠ¥é”™) 1ã€æ–°å»ºç”¨æˆ· 1.1 ç™»å½•MYSQLï¼š root@bin&gt;mysql -u root -p Enter password: ** 1.2 åˆ›å»ºç”¨æˆ·ï¼š mysql&gt; insert into mysql.user(Host,User,Password) values(â€œlocalhostâ€,â€demoâ€,password(â€œ1234â€)); è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªåä¸ºï¼šdemo å¯†ç ä¸ºï¼š1234 çš„ç”¨æˆ·ã€‚ æ³¨æ„ï¼šæ­¤å¤„çš„â€localhostâ€ï¼Œæ˜¯æŒ‡è¯¥ç”¨æˆ·åªèƒ½åœ¨æœ¬åœ°ç™»å½•ï¼Œä¸èƒ½åœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šè¿œç¨‹ç™»å½•ã€‚å¦‚æžœæƒ³è¿œç¨‹ç™»å½•çš„è¯ï¼Œå°†â€localhostâ€æ”¹ä¸ºâ€%â€ï¼Œè¡¨ç¤ºåœ¨ä»»ä½•ä¸€å°ç”µè„‘ä¸Šéƒ½å¯ä»¥ç™»å½•ã€‚ä¹Ÿå¯ä»¥æŒ‡å®šæŸå°æœºå™¨å¯ä»¥è¿œç¨‹ç™»å½•ã€‚ 1.3 ç„¶åŽç™»å½•ä¸€ä¸‹ï¼š mysql&gt;exit; root@bin&gt;mysql -u demo -p Enter password: ** 2ã€ç”¨æˆ·æŽˆæƒæŽˆæƒæ ¼å¼ï¼šgrant æƒé™ on æ•°æ®åº“.* to ç”¨æˆ·å@ç™»å½•ä¸»æœº identified by â€œå¯†ç â€; 2.1 ç™»å½•MYSQLï¼ˆæœ‰ROOTæƒé™ï¼‰ï¼Œè¿™é‡Œä»¥ROOTèº«ä»½ç™»å½•ï¼š root@bin&gt;mysql -u demo -p Enter password: ** 2.2 é¦–å…ˆä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªæ•°æ®åº“(testDB)ï¼š mysql&gt;create database demoDB; 2.3 æŽˆæƒtestç”¨æˆ·æ‹¥æœ‰testDBæ•°æ®åº“çš„æ‰€æœ‰æƒé™ï¼ˆæŸä¸ªæ•°æ®åº“çš„æ‰€æœ‰æƒé™ï¼‰ï¼š mysql&gt;grant all privileges on demoDB.* to demo@localhost identified by â€˜1234â€™; mysql&gt;flush privileges;//åˆ·æ–°ç³»ç»Ÿæƒé™è¡¨ æ ¼å¼ï¼šgrant æƒé™ on æ•°æ®åº“.* to ç”¨æˆ·å@ç™»å½•ä¸»æœº identified by â€œå¯†ç â€; 2.4 å¦‚æžœæƒ³æŒ‡å®šéƒ¨åˆ†æƒé™ç»™ä¸€ç”¨æˆ·ï¼Œå¯ä»¥è¿™æ ·æ¥å†™: mysql&gt;grant select,update on demoDB.* to demo@localhost identified by â€˜1234â€™; mysql&gt;flush privileges; //åˆ·æ–°ç³»ç»Ÿæƒé™è¡¨ 2.5 æŽˆæƒtestç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æ•°æ®åº“çš„æŸäº›æƒé™ï¼š mysql&gt;grant select,delete,update,create,drop on . to demo@â€%â€ identified by â€œ1234â€; //testç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“éƒ½æœ‰select,delete,update,create,drop æƒé™ã€‚ //@â€%â€ è¡¨ç¤ºå¯¹æ‰€æœ‰éžæœ¬åœ°ä¸»æœºæŽˆæƒï¼Œä¸åŒ…æ‹¬localhostã€‚ï¼ˆlocalhoståœ°å€è®¾ä¸º127.0.0.1ï¼Œå¦‚æžœè®¾ä¸ºçœŸå®žçš„æœ¬åœ°åœ°å€ï¼Œä¸çŸ¥é“æ˜¯å¦å¯ä»¥ï¼Œæ²¡æœ‰éªŒè¯ã€‚ï¼‰ //å¯¹localhostæŽˆæƒï¼šåŠ ä¸Šä¸€å¥grant all privileges on demoDB.* to demo@localhost identified by â€˜1234â€™;å³å¯ã€‚ 3ã€åˆ é™¤ç”¨æˆ·root@bin&gt;mysql -u demo -p Enter password: ** mysql&gt;Delete FROM user Where User=â€™demoâ€™ and Host=â€™localhostâ€™; mysql&gt;flush privileges; mysql&gt;drop database demoDB; //åˆ é™¤ç”¨æˆ·çš„æ•°æ®åº“åˆ é™¤è´¦æˆ·åŠæƒé™ï¼š&gt;drop user ç”¨æˆ·å@â€™%â€™; &gt;drop user ç”¨æˆ·å@ localhost; 4ã€ä¿®æ”¹ç”¨æˆ·å¯†ç root@bin&gt;mysql -u demo -p Enter password: ** mysql&gt;update mysql.user set password=password(â€˜æ–°å¯†ç â€™) where User=â€demoâ€ and Host=â€localhostâ€; mysql&gt;flush privileges; è¯´æ˜Žï¼šgrantå’Œrevokeå¯ä»¥åœ¨å‡ ä¸ªå±‚æ¬¡ä¸ŠæŽ§åˆ¶è®¿é—®æƒé™1.æ•´ä¸ªæœåŠ¡å™¨ï¼šgrant all /revoke all2.æ•´ä¸ªæ•°æ®åº“ï¼šon database.*3.ç‰¹å®šçš„è¡¨ï¼šon database.table4.ç‰¹å®šçš„åˆ—ï¼šgrant select(id, se, rank) on testdb.apache_log to dba@localhost;5.ç‰¹å®šçš„å­˜å‚¨è¿‡ç¨‹ï¼šgrant execute on procedure testdb.pr_add to â€™dbaâ€™@â€™localhostâ€™6.ç‰¹å®šçš„å‡½æ•°ï¼šgrant execute on function testdb.fn_add to â€™dbaâ€™@â€™localhostâ€™]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxä¸Šæ­å»ºçƒ­æ›´æœåŠ¡å™¨å¹¶åœ¨ç§»åŠ¨ç«¯é€šè¿‡react nativeé¡¹ç›®éªŒè¯]]></title>
    <url>%2F2018%2F06%2F13%2FLinux%E4%B8%8A%E6%90%AD%E5%BB%BA%E7%83%AD%E6%9B%B4%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%9A%E8%BF%87react%20native%E9%A1%B9%E7%9B%AE%E9%AA%8C%E8%AF%81%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»æ­å»ºçƒ­æ›´æœåŠ¡å™¨å¹¶åœ¨æ‰‹æœºä¸Šæµ‹è¯•react nativeçƒ­æ›´çš„å…¨è¿‡ç¨‹ã€‚ç®€ä¹¦åœ°å€ å®‰è£…MySQLå®‰è£…å®ŒæˆåŽï¼Œä¼šå¼¹å‡ºåˆå§‹å¯†ç ï¼Œç²—ç»†çš„æˆ‘ï¼Œéšæ‰‹ç‚¹äº†OKï¼Œæ­¤å¤„æŒ–å‘åŠå¤©ã€‚æƒé™å¯†ç é—®é¢˜å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ï¼Œå…¶å®ƒçš„éƒ½æ˜¯å°é—®é¢˜ code-pushçƒ­æ›´æœåŠ¡å™¨æ­å»ºï¼šå®‰è£…code-push-server npmå®‰è£… 12# å®‰è£…code-push-servernpm install code-push-server -g æºç å®‰è£…ï¼ˆæŽ¨èï¼‰ 123456# ä»Žgitåº“ä¸‹è½½æœ€æ–°ä»£ç git clone https://github.com/lisong/code-push-server.git# è¿›å…¥åˆ°code-push-serverç›®å½•cd code-push-server# å®‰è£…npm install Code-Push-Serveré…ç½®ä¿®æ”¹config/config.jsæ–‡ä»¶ï¼ŒæŒ‡å®šæ•°æ®åº“ï¼Œæ•°æ®å­˜æ”¾ä½ç½® é…ç½®æ•°æ®åº“ 12345678db: &#123; username: &quot;root&quot;, password: &quot;Your PWD&quot;, database: &quot;codepush&quot;, host: &quot;127.0.0.1&quot;, port: 3306, dialect: &quot;mysql&quot;&#125; é…ç½®å­˜å‚¨ï¼ˆé»˜è®¤ä¸ºlocal,æœ¬æ¬¡ä¹Ÿé‡‡ç”¨localï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738common: &#123; // dataDirç”¨äºŽè¿›è¡Œå­˜æ”¾æ¯”å¯¹æ–‡ä»¶ dataDir: &quot;/Users/tablee/workspaces/data&quot;, // å­˜å‚¨ç±»åž‹ï¼Œå¯é€‰å€¼æœ‰local,oss,qiniu,s3 storageType: &quot;local&quot;&#125;,// æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ° å½“storageTypeä¸ºlocalæ—¶éœ€è¦é…ç½®local: &#123; // äºŒè¿›åˆ¶æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œæ–‡ä»¶ä¸‹è½½ç›®å½•ï¼Œä¸è¦ä½¿ç”¨ä¸´æ—¶ç›®å½• storageDir: &quot;/Users/tablee/workspaces/storage&quot;, // æ–‡ä»¶ä¸‹è½½åœ°å€ CodePushServeråœ°å€ + â€™/downloadâ€˜,downloadå¯¹åº”app.jsé‡Œé¢çš„åœ°å€ //é»˜è®¤æ­¤å¤„çš„ä¸‹è½½åœ°å€æ˜¯127.0.0.1:3000è¿™ä¸ªè‡ªç„¶æ˜¯é”™è¯¯çš„ï¼Œè¦å¤–ç½‘ipåœ°å€ downloadUrl: &quot;https://tech.haier.net:7788/download&quot;, // public static download spacename public: &apos;/download&apos;&#125;,//ä¸ƒç‰›äº‘å­˜å‚¨é…ç½® å½“storageTypeä¸ºqiniuæ—¶éœ€è¦é…ç½®qiniu: &#123; accessKey: &quot;&quot;, secretKey: &quot;&quot;, bucketName: &quot;&quot;, //æ–‡ä»¶ä¸‹è½½åŸŸååœ°å€ downloadUrl: &quot;&quot;&#125;,//é˜¿é‡Œäº‘å­˜å‚¨é…ç½® å½“storageTypeä¸ºossæ—¶éœ€è¦é…ç½®oss: &#123; accessKeyId: &quot;&quot;, secretAccessKey: &quot;&quot;, endpoint: &quot;&quot;, bucketName: &quot;&quot;, // å¯¹è±¡Keyçš„å‰ç¼€ï¼Œå…è®¸æ”¾åˆ°å­æ–‡ä»¶å¤¹é‡Œé¢ prefix: &quot;&quot;, // æ–‡ä»¶ä¸‹è½½åŸŸååœ°å€ï¼Œéœ€è¦åŒ…å«å‰ç¼€ downloadUrl: &quot;&quot;,&#125; é…ç½®ç­¾å,å¯ä»¥ä¸ä¿®æ”¹ï¼Œä½†æ˜¯æŽ¨èæ›´æ”¹ 123456jwt: &#123; // ç™»å½•jwtç­¾åå¯†é’¥ï¼Œå¿…é¡»æ›´æ”¹ï¼Œå¦åˆ™æœ‰å®‰å…¨éšæ‚£ï¼Œå¯ä»¥ä½¿ç”¨éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸² // Recommended: 63 random alpha-numeric characters // Generate using: https://www.grc.com/passwords.htm tokenSecret: &apos;https://www.grc.com/passwords.htm&apos;&#125; åˆå§‹åŒ–æ•°æ®åº“é…ç½®å®ŒæˆåŽï¼Œè¿›è¡Œæ•°æ®åˆå§‹åŒ–å·¥ä½œ npmå®‰è£… 12# åˆå§‹åŒ–æ•°æ®åº“,**æ›¿æ¢ä¸ºæ•°æ®åº“å¯†ç **ï¼ˆå‚è€ƒåŽé¢é…ç½®è¯´æ˜Žï¼‰code-push-server-db init --dbhost localhost --dbuser root --dbpassword **Your PWD** --dbport 3306 æºç å®‰è£… 12# åˆå§‹åŒ–æ•°æ®åº“./bin/db init --dbhost localhost --dbuser root --dbpassword **Your PWD** --dbport 3306 æ³¨æ„äº‹é¡¹ï¼š ä¸è®ºé‡‡å–å“ªç§å®‰è£…æ–¹å¼ï¼Œåˆå§‹åŒ–æ•°æ®åº“æ—¶è¦ä¿è¯æ•°æ®åº“ç”¨æˆ·åå¯†ç æ­£ç¡®ï¼›æ•°æ®åº“ä¸­ä¸èƒ½å­˜åœ¨codepushæ•°æ®åº“(é»˜è®¤æ•°æ®åº“ä¸ºcodepush) é‡‡ç”¨æºç å®‰è£…ï¼Œæ‰§è¡Œbinç›®å½•ä¸‹çš„dbå‘½ä»¤æ—¶ï¼Œè¦ä¿è¯æ­¤æ–‡ä»¶å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œéœ€è¦æ·»åŠ æƒé™12# æ·»åŠ dbæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™chmod +x bin/db å¦‚æžœæ•°æ®åº“å¯†ç å¤æ‚ï¼Œå¸¦æœ‰ç‰¹æ®Šç¬¦å·ï¼Œåˆå§‹åŒ–è¯­å¥å°†æ‰§è¡Œå¤±è´¥ã€‚æ­¤æ—¶å› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡å®‰è£…ï¼Œå¯ä»¥åœ¨æ•°æ®åº“æœåŠ¡å™¨æ‰‹åŠ¨åˆ›å»ºåä¸ºcodepush(å¿…é¡»æ˜¯è¿™ä¸ªåå­—)çš„æ•°æ®åº“ï¼Œç„¶åŽæ‰§è¡Œ/opt/chuangke/code-push-server/sql/ç›®å½•ä¸‹çš„codepush-all.sqlè„šæœ¬æ¥åˆå§‹åŒ–æ•°æ®åº“ã€‚åˆå§‹åŒ–æˆåŠŸåŽæ•°æ®åº“ä¸­çš„è¡¨å¦‚ä¸‹ï¼šæœåŠ¡å¯åŠ¨å®‰è£…é…ç½®æ–‡ä»¶ä¸­çš„ç›®å½•ç»“æž„ï¼Œåˆ°/Usersç›®å½•ä¸­å»ºç«‹å¦‚ä¸‹æ–‡ä»¶å¤¹ /Users/tablee/workspaces/storage npmå¯åŠ¨ 12345# å¯åŠ¨æœåŠ¡ï¼Œé»˜è®¤ä½¿ç”¨3000ç«¯å£,å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://127.0.0.1:3000code-push-server# æŒ‡å®šç«¯å£å·è¿è¡ŒPORT=3000 HOST=127.0.0.1 NODE_ENV=production code-push-server æºç å¯åŠ¨ 12345678# å¯åŠ¨æœåŠ¡(ä¿è¯wwwå…·æœ‰å¯æ‰§è¡Œæƒé™)ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://127.0.0.1:3000./bin/www# ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œnohup ./bin/www &amp;# æŒ‡å®šç«¯å£å·è¿è¡ŒPORT=3000 HOST=127.0.0.1 NODE_ENV=production node ./bin/www forever åŽå°å¯åŠ¨ï¼ˆæŽ¨èï¼‰å…ˆå®‰è£…foreverå½“ç„¶ï¼Œæœ‰äººè¯´foreverå·²ç»è¿‡æ—¶äº†ï¼ŒæŽ¨èä½¿ç”¨pm2ä»£æ›¿foreverï¼Œè¯·å‚è€ƒlinux npm start ä¿æŒåŽå°è¿è¡Œ 12345# å…¨å±€å®‰è£…$ npm install forever -g# æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ$ forever listinfo: No forever processes running å¾ˆæŠ±æ­‰ï¼Œå¦‚æžœä¸é¡ºåˆ©çš„è¯ï¼Œä¼šæœ‰è¿™ä¹ˆä¸ªæƒ…å†µ12345678910[root@izm5e3m6sxwr4dw9w7r6h4z lib]# npm install forever -g/opt/software/node-v10.0.0-linux-x64/bin/forever -&gt; /opt/software/node-v10.0.0-linux-x64/lib/node_modules/forever/bin/forevernpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/forever/node_modules/fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;linux&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)+ forever@0.15.3updated 1 package in 2.109s[root@izm5e3m6sxwr4dw9w7r6h4z lib]# forever list-bash: forever: æœªæ‰¾åˆ°å‘½ä»¤[root@izm5e3m6sxwr4dw9w7r6h4z lib]# ä¸ç¾Žä¸½äº†ï¼Œå‘½åå®‰è£…æˆåŠŸäº†ï¼Œä½†æ˜¯è¿˜æ˜¯æç¤ºæ‰¾ä¸åˆ°å‘½ä»¤ï¼Œæ€Žä¹ˆåŠžå‘¢ï¼Ÿæˆ‘æ¥æ•™ä½ ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºè¿™ä¸ª-gæ˜¯å§å‘½ä»¤å®‰è£…åˆ°äº†nodeæ‰€åœ¨ç›®å½•ï¼Œå¯ä»¥çœ‹çœ‹å…·ä½“åœ¨å“ª123456789101112[root@izm5e3m6sxwr4dw9w7r6h4z ~]# npm list -g --depth 0/opt/software/node-v10.0.0-linux-x64/libâ”œâ”€â”€ forever@0.15.3â””â”€â”€ npm@5.6.0[root@izm5e3m6sxwr4dw9w7r6h4z ~]# cd /opt/software/node-v10.0.0-linux-x64/lib[root@izm5e3m6sxwr4dw9w7r6h4z lib]# lsnode_modules[root@izm5e3m6sxwr4dw9w7r6h4z lib]# cd node_modules/forever/bin/[root@izm5e3m6sxwr4dw9w7r6h4z bin]# lsforever monitor[root@izm5e3m6sxwr4dw9w7r6h4z bin]# è¿™æ¬¡æ˜¯çœŸçš„çœ‹è§foreverè¢«å®‰è£…åˆ°å“ªé‡Œï¼ŒæŽ¥ä¸‹æ¥å°±æ¥ä¸ªè½¯é“¾åˆ°/usr/binä¸‹å°±å¯ä»¥äº†1234[root@izm5e3m6sxwr4dw9w7r6h4z bin]# ln -s /opt/software/node-v10.0.0-linux-x64/lib/node_modules/forever/bin/forever /usr/bin/forever[root@izm5e3m6sxwr4dw9w7r6h4z bin]# forever listinfo: No forever processes running[root@izm5e3m6sxwr4dw9w7r6h4z bin]# å®Œç¾Žï¼ŒæŽ¥ç€ä½¿ç”¨foreverå¯åŠ¨åº”ç”¨å•¦ã€‚æ¯”å¦‚æˆ‘çš„serveræºç çš„ä½ç½®åœ¨/opt/chuangke/code-push-server/ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨1NODE_ENV=production forever start -l log/forever.log -o log/info.log -e log/err.log bin/www å¯ä»¥ç”¨å¦‚ä¸‹ç»å¯¹è·¯å¾„å‘½ä»¤å¯åŠ¨ï¼š1NODE_ENV=production forever start -l /opt/chuangke/code-push-server/log/forever.log -o /home/haieradmin/codepush/code-push-server/log/info.log -e /home/haieradmin/codepush/code-push-server/log/err.log /home/haieradmin/codepush/code-push-server/bin/www æœåŠ¡å¯åŠ¨éªŒè¯å‘½ä»¤è¡ŒéªŒè¯1234$ forever listinfo: Forever processes runningdata: uid command script forever pid id logfile uptime data: [0] 8Or8 /usr/local/node8/bin/node /opt/chuangke/code-push-server/bin/www 60199 60209 /opt/chuangke/code-push-server/log/forever.log 0:15:2:21.503 å¦‚æžœæœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œåˆ™ç”¨æµè§ˆå™¨è®¿é—®é»˜è®¤çš„3000ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•ˆæžœåˆ°æ­¤æœåŠ¡å™¨ç«¯åˆ°é…ç½®å°±å®Œæˆäº†ã€‚ å®¢æˆ·ç«¯çƒ­æ›´éªŒè¯å®¢æˆ·ç«¯æµ‹è¯•ä»£ç ä»¥ https://github.com/lisong/code-push-demo-app ä¸ºä¾‹ å®¢æˆ·ç«¯å®‰è£…code-push-cli 12345# å…¨å±€å®‰è£…$ npm install -g code-push-cli # æŸ¥çœ‹ç‰ˆæœ¬$ code-push -v2.1.8 ä¸‹è½½å®¢æˆ·ç«¯éªŒè¯ç¨‹åºï¼Œå¹¶å®‰è£…ç¬¬ä¸€ç‰ˆ cloneç¨‹åºå¹¶install1234$ git clone git@github.com:lisong/code-push-demo-app.git# cd åˆ°demoè·¯å¾„ï¼Œæ‰§è¡Œnpm install å®‰è£…nodeä¾èµ–åŒ…$ cd code-push-demo-app$ npm install æ‰“å¼€å‘½ä»¤ç»ˆç«¯ï¼Œç™»å½•code-push-serveræœåŠ¡å™¨ï¼Œè¿™é‡Œé…ç½®ä¸ºlocalï¼Œæ‰€ä»¥ç™»å½•åœ°å€ä¸ºhttp://127.0.0.1:300012$ code-push login http://127.0.0.1:3000 //è´¦å·å¯†ç ä¸ºåšä¸»æä¾› account: admin password: 123456ç™»å½•æˆåŠŸä¹‹åŽèŽ·å–token å°†æ–‡æœ¬æ¡†ä¸­çš„keyå¤åˆ¶ç²˜è´´åˆ°ç™»å½•ç»ˆç«¯ï¼Œç‚¹å‡»å›žè½¦ç™»å½•æˆåŠŸè¾“å…¥è´¦å·å¯†ç ï¼Œç‚¹å‡»ç™»å½•ã€‚èŽ·å–tokenï¼š1234$ code-push login http://127.0.0.1:3000Please login to Mobile Center in the browser window we&apos;ve just opened.Enter your token from the browser: HugyOJpzvzhEhB05galUftoL4zrz4ksvOXqogSuccessfully logged-in. Your session file was written to C:\Users\marvin\AppData\Local\.code-push.config. You can run the code-push logout command at any time to delete this file and terminate your session. åœ¨å‘½ä»¤è¡ŒæŸ¥çœ‹å½“å‰çƒ­æ›´æœåŠ¡å™¨çš„éƒ¨ç½²ä¿¡æ¯ï¼Œ1234$ code-push app listâ”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Name â”‚ Deployments â”‚â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æ·»åŠ æ–°çš„APPï¼ˆä»¥å®‰å“ä¸ºä¾‹ï¼‰ 1234567891011121314151617# å®‰å“ç‰ˆ$ code-push app add CodePushReactNativeDemo-android android react-nativeSuccessfully added the &quot;CodePushReactNativeDemo-android&quot; app, along with the following default deployments:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Name â”‚ Deployment Key â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ Production â”‚ VKNbn9Oe5Wj9bPoGkYCUVuzRuqHV4ksvOXqog â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ Staging â”‚ 6KfLoVvhgdsnFzFCIohRb2t5grmD4ksvOXqog â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜# å†è¿è¡Œå‘½ä»¤æŸ¥çœ‹$ code-push app listâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Name â”‚ Deployments â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ CodePushReactNativeDemo-android â”‚ Production, Staging â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä¿®æ”¹é…ç½®æ·»åŠ å®Œæˆä¹‹åŽå¯ä»¥ç”¨code-push app listå‘½ä»¤æŸ¥çœ‹åˆ›å»ºå¥½çš„appï¼Œå¹¶å°†æµ‹è¯•çš„Staging keyæ‹·è´åˆ°MainApplication.javaä¸­çš„ â€œYour Keyâ€œ çš„ä½ç½®ï¼ŒæŽ¨é€çš„æ—¶å€™é€šè¿‡keyå°†appå’ŒæœåŠ¡å™¨ç«¯å…³è”ã€‚ ç”¨Android Studioæ‰“å¼€code-push-demo-app/androidç›®å½•åˆ°MainApplication.javaé‡Œé¢ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼š123456789101112131415161718192021@Overrideprotected List&lt;ReactPackage&gt; getPackages() &#123; return Arrays.&lt;ReactPackage&gt;asList( new MainReactPackage(), new CodePush( &quot;YourKey&quot;, // code-push app addé¡¹ç›®åŽç”Ÿæˆçš„app æŽ¨é€key MainApplication.this, BuildConfig.DEBUG, &quot;YourCodePushServerUrl&quot; // config.jsä¸­é…ç½®çš„downloadUrl åœ°å€ ä¸éœ€è¦/downloadåŽç¼€ ) );&#125; æˆ‘çš„é…ç½®æ˜¯ï¼šä¿®æ”¹MainApplication.javaçš„ä»£ç å¦‚ä¸‹ï¼š12345678910@Overrideprotected List&lt;ReactPackage&gt; getPackages() &#123; return Arrays.&lt;ReactPackage&gt;asList( new MainReactPackage(), new CodePushBuilder(getResources().getString(R.string.reactNativeCodePush_androidDeploymentKey),getApplicationContext()) .setIsDebugMode(BuildConfig.DEBUG) .setServerUrl(getResources().getString(R.string.reactNativeCodePush_androidServerURL)) .build() );&#125; ä¿®æ”¹android/app/src/main/res/values/strings.xmlæ–‡ä»¶ï¼ŒæŒ‡å®šreactNativeCodePush_androidDeploymentKeyå’ŒreactNativeCodePush_androidServerURLçš„å€¼ã€‚12345&lt;resources&gt; &lt;string moduleConfig=&quot;true&quot; name=&quot;reactNativeCodePush_androidDeploymentKey&quot;&gt;6KfLoVvhgdsnFzFCIohRb2t5grmD4ksvOXqog&lt;/string&gt; &lt;string moduleConfig=&quot;true&quot; name=&quot;reactNativeCodePush_androidServerURL&quot;&gt;http://xxx.xxx:3000/&lt;/string&gt; &lt;string name=&quot;app_name&quot;&gt;CodePushDemoApp&lt;/string&gt;&lt;/resources&gt; cd åˆ°code-push-demo-appç›®å½•ï¼Œå…è®¸react-native start å¯åŠ¨react-native æœåŠ¡ã€‚å¯ä»¥é€‰æ‹©ç”¨æ•°æ®çº¿è¿žæŽ¥æ‰‹æœºï¼Œæ‰‹æœºå¼€å¯å¼€å‘è€…æ¨¡å¼ã€‚ä¹Ÿå¯ä»¥ç›´æŽ¥å°†code-push-demo-app\android\app\build\outputs\apk\debugä»¥åŽçš„apkåŒ…å‘é€åˆ°æ‰‹æœºä¸Šï¼Œç›´æŽ¥æ‰“å¼€å®‰è£…ã€‚1$ react-native run-android åœ¨æ‰‹æœºä¸Šè¿è¡Œappçš„æˆªå›¾å¦‚ä¸‹ï¼š Android Studioç¼–è¯‘å¹¶å°†é¡¹ç›®è¿è¡Œåˆ°æ‰‹æœºä¸Šï¼Œreloadæ›´æ–°åˆ°æœ€æ–°jsåŒ…åœ¨code-push-demo-appä¸­é¦–é¡µéšæ„åšä¸€äº›ä¿®æ”¹ï¼Œè¿™é‡Œæ˜¯å°†CodePushDemoApp/App.jsæ–‡ä»¶åšäº†å¦‚ä¸‹ä¿®æ”¹ã€‚æ‰§è¡ŒæŽ¨é€å‘½ä»¤123456789101112131415161718192021222324252627# æµ‹è¯•çŽ¯å¢ƒæ‰§è¡Œï¼š$ code-push release-react CodePushReactNativeDemo-android androidDetecting android app version:Using the target binary version value &quot;2.1.0&quot; from &quot;android\app\build.gradle&quot;.Running &quot;react-native bundle&quot; command:node node_modules\react-native\local-cli\cli.js bundle --assets-dest C:\Users\marvin\AppData\Local\Temp\CodePush\CodePush --bundle-output C:\Users\marvin\AppData\Local\Temp\CodePush\CodePush\index.android.bundle --dev false --entry-file index.js --platform androidScanning folders for symlinks in D:\Git\oschina\react\code-push-demo-app\node_modules (101ms)Scanning folders for symlinks in D:\Git\oschina\react\code-push-demo-app\node_modules (48ms)Loading dependency graph, done.bundle: Writing bundle output to: C:\Users\marvin\AppData\Local\Temp\CodePush\CodePush\index.android.bundlebundle: Done writing bundle outputbundle: Copying 1 asset filesbundle: Done copying assetsReleasing update contents to CodePush:Successfully released an update containing the &quot;C:\Users\marvin\AppData\Local\Temp\CodePush\CodePush&quot; directory to the &quot;Staging&quot; deployment of the &quot;CodePushReactNativeDemo-android&quot; app.# ç”Ÿäº§çŽ¯å¢ƒæ‰§è¡Œï¼š$ code-push release-react CodePushReactNativeDemo-android android -d Production#æŒ‡å®šç‰ˆæœ¬ï¼Œæ·»åŠ æ³¨é‡Š$ code-push release-react CodePushReactNativeDemo-android android -d Production --des &quot;marvin code push testing&quot; -t &quot;1.0.0&quot; Successfully è¡¨ç¤ºçƒ­æ›´åŒ…æŽ¨é€æˆåŠŸï¼Œç„¶åŽåœ¨æ‰‹æœºä¸Šç‚¹å‡»Press for dialog-driven syncé“¾æŽ¥ã€‚å¼¹å‡ºä¸‹è½½ç¡®è®¤ ç‚¹å‡»ã€installã€‘è‡³æ­¤ï¼Œçƒ­æ›´æœåŠ¡å™¨æ­å»ºï¼ŒåŠandroidç‰ˆappä½“éªŒå®Œæ¯•ã€‚ æ‰©å±•1ã€äº§çœ‹æ›´æ–°åŒ…å®‰è£…æƒ…å†µ12# code-push deployment history appName deploymentNamecode-push deployment history CodePushReactNativeDemo-android Staging Staging æˆ–è€… Production 2ã€åˆ—è¡¨éƒ¨ç½²åç§°1code-push deployment ls CodePushReactNativeDemo-android 3ã€å¸¸è§é”™è¯¯3.1ã€ downloadåœ°å€å†™é”™ï¼Œé»˜è®¤æ˜¯http://127.0.0.1:3000 å¦‚æžœä¸æ”¹æˆå¤–ç½‘åŸŸåå’Œç«¯å£ï¼Œä¸‹è½½å°†å¤±è´¥ã€‚appå¯åŠ¨æŠ“åŒ…æŸ¥çœ‹çš„ç»“æžœå°±æ˜¯ï¼Œè¿”å›žçš„ä¸‹è½½åœ°å€æ— æ³•ä¸‹è½½åˆ°èµ„æºã€‚ 3.2ã€nginxé™åˆ¶èµ„æºå¤§å°éœ€è¦ä¿®æ”¹é…ç½®ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªappæ‰“åŒ…åŽçº¦70Mï¼Œä¸Šä¼ æ—¶å°±æŠ¥é”™äº†ï¼ŒåŽæ¥æ‰çŸ¥é“æ˜¯nginxæŒ‡å®šçš„ä¸Šä¼ å¤§å°æ˜¯50Mï¼Œæ‰€ä»¥è¦ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ï¼ŒåŠ ä¸Šclient_max_body_size 100M;è¿™ä¸ªæ ·é…ç½®ã€‚ 3.3ã€æ•°æ®åº“é…ç½®é”™è¯¯å°†æ•°æ®åº“çš„ç«¯å£ï¼Œæˆ–è€…ç”¨æˆ·åå¯†ç å†™é”™ä¹Ÿå¾ˆå¸¸è§ 3.4ã€ç›®å½•æƒé™é—®é¢˜é…ç½®æ–‡ä»¶é‡Œé»˜è®¤çš„dataDirå’Œstoreageç›®å½•å¿…é¡»æœ‰code-pushè¿è¡Œç”¨æˆ·çš„æ“ä½œæƒé™ï¼Œå¦åˆ™ä¼šæœ‰ä»¥ä¸‹é”™è¯¯ã€‚ å¸¸ç”¨å‘½ä»¤12345// è´¦æˆ·ç›¸å…³code-push login ç™»é™†code-push loout æ³¨é”€code-push access-key ls åˆ—å‡ºç™»é™†çš„tokencode-push access-key rm &lt;accessKye&gt; åˆ é™¤æŸä¸ª access-key 123456// appæ“ä½œç›¸å…³code-push app add &lt;appName&gt; &lt;platform&gt; react-native åœ¨è´¦å·é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–°çš„appcode-push app remove æˆ–è€… rm åœ¨è´¦å·é‡Œç§»é™¤ä¸€ä¸ª appcode-push app rename é‡å‘½åä¸€ä¸ªå­˜åœ¨ appcode-push app list æˆ–åˆ™ ls åˆ—å‡ºè´¦å·ä¸‹é¢çš„æ‰€æœ‰ appcode-push app transfer æŠŠappçš„æ‰€æœ‰æƒè½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªè´¦å· 1234567// åº”ç”¨ä¿¡æ¯ç›¸å…³code-push deployment add &lt;appName&gt; éƒ¨ç½²code-push deployment rm &lt;appName&gt; åˆ é™¤éƒ¨ç½²code-push deployment rename &lt;appName&gt; é‡å‘½åcode-push deployment ls &lt;appName&gt; åˆ—å‡ºåº”ç”¨çš„éƒ¨ç½²æƒ…å†µcode-push deployment ls &lt;appName&gt; -k æŸ¥çœ‹éƒ¨ç½²çš„keycode-push deployment history &lt;appName&gt; &lt;deploymentName&gt; æŸ¥çœ‹åŽ†å²ç‰ˆæœ¬ 12345678// å‘å¸ƒcode-push release-react &lt;appName&gt; &lt;platform&gt; -t ç‰ˆæœ¬ -d çŽ¯å¢ƒ --des æè¿° -m true ï¼ˆå¼ºåˆ¶æ›´æ–°ï¼‰// æ¸…é™¤åŽ†å²éƒ¨ç½²è®°å½•code-push deployment clear &lt;appName&gt; Production or Staging// å›žæ»šcode-push rollback &lt;appName&gt; Production --targetRelease v4(codepushæœåŠ¡éƒ¨ç½²çš„ç‰ˆæœ¬å·) æ³¨æ„äº‹é¡¹ï¼š æ›´æ–°è§„åˆ™ 1&gt; CodePushéƒ¨ç½²ç‰ˆæœ¬ &gt; Appç‰ˆæœ¬ æ›´æ–°å¯ç”¨ï¼Œä½†å½“å‰ç‰ˆæœ¬æ¯”è¿è¡Œç‰ˆæœ¬é«˜ã€‚ä¸ä½œæ›´æ–° 2&gt; CodePushéƒ¨ç½²ç‰ˆæœ¬ &lt; Appç‰ˆæœ¬ ä¸æ‰§è¡Œæ›´æ–°å¤„ç† 3&gt; CodePushéƒ¨ç½²ç‰ˆæœ¬ == Appç‰ˆæœ¬ è‡ªåŠ¨ä¸‹è½½æ›´æ–°ï¼Œå¹¶æ ¹æ®åŠ è½½ç­–ç•¥åŠ è½½æœ€æ–°bundle å›žæ»š å½“éƒ¨ç½²çš„ç‰ˆæœ¬ä¸åŒæ—¶ï¼Œä¸èƒ½è·¨ç‰ˆæœ¬å›žæ»šã€‚ ä¾‹å¦‚ï¼šCodePushåŽ†å²ç‰ˆæœ¬ä¸­ä¸º2.10.1ï¼Œæ­¤æ—¶å‘å¸ƒ2.10.2ç‰ˆæœ¬ã€‚å½“ä»Ž2.10.2å‘èµ·å›žæ»šæ“ä½œå›žåˆ°2.10.1æ—¶ï¼Œæ˜¯ä¸å¯è¡Œçš„ã€‚ éƒ¨ç½²ä¿¡æ¯å‚æ•°åœ¨éƒ¨ç½²äº†ç‰ˆæœ¬ä¹‹åŽï¼Œæ‰§è¡Œ ã€code-push deployment ls uniApp-Androidã€‘å¯ä»¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ã€å½“å‰éƒ¨ç½²çŽ¯å¢ƒä¸‹çš„éƒ¨ç½²ä¿¡æ¯ï¼š Update Metadataï¼ˆæ›´æ–°ä¿¡æ¯ï¼‰ Labelï¼šæ ‡è¯†å½“å‰éƒ¨ç½²ç‰ˆæœ¬ï¼Œæ¯éƒ¨ç½²æ–°ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·å¢žåŠ 1 App Versionï¼šå½“å‰éƒ¨ç½²çš„Appç‰ˆæœ¬å· Mandatoryï¼šæ˜¯å¦å¼ºåˆ¶æ›´æ–° Release Timeï¼šéƒ¨ç½²æ—¶é—´ Released Byï¼šéƒ¨ç½²ç”¨æˆ· Descriptionï¼šéƒ¨ç½² æè¿°ä¿¡æ¯ ä»Žä¸Šé¢å†…å®¹ä¸éš¾å‘çŽ°ï¼Œè¿™äº›ä¿¡æ¯åŸºæœ¬éƒ½ä¼šåœ¨æˆ‘ä»¬æ‰§è¡Œ code-push release æ—¶é…ç½® Install Metricsï¼ˆå®‰è£…æŒ‡æ ‡ï¼‰ Activeï¼šæˆåŠŸå®‰è£…å¹¶è¿è¡Œå½“å‰releaseçš„ç”¨æˆ·çš„æ•°é‡ï¼Œå³è¡¨ç¤ºå½“å‰ä¸‹è½½æ›´æ–°éƒ¨ç½²çš„æ´»è·ƒç”¨æˆ·æ•°é‡ï¼Œof å·¦è¾¹æ•°ä¼šéšç€ç”¨æˆ·å®‰è£…ã€å¸è½½è€Œ å¢žåŠ ã€å‡å°‘ã€‚ofå³è¾¹æ•°ä»£è¡¨å½“å‰å®‰è£…æˆ–æ”¶ åˆ°éƒ¨ç½²ç‰ˆæœ¬çš„ç”¨æˆ·æ•°ï¼Œå½“æœ‰ç”¨æˆ·å¸è½½Appï¼Œè¯¥æ•°å€¼ä¼šé™ä½Žã€‚ å› æ­¤å®ƒå¾ˆå¥½çš„è§£é‡Šäº†å½“å‰æ›´æ–°åŒ…æœ‰å¤šå°‘æ´»è·ƒç”¨æˆ·ï¼Œå¤šå°‘ç”¨æˆ·æŽ¥æ”¶è¿‡è¿™ä¸ªå®‰è£…åŒ… Totalï¼šæˆåŠŸå®‰è£…éƒ¨ç½²å½“å‰releaseçš„ç”¨æˆ·é‡ï¼Œåªå¢žä¸å‡ Pendingï¼šå½“å‰releaseç‰ˆæœ¬è¢«ä¸‹è½½çš„æ•°é‡ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¢«å®‰è£…ï¼Œè¯¥å€¼ä¼šéšç€ç”¨æˆ·ä¸‹è½½å®‰è£…åŽå¢žåŠ ï¼Œ åœ¨å¸è½½æ—¶é™ä½Žã€‚ å‚è€ƒèµ„æ–™code-push-server æ­å»ºè‡ªå·±çš„æŽ¨é€æœåŠ¡å™¨æµç¨‹çƒ­æ›´æ–°ï¼ˆandroidï¼‰windowsç³»ç»Ÿcode-push-server çš„ä½¿ç”¨ReactNativeé›†æˆCodePushæ•™ç¨‹ é›†æˆCode Pushçš„æ¡ˆä¾‹è¯´æ˜Žreact-nativeçƒ­æ›´æ–°å…¨æ–¹ä½è®²è§£é›¶å®¢æˆ·ç«¯å¼€å‘ç»éªŒ React Native çƒ­æ›´æ–° CodePush æ‰“åŒ…é›†æˆæŒ‡åŒ—react native codepushçƒ­æ›´æ–°è§£å†³æˆåŠŸæ›´æ–°Android Studio æƒå¨æ•™ç¨‹ æ‰“åŒ…ã€ç”Ÿæˆjkså¯†é’¥ã€ç­¾åApkã€å¤šæ¸ é“æ‰“åŒ…http://www.tl628.com/index.php/2018/05/31/code-push_fa_bu_de_shi_hou_chu_xian_error_upload_error/]]></content>
      <categories>
        <category>å¤§å‰ç«¯</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>codepush</tag>
        <tag>react-native</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­¦ä¹ ä¹¦å•]]></title>
    <url>%2F2018%2F06%2F10%2F%E5%AD%A6%E4%B9%A0%E4%B9%A6%E5%8D%95%2F</url>
    <content type="text"><![CDATA[å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±ã€‚ç®€ä¹¦åœ°å€ ä½ æƒ³è¦çš„å¹²è´§ï¼Œéƒ½åœ¨è¿™é‡Œå“Ÿï¼ æ‘˜è‡ª:githubä¸Šç”±justjavacæ•´ç†çš„free-programming-books-zh_CN(å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±)è§‰å¾—ä¸é”™çš„å¯ä»¥åŽ»starå’Œforkä¸€ä¸‹å“Ÿ! å†™åœ¨æœ€å‰é¢çš„è¯é¦–å…ˆå£°æ˜Ž,æœ¬ç¯‡åšæ–‡å¹¶éžæœ¬äººåŽŸåˆ›,è€Œæ˜¯æ‘˜è‡ªgithubä¸Šå¤§ç¥žjustjavacå‘èµ·å¹¶æ•´ç†çš„free-programming-books-zh_CN(å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±)å¼€æºé¡¹ç›®,æ—¨åœ¨å¸®åŠ©ä¸ç»å¸¸é€›githubçš„ç«¥éž‹å‘æŽ˜ä¼˜è´¨çš„å­¦ä¹ å¹²è´§,èŠ‚çœå­¦ä¹ æ—¶é—´æˆæœ¬.æœ€åŽå†æ¬¡æ„Ÿè°¢justjavacçš„æ•´ç†ä¸Žåˆ†äº«. ç›®å½• è¯­è¨€æ— å…³ç±» æ“ä½œç³»ç»Ÿ æ™ºèƒ½ç³»ç»Ÿ åˆ†å¸ƒå¼ç³»ç»Ÿ ç¼–è¯‘åŽŸç† å‡½æ•°å¼æ¦‚å¿µ è®¡ç®—æœºå›¾å½¢å­¦ WEBæœåŠ¡å™¨ ç‰ˆæœ¬æŽ§åˆ¶ ç¼–è¾‘å™¨ NoSQL PostgreSQL MySQL ç®¡ç†å’Œç›‘æŽ§ é¡¹ç›®ç›¸å…³ è®¾è®¡æ¨¡å¼ Web å¤§æ•°æ® ç¼–ç¨‹è‰ºæœ¯ å…¶å®ƒ è¯­è¨€ç›¸å…³ç±» Android APP AWK C/C++ C# Clojure CSS/HTML Dart Elixir Erlang Fortran Go Groovy Haskell iOS Java JavaScript LaTeX LISP Lua OCaml Perl PHP Prolog Python R Ruby Rust Scala Shell Swift è¯»ä¹¦ç¬”è®°åŠå…¶å®ƒ æµ‹è¯•ç›¸å…³ ç½®é¡¶ [ç¬”è®°]å‰ç«¯å·¥ç¨‹å¸ˆçš„å…¥é—¨ä¸Žè¿›é˜¶ [å…¨æ–‡]å¦‚ä½•æ­£ç¡®çš„å­¦ä¹  Node.js è¯­è¨€æ— å…³ç±» æ“ä½œç³»ç»Ÿ å¼€æºä¸–ç•Œæ—…è¡Œæ‰‹å†Œ é¸Ÿå“¥çš„Linuxç§æˆ¿èœ The Linux Command Line (ä¸­è‹±æ–‡ç‰ˆ) Linux è®¾å¤‡é©±åŠ¨ (ç¬¬ä¸‰ç‰ˆ) æ·±å…¥åˆ†æžLinuxå†…æ ¸æºç  UNIX TOOLBOX Dockerä¸­æ–‡æŒ‡å— Docker â€”â€” ä»Žå…¥é—¨åˆ°å®žè·µ Dockerå…¥é—¨å®žæˆ˜ Docker Cheat Sheet FreeRADIUSæ–°æ‰‹å…¥é—¨ Mac å¼€å‘é…ç½®æ‰‹å†Œ FreeBSD ä½¿ç”¨æ‰‹å†Œ Linux å‘½ä»¤è¡Œ(ä¸­æ–‡ç‰ˆ) Linux æž„å»ºæŒ‡å— Linuxå·¥å…·å¿«é€Ÿæ•™ç¨‹ Linux Documentation (ä¸­æ–‡ç‰ˆ) åµŒå…¥å¼ Linux çŸ¥è¯†åº“ (eLinux.org ä¸­æ–‡ç‰ˆ) ç†è§£Linuxè¿›ç¨‹ å‘½ä»¤è¡Œçš„è‰ºæœ¯ SystemTapæ–°æ‰‹æŒ‡å— æ“ä½œç³»ç»Ÿæ€è€ƒ æ™ºèƒ½ç³»ç»Ÿ ä¸€æ­¥æ­¥æ­å»ºç‰©è”ç½‘ç³»ç»Ÿ åˆ†å¸ƒå¼ç³»ç»Ÿ èµ°å‘åˆ†å¸ƒå¼ ç¼–è¯‘åŽŸç† ã€Šè®¡ç®—æœºç¨‹åºçš„ç»“æž„å’Œè§£é‡Šã€‹å…¬å¼€è¯¾ ç¿»è¯‘é¡¹ç›® å‡½æ•°å¼æ¦‚å¿µ å‚»ç“œå‡½æ•°ç¼–ç¨‹ è®¡ç®—æœºå›¾å½¢å­¦ OpenGL æ•™ç¨‹ WebGLè‡ªå­¦ç½‘ WEBæœåŠ¡å™¨ Nginxå¼€å‘ä»Žå…¥é—¨åˆ°ç²¾é€š (æ·˜å®å›¢é˜Ÿå‡ºå“) Nginxæ•™ç¨‹ä»Žå…¥é—¨åˆ°ç²¾é€š(PDFç‰ˆæœ¬ï¼Œè¿ç»´ç”Ÿå­˜æ—¶é—´å‡ºå“) OpenRestyæœ€ä½³å®žè·µ Apache ä¸­æ–‡æ‰‹å†Œ ç‰ˆæœ¬æŽ§åˆ¶ Gitæ•™ç¨‹ ï¼ˆæœ¬æ–‡ç”± å»–é›ªå³° åˆ›ä½œï¼Œå¦‚æžœè§‰å¾—æœ¬æ•™ç¨‹å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥åŽ» iTunes è´­ä¹°ï¼‰ git - ç®€æ˜“æŒ‡å— çŒ´å­éƒ½èƒ½æ‡‚çš„GITå…¥é—¨ Git å‚è€ƒæ‰‹å†Œ Pro Git Pro Git ä¸­æ–‡ç‰ˆ (æ•´ç†åœ¨gitbookä¸Š) Git Magic GotGitHub Gitæƒå¨æŒ‡å— Git Community Book ä¸­æ–‡ç‰ˆ Mercurial ä½¿ç”¨æ•™ç¨‹ HgInit (ä¸­æ–‡ç‰ˆ) æ²‰æµ¸å¼å­¦ Git Git-Cheat-Sheet ï¼ˆæ„Ÿè°¢ @flyhigher139 ç¿»è¯‘äº†ä¸­æ–‡ç‰ˆï¼‰ GitHubç§˜ç± GitHubå¸®åŠ©æ–‡æ¡£ git-flow å¤‡å¿˜æ¸…å• svn æ‰‹å†Œ GitHubæ¼«æ¸¸æŒ‡å— ç¼–è¾‘å™¨ exvimâ€“vim æ”¹è‰¯æˆIDEé¡¹ç›® ç¬¨æ–¹æ³•å­¦Vimscript ä¸­è¯‘æœ¬ Vimä¸­æ–‡æ–‡æ¡£ æ‰€éœ€å³æ‰€èŽ·ï¼šåƒ IDE ä¸€æ ·ä½¿ç”¨ vim vim å®žæ“æ•™ç¨‹ Atomé£žè¡Œæ‰‹å†Œä¸­æ–‡ç‰ˆ MarkdownÂ·ç®€å•çš„ä¸–ç•Œ ä¸€å¹´æˆä¸º Emacs é«˜æ‰‹ Emacs ç”Ÿå­˜æŒ‡å— Atomå®˜æ–¹æ‰‹å†Œ NoSQL NoSQLæ•°æ®åº“ç¬”è°ˆ Redis è®¾è®¡ä¸Žå®žçŽ° Redis å‘½ä»¤å‚è€ƒ å¸¦æœ‰è¯¦ç»†æ³¨é‡Šçš„ Redis 3.0 ä»£ç  å¸¦æœ‰è¯¦ç»†æ³¨é‡Šçš„ Redis 2.6 ä»£ç  The Little MongoDB Book The Little Redis Book Neo4j ç®€ä½“ä¸­æ–‡æ‰‹å†Œ v1.8 Neo4j .rb ä¸­æ–‡è³‡æº Disque ä½¿ç”¨æ•™ç¨‹ Apache Spark è®¾è®¡ä¸Žå®žçŽ° PostgreSQL PostgreSQL 8.2.3 ä¸­æ–‡æ–‡æ¡£ PostgreSQL 9.3.1 ä¸­æ–‡æ–‡æ¡£ PostgreSQL 9.5.3 ä¸­æ–‡æ–‡æ¡£ MySQL MySQLç´¢å¼•èƒŒåŽçš„æ•°æ®ç»“æž„åŠç®—æ³•åŽŸç† 21åˆ†é’ŸMySQLå…¥é—¨æ•™ç¨‹ ç®¡ç†å’Œç›‘æŽ§ ELKstack ä¸­æ–‡æŒ‡å— Mastering Elasticsearch(ä¸­æ–‡ç‰ˆ) ElasticSearch æƒå¨æŒ‡å— Elasticsearch æƒå¨æŒ‡å—ï¼ˆä¸­æ–‡ç‰ˆï¼‰ Logstash æœ€ä½³å®žè·µ Puppet 2.7 Cookbook ä¸­æ–‡ç‰ˆ é¡¹ç›®ç›¸å…³ æŒç»­é›†æˆï¼ˆç¬¬äºŒç‰ˆï¼‰ (è¯‘è¨€ç½‘) è®©å¼€å‘è‡ªåŠ¨åŒ–ç³»åˆ—ä¸“æ  è¿½æ±‚ä»£ç è´¨é‡ selenium ä¸­æ–‡æ–‡æ¡£ Selenium Webdriver ç®€æ˜“æ•™ç¨‹ Joelè°ˆè½¯ä»¶) ç´„è€³è«‡è»Ÿé«”(Joel on Software) Gradle 2 ç”¨æˆ·æŒ‡å— Gradle ä¸­æ–‡ä½¿ç”¨æ–‡æ¡£ ç¼–ç è§„èŒƒ å¼€æºè½¯ä»¶æž¶æž„ GNU make æŒ‡å— GNU make ä¸­æ–‡æ‰‹å†Œ The Twelve-Factor App è®¾è®¡æ¨¡å¼ å›¾è¯´è®¾è®¡æ¨¡å¼ å²ä¸Šæœ€å…¨è®¾è®¡æ¨¡å¼å¯¼å­¦ç›®å½• design pattern åŒ…æ•™ä¸åŒ…ä¼š è®¾è®¡æ¨¡å¼ Java ç‰ˆ Web å…³äºŽæµè§ˆå™¨å’Œç½‘ç»œçš„ 20 é¡¹é¡»çŸ¥ æµè§ˆå™¨å¼€å‘å·¥å…·çš„ç§˜å¯† Chrome å¼€å‘è€…å·¥å…·ä¸­æ–‡æ‰‹å†Œ Chromeæ‰©å±•å¼€å‘æ–‡æ¡£ Gruntä¸­æ–‡æ–‡æ¡£ gulpä¸­æ–‡æ–‡æ¡£ Gulp å…¥é—¨æŒ‡å— ç§»åŠ¨Webå‰ç«¯çŸ¥è¯†åº“ æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ å‰ç«¯å¼€å‘ä½“ç³»å»ºè®¾æ—¥è®° ç§»åŠ¨å‰ç«¯å¼€å‘æ”¶è—å¤¹ JSONé£Žæ ¼æŒ‡å— HTTP æŽ¥å£è®¾è®¡æŒ‡åŒ— å‰ç«¯èµ„æºåˆ†äº«ï¼ˆä¸€ï¼‰ å‰ç«¯èµ„æºåˆ†äº«ï¼ˆäºŒï¼‰ å‰ç«¯ä»£ç è§„èŒƒ åŠ æœ€ä½³å®žè·µ å‰ç«¯å¼€å‘è€…æ‰‹å†Œ å‰ç«¯å·¥ç¨‹å¸ˆæ‰‹å†Œ w3schoolæ•™ç¨‹æ•´ç† Wiresharkç”¨æˆ·æ‰‹å†Œ ä¸€ç«™å¼å­¦ä¹ Wireshark HTTP ä¸‹åˆèŒ¶ HTTP/2.0 ä¸­æ–‡ç¿»è¯‘ RFC 7540 - HTTP/2 ä¸­æ–‡ç¿»è¯‘ç‰ˆ http2è®²è§£ 3 Web Designs in 3 Weeks ç«™ç‚¹å¯é æ€§å·¥ç¨‹ å¤§æ•°æ® å¤§æ•°æ®/æ•°æ®æŒ–æŽ˜/æŽ¨èç³»ç»Ÿ/æœºå™¨å­¦ä¹ ç›¸å…³èµ„æº é¢å‘ç¨‹åºå‘˜çš„æ•°æ®æŒ–æŽ˜æŒ‡å— å¤§åž‹é›†ç¾¤ä¸Šçš„å¿«é€Ÿå’Œé€šç”¨æ•°æ®å¤„ç†æž¶æž„ æ•°æ®æŒ–æŽ˜ä¸­ç»å…¸çš„ç®—æ³•å®žçŽ°å’Œè¯¦ç»†çš„æ³¨é‡Š Spark ç¼–ç¨‹æŒ‡å—ç®€ä½“ä¸­æ–‡ç‰ˆ ç¼–ç¨‹è‰ºæœ¯ ç¨‹åºå‘˜ç¼–ç¨‹è‰ºæœ¯ æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥äº†è§£çš„å†…å­˜çŸ¥è¯†(è¯‘)ã€ç¬¬ä¸€éƒ¨åˆ†ã€‘ å–æ‚¦çš„å·¥åºï¼šå¦‚ä½•ç†è§£æ¸¸æˆ (è±†ç“£é˜…è¯»ï¼Œå…è´¹ä¹¦ç±) å…¶å®ƒ OpenWrtæ™ºèƒ½ã€è‡ªåŠ¨ã€é€æ˜Žç¿»å¢™è·¯ç”±å™¨æ•™ç¨‹ SAN ç®¡ç†å…¥é—¨ç³»åˆ— Sketch ä¸­æ–‡æ‰‹å†Œ æ·±å…¥ç†è§£å¹¶è¡Œç¼–ç¨‹ ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…» Growth: å…¨æ ˆå¢žé•¿å·¥ç¨‹å¸ˆæŒ‡å— è¯­è¨€ç›¸å…³ç±»Android Android Design(ä¸­æ–‡ç‰ˆ) Google Material Design æ­£é«”ä¸­æ–‡ç‰ˆ (è¯‘æœ¬ä¸€ è¯‘æœ¬äºŒ) Material Design ä¸­æ–‡ç‰ˆ Google Androidå®˜æ–¹åŸ¹è®­è¯¾ç¨‹ä¸­æ–‡ç‰ˆ Androidå­¦ä¹ ä¹‹è·¯ Androidå¼€å‘æŠ€æœ¯å‰çº¿(android-tech-frontier) Point-of-Android Android ä¸€äº›é‡è¦çŸ¥è¯†ç‚¹è§£æžæ•´ç† Android6.0æ–°ç‰¹æ€§è¯¦è§£ APP Apache Cordova å¼€å‘æŒ‡å— AWK awkç¨‹åºè®¾è®¡è¯­è¨€ awkä¸­æ–‡æŒ‡å— C/C++ C/C++ ä¸­æ–‡å‚è€ƒæ‰‹å†Œ (æ¬¢è¿Žå¤§å®¶å‚ä¸Žåœ¨çº¿ç¿»è¯‘å’Œæ ¡å¯¹) C è¯­è¨€ç¼–ç¨‹é€è§† C++ å¹¶å‘ç¼–ç¨‹æŒ‡å— Linux Cç¼–ç¨‹ä¸€ç«™å¼å­¦ä¹  (å®‹åŠ²æ‰, åŒ—äº¬äºšåµŒæ•™è‚²ç ”ç©¶ä¸­å¿ƒ) CGDBä¸­æ–‡æ‰‹å†Œ 100ä¸ªgdbå°æŠ€å·§ 100ä¸ªgccå°æŠ€å·§ ZMQ æŒ‡å— How to Think Like a Computer Scientist (ä¸­è‹±æ–‡ç‰ˆ) è·Ÿæˆ‘ä¸€èµ·å†™Makefile(PDF) GNU makeä¸­æ–‡æ‰‹å†Œ GNU make æŒ‡å— Google C++ é£Žæ ¼æŒ‡å— C/C++ Primer (by @andycai) ç®€å•æ˜“æ‡‚çš„Cé­”æ³• Cmake å®žè·µ (PDFç‰ˆ) C++ FAQ LITE(ä¸­æ–‡ç‰ˆ) C++ Primer 5th Answers C++ å¹¶å‘ç¼–ç¨‹(åŸºäºŽC++11) QT æ•™ç¨‹ DevBeançš„ã€ŠQtå­¦ä¹ ä¹‹è·¯2ã€‹(Qt5) C++ Template è¿›é˜¶æŒ‡å— libuvä¸­æ–‡æ•™ç¨‹ Boost åº“ä¸­æ–‡æ•™ç¨‹ ç¬¨åŠžæ³•å­¦C C MSDN C# ä¸­æ–‡æ–‡æ¡£ .NET ç±»åº“å‚è€ƒ ASP.NET MVC 5 å…¥é—¨æŒ‡å— è¶…å…¨é¢çš„ .NET GDI+ å›¾å½¢å›¾åƒç¼–ç¨‹æ•™ç¨‹ .NETæŽ§ä»¶å¼€å‘åŸºç¡€ .NETå¼€å‘è¦ç‚¹ç²¾è®²ï¼ˆåˆç¨¿ï¼‰ Clojure Clojureå…¥é—¨æ•™ç¨‹ CSS/HTML å­¦ä¹ CSSå¸ƒå±€ é€šç”¨ CSS ç¬”è®°ã€å»ºè®®ä¸ŽæŒ‡å¯¼ CSSå‚è€ƒæ‰‹å†Œ Emmet æ–‡æ¡£ å‰ç«¯ä»£ç è§„èŒƒ (è…¾è®¯ AlloyTeam å›¢é˜Ÿ) HTMLå’ŒCSSç¼–ç è§„èŒƒ Sass Guidelines ä¸­æ–‡ CSS3 Tutorial ã€ŠCSS3 æ•™ç¨‹ã€‹ MDN HTML ä¸­æ–‡æ–‡æ¡£ MDN CSS ä¸­æ–‡æ–‡æ¡£ Dart Dart è¯­è¨€å¯¼è§ˆ Elixir Elixirç¼–ç¨‹å…¥é—¨ Erlang 21å¤©å­¦é€šErlang Fortran Fortran77å’Œ90/95ç¼–ç¨‹å…¥é—¨ Go Goç¼–ç¨‹åŸºç¡€ Goå…¥é—¨æŒ‡å— å­¦ä¹ Goè¯­è¨€ Go Web ç¼–ç¨‹ (æ­¤ä¹¦å·²ç»å‡ºç‰ˆï¼Œå¸Œæœ›å¼€å‘è€…ä»¬åŽ»è´­ä¹°ï¼Œæ”¯æŒä½œè€…çš„åˆ›ä½œ) Goå®žæˆ˜å¼€å‘ (å½“æˆ‘æ”¶å½•æ­¤é¡¹ç›®æ—¶ï¼Œä½œè€…å·²ç»å†™å®Œç¬¬ä¸‰ç« ï¼Œå¦‚æžœè¯»å®Œå‰é¢ç« èŠ‚è§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç»™ä½œè€…æèµ ï¼Œä»¥é¼“åŠ±ä½œè€…çš„ç»§ç»­åˆ›ä½œ) Network programming with Go ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬ Effective Go Go è¯­è¨€æ ‡å‡†åº“ Golangæ ‡å‡†åº“æ–‡æ¡£ Revel æ¡†æž¶æ‰‹å†Œ Javaç¨‹åºå‘˜çš„Golangå…¥é—¨æŒ‡å— Goå‘½ä»¤æ•™ç¨‹ Goè¯­è¨€åšå®¢å®žè·µ Go å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ æ·±å…¥è§£æžGo Goè¯­è¨€åœ£ç»(ä¸­æ–‡ç‰ˆ) (GitBook) Groovy å®žæˆ˜ Groovy ç³»åˆ— Haskell Real World Haskell ä¸­æ–‡ç‰ˆ Haskellè¶£å­¦æŒ‡å— iOS iOSå¼€å‘60åˆ†é’Ÿå…¥é—¨ iOS7äººæœºç•Œé¢æŒ‡å— Google Objective-C Style Guide ä¸­æ–‡ç‰ˆ iPhone 6 å±å¹•æ­ç§˜ Apple Watchå¼€å‘åˆæŽ¢ é©¬ä¸Šç€æ‰‹å¼€å‘ iOS åº”ç”¨ç¨‹åº ç½‘æ˜“æ–¯å¦ç¦å¤§å­¦å…¬å¼€è¯¾ï¼šiOS 7åº”ç”¨å¼€å‘å­—å¹•æ–‡ä»¶ Java Apache Shiro ç”¨æˆ·æŒ‡å— Jersey 2.x ç”¨æˆ·æŒ‡å— Spring Framework 4.xå‚è€ƒæ–‡æ¡£ Spring Bootå‚è€ƒæŒ‡å— (ç¿»è¯‘ä¸­) MyBatisä¸­æ–‡æ–‡æ¡£ MyBatis Generator ä¸­æ–‡æ–‡æ¡£ ç”¨jerseyæž„å»ºRESTæœåŠ¡ Activiti 5.x ç”¨æˆ·æŒ‡å— Google Javaç¼–ç¨‹é£Žæ ¼æŒ‡å— Netty 4.x ç”¨æˆ·æŒ‡å— Netty å®žæˆ˜(ç²¾é«“) REST å®žæˆ˜ Java ç¼–ç è§„èŒƒ Apache MINA 2 ç”¨æˆ·æŒ‡å— H2 Database æ•™ç¨‹ Java Servlet 3.1 è§„èŒƒ JSSE å‚è€ƒæŒ‡å— Javaå¼€æºå®žçŽ°åŠæœ€ä½³å®žè·µ Java ç¼–ç¨‹è¦ç‚¹ Think Java Java 8 ç®€æ˜Žæ•™ç¨‹ JavaScript Google JavaScript ä»£ç é£Žæ ¼æŒ‡å— Google JSON é£Žæ ¼æŒ‡å— Airbnb JavaScript è§„èŒƒ JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹ï¼ˆalphaï¼‰ Javascriptç¼–ç¨‹æŒ‡å— (æºç ) javascript çš„ 12 ä¸ªæ€ªç™– JavaScript ç§˜å¯†èŠ±å›­ JavaScriptæ ¸å¿ƒæ¦‚å¿µåŠå®žè·µ (PDF) (æ­¤ä¹¦å·²ç”±äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾å‡ºç‰ˆå‘è¡Œï¼Œä½†ä½œè€…ä¾ç„¶å…è´¹æä¾›PDFç‰ˆæœ¬ï¼Œå¸Œæœ›å¼€å‘è€…ä»¬åŽ»è´­ä¹°ï¼Œæ”¯æŒä½œè€…) ã€ŠJavaScript æ¨¡å¼ã€‹ â€œJavaScript patternsâ€ä¸­è¯‘æœ¬ å‘½åå‡½æ•°è¡¨è¾¾å¼æŽ¢ç§˜ (æ³¨:åŽŸæ–‡ç”±ä¸ºä¹‹æ¼«ç¬”ç¿»è¯‘ï¼ŒåŽŸå§‹åœ°å€æ— æ³•æ‰“å¼€ï¼Œæ‰€ä»¥æ­¤å¤„åœ°å€ä¸ºæˆ‘åšå®¢ä¸Šçš„å¤‡ä»½) å­¦ç”¨ JavaScript è®¾è®¡æ¨¡å¼ (å¼€æºä¸­å›½) æ·±å…¥ç†è§£JavaScriptç³»åˆ— ECMAScript 5.1 ä¸­æ–‡ç‰ˆ ECMAScript 6 å…¥é—¨ (ä½œè€…ï¼šé˜®ä¸€å³°) JavaScript Promiseè¿·ä½ ä¹¦ You-Dont-Know-JS (æ·±å…¥JavaScriptè¯­è¨€æ ¸å¿ƒæœºåˆ¶çš„ç³»åˆ—å›¾ä¹¦) JavaScript æ•™ç¨‹ å»–é›ªå³° MDN JavaScript ä¸­æ–‡æ–‡æ¡£ jQuery jQuery è§£æž„ ç®€å•æ˜“æ‡‚çš„JQueryé­”æ³• How to write jQuery plugin You Donâ€™t Need jQuery å¦‚ä½•å®žçŽ°ä¸€ä¸ªç±»jQueryï¼Ÿ Node.js Nodeå…¥é—¨ ä¸ƒå¤©å­¦ä¼šNodeJS Nodejs Wiki Book (ç¹ä½“ä¸­æ–‡) express.js ä¸­æ–‡æ–‡æ¡£ koa ä¸­æ–‡æ–‡æ¡£ ä¸€èµ·å­¦koa ä½¿ç”¨ Express + MongoDB æ­å»ºå¤šäººåšå®¢ Expressæ¡†æž¶ Node.js åŒ…æ•™ä¸åŒ…ä¼š Learn You The Node.js For Much Win! (ä¸­æ–‡ç‰ˆ) Node debug ä¸‰æ³•ä¸‰ä¾‹ nodejsä¸­æ–‡æ–‡æ¡£ orm2 ä¸­æ–‡æ–‡æ¡£ underscore.js Underscore.jsä¸­æ–‡æ–‡æ¡£ backbone.js backbone.jsä¸­æ–‡æ–‡æ¡£ backbone.jså…¥é—¨æ•™ç¨‹ (PDF) Backbone.jså…¥é—¨æ•™ç¨‹ç¬¬äºŒç‰ˆ Developing Backbone.js Applications(ä¸­æ–‡ç‰ˆ) AngularJS AngularJSæœ€ä½³å®žè·µå’Œé£Žæ ¼æŒ‡å— AngularJSä¸­è¯‘æœ¬ AngularJSå…¥é—¨æ•™ç¨‹ æž„å»ºè‡ªå·±çš„AngularJS åœ¨WindowsçŽ¯å¢ƒä¸‹ç”¨Yeomanæž„å»ºAngularJSé¡¹ç›® Zepto.js Zepto.js ä¸­æ–‡æ–‡æ¡£ Sea.js Hello Sea.js React.js React.js ä¸­æ–‡æ–‡æ¡£ React webpack-cookbook React å…¥é—¨æ•™ç¨‹ React Native ä¸­æ–‡æ–‡æ¡£(å«æœ€æ–°Androidå†…å®¹) Learn React &amp; Webpack by building the Hacker News front page impress.js impress.jsçš„ä¸­æ–‡æ•™ç¨‹ CoffeeScript CoffeeScript Cookbook The Little Book on CoffeeScriptä¸­æ–‡ç‰ˆ CoffeeScript ç¼–ç é£Žæ ¼æŒ‡å— TypeScipt TypeScript Handbook ExtJS Ext4.1.0 ä¸­æ–‡æ–‡æ¡£ Meteor Discover Meteor Meteor ä¸­æ–‡æ–‡æ¡£ Angular-Meteor ä¸­æ–‡æ•™ç¨‹ Chromeæ‰©å±•åŠåº”ç”¨å¼€å‘ LaTeX ä¸€ä»½å…¶å®žå¾ˆçŸ­çš„ LaTeX å…¥é—¨æ–‡æ¡£ ä¸€ä»½ä¸å¤ªç®€çŸ­çš„ LATEX 2Îµ ä»‹ç» ï¼ˆPDFç‰ˆï¼‰ LISP Common Lisp ANSI Common Lisp ä¸­æ–‡ç¿»è­¯ç‰ˆ On Lisp ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬ Scheme Yet Another Scheme Tutorial Schemeå…¥é—¨æ•™ç¨‹ Schemeè¯­è¨€ç®€æ˜Žæ•™ç¨‹ Racket Racket book Lua Luaç¼–ç¨‹å…¥é—¨ Lua 5.1 å‚è€ƒæ‰‹å†Œ ä¸­æ–‡ç¿»è¯‘ Lua 5.3 å‚è€ƒæ‰‹å†Œ ä¸­æ–‡ç¿»è¯‘ Luaæºç æ¬£èµ OCaml Real World OCaml Perl Modern Perl ä¸­æ–‡ç‰ˆ Perl ç¨‹åºå‘˜åº”è¯¥çŸ¥é“çš„äº‹ PHP PHP å®˜æ–¹æ‰‹å†Œ PHPè°ƒè¯•æŠ€æœ¯æ‰‹å†Œ(PDF) PHPä¹‹é“ï¼šphp-the-right-way (@wulijunç‰ˆ PHPHubç‰ˆ) PHP æœ€ä½³å®žè·µ PHP å¼€å‘è€…å®žè·µ æ·±å…¥ç†è§£PHPå†…æ ¸ PHPæ‰©å±•å¼€å‘åŠå†…æ ¸åº”ç”¨ Laravel5.1 ä¸­æ–‡æ–‡æ¡£ Laravel 5.1 LTS é€ŸæŸ¥è¡¨ Symfony2 Cookbook ä¸­æ–‡ç‰ˆ(ç‰ˆæœ¬ 2.7.0 LTS) Symfony2ä¸­æ–‡æ–‡æ¡£ (æœªè¯‘å®Œ) YiiBookå‡ æœ¬Yiiæ¡†æž¶çš„åœ¨çº¿æ•™ç¨‹ æ·±å…¥ç†è§£ Yii 2.0 Yii æ¡†æž¶ä¸­æ–‡æ–‡æª” ç®€å•æ˜“æ‡‚çš„PHPé­”æ³• swooleæ–‡æ¡£åŠå…¥é—¨æ•™ç¨‹ Composer ä¸­æ–‡ç½‘ Slim ä¸­æ–‡æ–‡æ¡£ Lumen ä¸­æ–‡æ–‡æ¡£ PHPUnit ä¸­æ–‡æ–‡æ¡£ Prolog ç¬¨åŠžæ³•å­¦Prolog Python å»–é›ªå³° Python 2.7 ä¸­æ–‡æ•™ç¨‹ å»–é›ªå³° Python 3 ä¸­æ–‡æ•™ç¨‹ ç®€æ˜ŽPythonæ•™ç¨‹ é›¶åŸºç¡€å­¦ Python ç¬¬ä¸€ç‰ˆ é›¶åŸºç¡€å­¦ Python ç¬¬äºŒç‰ˆ å¯çˆ±çš„ Python Python 2.7 å®˜æ–¹æ•™ç¨‹ä¸­æ–‡ç‰ˆ Python 3.3 å®˜æ–¹æ•™ç¨‹ä¸­æ–‡ç‰ˆ Python Cookbook ä¸­æ–‡ç‰ˆ Python3 Cookbook ä¸­æ–‡ç‰ˆ æ·±å…¥ Python æ·±å…¥ Python 3 PEP8 Pythonä»£ç é£Žæ ¼è§„èŒƒ Google Python é£Žæ ¼æŒ‡å— ä¸­æ–‡ç‰ˆ Pythonå…¥é—¨æ•™ç¨‹ (PDF) ç¬¨åŠžæ³•å­¦ Python (PDF EPUB) Pythonè‡ªç„¶è¯­è¨€å¤„ç†ä¸­æ–‡ç‰ˆ ï¼ˆæ„Ÿè°¢é™ˆæ¶›åŒå­¦çš„ç¿»è¯‘ï¼Œä¹Ÿè°¢è°¢ @shwley è”ç³»äº†ä½œè€…ï¼‰ Python ç»˜å›¾åº“ matplotlib å®˜æ–¹æŒ‡å—ä¸­æ–‡ç¿»è¯‘ Scrapy 0.25 æ–‡æ¡£ ThinkPython ThinkPython 2ed Pythonå¿«é€Ÿæ•™ç¨‹ Python æ­£åˆ™è¡¨è¾¾å¼æ“ä½œæŒ‡å— pythonåˆçº§æ•™ç¨‹ï¼šå…¥é—¨è¯¦è§£ Twisted ä¸Žå¼‚æ­¥ç¼–ç¨‹å…¥é—¨ TextGrocery ä¸­æ–‡ API ( åŸºäºŽsvmç®—æ³•çš„ä¸€ä¸ªçŸ­æ–‡æœ¬åˆ†ç±» Python åº“ ) Requests: HTTP for Humans Pillow ä¸­æ–‡æ–‡æ¡£ PyMOTW ä¸­æ–‡ç‰ˆ Python å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ Fabric ä¸­æ–‡æ–‡æ¡£ Beautiful Soup 4.2.0 ä¸­æ–‡æ–‡æ¡£ ç”¨Pythonåšç§‘å­¦è®¡ç®— Sphinx ä¸­æ–‡æ–‡æ¡£ ç²¾é€š Python è®¾è®¡æ¨¡å¼ python å®‰å…¨ç¼–ç¨‹æ•™ç¨‹ ç¨‹åºè®¾è®¡æ€æƒ³ä¸Žæ–¹æ³• çŸ¥ä¹Žå‘¨åˆŠÂ·ç¼–ç¨‹å°ç™½å­¦Python Scipy è®²ä¹‰ Python å­¦ä¹ ç¬”è®° åŸºç¡€ç¯‡ Python å­¦ä¹ ç¬”è®° æ¨¡å—ç¯‡ Python æ ‡å‡†åº“ ä¸­æ–‡ç‰ˆ Pythonè¿›é˜¶ Python æ ¸å¿ƒç¼–ç¨‹ ç¬¬äºŒç‰ˆ CPyUGè¯‘ Pythonæœ€ä½³å®žè·µæŒ‡å— Python ç²¾è¦æ•™ç¨‹ Python é‡åŒ–äº¤æ˜“æ•™ç¨‹ Django Django 1.5 æ–‡æ¡£ä¸­æ–‡ç‰ˆ æ­£åœ¨ç¿»è¯‘ä¸­ Diango 1.7 æ–‡æ¡£ä¸­æ–‡ç‰ˆ æ­£åœ¨ç¿»è¯‘ä¸­ï¼Œç›®å‰åªç¿»è¯‘äº†ç›®å½• Django 1.8.2 æ–‡æ¡£ä¸­æ–‡ç‰ˆ æ­£åœ¨ç¿»è¯‘ä¸­ Django æœ€ä½³å®žè·µ Djangoæ­å»ºç®€æ˜“åšå®¢æ•™ç¨‹ The Django Book ä¸­æ–‡ç‰ˆ Django è®¾è®¡æ¨¡å¼ä¸Žæœ€ä½³å®žè·µ Django ç½‘ç«™å¼€å‘ Cookbook Django Girls å­¸ç¿’æŒ‡å— Flask Flask æ–‡æ¡£ä¸­æ–‡ç‰ˆ Jinja2 æ–‡æ¡£ä¸­æ–‡ç‰ˆ Werkzeug æ–‡æ¡£ä¸­æ–‡ç‰ˆ Flaskä¹‹æ—… Flask æ‰©å±•æ–‡æ¡£æ±‡æ€» Flask å¤§åž‹æ•™ç¨‹ SQLAlchemy ä¸­æ–‡æ–‡æ¡£ web.py web.py 0.3 æ–°æ‰‹æŒ‡å— Web.py Cookbook ç®€ä½“ä¸­æ–‡ç‰ˆ Tornado Introduction to Tornado ä¸­æ–‡ç¿»è¯‘ Tornadoæºç è§£æž Tornado 4.3 æ–‡æ¡£ä¸­æ–‡ç‰ˆ R Rè¯­è¨€å¿è€…ç§˜ç¬ˆ Ruby Ruby é£Žæ ¼æŒ‡å— Rails é£Žæ ¼æŒ‡å— ç¬¨æ–¹æ³•å­¸ Ruby Ruby on Rails æŒ‡å— Ruby on Rails å¯¦æˆ°è–ç¶“ Ruby on Rails Tutorial åŽŸä¹¦ç¬¬ 3 ç‰ˆ (æœ¬ä¹¦ç½‘é¡µç‰ˆå…è´¹æä¾›ï¼Œç”µå­ç‰ˆä»¥ PDFã€EPub å’Œ Mobi æ ¼å¼æä¾›è´­ä¹°ï¼Œä»…å”® 9.9 ç¾Žå…ƒ) Rails å®žè·µ Rails 5 å¼€å‘è¿›é˜¶(Beta) Rails 102 ç¼–å†™Rubyçš„Cæ‹“å±• Ruby æºç è§£è¯» Rubyä¸­çš„å…ƒç¼–ç¨‹ Rust rust book ä¸­æ–‡ç¿»è¯‘ rust primer Scala Scalaè¯¾å ‚ (Twitterçš„Scalaä¸­æ–‡æ•™ç¨‹) Effective Scala(Twitterçš„Scalaæœ€ä½³å®žè·µçš„ä¸­æ–‡ç¿»è¯‘) ScalaæŒ‡å— Shell Shellè„šæœ¬ç¼–ç¨‹30åˆ†é’Ÿå…¥é—¨ Bashè„šæœ¬15åˆ†é’Ÿè¿›é˜¶æ•™ç¨‹ Linuxå·¥å…·å¿«é€Ÿæ•™ç¨‹ shellåä¸‰é—® Shellç¼–ç¨‹èŒƒä¾‹ Swift The Swift Programming Language ä¸­æ–‡ç‰ˆ Swift è¯­è¨€æŒ‡å— Stanford å…¬å¼€è¯¾ï¼ŒDeveloping iOS 8 Apps with Swift å­—å¹•ç¿»è¯‘æ–‡ä»¶ C4iOS - COSMOS è¯»ä¹¦ç¬”è®°åŠå…¶å®ƒ ç¼–è¯‘åŽŸç†ï¼ˆç´«é¾™ä¹¦ï¼‰ä¸­æ–‡ç¬¬2ç‰ˆä¹ é¢˜ç­”æ¡ˆ æŠŠã€Šç¼–ç¨‹ç çŽ‘ã€‹è¯»è–„ Effective C++è¯»ä¹¦ç¬”è®° Golang å­¦ä¹ ç¬”è®°ã€Python å­¦ä¹ ç¬”è®°ã€C å­¦ä¹ ç¬”è®° (PDF) Jsoup å­¦ä¹ ç¬”è®° å­¦ä¹ ç¬”è®°: Vimã€Pythonã€memcached å›¾çµå¼€æ”¾ä¹¦ç¿»è¯‘è®¡åˆ’â€“C++ã€Pythonã€Javaç­‰ è’‚å§†Â·å¥¥èŽ±åˆ©éšç¬” ï¼ˆç”±è¯‘è¨€ç½‘ç¿»è¯‘ï¼Œç”µå­ç‰ˆå…è´¹ï¼‰ SICP è§£é¢˜é›† ç²¾å½©åšå®¢é›†åˆ ä¸­æ–‡æ–‡æ¡ˆæŽ’ç‰ˆæŒ‡åŒ— Standard C è¯­è¨€æ ‡å‡†å‡½æ•°åº“é€ŸæŸ¥ (Cheat Sheet) Git Cheatsheet Chs GitBookç®€æ˜Žæ•™ç¨‹ JavaScriptè¯­è¨€ç²¾ç²¹ åˆ¶é€ å¼€æºè½¯ä»¶ æé—®çš„æ™ºæ…§ Markdown å…¥é—¨å‚è€ƒ AsciiDocç®€æ˜ŽæŒ‡å— èƒŒåŒ…é—®é¢˜ä¹è®² è€é½çš„æŠ€æœ¯èµ„æ–™ å‰ç«¯æŠ€èƒ½æ±‡æ€» å€ŸåŠ©å¼€æºé¡¹ç›®ï¼Œå­¦ä¹ è½¯ä»¶å¼€å‘ å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜ leetcode/lintcodeé¢˜è§£/ç®—æ³•å­¦ä¹ ç¬”è®° å‰ç«¯å¼€å‘ç¬”è®°æœ¬ æµ‹è¯•ç›¸å…³]]></content>
      <categories>
        <category>å­¦ä¹ èµ„æº</category>
      </categories>
      <tags>
        <tag>tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨hexo+nextæ‰“é€ è‡ªå·±çš„åšå®¢ç«™ç‚¹]]></title>
    <url>%2F2018%2F06%2F10%2F%E4%BD%BF%E7%94%A8hexo%2Bnext%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9%2F</url>
    <content type="text"><![CDATA[ç”¨hexo+nextæ­å»ºè‡ªå·±çš„åšå®¢ç«™ç‚¹ç®€ä¹¦åœ°å€ èµ·å› è¿™æ®µæ—¶é—´å·¥ä½œå¾ˆå¿™ï¼Œ2018å¹´ï¼Œä»Žè¿‡äº†å¹´ä»¥åŽå°±ä¸€ç›´å¾ˆå¿™ï¼Œå°¤å…¶æ˜¯3æœˆ15å·å¼€å§‹åˆ°æµ·å°”é©»åœºä»¥åŽï¼Œå¹²çš„å·¥ä½œè¶Šæ¥è¶Šæ‚ï¼Œä¸€å¼€å§‹å‰é¢è¿˜æœ‰ä¸ªå•†åŠ¡ï¼Œé¡¹ç›®ä¸Šæœ‰ä¸ªäº§å“ç»ç†ï¼Œ3æœˆåº•å•†åŠ¡è¾žèŒäº†ï¼Œå†åŽæ¥äº§å“ç»ç†ä¹Ÿè°ƒèµ°äº†ï¼Œé¡¹ç›®ä¸Šä¹Ÿæ²¡æœ‰æµ‹è¯•äººå‘˜ï¼Œæ‰€ä»¥æˆ‘å°±å˜æˆäº†ä¸€èº«å¤šèŒçš„è§’è‰²ã€‚ å› ä¸ºæ€»æ˜¯æ¯”è¾ƒå¿™ï¼Œè€Œä¸”æ— è®ºå¦‚ä½•ä¹Ÿè¿˜æ˜¯ä¸€æžšç¨‹åºçŒ¿ï¼Œè¿˜æ˜¯ç å†œï¼Œä½†æ˜¯æˆ‘è§‰å¾—è‡ªå·±çš„å·¥ä½œå†…å®¹ç¦»æŠ€æœ¯è·¯è¿œæœ‰ç‚¹è¶Šèµ°è¶Šè¿œï¼Œæ‰€ä»¥æˆ‘èµ·äº†åœ¨è¿˜æ²¡æœ‰è’åºŸæŠ€æœ¯ä¹‹å‰ï¼Œå°†å·²æœ‰çš„çŸ¥è¯†æ€»ç»“æ€»ç»“ï¼Œå½’çº³å½’çº³ï¼Œæ­å»ºä¸€å¥—å±žäºŽè‡ªå·±çš„åšå®¢ç«™ç‚¹ã€‚ æœ€åŽçš„æ•ˆæžœæš‚æ—¶æ˜¯è¿™æ ·çš„ é€‰åž‹1ï¼‰java+tomcatåšå®¢è¿‡å¹´å‰åŽå› ä¸ºåœ¨å­¦ä¹ spring cloudï¼ŒdockeræŠ€æœ¯ï¼Œä¹Ÿæ˜¯å‡ºäºŽæƒ³æŠŠè‡ªå·±å­¦åˆ°çš„ä¸œè¥¿ç§¯æ”’èµ·æ¥ï¼Œè€Œä¸”è‡ªå·±æœ¬èº«å°±æ˜¯javaå¥´ï¼Œæ‰€ä»¥é€‰æ‹©äº† Docker+SpringBoot+Mybatis+thymeleaf ç»“æž„çš„åšå®¢ï¼Œä¸»è¦æ˜¯é‚£ä¼šå„¿çœ‹ç€è¿™ä¸ªåšå®¢ç¡®å®žä¹Ÿè¿˜æŒºæ¼‚äº®çš„ã€‚æœ‰ä¸ªæˆåž‹çš„ åšå®¢ ç³»ç»Ÿï¼Œå¯ä»¥çœ‹å‡ºæ¥æ ·å­ç¡®å®žè¿˜ä¸é”™ï¼Œç®¡ç†åŽå°ä¹Ÿæœ‰äº†ï¼Œä¹Ÿé›†æˆäº†å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆä¸»è¦æ˜¯å°ç™½æˆ‘ä¸ä¼šmarkdownè¯­æ³•ï¼Œä¹Ÿä¸æ•¢åŽ»å­¦ï¼‰æ‰€ä»¥è§‰å¾—å¾ˆåˆ°ä½äº†ã€‚äºŽæ˜¯è‡ªå·±cloneä¸‹æ¥ï¼Œå…ˆç”¨tomcatåšæœåŠ¡å™¨é…ç½®èµ·æ¥ï¼Œå‰åŽç«¯runèµ·æ¥ä»¥åŽå†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œå‘çŽ°å‡ ä¸ªä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼š ä¸€å…±æœ‰20å¼ å®šæ­»çš„é¦–é¡µå±•ç¤ºå›¾ï¼Œå¹¶ä¸æ˜¯éšæœºçš„ï¼Œè€Œä¸”èŽ·å–è¿™äº›å›¾çš„åœ°æ–¹ï¼Œéšæœºæ•°æ€»æ•°ä¹Ÿæ˜¯å†™æ­»äº†ï¼Œä¸Žæˆ‘ä»¥ä¸ºæ¯æ¬¡éƒ½ä»ŽæŸä¸€å›¾åº“éšæœºèŽ·å–æœ‰ç‚¹å·®å¼‚ã€‚ ç®¡ç†åŽå°ä¸Šä¼ å›¾ç‰‡ä¸å¤ªæ–¹ä¾¿ï¼Œtomcaté‡å¯åŽå›¾ç‰‡å°±æ²¡æœ‰äº†ï¼Œå› æ­¤æˆ‘æ˜¯åŠ¨ç”¨éƒ½ä¸ƒç‰›çš„å›¾ç‰‡æœåŠ¡å™¨ï¼Œæ‹¿åˆ°é“¾æŽ¥åŽåœ¨ä»£ç é‡Œé¢ç›´æŽ¥ä½¿ç”¨ï¼Œè·Ÿé¢„æƒ³æœ‰å‡ºå…¥ã€‚ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„æŽ’ç­ä¸ç†æƒ³ã€‚è·Ÿå‘å¸ƒä»¥åŽç”Ÿæˆçš„æ•ˆæžœæœ‰å·®å¼‚ã€‚ é¦–é¡µåŠŸèƒ½æœ‰ç‚¹å°‘ï¼Œè‡ªå·±å®šåˆ¶çš„è¯æˆæœ¬æœ‰ç‚¹å¤§ï¼Œä¹Ÿä¸åˆ’ç®—ï¼Œåˆ†äº«ã€è¯„è®ºç­‰åŠŸèƒ½ç¼ºå¤±ã€‚ å‘å¸ƒæœ‰ç‚¹éº»çƒ¦ï¼Œè¿˜è¦ä»Žæ–°å¯åŠ¨æœåŠ¡å™¨ã€‚ 2ï¼‰wordpressåšå®¢WordPressæ˜¯ä½¿ç”¨PHPè¯­è¨€å¼€å‘çš„åšå®¢å¹³å°ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ”¯æŒPHPå’ŒMySQLæ•°æ®åº“çš„æœåŠ¡å™¨ä¸Šæž¶è®¾å±žäºŽè‡ªå·±çš„ç½‘ç«™ã€‚ä¹Ÿå¯ä»¥æŠŠ WordPresså½“ä½œä¸€ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰æ¥ä½¿ç”¨ã€‚ WordPressæ˜¯ä¸€æ¬¾ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œå¹¶é€æ­¥æ¼”åŒ–æˆä¸€æ¬¾å†…å®¹ç®¡ç†ç³»ç»Ÿè½¯ä»¶ï¼Œå®ƒæ˜¯ä½¿ç”¨PHPè¯­è¨€å’ŒMySQLæ•°æ®åº“å¼€å‘çš„ã€‚ç”¨æˆ·å¯ä»¥åœ¨æ”¯æŒ PHP å’Œ MySQLæ•°æ®åº“çš„æœåŠ¡å™¨ä¸Šä½¿ç”¨è‡ªå·±çš„åšå®¢ã€‚ WordPressæœ‰è®¸å¤šç¬¬ä¸‰æ–¹å¼€å‘çš„å…è´¹æ¨¡æ¿ï¼Œå®‰è£…æ–¹å¼ç®€å•æ˜“ç”¨ã€‚ä¸è¿‡è¦åšä¸€ä¸ªè‡ªå·±çš„æ¨¡æ¿ï¼Œåˆ™éœ€è¦ä½ æœ‰ä¸€å®šçš„ä¸“ä¸šçŸ¥è¯†ã€‚æ¯”å¦‚ä½ è‡³å°‘è¦æ‡‚çš„æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨HTMLä»£ç ã€CSSã€PHPç­‰ç›¸å…³çŸ¥è¯†ã€‚ WordPresså®˜æ–¹æ”¯æŒä¸­æ–‡ç‰ˆï¼ŒåŒæ—¶æœ‰çˆ±å¥½è€…å¼€å‘çš„ç¬¬ä¸‰æ–¹ä¸­æ–‡è¯­è¨€åŒ…ï¼Œå¦‚wopusä¸­æ–‡è¯­è¨€åŒ…ã€‚WordPressæ‹¥æœ‰æˆåƒä¸Šä¸‡ä¸ªå„å¼æ’ä»¶å’Œä¸è®¡å…¶æ•°çš„ä¸»é¢˜æ¨¡æ¿æ ·å¼ã€‚ èº«è¾¹å°±æœ‰ä¸¤ä½åŒäº‹åœ¨ä½¿ç”¨ç€åŸºäºŽphpçŽ¯å¢ƒçš„WordPressçš„åšå®¢ï¼Œæˆ‘ä¹ŸæŸ¥è¿‡ï¼Œè¿™æ¬¾åšå®¢çš„å¥½è¯„çŽ‡ç¡®å®žä¹Ÿå¯ä»¥ï¼Œåº”ç”¨ä¹Ÿæ˜¯ç›¸å½“çš„å¹¿æ³›ï¼Œç”šè‡³è¿˜è¡ç”Ÿå‡ºäº†Jpressè¿™æ ·çš„äº§å“ï¼Œå·ç§°æ˜¯wordpressçš„javaç‰ˆï¼Œè¿™ç¯‡æ–‡ç« é‡Œçš„ä»‹ç»è‡³å°‘çœ‹èµ·æ¥æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œä¸è¿‡æˆ‘æ²¡æœ‰äº²è¯•ï¼Œå€’æ˜¯èº«è¾¹å°±æœ‰ä¸¤ä¸ªåŒäº‹ç”¨çš„wordpressçš„åšå®¢ã€‚ä¸€ä¸ªæ˜¯Dirkçš„åšå®¢ ï¼š å¥‹åŠ›å¥”è·‘çš„èœ—ç‰›ä¸€ä¸ªå£®å£®çš„åšå®¢ ï¼šStrongFishã€‚ 3ï¼‰hexo+next è¶…çº§ç«çš„é™æ€åšå®¢åŸºäºŽdockerçš„åšå®¢è™½ç„¶æ­èµ·æ¥äº†ï¼Œä¹Ÿå†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œä½†æ˜¯è¿™å°åŠå¹´æ—¶é—´æ²¡æœ‰å†æ›´æ–°äº†ã€‚æœ€è¿‘åœ¨æŽ˜é‡‘ä¸Šçœ‹åˆ°äº†ä¸å°‘å…³äºŽåšå®¢çš„å¥½æ–‡ï¼Œæçš„æ¯”è¾ƒå¤šçš„æ˜¯hexoï¼Œå› ä¸ºçŽ°åœ¨éƒ½æµè¡Œé™æ€ç½‘é¡µï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—åŠ¨æ‰‹é‡æ–°DIYä¸€ä¸ªè‡ªå·±çš„ç«™ç‚¹ã€‚è¦èµ°é«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡ï¼Œç‚«é…·ç‹‚æ‹½å¼ç‚¸å¤©çš„è·¯çº¿äº† æ­å»ºè‡ªå·±çš„å°ç©ºé—´ç½‘ä¸Šæ­å»ºç³»ç»Ÿçš„æ–‡ç« å†™çš„å¾ˆå¥½çš„å¤ªå¤šäº†ï¼Œå†è¯´ä¹Ÿå°±é‚£ä¹ˆç‚¹äº‹ï¼Œæ‰€ä»¥ä¸å†æµªè´¹æ—¶é—´ï¼Œç®€å•è®°å½•ä¸‹é‡è¦è¿‡ç¨‹å§ã€‚ 2018-06-05 ï¼šclone hexoå’Œnextçš„é¡¹ç›® ä¿®æ”¹ç«™ç‚¹åç§°ï¼Œä½¿ç”¨gitbubä½œä¸ºé¡¹ç›®çš„æœ€ç»ˆéƒ¨ç½²åœ°ï¼Œä½¿ç”¨hexo då‘½ä»¤ï¼Œå°†åŽŸå§‹ä»£ç éƒ¨ç½²ä¸ŠåŽ»ï¼Œå‘çŽ°https://qdhaiqiang.github.ioå¯ä»¥è®¿é—®,ç¬¬ä¸€æ­¥å®Œæˆã€‚ 2018-06-06 ï¼šå°†åŽŸæ¥çš„qdhaiqiqiang.github.ioé¡¹ç›®æ‹‰å‡ºæ¥åˆ é™¤éƒ¨ç½²æ–‡ä»¶ï¼Œé‡æ–°å»ºä¸€ä¸ªé¡¹ç›®å«blogï¼Œblogæ˜¯é¡¹ç›®åŽŸæ–‡ä»¶ï¼Œè€Œgithub.ioæ˜¯éƒ¨ç½²åŽçš„æ–‡ä»¶ï¼Œä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ä¸€ä¸ªï¼ŒåŽæ¥æ‰æ˜Žç™½åŽŸæ¥å¯ä»¥ä¸æ˜¯åŒä¸€ä¸ªé¡¹ç›®ã€‚ 2018-06-07 ï¼šä¿®æ”¹hexoçš„ä¸»é¢˜æ–‡ä»¶ï¼Œä¸»è¦ä¿®æ”¹é¡¹å‚è€ƒåšæ–‡hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–æ•™ç¨‹:æ‰“é€ ç‚«é…·ç½‘ç«™ä¸€æ–‡ï¼Œæ„Ÿè°¢ä½œè€…çš„æ€»ç»“ã€‚ 2018-06-08 ï¼šä¿®æ”¹æ–°å»ºæ–‡ç« æ¨¡æ¿ï¼Œåˆ›å»ºæ—¶åŒæ—¶åˆ›å»ºå›¾åº“ï¼›æ·»åŠ éŸ³ä¹æ’­æ”¾å¤–é“¾ï¼›ä¿®æ”¹ã€é˜…è¯»å…¨æ–‡ã€‘çš„æ ·å¼ï¼›æ·»åŠ æ¥å¿…åŠ›è¯„è®ºç³»ç»Ÿï¼›æ·»åŠ ç™¾åº¦SEOæ”¶å½•ï¼Œè°·æ­ŒSEOæ”¶å½•ã€‚ 2018-06-09 ï¼šæ·»åŠ jiathisåˆ†äº«ï¼›æ·»åŠ ç«™å†…æœç´¢ï¼›ä¿®æ”¹å¤´åƒï¼›å¼•å…¥daovioceåœ¨çº¿äº¤æµï¼Œå¹¶ç»‘å®šå¾®ä¿¡æŽ¥æ”¶æ¶ˆæ¯ï¼›æ·»åŠ ä¾§æ éŸ³ä¹ï¼›å…³é—­canvasçº¿æ¡ï¼Œå…³é—­æ‰“èµ(è¿˜æ˜¯è„¸çš®é¥±ï¼Œä¸å¥½æ„æ€è¦); è‡³æ­¤ï¼Œæœ¬ç«™ç‚¹åŸºæœ¬å¯ä»¥ã€‚æ¢é—ç•™å‡ ä¸ªæƒ³æžä½†æ²¡æœ‰æžèµ·æ¥çš„ä¸œè¥¿ åšå®¢ä¸Šè¿˜æ²¡æœ‰èŒèŒçš„å® ç‰©ï¼Œè¿˜æƒ³å…»åªçŒ«ï¼› æ–‡ç« åŠ å¯†è¿˜æ²¡æœ‰åšï¼Œæœ‰éœ€è¦çš„æ—¶å€™å†è€ƒè™‘ï¼› ç™¾åº¦æ”¶å½•æ²¡æœ‰æˆåŠŸï¼ŒhttpséªŒè¯æ²¡æœ‰é€šè¿‡ï¼Œå¾ˆé—æ†¾ï¼Œç»§ç»­åŠ æ²¹ï¼› åŠ¨æ€èƒŒæ™¯ï¼› é¸£è°¢&amp;æŽ¨èè¿™é‡Œè¦å…¬å¸ƒå‡ ä¸ªæŸ¥èµ„æ–™æ—¶æŸ¥åˆ°çš„ç”¨hexoå®žçŽ°çš„å¥½çš„åšå®¢ï¼Œå½“ç„¶ï¼Œéƒ½æ˜¯nextä¸»é¢˜çš„ã€‚å¦å¤–å°±æ˜¯é’ˆå¯¹hexo+nextçš„å®žçŽ°çš„ä¸€äº›å¥½çš„åšæ–‡ï¼Œåœ¨æ­¤å…è´¹åšä¸ªæŽ¨å¹¿ï¼Œåšä¸»å°±ä¸ç”¨è°¢äº†å“ˆã€‚ å¥½çš„hexoç«™ç‚¹darryrzhongMoorezWenBoä¸¨æ˜Ÿç©ºç¬æ—¶é—´çš„æœ‹å‹ å¾ˆå·§å¦™çš„æ˜¯ï¼Œåœ¨è¿™æ¬¡æ­å»ºè¿‡ç¨‹ä¸­å‘çŽ°çš„è¿™å‡ ä¸ªåšå®¢åšä¸»çœ‹èµ·æ¥éƒ½æ˜¯å‰ç«¯å·¥ç¨‹ï¼Œè€Œç”¨wordpressæ­å»ºçš„å¤šæ˜¯åŽç«¯å·¥ç¨‹å¸ˆï¼Œä¸çŸ¥é“è¿™ä¸ªç ”ç©¶ç»“æžœå€¼å¤šå°‘é’±ï¼Œå“ˆå“ˆå“ˆã€‚ å¥½çš„åšæ–‡æµ…æž Hexo æ­å»ºåšå®¢çš„åŽŸç†Hexo-NexTä¸»é¢˜æ­å»ºä¸ªäººåšå®¢ç½‘æ˜“äº‘è·Ÿå¸–å…³é—­æœåŠ¡åŽè½¬ç§»åˆ°æ¥å¿…åŠ›hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–é…ç½®æ•™ç¨‹è¸¢çƒåŠ¨ç”»æ’ä»¶ ç‰¹åˆ«æŽ¨èdarryrzhongçš„æ–‡ç« æ˜¯ä»ŽåŸºç¡€ç¯‡ -&gt; è¿›é˜¶ç¯‡ -&gt; é«˜çº§ç¯‡ -&gt; ç™¾åº¦æ”¶å½• -&gt; è°·æ­Œæ”¶å½•ä¸€è·¯èµ°è¿‡æ¥çš„ï¼Œé…ç½®æˆªå›¾ç­‰éƒ½éžå¸¸è¯¦ç»†ï¼Œéžå¸¸çš„æ•™ç¨‹ï¼Œæ„Ÿè°¢åšä¸»çš„åŠªåŠ›ï¼ŒçœŸæƒ³ç»™æ‰’è¿‡æ¥ï¼Œå‘µå‘µå‘µã€‚ åšå®¢æ­å»ºæš‚æ—¶å‘Šä¸€æ®µæ®µè½ï¼Œå¥½å¥½ä¸°å¯Œå†…å®¹å§ï¼ŒåŠ æ²¹ï¼]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F06%2F05%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Hello Hexo Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment æµ‹è¯•è¿œç¨‹å›¾ç‰‡ï¼šæµ‹è¯•æœ¬åœ°å›¾ç‰‡ï¼š æ·»åŠ éŸ³ä¹åŽ»å¾€ç½‘æ˜“äº‘éŸ³ä¹æœç´¢å–œæ¬¢çš„éŸ³ä¹ï¼Œç‚¹å‡»ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨ï¼Œå¤åˆ¶ä»£ç ç›´æŽ¥æ”¾åˆ°åšæ–‡æœ«å°¾å³å¯ï¼Œheightè®¾ä¸º0å¯éšè—æ’­æ”¾å™¨ï¼Œä½†ä»ç„¶å¯ä»¥æ’­æ”¾éŸ³ä¹ï¼Œautoè®¾æˆ0å¯æ‰‹åŠ¨æ’­æ”¾ï¼Œé»˜è®¤æ˜¯1è‡ªåŠ¨æ’­æ”¾ï¼Œå¯æŠŠä»£ç æ”¾åˆ°themes/next/layout/_custom/sidebar.swigæ–‡ä»¶é‡Œï¼Œæ’­æ”¾å™¨ä¼šæ˜¾ç¤ºåœ¨ç«™ç‚¹é¢„è§ˆä¸­ã€‚å…¶ä¸­çš„width=298 height=52 å‡æ”¹ä¸º0å°±çœ‹ä¸åˆ°äº†ï¼Œä¾ç„¶å¯ä»¥æ’­æ”¾éŸ³ä¹ã€‚]]></content>
  </entry>
</search>
